/*! jQuery v1.7 jquery.com | jquery.org/license */
(function (a, b) { function cA(a) { return f.isWindow(a) ? a : a.nodeType === 9 ? a.defaultView || a.parentWindow : !1 } function cx(a) { if (!cm[a]) { var b = c.body, d = f("<" + a + ">").appendTo(b), e = d.css("display"); d.remove(); if (e === "none" || e === "") { cn || (cn = c.createElement("iframe"), cn.frameBorder = cn.width = cn.height = 0), b.appendChild(cn); if (!co || !cn.createElement) co = (cn.contentWindow || cn.contentDocument).document, co.write((c.compatMode === "CSS1Compat" ? "<!doctype html>" : "") + "<html><body>"), co.close(); d = co.createElement(a), co.body.appendChild(d), e = f.css(d, "display"), b.removeChild(cn) } cm[a] = e } return cm[a] } function cw(a, b) { var c = {}; f.each(cs.concat.apply([], cs.slice(0, b)), function () { c[this] = a }); return c } function cv() { ct = b } function cu() { setTimeout(cv, 0); return ct = f.now() } function cl() { try { return new a.ActiveXObject("Microsoft.XMLHTTP") } catch (b) { } } function ck() { try { return new a.XMLHttpRequest } catch (b) { } } function ce(a, c) { a.dataFilter && (c = a.dataFilter(c, a.dataType)); var d = a.dataTypes, e = {}, g, h, i = d.length, j, k = d[0], l, m, n, o, p; for (g = 1; g < i; g++) { if (g === 1) for (h in a.converters) typeof h == "string" && (e[h.toLowerCase()] = a.converters[h]); l = k, k = d[g]; if (k === "*") k = l; else if (l !== "*" && l !== k) { m = l + " " + k, n = e[m] || e["* " + k]; if (!n) { p = b; for (o in e) { j = o.split(" "); if (j[0] === l || j[0] === "*") { p = e[j[1] + " " + k]; if (p) { o = e[o], o === !0 ? n = p : p === !0 && (n = o); break } } } } !n && !p && f.error("No conversion from " + m.replace(" ", " to ")), n !== !0 && (c = n ? n(c) : p(o(c))) } } return c } function cd(a, c, d) { var e = a.contents, f = a.dataTypes, g = a.responseFields, h, i, j, k; for (i in g) i in d && (c[g[i]] = d[i]); while (f[0] === "*") f.shift(), h === b && (h = a.mimeType || c.getResponseHeader("content-type")); if (h) for (i in e) if (e[i] && e[i].test(h)) { f.unshift(i); break } if (f[0] in d) j = f[0]; else { for (i in d) { if (!f[0] || a.converters[i + " " + f[0]]) { j = i; break } k || (k = i) } j = j || k } if (j) { j !== f[0] && f.unshift(j); return d[j] } } function cc(a, b, c, d) { if (f.isArray(b)) f.each(b, function (b, e) { c || bG.test(a) ? d(a, e) : cc(a + "[" + (typeof e == "object" || f.isArray(e) ? b : "") + "]", e, c, d) }); else if (!c && b != null && typeof b == "object") for (var e in b) cc(a + "[" + e + "]", b[e], c, d); else d(a, b) } function cb(a, c) { var d, e, g = f.ajaxSettings.flatOptions || {}; for (d in c) c[d] !== b && ((g[d] ? a : e || (e = {}))[d] = c[d]); e && f.extend(!0, a, e) } function ca(a, c, d, e, f, g) { f = f || c.dataTypes[0], g = g || {}, g[f] = !0; var h = a[f], i = 0, j = h ? h.length : 0, k = a === bV, l; for (; i < j && (k || !l) ; i++) l = h[i](c, d, e), typeof l == "string" && (!k || g[l] ? l = b : (c.dataTypes.unshift(l), l = ca(a, c, d, e, l, g))); (k || !l) && !g["*"] && (l = ca(a, c, d, e, "*", g)); return l } function b_(a) { return function (b, c) { typeof b != "string" && (c = b, b = "*"); if (f.isFunction(c)) { var d = b.toLowerCase().split(bR), e = 0, g = d.length, h, i, j; for (; e < g; e++) h = d[e], j = /^\+/.test(h), j && (h = h.substr(1) || "*"), i = a[h] = a[h] || [], i[j ? "unshift" : "push"](c) } } } function bE(a, b, c) { var d = b === "width" ? a.offsetWidth : a.offsetHeight, e = b === "width" ? bz : bA; if (d > 0) { c !== "border" && f.each(e, function () { c || (d -= parseFloat(f.css(a, "padding" + this)) || 0), c === "margin" ? d += parseFloat(f.css(a, c + this)) || 0 : d -= parseFloat(f.css(a, "border" + this + "Width")) || 0 }); return d + "px" } d = bB(a, b, b); if (d < 0 || d == null) d = a.style[b] || 0; d = parseFloat(d) || 0, c && f.each(e, function () { d += parseFloat(f.css(a, "padding" + this)) || 0, c !== "padding" && (d += parseFloat(f.css(a, "border" + this + "Width")) || 0), c === "margin" && (d += parseFloat(f.css(a, c + this)) || 0) }); return d + "px" } function br(a, b) { b.src ? f.ajax({ url: b.src, async: !1, dataType: "script" }) : f.globalEval((b.text || b.textContent || b.innerHTML || "").replace(bi, "/*$0*/")), b.parentNode && b.parentNode.removeChild(b) } function bq(a) { var b = (a.nodeName || "").toLowerCase(); b === "input" ? bp(a) : b !== "script" && typeof a.getElementsByTagName != "undefined" && f.grep(a.getElementsByTagName("input"), bp) } function bp(a) { if (a.type === "checkbox" || a.type === "radio") a.defaultChecked = a.checked } function bo(a) { return typeof a.getElementsByTagName != "undefined" ? a.getElementsByTagName("*") : typeof a.querySelectorAll != "undefined" ? a.querySelectorAll("*") : [] } function bn(a, b) { var c; if (b.nodeType === 1) { b.clearAttributes && b.clearAttributes(), b.mergeAttributes && b.mergeAttributes(a), c = b.nodeName.toLowerCase(); if (c === "object") b.outerHTML = a.outerHTML; else if (c !== "input" || a.type !== "checkbox" && a.type !== "radio") { if (c === "option") b.selected = a.defaultSelected; else if (c === "input" || c === "textarea") b.defaultValue = a.defaultValue } else a.checked && (b.defaultChecked = b.checked = a.checked), b.value !== a.value && (b.value = a.value); b.removeAttribute(f.expando) } } function bm(a, b) { if (b.nodeType === 1 && !!f.hasData(a)) { var c, d, e, g = f._data(a), h = f._data(b, g), i = g.events; if (i) { delete h.handle, h.events = {}; for (c in i) for (d = 0, e = i[c].length; d < e; d++) f.event.add(b, c + (i[c][d].namespace ? "." : "") + i[c][d].namespace, i[c][d], i[c][d].data) } h.data && (h.data = f.extend({}, h.data)) } } function bl(a, b) { return f.nodeName(a, "table") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a } function X(a) { var b = Y.split(" "), c = a.createDocumentFragment(); if (c.createElement) while (b.length) c.createElement(b.pop()); return c } function W(a, b, c) { b = b || 0; if (f.isFunction(b)) return f.grep(a, function (a, d) { var e = !!b.call(a, d, a); return e === c }); if (b.nodeType) return f.grep(a, function (a, d) { return a === b === c }); if (typeof b == "string") { var d = f.grep(a, function (a) { return a.nodeType === 1 }); if (R.test(b)) return f.filter(b, d, !c); b = f.filter(b, d) } return f.grep(a, function (a, d) { return f.inArray(a, b) >= 0 === c }) } function V(a) { return !a || !a.parentNode || a.parentNode.nodeType === 11 } function N() { return !0 } function M() { return !1 } function n(a, b, c) { var d = b + "defer", e = b + "queue", g = b + "mark", h = f._data(a, d); h && (c === "queue" || !f._data(a, e)) && (c === "mark" || !f._data(a, g)) && setTimeout(function () { !f._data(a, e) && !f._data(a, g) && (f.removeData(a, d, !0), h.fire()) }, 0) } function m(a) { for (var b in a) { if (b === "data" && f.isEmptyObject(a[b])) continue; if (b !== "toJSON") return !1 } return !0 } function l(a, c, d) { if (d === b && a.nodeType === 1) { var e = "data-" + c.replace(k, "-$1").toLowerCase(); d = a.getAttribute(e); if (typeof d == "string") { try { d = d === "true" ? !0 : d === "false" ? !1 : d === "null" ? null : f.isNumeric(d) ? parseFloat(d) : j.test(d) ? f.parseJSON(d) : d } catch (g) { } f.data(a, c, d) } else d = b } return d } function h(a) { var b = g[a] = {}, c, d; a = a.split(/\s+/); for (c = 0, d = a.length; c < d; c++) b[a[c]] = !0; return b } var c = a.document, d = a.navigator, e = a.location, f = function () { function K() { if (!e.isReady) { try { c.documentElement.doScroll("left") } catch (a) { setTimeout(K, 1); return } e.ready() } } var e = function (a, b) { return new e.fn.init(a, b, h) }, f = a.jQuery, g = a.$, h, i = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/, j = /\S/, k = /^\s+/, l = /\s+$/, m = /\d/, n = /^<(\w+)\s*\/?>(?:<\/\1>)?$/, o = /^[\],:{}\s]*$/, p = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, q = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, r = /(?:^|:|,)(?:\s*\[)+/g, s = /(webkit)[ \/]([\w.]+)/, t = /(opera)(?:.*version)?[ \/]([\w.]+)/, u = /(msie) ([\w.]+)/, v = /(mozilla)(?:.*? rv:([\w.]+))?/, w = /-([a-z]|[0-9])/ig, x = /^-ms-/, y = function (a, b) { return (b + "").toUpperCase() }, z = d.userAgent, A, B, C, D = Object.prototype.toString, E = Object.prototype.hasOwnProperty, F = Array.prototype.push, G = Array.prototype.slice, H = String.prototype.trim, I = Array.prototype.indexOf, J = {}; e.fn = e.prototype = { constructor: e, init: function (a, d, f) { var g, h, j, k; if (!a) return this; if (a.nodeType) { this.context = this[0] = a, this.length = 1; return this } if (a === "body" && !d && c.body) { this.context = c, this[0] = c.body, this.selector = a, this.length = 1; return this } if (typeof a == "string") { a.charAt(0) !== "<" || a.charAt(a.length - 1) !== ">" || a.length < 3 ? g = i.exec(a) : g = [null, a, null]; if (g && (g[1] || !d)) { if (g[1]) { d = d instanceof e ? d[0] : d, k = d ? d.ownerDocument || d : c, j = n.exec(a), j ? e.isPlainObject(d) ? (a = [c.createElement(j[1])], e.fn.attr.call(a, d, !0)) : a = [k.createElement(j[1])] : (j = e.buildFragment([g[1]], [k]), a = (j.cacheable ? e.clone(j.fragment) : j.fragment).childNodes); return e.merge(this, a) } h = c.getElementById(g[2]); if (h && h.parentNode) { if (h.id !== g[2]) return f.find(a); this.length = 1, this[0] = h } this.context = c, this.selector = a; return this } return !d || d.jquery ? (d || f).find(a) : this.constructor(d).find(a) } if (e.isFunction(a)) return f.ready(a); a.selector !== b && (this.selector = a.selector, this.context = a.context); return e.makeArray(a, this) }, selector: "", jquery: "1.7", length: 0, size: function () { return this.length }, toArray: function () { return G.call(this, 0) }, get: function (a) { return a == null ? this.toArray() : a < 0 ? this[this.length + a] : this[a] }, pushStack: function (a, b, c) { var d = this.constructor(); e.isArray(a) ? F.apply(d, a) : e.merge(d, a), d.prevObject = this, d.context = this.context, b === "find" ? d.selector = this.selector + (this.selector ? " " : "") + c : b && (d.selector = this.selector + "." + b + "(" + c + ")"); return d }, each: function (a, b) { return e.each(this, a, b) }, ready: function (a) { e.bindReady(), B.add(a); return this }, eq: function (a) { return a === -1 ? this.slice(a) : this.slice(a, +a + 1) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, slice: function () { return this.pushStack(G.apply(this, arguments), "slice", G.call(arguments).join(",")) }, map: function (a) { return this.pushStack(e.map(this, function (b, c) { return a.call(b, c, b) })) }, end: function () { return this.prevObject || this.constructor(null) }, push: F, sort: [].sort, splice: [].splice }, e.fn.init.prototype = e.fn, e.extend = e.fn.extend = function () { var a, c, d, f, g, h, i = arguments[0] || {}, j = 1, k = arguments.length, l = !1; typeof i == "boolean" && (l = i, i = arguments[1] || {}, j = 2), typeof i != "object" && !e.isFunction(i) && (i = {}), k === j && (i = this, --j); for (; j < k; j++) if ((a = arguments[j]) != null) for (c in a) { d = i[c], f = a[c]; if (i === f) continue; l && f && (e.isPlainObject(f) || (g = e.isArray(f))) ? (g ? (g = !1, h = d && e.isArray(d) ? d : []) : h = d && e.isPlainObject(d) ? d : {}, i[c] = e.extend(l, h, f)) : f !== b && (i[c] = f) } return i }, e.extend({ noConflict: function (b) { a.$ === e && (a.$ = g), b && a.jQuery === e && (a.jQuery = f); return e }, isReady: !1, readyWait: 1, holdReady: function (a) { a ? e.readyWait++ : e.ready(!0) }, ready: function (a) { if (a === !0 && !--e.readyWait || a !== !0 && !e.isReady) { if (!c.body) return setTimeout(e.ready, 1); e.isReady = !0; if (a !== !0 && --e.readyWait > 0) return; B.fireWith(c, [e]), e.fn.trigger && e(c).trigger("ready").unbind("ready") } }, bindReady: function () { if (!B) { B = e.Callbacks("once memory"); if (c.readyState === "complete") return setTimeout(e.ready, 1); if (c.addEventListener) c.addEventListener("DOMContentLoaded", C, !1), a.addEventListener("load", e.ready, !1); else if (c.attachEvent) { c.attachEvent("onreadystatechange", C), a.attachEvent("onload", e.ready); var b = !1; try { b = a.frameElement == null } catch (d) { } c.documentElement.doScroll && b && K() } } }, isFunction: function (a) { return e.type(a) === "function" }, isArray: Array.isArray || function (a) { return e.type(a) === "array" }, isWindow: function (a) { return a && typeof a == "object" && "setInterval" in a }, isNumeric: function (a) { return a != null && m.test(a) && !isNaN(a) }, type: function (a) { return a == null ? String(a) : J[D.call(a)] || "object" }, isPlainObject: function (a) { if (!a || e.type(a) !== "object" || a.nodeType || e.isWindow(a)) return !1; try { if (a.constructor && !E.call(a, "constructor") && !E.call(a.constructor.prototype, "isPrototypeOf")) return !1 } catch (c) { return !1 } var d; for (d in a); return d === b || E.call(a, d) }, isEmptyObject: function (a) { for (var b in a) return !1; return !0 }, error: function (a) { throw a }, parseJSON: function (b) { if (typeof b != "string" || !b) return null; b = e.trim(b); if (a.JSON && a.JSON.parse) return a.JSON.parse(b); if (o.test(b.replace(p, "@").replace(q, "]").replace(r, ""))) return (new Function("return " + b))(); e.error("Invalid JSON: " + b) }, parseXML: function (c) { var d, f; try { a.DOMParser ? (f = new DOMParser, d = f.parseFromString(c, "text/xml")) : (d = new ActiveXObject("Microsoft.XMLDOM"), d.async = "false", d.loadXML(c)) } catch (g) { d = b } (!d || !d.documentElement || d.getElementsByTagName("parsererror").length) && e.error("Invalid XML: " + c); return d }, noop: function () { }, globalEval: function (b) { b && j.test(b) && (a.execScript || function (b) { a.eval.call(a, b) })(b) }, camelCase: function (a) { return a.replace(x, "ms-").replace(w, y) }, nodeName: function (a, b) { return a.nodeName && a.nodeName.toUpperCase() === b.toUpperCase() }, each: function (a, c, d) { var f, g = 0, h = a.length, i = h === b || e.isFunction(a); if (d) { if (i) { for (f in a) if (c.apply(a[f], d) === !1) break } else for (; g < h;) if (c.apply(a[g++], d) === !1) break } else if (i) { for (f in a) if (c.call(a[f], f, a[f]) === !1) break } else for (; g < h;) if (c.call(a[g], g, a[g++]) === !1) break; return a }, trim: H ? function (a) { return a == null ? "" : H.call(a) } : function (a) { return a == null ? "" : (a + "").replace(k, "").replace(l, "") }, makeArray: function (a, b) { var c = b || []; if (a != null) { var d = e.type(a); a.length == null || d === "string" || d === "function" || d === "regexp" || e.isWindow(a) ? F.call(c, a) : e.merge(c, a) } return c }, inArray: function (a, b, c) { var d; if (b) { if (I) return I.call(b, a, c); d = b.length, c = c ? c < 0 ? Math.max(0, d + c) : c : 0; for (; c < d; c++) if (c in b && b[c] === a) return c } return -1 }, merge: function (a, c) { var d = a.length, e = 0; if (typeof c.length == "number") for (var f = c.length; e < f; e++) a[d++] = c[e]; else while (c[e] !== b) a[d++] = c[e++]; a.length = d; return a }, grep: function (a, b, c) { var d = [], e; c = !!c; for (var f = 0, g = a.length; f < g; f++) e = !!b(a[f], f), c !== e && d.push(a[f]); return d }, map: function (a, c, d) { var f, g, h = [], i = 0, j = a.length, k = a instanceof e || j !== b && typeof j == "number" && (j > 0 && a[0] && a[j - 1] || j === 0 || e.isArray(a)); if (k) for (; i < j; i++) f = c(a[i], i, d), f != null && (h[h.length] = f); else for (g in a) f = c(a[g], g, d), f != null && (h[h.length] = f); return h.concat.apply([], h) }, guid: 1, proxy: function (a, c) { if (typeof c == "string") { var d = a[c]; c = a, a = d } if (!e.isFunction(a)) return b; var f = G.call(arguments, 2), g = function () { return a.apply(c, f.concat(G.call(arguments))) }; g.guid = a.guid = a.guid || g.guid || e.guid++; return g }, access: function (a, c, d, f, g, h) { var i = a.length; if (typeof c == "object") { for (var j in c) e.access(a, j, c[j], f, g, d); return a } if (d !== b) { f = !h && f && e.isFunction(d); for (var k = 0; k < i; k++) g(a[k], c, f ? d.call(a[k], k, g(a[k], c)) : d, h); return a } return i ? g(a[0], c) : b }, now: function () { return (new Date).getTime() }, uaMatch: function (a) { a = a.toLowerCase(); var b = s.exec(a) || t.exec(a) || u.exec(a) || a.indexOf("compatible") < 0 && v.exec(a) || []; return { browser: b[1] || "", version: b[2] || "0" } }, sub: function () { function a(b, c) { return new a.fn.init(b, c) } e.extend(!0, a, this), a.superclass = this, a.fn = a.prototype = this(), a.fn.constructor = a, a.sub = this.sub, a.fn.init = function (d, f) { f && f instanceof e && !(f instanceof a) && (f = a(f)); return e.fn.init.call(this, d, f, b) }, a.fn.init.prototype = a.fn; var b = a(c); return a }, browser: {} }), e.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (a, b) { J["[object " + b + "]"] = b.toLowerCase() }), A = e.uaMatch(z), A.browser && (e.browser[A.browser] = !0, e.browser.version = A.version), e.browser.webkit && (e.browser.safari = !0), j.test("Â ") && (k = /^[\s\xA0]+/, l = /[\s\xA0]+$/), h = e(c), c.addEventListener ? C = function () { c.removeEventListener("DOMContentLoaded", C, !1), e.ready() } : c.attachEvent && (C = function () { c.readyState === "complete" && (c.detachEvent("onreadystatechange", C), e.ready()) }), typeof define == "function" && define.amd && define.amd.jQuery && define("jquery", [], function () { return e }); return e }(), g = {}; f.Callbacks = function (a) { a = a ? g[a] || h(a) : {}; var c = [], d = [], e, i, j, k, l, m = function (b) { var d, e, g, h, i; for (d = 0, e = b.length; d < e; d++) g = b[d], h = f.type(g), h === "array" ? m(g) : h === "function" && (!a.unique || !o.has(g)) && c.push(g) }, n = function (b, f) { f = f || [], e = !a.memory || [b, f], i = !0, l = j || 0, j = 0, k = c.length; for (; c && l < k; l++) if (c[l].apply(b, f) === !1 && a.stopOnFalse) { e = !0; break } i = !1, c && (a.once ? e === !0 ? o.disable() : c = [] : d && d.length && (e = d.shift(), o.fireWith(e[0], e[1]))) }, o = { add: function () { if (c) { var a = c.length; m(arguments), i ? k = c.length : e && e !== !0 && (j = a, n(e[0], e[1])) } return this }, remove: function () { if (c) { var b = arguments, d = 0, e = b.length; for (; d < e; d++) for (var f = 0; f < c.length; f++) if (b[d] === c[f]) { i && f <= k && (k--, f <= l && l--), c.splice(f--, 1); if (a.unique) break } } return this }, has: function (a) { if (c) { var b = 0, d = c.length; for (; b < d; b++) if (a === c[b]) return !0 } return !1 }, empty: function () { c = []; return this }, disable: function () { c = d = e = b; return this }, disabled: function () { return !c }, lock: function () { d = b, (!e || e === !0) && o.disable(); return this }, locked: function () { return !d }, fireWith: function (b, c) { d && (i ? a.once || d.push([b, c]) : (!a.once || !e) && n(b, c)); return this }, fire: function () { o.fireWith(this, arguments); return this }, fired: function () { return !!e } }; return o }; var i = [].slice; f.extend({ Deferred: function (a) { var b = f.Callbacks("once memory"), c = f.Callbacks("once memory"), d = f.Callbacks("memory"), e = "pending", g = { resolve: b, reject: c, notify: d }, h = { done: b.add, fail: c.add, progress: d.add, state: function () { return e }, isResolved: b.fired, isRejected: c.fired, then: function (a, b, c) { i.done(a).fail(b).progress(c); return this }, always: function () { return i.done.apply(i, arguments).fail.apply(i, arguments) }, pipe: function (a, b, c) { return f.Deferred(function (d) { f.each({ done: [a, "resolve"], fail: [b, "reject"], progress: [c, "notify"] }, function (a, b) { var c = b[0], e = b[1], g; f.isFunction(c) ? i[a](function () { g = c.apply(this, arguments), g && f.isFunction(g.promise) ? g.promise().then(d.resolve, d.reject, d.notify) : d[e + "With"](this === i ? d : this, [g]) }) : i[a](d[e]) }) }).promise() }, promise: function (a) { if (a == null) a = h; else for (var b in h) a[b] = h[b]; return a } }, i = h.promise({}), j; for (j in g) i[j] = g[j].fire, i[j + "With"] = g[j].fireWith; i.done(function () { e = "resolved" }, c.disable, d.lock).fail(function () { e = "rejected" }, b.disable, d.lock), a && a.call(i, i); return i }, when: function (a) { function m(a) { return function (b) { e[a] = arguments.length > 1 ? i.call(arguments, 0) : b, j.notifyWith(k, e) } } function l(a) { return function (c) { b[a] = arguments.length > 1 ? i.call(arguments, 0) : c, --g || j.resolveWith(j, b) } } var b = i.call(arguments, 0), c = 0, d = b.length, e = Array(d), g = d, h = d, j = d <= 1 && a && f.isFunction(a.promise) ? a : f.Deferred(), k = j.promise(); if (d > 1) { for (; c < d; c++) b[c] && b[c].promise && f.isFunction(b[c].promise) ? b[c].promise().then(l(c), j.reject, m(c)) : --g; g || j.resolveWith(j, b) } else j !== a && j.resolveWith(j, d ? [a] : []); return k } }), f.support = function () { var a = c.createElement("div"), b = c.documentElement, d, e, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u; a.setAttribute("className", "t"), a.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>", d = a.getElementsByTagName("*"), e = a.getElementsByTagName("a")[0]; if (!d || !d.length || !e) return {}; g = c.createElement("select"), h = g.appendChild(c.createElement("option")), i = a.getElementsByTagName("input")[0], k = { leadingWhitespace: a.firstChild.nodeType === 3, tbody: !a.getElementsByTagName("tbody").length, htmlSerialize: !!a.getElementsByTagName("link").length, style: /top/.test(e.getAttribute("style")), hrefNormalized: e.getAttribute("href") === "/a", opacity: /^0.55/.test(e.style.opacity), cssFloat: !!e.style.cssFloat, unknownElems: !!a.getElementsByTagName("nav").length, checkOn: i.value === "on", optSelected: h.selected, getSetAttribute: a.className !== "t", enctype: !!c.createElement("form").enctype, submitBubbles: !0, changeBubbles: !0, focusinBubbles: !1, deleteExpando: !0, noCloneEvent: !0, inlineBlockNeedsLayout: !1, shrinkWrapBlocks: !1, reliableMarginRight: !0 }, i.checked = !0, k.noCloneChecked = i.cloneNode(!0).checked, g.disabled = !0, k.optDisabled = !h.disabled; try { delete a.test } catch (v) { k.deleteExpando = !1 } !a.addEventListener && a.attachEvent && a.fireEvent && (a.attachEvent("onclick", function () { k.noCloneEvent = !1 }), a.cloneNode(!0).fireEvent("onclick")), i = c.createElement("input"), i.value = "t", i.setAttribute("type", "radio"), k.radioValue = i.value === "t", i.setAttribute("checked", "checked"), a.appendChild(i), l = c.createDocumentFragment(), l.appendChild(a.lastChild), k.checkClone = l.cloneNode(!0).cloneNode(!0).lastChild.checked, a.innerHTML = "", a.style.width = a.style.paddingLeft = "1px", m = c.getElementsByTagName("body")[0], o = c.createElement(m ? "div" : "body"), p = { visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none" }, m && f.extend(p, { position: "absolute", left: "-999px", top: "-999px" }); for (t in p) o.style[t] = p[t]; o.appendChild(a), n = m || b, n.insertBefore(o, n.firstChild), k.appendChecked = i.checked, k.boxModel = a.offsetWidth === 2, "zoom" in a.style && (a.style.display = "inline", a.style.zoom = 1, k.inlineBlockNeedsLayout = a.offsetWidth === 2, a.style.display = "", a.innerHTML = "<div style='width:4px;'></div>", k.shrinkWrapBlocks = a.offsetWidth !== 2), a.innerHTML = "<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>", q = a.getElementsByTagName("td"), u = q[0].offsetHeight === 0, q[0].style.display = "", q[1].style.display = "none", k.reliableHiddenOffsets = u && q[0].offsetHeight === 0, a.innerHTML = "", c.defaultView && c.defaultView.getComputedStyle && (j = c.createElement("div"), j.style.width = "0", j.style.marginRight = "0", a.appendChild(j), k.reliableMarginRight = (parseInt((c.defaultView.getComputedStyle(j, null) || { marginRight: 0 }).marginRight, 10) || 0) === 0); if (a.attachEvent) for (t in { submit: 1, change: 1, focusin: 1 }) s = "on" + t, u = s in a, u || (a.setAttribute(s, "return;"), u = typeof a[s] == "function"), k[t + "Bubbles"] = u; f(function () { var a, b, d, e, g, h, i = 1, j = "position:absolute;top:0;left:0;width:1px;height:1px;margin:0;", l = "visibility:hidden;border:0;", n = "style='" + j + "border:5px solid #000;padding:0;'", p = "<div " + n + "><div></div></div>" + "<table " + n + " cellpadding='0' cellspacing='0'>" + "<tr><td></td></tr></table>"; m = c.getElementsByTagName("body")[0]; !m || (a = c.createElement("div"), a.style.cssText = l + "width:0;height:0;position:static;top:0;margin-top:" + i + "px", m.insertBefore(a, m.firstChild), o = c.createElement("div"), o.style.cssText = j + l, o.innerHTML = p, a.appendChild(o), b = o.firstChild, d = b.firstChild, g = b.nextSibling.firstChild.firstChild, h = { doesNotAddBorder: d.offsetTop !== 5, doesAddBorderForTableAndCells: g.offsetTop === 5 }, d.style.position = "fixed", d.style.top = "20px", h.fixedPosition = d.offsetTop === 20 || d.offsetTop === 15, d.style.position = d.style.top = "", b.style.overflow = "hidden", b.style.position = "relative", h.subtractsBorderForOverflowNotVisible = d.offsetTop === -5, h.doesNotIncludeMarginInBodyOffset = m.offsetTop !== i, m.removeChild(a), o = a = null, f.extend(k, h)) }), o.innerHTML = "", n.removeChild(o), o = l = g = h = m = j = a = i = null; return k }(), f.boxModel = f.support.boxModel; var j = /^(?:\{.*\}|\[.*\])$/, k = /([A-Z])/g; f.extend({ cache: {}, uuid: 0, expando: "jQuery" + (f.fn.jquery + Math.random()).replace(/\D/g, ""), noData: { embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: !0 }, hasData: function (a) { a = a.nodeType ? f.cache[a[f.expando]] : a[f.expando]; return !!a && !m(a) }, data: function (a, c, d, e) { if (!!f.acceptData(a)) { var g, h, i, j = f.expando, k = typeof c == "string", l = a.nodeType, m = l ? f.cache : a, n = l ? a[f.expando] : a[f.expando] && f.expando, o = c === "events"; if ((!n || !m[n] || !o && !e && !m[n].data) && k && d === b) return; n || (l ? a[f.expando] = n = ++f.uuid : n = f.expando), m[n] || (m[n] = {}, l || (m[n].toJSON = f.noop)); if (typeof c == "object" || typeof c == "function") e ? m[n] = f.extend(m[n], c) : m[n].data = f.extend(m[n].data, c); g = h = m[n], e || (h.data || (h.data = {}), h = h.data), d !== b && (h[f.camelCase(c)] = d); if (o && !h[c]) return g.events; k ? (i = h[c], i == null && (i = h[f.camelCase(c)])) : i = h; return i } }, removeData: function (a, b, c) { if (!!f.acceptData(a)) { var d, e, g, h = f.expando, i = a.nodeType, j = i ? f.cache : a, k = i ? a[f.expando] : f.expando; if (!j[k]) return; if (b) { d = c ? j[k] : j[k].data; if (d) { f.isArray(b) ? b = b : b in d ? b = [b] : (b = f.camelCase(b), b in d ? b = [b] : b = b.split(" ")); for (e = 0, g = b.length; e < g; e++) delete d[b[e]]; if (!(c ? m : f.isEmptyObject)(d)) return } } if (!c) { delete j[k].data; if (!m(j[k])) return } f.support.deleteExpando || !j.setInterval ? delete j[k] : j[k] = null, i && (f.support.deleteExpando ? delete a[f.expando] : a.removeAttribute ? a.removeAttribute(f.expando) : a[f.expando] = null) } }, _data: function (a, b, c) { return f.data(a, b, c, !0) }, acceptData: function (a) { if (a.nodeName) { var b = f.noData[a.nodeName.toLowerCase()]; if (b) return b !== !0 && a.getAttribute("classid") === b } return !0 } }), f.fn.extend({ data: function (a, c) { var d, e, g, h = null; if (typeof a == "undefined") { if (this.length) { h = f.data(this[0]); if (this[0].nodeType === 1 && !f._data(this[0], "parsedAttrs")) { e = this[0].attributes; for (var i = 0, j = e.length; i < j; i++) g = e[i].name, g.indexOf("data-") === 0 && (g = f.camelCase(g.substring(5)), l(this[0], g, h[g])); f._data(this[0], "parsedAttrs", !0) } } return h } if (typeof a == "object") return this.each(function () { f.data(this, a) }); d = a.split("."), d[1] = d[1] ? "." + d[1] : ""; if (c === b) { h = this.triggerHandler("getData" + d[1] + "!", [d[0]]), h === b && this.length && (h = f.data(this[0], a), h = l(this[0], a, h)); return h === b && d[1] ? this.data(d[0]) : h } return this.each(function () { var b = f(this), e = [d[0], c]; b.triggerHandler("setData" + d[1] + "!", e), f.data(this, a, c), b.triggerHandler("changeData" + d[1] + "!", e) }) }, removeData: function (a) { return this.each(function () { f.removeData(this, a) }) } }), f.extend({ _mark: function (a, b) { a && (b = (b || "fx") + "mark", f._data(a, b, (f._data(a, b) || 0) + 1)) }, _unmark: function (a, b, c) { a !== !0 && (c = b, b = a, a = !1); if (b) { c = c || "fx"; var d = c + "mark", e = a ? 0 : (f._data(b, d) || 1) - 1; e ? f._data(b, d, e) : (f.removeData(b, d, !0), n(b, c, "mark")) } }, queue: function (a, b, c) { var d; if (a) { b = (b || "fx") + "queue", d = f._data(a, b), c && (!d || f.isArray(c) ? d = f._data(a, b, f.makeArray(c)) : d.push(c)); return d || [] } }, dequeue: function (a, b) { b = b || "fx"; var c = f.queue(a, b), d = c.shift(), e = {}; d === "inprogress" && (d = c.shift()), d && (b === "fx" && c.unshift("inprogress"), f._data(a, b + ".run", e), d.call(a, function () { f.dequeue(a, b) }, e)), c.length || (f.removeData(a, b + "queue " + b + ".run", !0), n(a, b, "queue")) } }), f.fn.extend({ queue: function (a, c) { typeof a != "string" && (c = a, a = "fx"); if (c === b) return f.queue(this[0], a); return this.each(function () { var b = f.queue(this, a, c); a === "fx" && b[0] !== "inprogress" && f.dequeue(this, a) }) }, dequeue: function (a) { return this.each(function () { f.dequeue(this, a) }) }, delay: function (a, b) { a = f.fx ? f.fx.speeds[a] || a : a, b = b || "fx"; return this.queue(b, function (b, c) { var d = setTimeout(b, a); c.stop = function () { clearTimeout(d) } }) }, clearQueue: function (a) { return this.queue(a || "fx", []) }, promise: function (a, c) { function m() { --h || d.resolveWith(e, [e]) } typeof a != "string" && (c = a, a = b), a = a || "fx"; var d = f.Deferred(), e = this, g = e.length, h = 1, i = a + "defer", j = a + "queue", k = a + "mark", l; while (g--) if (l = f.data(e[g], i, b, !0) || (f.data(e[g], j, b, !0) || f.data(e[g], k, b, !0)) && f.data(e[g], i, f.Callbacks("once memory"), !0)) h++, l.add(m); m(); return d.promise() } }); var o = /[\n\t\r]/g, p = /\s+/, q = /\r/g, r = /^(?:button|input)$/i, s = /^(?:button|input|object|select|textarea)$/i, t = /^a(?:rea)?$/i, u = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i, v = f.support.getSetAttribute, w, x, y; f.fn.extend({ attr: function (a, b) { return f.access(this, a, b, !0, f.attr) }, removeAttr: function (a) { return this.each(function () { f.removeAttr(this, a) }) }, prop: function (a, b) { return f.access(this, a, b, !0, f.prop) }, removeProp: function (a) { a = f.propFix[a] || a; return this.each(function () { try { this[a] = b, delete this[a] } catch (c) { } }) }, addClass: function (a) { var b, c, d, e, g, h, i; if (f.isFunction(a)) return this.each(function (b) { f(this).addClass(a.call(this, b, this.className)) }); if (a && typeof a == "string") { b = a.split(p); for (c = 0, d = this.length; c < d; c++) { e = this[c]; if (e.nodeType === 1) if (!e.className && b.length === 1) e.className = a; else { g = " " + e.className + " "; for (h = 0, i = b.length; h < i; h++) ~g.indexOf(" " + b[h] + " ") || (g += b[h] + " "); e.className = f.trim(g) } } } return this }, removeClass: function (a) { var c, d, e, g, h, i, j; if (f.isFunction(a)) return this.each(function (b) { f(this).removeClass(a.call(this, b, this.className)) }); if (a && typeof a == "string" || a === b) { c = (a || "").split(p); for (d = 0, e = this.length; d < e; d++) { g = this[d]; if (g.nodeType === 1 && g.className) if (a) { h = (" " + g.className + " ").replace(o, " "); for (i = 0, j = c.length; i < j; i++) h = h.replace(" " + c[i] + " ", " "); g.className = f.trim(h) } else g.className = "" } } return this }, toggleClass: function (a, b) { var c = typeof a, d = typeof b == "boolean"; if (f.isFunction(a)) return this.each(function (c) { f(this).toggleClass(a.call(this, c, this.className, b), b) }); return this.each(function () { if (c === "string") { var e, g = 0, h = f(this), i = b, j = a.split(p); while (e = j[g++]) i = d ? i : !h.hasClass(e), h[i ? "addClass" : "removeClass"](e) } else if (c === "undefined" || c === "boolean") this.className && f._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : f._data(this, "__className__") || "" }) }, hasClass: function (a) { var b = " " + a + " ", c = 0, d = this.length; for (; c < d; c++) if (this[c].nodeType === 1 && (" " + this[c].className + " ").replace(o, " ").indexOf(b) > -1) return !0; return !1 }, val: function (a) { var c, d, e, g = this[0]; if (!arguments.length) { if (g) { c = f.valHooks[g.nodeName.toLowerCase()] || f.valHooks[g.type]; if (c && "get" in c && (d = c.get(g, "value")) !== b) return d; d = g.value; return typeof d == "string" ? d.replace(q, "") : d == null ? "" : d } return b } e = f.isFunction(a); return this.each(function (d) { var g = f(this), h; if (this.nodeType === 1) { e ? h = a.call(this, d, g.val()) : h = a, h == null ? h = "" : typeof h == "number" ? h += "" : f.isArray(h) && (h = f.map(h, function (a) { return a == null ? "" : a + "" })), c = f.valHooks[this.nodeName.toLowerCase()] || f.valHooks[this.type]; if (!c || !("set" in c) || c.set(this, h, "value") === b) this.value = h } }) } }), f.extend({ valHooks: { option: { get: function (a) { var b = a.attributes.value; return !b || b.specified ? a.value : a.text } }, select: { get: function (a) { var b, c, d, e, g = a.selectedIndex, h = [], i = a.options, j = a.type === "select-one"; if (g < 0) return null; c = j ? g : 0, d = j ? g + 1 : i.length; for (; c < d; c++) { e = i[c]; if (e.selected && (f.support.optDisabled ? !e.disabled : e.getAttribute("disabled") === null) && (!e.parentNode.disabled || !f.nodeName(e.parentNode, "optgroup"))) { b = f(e).val(); if (j) return b; h.push(b) } } if (j && !h.length && i.length) return f(i[g]).val(); return h }, set: function (a, b) { var c = f.makeArray(b); f(a).find("option").each(function () { this.selected = f.inArray(f(this).val(), c) >= 0 }), c.length || (a.selectedIndex = -1); return c } } }, attrFn: { val: !0, css: !0, html: !0, text: !0, data: !0, width: !0, height: !0, offset: !0 }, attr: function (a, c, d, e) { var g, h, i, j = a.nodeType; if (!a || j === 3 || j === 8 || j === 2) return b; if (e && c in f.attrFn) return f(a)[c](d); if (!("getAttribute" in a)) return f.prop(a, c, d); i = j !== 1 || !f.isXMLDoc(a), i && (c = c.toLowerCase(), h = f.attrHooks[c] || (u.test(c) ? x : w)); if (d !== b) { if (d === null) { f.removeAttr(a, c); return b } if (h && "set" in h && i && (g = h.set(a, d, c)) !== b) return g; a.setAttribute(c, "" + d); return d } if (h && "get" in h && i && (g = h.get(a, c)) !== null) return g; g = a.getAttribute(c); return g === null ? b : g }, removeAttr: function (a, b) { var c, d, e, g, h = 0; if (a.nodeType === 1) { d = (b || "").split(p), g = d.length; for (; h < g; h++) e = d[h].toLowerCase(), c = f.propFix[e] || e, f.attr(a, e, ""), a.removeAttribute(v ? e : c), u.test(e) && c in a && (a[c] = !1) } }, attrHooks: { type: { set: function (a, b) { if (r.test(a.nodeName) && a.parentNode) f.error("type property can't be changed"); else if (!f.support.radioValue && b === "radio" && f.nodeName(a, "input")) { var c = a.value; a.setAttribute("type", b), c && (a.value = c); return b } } }, value: { get: function (a, b) { if (w && f.nodeName(a, "button")) return w.get(a, b); return b in a ? a.value : null }, set: function (a, b, c) { if (w && f.nodeName(a, "button")) return w.set(a, b, c); a.value = b } } }, propFix: { tabindex: "tabIndex", readonly: "readOnly", "for": "htmlFor", "class": "className", maxlength: "maxLength", cellspacing: "cellSpacing", cellpadding: "cellPadding", rowspan: "rowSpan", colspan: "colSpan", usemap: "useMap", frameborder: "frameBorder", contenteditable: "contentEditable" }, prop: function (a, c, d) { var e, g, h, i = a.nodeType; if (!a || i === 3 || i === 8 || i === 2) return b; h = i !== 1 || !f.isXMLDoc(a), h && (c = f.propFix[c] || c, g = f.propHooks[c]); return d !== b ? g && "set" in g && (e = g.set(a, d, c)) !== b ? e : a[c] = d : g && "get" in g && (e = g.get(a, c)) !== null ? e : a[c] }, propHooks: { tabIndex: { get: function (a) { var c = a.getAttributeNode("tabindex"); return c && c.specified ? parseInt(c.value, 10) : s.test(a.nodeName) || t.test(a.nodeName) && a.href ? 0 : b } } } }), f.attrHooks.tabindex = f.propHooks.tabIndex, x = { get: function (a, c) { var d, e = f.prop(a, c); return e === !0 || typeof e != "boolean" && (d = a.getAttributeNode(c)) && d.nodeValue !== !1 ? c.toLowerCase() : b }, set: function (a, b, c) { var d; b === !1 ? f.removeAttr(a, c) : (d = f.propFix[c] || c, d in a && (a[d] = !0), a.setAttribute(c, c.toLowerCase())); return c } }, v || (y = { name: !0, id: !0 }, w = f.valHooks.button = { get: function (a, c) { var d; d = a.getAttributeNode(c); return d && (y[c] ? d.nodeValue !== "" : d.specified) ? d.nodeValue : b }, set: function (a, b, d) { var e = a.getAttributeNode(d); e || (e = c.createAttribute(d), a.setAttributeNode(e)); return e.nodeValue = b + "" } }, f.attrHooks.tabindex.set = w.set, f.each(["width", "height"], function (a, b) { f.attrHooks[b] = f.extend(f.attrHooks[b], { set: function (a, c) { if (c === "") { a.setAttribute(b, "auto"); return c } } }) }), f.attrHooks.contenteditable = { get: w.get, set: function (a, b, c) { b === "" && (b = "false"), w.set(a, b, c) } }), f.support.hrefNormalized || f.each(["href", "src", "width", "height"], function (a, c) { f.attrHooks[c] = f.extend(f.attrHooks[c], { get: function (a) { var d = a.getAttribute(c, 2); return d === null ? b : d } }) }), f.support.style || (f.attrHooks.style = { get: function (a) { return a.style.cssText.toLowerCase() || b }, set: function (a, b) { return a.style.cssText = "" + b } }), f.support.optSelected || (f.propHooks.selected = f.extend(f.propHooks.selected, { get: function (a) { var b = a.parentNode; b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex); return null } })), f.support.enctype || (f.propFix.enctype = "encoding"), f.support.checkOn || f.each(["radio", "checkbox"], function () { f.valHooks[this] = { get: function (a) { return a.getAttribute("value") === null ? "on" : a.value } } }), f.each(["radio", "checkbox"], function () { f.valHooks[this] = f.extend(f.valHooks[this], { set: function (a, b) { if (f.isArray(b)) return a.checked = f.inArray(f(a).val(), b) >= 0 } }) }); var z = /\.(.*)$/, A = /^(?:textarea|input|select)$/i, B = /\./g, C = / /g, D = /[^\w\s.|`]/g, E = /^([^\.]*)?(?:\.(.+))?$/, F = /\bhover(\.\S+)?/, G = /^key/, H = /^(?:mouse|contextmenu)|click/, I = /^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/, J = function (a) { var b = I.exec(a); b && (b[1] = (b[1] || "").toLowerCase(), b[3] = b[3] && new RegExp("(?:^|\\s)" + b[3] + "(?:\\s|$)")); return b }, K = function (a, b) { return (!b[1] || a.nodeName.toLowerCase() === b[1]) && (!b[2] || a.id === b[2]) && (!b[3] || b[3].test(a.className)) }, L = function (a) { return f.event.special.hover ? a : a.replace(F, "mouseenter$1 mouseleave$1") }; f.event = { add: function (a, c, d, e, g) { var h, i, j, k, l, m, n, o, p, q, r, s; if (!(a.nodeType === 3 || a.nodeType === 8 || !c || !d || !(h = f._data(a)))) { d.handler && (p = d, d = p.handler), d.guid || (d.guid = f.guid++), j = h.events, j || (h.events = j = {}), i = h.handle, i || (h.handle = i = function (a) { return typeof f != "undefined" && (!a || f.event.triggered !== a.type) ? f.event.dispatch.apply(i.elem, arguments) : b }, i.elem = a), c = L(c).split(" "); for (k = 0; k < c.length; k++) { l = E.exec(c[k]) || [], m = l[1], n = (l[2] || "").split(".").sort(), s = f.event.special[m] || {}, m = (g ? s.delegateType : s.bindType) || m, s = f.event.special[m] || {}, o = f.extend({ type: m, origType: l[1], data: e, handler: d, guid: d.guid, selector: g, namespace: n.join(".") }, p), g && (o.quick = J(g), !o.quick && f.expr.match.POS.test(g) && (o.isPositional = !0)), r = j[m]; if (!r) { r = j[m] = [], r.delegateCount = 0; if (!s.setup || s.setup.call(a, e, n, i) === !1) a.addEventListener ? a.addEventListener(m, i, !1) : a.attachEvent && a.attachEvent("on" + m, i) } s.add && (s.add.call(a, o), o.handler.guid || (o.handler.guid = d.guid)), g ? r.splice(r.delegateCount++, 0, o) : r.push(o), f.event.global[m] = !0 } a = null } }, global: {}, remove: function (a, b, c, d) { var e = f.hasData(a) && f._data(a), g, h, i, j, k, l, m, n, o, p, q; if (!!e && !!(m = e.events)) { b = L(b || "").split(" "); for (g = 0; g < b.length; g++) { h = E.exec(b[g]) || [], i = h[1], j = h[2]; if (!i) { j = j ? "." + j : ""; for (l in m) f.event.remove(a, l + j, c, d); return } n = f.event.special[i] || {}, i = (d ? n.delegateType : n.bindType) || i, p = m[i] || [], k = p.length, j = j ? new RegExp("(^|\\.)" + j.split(".").sort().join("\\.(?:.*\\.)?") + "(\\.|$)") : null; if (c || j || d || n.remove) for (l = 0; l < p.length; l++) { q = p[l]; if (!c || c.guid === q.guid) if (!j || j.test(q.namespace)) if (!d || d === q.selector || d === "**" && q.selector) p.splice(l--, 1), q.selector && p.delegateCount--, n.remove && n.remove.call(a, q) } else p.length = 0; p.length === 0 && k !== p.length && ((!n.teardown || n.teardown.call(a, j) === !1) && f.removeEvent(a, i, e.handle), delete m[i]) } f.isEmptyObject(m) && (o = e.handle, o && (o.elem = null), f.removeData(a, ["events", "handle"], !0)) } }, customEvent: { getData: !0, setData: !0, changeData: !0 }, trigger: function (c, d, e, g) { if (!e || e.nodeType !== 3 && e.nodeType !== 8) { var h = c.type || c, i = [], j, k, l, m, n, o, p, q, r, s; h.indexOf("!") >= 0 && (h = h.slice(0, -1), k = !0), h.indexOf(".") >= 0 && (i = h.split("."), h = i.shift(), i.sort()); if ((!e || f.event.customEvent[h]) && !f.event.global[h]) return; c = typeof c == "object" ? c[f.expando] ? c : new f.Event(h, c) : new f.Event(h), c.type = h, c.isTrigger = !0, c.exclusive = k, c.namespace = i.join("."), c.namespace_re = c.namespace ? new RegExp("(^|\\.)" + i.join("\\.(?:.*\\.)?") + "(\\.|$)") : null, o = h.indexOf(":") < 0 ? "on" + h : "", (g || !e) && c.preventDefault(); if (!e) { j = f.cache; for (l in j) j[l].events && j[l].events[h] && f.event.trigger(c, d, j[l].handle.elem, !0); return } c.result = b, c.target || (c.target = e), d = d != null ? f.makeArray(d) : [], d.unshift(c), p = f.event.special[h] || {}; if (p.trigger && p.trigger.apply(e, d) === !1) return; r = [[e, p.bindType || h]]; if (!g && !p.noBubble && !f.isWindow(e)) { s = p.delegateType || h, n = null; for (m = e.parentNode; m; m = m.parentNode) r.push([m, s]), n = m; n && n === e.ownerDocument && r.push([n.defaultView || n.parentWindow || a, s]) } for (l = 0; l < r.length; l++) { m = r[l][0], c.type = r[l][1], q = (f._data(m, "events") || {})[c.type] && f._data(m, "handle"), q && q.apply(m, d), q = o && m[o], q && f.acceptData(m) && q.apply(m, d); if (c.isPropagationStopped()) break } c.type = h, c.isDefaultPrevented() || (!p._default || p._default.apply(e.ownerDocument, d) === !1) && (h !== "click" || !f.nodeName(e, "a")) && f.acceptData(e) && o && e[h] && (h !== "focus" && h !== "blur" || c.target.offsetWidth !== 0) && !f.isWindow(e) && (n = e[o], n && (e[o] = null), f.event.triggered = h, e[h](), f.event.triggered = b, n && (e[o] = n)); return c.result } }, dispatch: function (c) { c = f.event.fix(c || a.event); var d = (f._data(this, "events") || {})[c.type] || [], e = d.delegateCount, g = [].slice.call(arguments, 0), h = !c.exclusive && !c.namespace, i = (f.event.special[c.type] || {}).handle, j = [], k, l, m, n, o, p, q, r, s, t, u; g[0] = c, c.delegateTarget = this; if (e && !c.target.disabled && (!c.button || c.type !== "click")) for (m = c.target; m != this; m = m.parentNode || this) { o = {}, q = []; for (k = 0; k < e; k++) r = d[k], s = r.selector, t = o[s], r.isPositional ? t = (t || (o[s] = f(s))).index(m) >= 0 : t === b && (t = o[s] = r.quick ? K(m, r.quick) : f(m).is(s)), t && q.push(r); q.length && j.push({ elem: m, matches: q }) } d.length > e && j.push({ elem: this, matches: d.slice(e) }); for (k = 0; k < j.length && !c.isPropagationStopped() ; k++) { p = j[k], c.currentTarget = p.elem; for (l = 0; l < p.matches.length && !c.isImmediatePropagationStopped() ; l++) { r = p.matches[l]; if (h || !c.namespace && !r.namespace || c.namespace_re && c.namespace_re.test(r.namespace)) c.data = r.data, c.handleObj = r, n = (i || r.handler).apply(p.elem, g), n !== b && (c.result = n, n === !1 && (c.preventDefault(), c.stopPropagation())) } } return c.result }, props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (a, b) { a.which == null && (a.which = b.charCode != null ? b.charCode : b.keyCode); return a } }, mouseHooks: { props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "), filter: function (a, d) { var e, f, g, h = d.button, i = d.fromElement; a.pageX == null && d.clientX != null && (e = a.target.ownerDocument || c, f = e.documentElement, g = e.body, a.pageX = d.clientX + (f && f.scrollLeft || g && g.scrollLeft || 0) - (f && f.clientLeft || g && g.clientLeft || 0), a.pageY = d.clientY + (f && f.scrollTop || g && g.scrollTop || 0) - (f && f.clientTop || g && g.clientTop || 0)), !a.relatedTarget && i && (a.relatedTarget = i === a.target ? d.toElement : i), !a.which && h !== b && (a.which = h & 1 ? 1 : h & 2 ? 3 : h & 4 ? 2 : 0); return a } }, fix: function (a) { if (a[f.expando]) return a; var d, e, g = a, h = f.event.fixHooks[a.type] || {}, i = h.props ? this.props.concat(h.props) : this.props; a = f.Event(g); for (d = i.length; d;) e = i[--d], a[e] = g[e]; a.target || (a.target = g.srcElement || c), a.target.nodeType === 3 && (a.target = a.target.parentNode), a.metaKey === b && (a.metaKey = a.ctrlKey); return h.filter ? h.filter(a, g) : a }, special: { ready: { setup: f.bindReady }, focus: { delegateType: "focusin", noBubble: !0 }, blur: { delegateType: "focusout", noBubble: !0 }, beforeunload: { setup: function (a, b, c) { f.isWindow(this) && (this.onbeforeunload = c) }, teardown: function (a, b) { this.onbeforeunload === b && (this.onbeforeunload = null) } } }, simulate: function (a, b, c, d) { var e = f.extend(new f.Event, c, { type: a, isSimulated: !0, originalEvent: {} }); d ? f.event.trigger(e, null, b) : f.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault() } }, f.event.handle = f.event.dispatch, f.removeEvent = c.removeEventListener ? function (a, b, c) { a.removeEventListener && a.removeEventListener(b, c, !1) } : function (a, b, c) { a.detachEvent && a.detachEvent("on" + b, c) }, f.Event = function (a, b) { if (!(this instanceof f.Event)) return new f.Event(a, b); a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || a.returnValue === !1 || a.getPreventDefault && a.getPreventDefault() ? N : M) : this.type = a, b && f.extend(this, b), this.timeStamp = a && a.timeStamp || f.now(), this[f.expando] = !0 }, f.Event.prototype = { preventDefault: function () { this.isDefaultPrevented = N; var a = this.originalEvent; !a || (a.preventDefault ? a.preventDefault() : a.returnValue = !1) }, stopPropagation: function () { this.isPropagationStopped = N; var a = this.originalEvent; !a || (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0) }, stopImmediatePropagation: function () { this.isImmediatePropagationStopped = N, this.stopPropagation() }, isDefaultPrevented: M, isPropagationStopped: M, isImmediatePropagationStopped: M }, f.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (a, b) { f.event.special[a] = f.event.special[b] = { delegateType: b, bindType: b, handle: function (a) { var b = this, c = a.relatedTarget, d = a.handleObj, e = d.selector, g, h; if (!c || d.origType === a.type || c !== b && !f.contains(b, c)) g = a.type, a.type = d.origType, h = d.handler.apply(this, arguments), a.type = g; return h } } }), f.support.submitBubbles || (f.event.special.submit = { setup: function () { if (f.nodeName(this, "form")) return !1; f.event.add(this, "click._submit keypress._submit", function (a) { var c = a.target, d = f.nodeName(c, "input") || f.nodeName(c, "button") ? c.form : b; d && !d._submit_attached && (f.event.add(d, "submit._submit", function (a) { this.parentNode && f.event.simulate("submit", this.parentNode, a, !0) }), d._submit_attached = !0) }) }, teardown: function () { if (f.nodeName(this, "form")) return !1; f.event.remove(this, "._submit") } }), f.support.changeBubbles || (f.event.special.change = { setup: function () { if (A.test(this.nodeName)) { if (this.type === "checkbox" || this.type === "radio") f.event.add(this, "propertychange._change", function (a) { a.originalEvent.propertyName === "checked" && (this._just_changed = !0) }), f.event.add(this, "click._change", function (a) { this._just_changed && (this._just_changed = !1, f.event.simulate("change", this, a, !0)) }); return !1 } f.event.add(this, "beforeactivate._change", function (a) { var b = a.target; A.test(b.nodeName) && !b._change_attached && (f.event.add(b, "change._change", function (a) { this.parentNode && !a.isSimulated && f.event.simulate("change", this.parentNode, a, !0) }), b._change_attached = !0) }) }, handle: function (a) { var b = a.target; if (this !== b || a.isSimulated || a.isTrigger || b.type !== "radio" && b.type !== "checkbox") return a.handleObj.handler.apply(this, arguments) }, teardown: function () { f.event.remove(this, "._change"); return A.test(this.nodeName) } }), f.support.focusinBubbles || f.each({ focus: "focusin", blur: "focusout" }, function (a, b) { var d = 0, e = function (a) { f.event.simulate(b, a.target, f.event.fix(a), !0) }; f.event.special[b] = { setup: function () { d++ === 0 && c.addEventListener(a, e, !0) }, teardown: function () { --d === 0 && c.removeEventListener(a, e, !0) } } }), f.fn.extend({ on: function (a, c, d, e, g) { var h, i; if (typeof a == "object") { typeof c != "string" && (d = c, c = b); for (i in a) this.on(i, c, d, a[i], g); return this } d == null && e == null ? (e = c, d = c = b) : e == null && (typeof c == "string" ? (e = d, d = b) : (e = d, d = c, c = b)); if (e === !1) e = M; else if (!e) return this; g === 1 && (h = e, e = function (a) { f().off(a); return h.apply(this, arguments) }, e.guid = h.guid || (h.guid = f.guid++)); return this.each(function () { f.event.add(this, a, e, d, c) }) }, one: function (a, b, c, d) { return this.on.call(this, a, b, c, d, 1) }, off: function (a, c, d) { if (a && a.preventDefault && a.handleObj) { var e = a.handleObj; f(a.delegateTarget).off(e.namespace ? e.type + "." + e.namespace : e.type, e.selector, e.handler); return this } if (typeof a == "object") { for (var g in a) this.off(g, c, a[g]); return this } if (c === !1 || typeof c == "function") d = c, c = b; d === !1 && (d = M); return this.each(function () { f.event.remove(this, a, d, c) }) }, bind: function (a, b, c) { return this.on(a, null, b, c) }, unbind: function (a, b) { return this.off(a, null, b) }, live: function (a, b, c) { f(this.context).on(a, this.selector, b, c); return this }, die: function (a, b) { f(this.context).off(a, this.selector || "**", b); return this }, delegate: function (a, b, c, d) { return this.on(b, a, c, d) }, undelegate: function (a, b, c) { return arguments.length == 1 ? this.off(a, "**") : this.off(b, a, c) }, trigger: function (a, b) { return this.each(function () { f.event.trigger(a, b, this) }) }, triggerHandler: function (a, b) { if (this[0]) return f.event.trigger(a, b, this[0], !0) }, toggle: function (a) { var b = arguments, c = a.guid || f.guid++, d = 0, e = function (c) { var e = (f._data(this, "lastToggle" + a.guid) || 0) % d; f._data(this, "lastToggle" + a.guid, e + 1), c.preventDefault(); return b[e].apply(this, arguments) || !1 }; e.guid = c; while (d < b.length) b[d++].guid = c; return this.click(e) }, hover: function (a, b) { return this.mouseenter(a).mouseleave(b || a) } }), f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (a, b) { f.fn[b] = function (a, c) { c == null && (c = a, a = null); return arguments.length > 0 ? this.bind(b, a, c) : this.trigger(b) }, f.attrFn && (f.attrFn[b] = !0), G.test(b) && (f.event.fixHooks[b] = f.event.keyHooks), H.test(b) && (f.event.fixHooks[b] = f.event.mouseHooks) }), function () { function x(a, b, c, e, f, g) { for (var h = 0, i = e.length; h < i; h++) { var j = e[h]; if (j) { var k = !1; j = j[a]; while (j) { if (j[d] === c) { k = e[j.sizset]; break } if (j.nodeType === 1) { g || (j[d] = c, j.sizset = h); if (typeof b != "string") { if (j === b) { k = !0; break } } else if (m.filter(b, [j]).length > 0) { k = j; break } } j = j[a] } e[h] = k } } } function w(a, b, c, e, f, g) { for (var h = 0, i = e.length; h < i; h++) { var j = e[h]; if (j) { var k = !1; j = j[a]; while (j) { if (j[d] === c) { k = e[j.sizset]; break } j.nodeType === 1 && !g && (j[d] = c, j.sizset = h); if (j.nodeName.toLowerCase() === b) { k = j; break } j = j[a] } e[h] = k } } } var a = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g, d = "sizcache" + (Math.random() + "").replace(".", ""), e = 0, g = Object.prototype.toString, h = !1, i = !0, j = /\\/g, k = /\r\n/g, l = /\W/;[0, 0].sort(function () { i = !1; return 0 }); var m = function (b, d, e, f) { e = e || [], d = d || c; var h = d; if (d.nodeType !== 1 && d.nodeType !== 9) return []; if (!b || typeof b != "string") return e; var i, j, k, l, n, q, r, t, u = !0, v = m.isXML(d), w = [], x = b; do { a.exec(""), i = a.exec(x); if (i) { x = i[3], w.push(i[1]); if (i[2]) { l = i[3]; break } } } while (i); if (w.length > 1 && p.exec(b)) if (w.length === 2 && o.relative[w[0]]) j = y(w[0] + w[1], d, f); else { j = o.relative[w[0]] ? [d] : m(w.shift(), d); while (w.length) b = w.shift(), o.relative[b] && (b += w.shift()), j = y(b, j, f) } else { !f && w.length > 1 && d.nodeType === 9 && !v && o.match.ID.test(w[0]) && !o.match.ID.test(w[w.length - 1]) && (n = m.find(w.shift(), d, v), d = n.expr ? m.filter(n.expr, n.set)[0] : n.set[0]); if (d) { n = f ? { expr: w.pop(), set: s(f) } : m.find(w.pop(), w.length === 1 && (w[0] === "~" || w[0] === "+") && d.parentNode ? d.parentNode : d, v), j = n.expr ? m.filter(n.expr, n.set) : n.set, w.length > 0 ? k = s(j) : u = !1; while (w.length) q = w.pop(), r = q, o.relative[q] ? r = w.pop() : q = "", r == null && (r = d), o.relative[q](k, r, v) } else k = w = [] } k || (k = j), k || m.error(q || b); if (g.call(k) === "[object Array]") if (!u) e.push.apply(e, k); else if (d && d.nodeType === 1) for (t = 0; k[t] != null; t++) k[t] && (k[t] === !0 || k[t].nodeType === 1 && m.contains(d, k[t])) && e.push(j[t]); else for (t = 0; k[t] != null; t++) k[t] && k[t].nodeType === 1 && e.push(j[t]); else s(k, e); l && (m(l, h, e, f), m.uniqueSort(e)); return e }; m.uniqueSort = function (a) { if (u) { h = i, a.sort(u); if (h) for (var b = 1; b < a.length; b++) a[b] === a[b - 1] && a.splice(b--, 1) } return a }, m.matches = function (a, b) { return m(a, null, null, b) }, m.matchesSelector = function (a, b) { return m(b, null, null, [a]).length > 0 }, m.find = function (a, b, c) { var d, e, f, g, h, i; if (!a) return []; for (e = 0, f = o.order.length; e < f; e++) { h = o.order[e]; if (g = o.leftMatch[h].exec(a)) { i = g[1], g.splice(1, 1); if (i.substr(i.length - 1) !== "\\") { g[1] = (g[1] || "").replace(j, ""), d = o.find[h](g, b, c); if (d != null) { a = a.replace(o.match[h], ""); break } } } } d || (d = typeof b.getElementsByTagName != "undefined" ? b.getElementsByTagName("*") : []); return { set: d, expr: a } }, m.filter = function (a, c, d, e) { var f, g, h, i, j, k, l, n, p, q = a, r = [], s = c, t = c && c[0] && m.isXML(c[0]); while (a && c.length) { for (h in o.filter) if ((f = o.leftMatch[h].exec(a)) != null && f[2]) { k = o.filter[h], l = f[1], g = !1, f.splice(1, 1); if (l.substr(l.length - 1) === "\\") continue; s === r && (r = []); if (o.preFilter[h]) { f = o.preFilter[h](f, s, d, r, e, t); if (!f) g = i = !0; else if (f === !0) continue } if (f) for (n = 0; (j = s[n]) != null; n++) j && (i = k(j, f, n, s), p = e ^ i, d && i != null ? p ? g = !0 : s[n] = !1 : p && (r.push(j), g = !0)); if (i !== b) { d || (s = r), a = a.replace(o.match[h], ""); if (!g) return []; break } } if (a === q) if (g == null) m.error(a); else break; q = a } return s }, m.error = function (a) { throw "Syntax error, unrecognized expression: " + a }; var n = m.getText = function (a) { var b, c, d = a.nodeType, e = ""; if (d) { if (d === 1) { if (typeof a.textContent == "string") return a.textContent; if (typeof a.innerText == "string") return a.innerText.replace(k, ""); for (a = a.firstChild; a; a = a.nextSibling) e += n(a) } else if (d === 3 || d === 4) return a.nodeValue } else for (b = 0; c = a[b]; b++) c.nodeType !== 8 && (e += n(c)); return e }, o = m.selectors = { order: ["ID", "NAME", "TAG"], match: { ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/, CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/, NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/, ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/, TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/, CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/, POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/, PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/ }, leftMatch: {}, attrMap: { "class": "className", "for": "htmlFor" }, attrHandle: { href: function (a) { return a.getAttribute("href") }, type: function (a) { return a.getAttribute("type") } }, relative: { "+": function (a, b) { var c = typeof b == "string", d = c && !l.test(b), e = c && !d; d && (b = b.toLowerCase()); for (var f = 0, g = a.length, h; f < g; f++) if (h = a[f]) { while ((h = h.previousSibling) && h.nodeType !== 1); a[f] = e || h && h.nodeName.toLowerCase() === b ? h || !1 : h === b } e && m.filter(b, a, !0) }, ">": function (a, b) { var c, d = typeof b == "string", e = 0, f = a.length; if (d && !l.test(b)) { b = b.toLowerCase(); for (; e < f; e++) { c = a[e]; if (c) { var g = c.parentNode; a[e] = g.nodeName.toLowerCase() === b ? g : !1 } } } else { for (; e < f; e++) c = a[e], c && (a[e] = d ? c.parentNode : c.parentNode === b); d && m.filter(b, a, !0) } }, "": function (a, b, c) { var d, f = e++, g = x; typeof b == "string" && !l.test(b) && (b = b.toLowerCase(), d = b, g = w), g("parentNode", b, f, a, d, c) }, "~": function (a, b, c) { var d, f = e++, g = x; typeof b == "string" && !l.test(b) && (b = b.toLowerCase(), d = b, g = w), g("previousSibling", b, f, a, d, c) } }, find: { ID: function (a, b, c) { if (typeof b.getElementById != "undefined" && !c) { var d = b.getElementById(a[1]); return d && d.parentNode ? [d] : [] } }, NAME: function (a, b) { if (typeof b.getElementsByName != "undefined") { var c = [], d = b.getElementsByName(a[1]); for (var e = 0, f = d.length; e < f; e++) d[e].getAttribute("name") === a[1] && c.push(d[e]); return c.length === 0 ? null : c } }, TAG: function (a, b) { if (typeof b.getElementsByTagName != "undefined") return b.getElementsByTagName(a[1]) } }, preFilter: { CLASS: function (a, b, c, d, e, f) { a = " " + a[1].replace(j, "") + " "; if (f) return a; for (var g = 0, h; (h = b[g]) != null; g++) h && (e ^ (h.className && (" " + h.className + " ").replace(/[\t\n\r]/g, " ").indexOf(a) >= 0) ? c || d.push(h) : c && (b[g] = !1)); return !1 }, ID: function (a) { return a[1].replace(j, "") }, TAG: function (a, b) { return a[1].replace(j, "").toLowerCase() }, CHILD: function (a) { if (a[1] === "nth") { a[2] || m.error(a[0]), a[2] = a[2].replace(/^\+|\s*/g, ""); var b = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2] === "even" && "2n" || a[2] === "odd" && "2n+1" || !/\D/.test(a[2]) && "0n+" + a[2] || a[2]); a[2] = b[1] + (b[2] || 1) - 0, a[3] = b[3] - 0 } else a[2] && m.error(a[0]); a[0] = e++; return a }, ATTR: function (a, b, c, d, e, f) { var g = a[1] = a[1].replace(j, ""); !f && o.attrMap[g] && (a[1] = o.attrMap[g]), a[4] = (a[4] || a[5] || "").replace(j, ""), a[2] === "~=" && (a[4] = " " + a[4] + " "); return a }, PSEUDO: function (b, c, d, e, f) { if (b[1] === "not") if ((a.exec(b[3]) || "").length > 1 || /^\w/.test(b[3])) b[3] = m(b[3], null, null, c); else { var g = m.filter(b[3], c, d, !0 ^ f); d || e.push.apply(e, g); return !1 } else if (o.match.POS.test(b[0]) || o.match.CHILD.test(b[0])) return !0; return b }, POS: function (a) { a.unshift(!0); return a } }, filters: { enabled: function (a) { return a.disabled === !1 && a.type !== "hidden" }, disabled: function (a) { return a.disabled === !0 }, checked: function (a) { return a.checked === !0 }, selected: function (a) { a.parentNode && a.parentNode.selectedIndex; return a.selected === !0 }, parent: function (a) { return !!a.firstChild }, empty: function (a) { return !a.firstChild }, has: function (a, b, c) { return !!m(c[3], a).length }, header: function (a) { return /h\d/i.test(a.nodeName) }, text: function (a) { var b = a.getAttribute("type"), c = a.type; return a.nodeName.toLowerCase() === "input" && "text" === c && (b === c || b === null) }, radio: function (a) { return a.nodeName.toLowerCase() === "input" && "radio" === a.type }, checkbox: function (a) { return a.nodeName.toLowerCase() === "input" && "checkbox" === a.type }, file: function (a) { return a.nodeName.toLowerCase() === "input" && "file" === a.type }, password: function (a) { return a.nodeName.toLowerCase() === "input" && "password" === a.type }, submit: function (a) { var b = a.nodeName.toLowerCase(); return (b === "input" || b === "button") && "submit" === a.type }, image: function (a) { return a.nodeName.toLowerCase() === "input" && "image" === a.type }, reset: function (a) { var b = a.nodeName.toLowerCase(); return (b === "input" || b === "button") && "reset" === a.type }, button: function (a) { var b = a.nodeName.toLowerCase(); return b === "input" && "button" === a.type || b === "button" }, input: function (a) { return /input|select|textarea|button/i.test(a.nodeName) }, focus: function (a) { return a === a.ownerDocument.activeElement } }, setFilters: { first: function (a, b) { return b === 0 }, last: function (a, b, c, d) { return b === d.length - 1 }, even: function (a, b) { return b % 2 === 0 }, odd: function (a, b) { return b % 2 === 1 }, lt: function (a, b, c) { return b < c[3] - 0 }, gt: function (a, b, c) { return b > c[3] - 0 }, nth: function (a, b, c) { return c[3] - 0 === b }, eq: function (a, b, c) { return c[3] - 0 === b } }, filter: { PSEUDO: function (a, b, c, d) { var e = b[1], f = o.filters[e]; if (f) return f(a, c, b, d); if (e === "contains") return (a.textContent || a.innerText || n([a]) || "").indexOf(b[3]) >= 0; if (e === "not") { var g = b[3]; for (var h = 0, i = g.length; h < i; h++) if (g[h] === a) return !1; return !0 } m.error(e) }, CHILD: function (a, b) { var c, e, f, g, h, i, j, k = b[1], l = a; switch (k) { case "only": case "first": while (l = l.previousSibling) if (l.nodeType === 1) return !1; if (k === "first") return !0; l = a; case "last": while (l = l.nextSibling) if (l.nodeType === 1) return !1; return !0; case "nth": c = b[2], e = b[3]; if (c === 1 && e === 0) return !0; f = b[0], g = a.parentNode; if (g && (g[d] !== f || !a.nodeIndex)) { i = 0; for (l = g.firstChild; l; l = l.nextSibling) l.nodeType === 1 && (l.nodeIndex = ++i); g[d] = f } j = a.nodeIndex - e; return c === 0 ? j === 0 : j % c === 0 && j / c >= 0 } }, ID: function (a, b) { return a.nodeType === 1 && a.getAttribute("id") === b }, TAG: function (a, b) { return b === "*" && a.nodeType === 1 || !!a.nodeName && a.nodeName.toLowerCase() === b }, CLASS: function (a, b) { return (" " + (a.className || a.getAttribute("class")) + " ").indexOf(b) > -1 }, ATTR: function (a, b) { var c = b[1], d = m.attr ? m.attr(a, c) : o.attrHandle[c] ? o.attrHandle[c](a) : a[c] != null ? a[c] : a.getAttribute(c), e = d + "", f = b[2], g = b[4]; return d == null ? f === "!=" : !f && m.attr ? d != null : f === "=" ? e === g : f === "*=" ? e.indexOf(g) >= 0 : f === "~=" ? (" " + e + " ").indexOf(g) >= 0 : g ? f === "!=" ? e !== g : f === "^=" ? e.indexOf(g) === 0 : f === "$=" ? e.substr(e.length - g.length) === g : f === "|=" ? e === g || e.substr(0, g.length + 1) === g + "-" : !1 : e && d !== !1 }, POS: function (a, b, c, d) { var e = b[2], f = o.setFilters[e]; if (f) return f(a, c, b, d) } } }, p = o.match.POS, q = function (a, b) { return "\\" + (b - 0 + 1) }; for (var r in o.match) o.match[r] = new RegExp(o.match[r].source + /(?![^\[]*\])(?![^\(]*\))/.source), o.leftMatch[r] = new RegExp(/(^(?:.|\r|\n)*?)/.source + o.match[r].source.replace(/\\(\d+)/g, q)); var s = function (a, b) { a = Array.prototype.slice.call(a, 0); if (b) { b.push.apply(b, a); return b } return a }; try { Array.prototype.slice.call(c.documentElement.childNodes, 0)[0].nodeType } catch (t) { s = function (a, b) { var c = 0, d = b || []; if (g.call(a) === "[object Array]") Array.prototype.push.apply(d, a); else if (typeof a.length == "number") for (var e = a.length; c < e; c++) d.push(a[c]); else for (; a[c]; c++) d.push(a[c]); return d } } var u, v; c.documentElement.compareDocumentPosition ? u = function (a, b) { if (a === b) { h = !0; return 0 } if (!a.compareDocumentPosition || !b.compareDocumentPosition) return a.compareDocumentPosition ? -1 : 1; return a.compareDocumentPosition(b) & 4 ? -1 : 1 } : (u = function (a, b) { if (a === b) { h = !0; return 0 } if (a.sourceIndex && b.sourceIndex) return a.sourceIndex - b.sourceIndex; var c, d, e = [], f = [], g = a.parentNode, i = b.parentNode, j = g; if (g === i) return v(a, b); if (!g) return -1; if (!i) return 1; while (j) e.unshift(j), j = j.parentNode; j = i; while (j) f.unshift(j), j = j.parentNode; c = e.length, d = f.length; for (var k = 0; k < c && k < d; k++) if (e[k] !== f[k]) return v(e[k], f[k]); return k === c ? v(a, f[k], -1) : v(e[k], b, 1) }, v = function (a, b, c) { if (a === b) return c; var d = a.nextSibling; while (d) { if (d === b) return -1; d = d.nextSibling } return 1 }), function () { var a = c.createElement("div"), d = "script" + (new Date).getTime(), e = c.documentElement; a.innerHTML = "<a name='" + d + "'/>", e.insertBefore(a, e.firstChild), c.getElementById(d) && (o.find.ID = function (a, c, d) { if (typeof c.getElementById != "undefined" && !d) { var e = c.getElementById(a[1]); return e ? e.id === a[1] || typeof e.getAttributeNode != "undefined" && e.getAttributeNode("id").nodeValue === a[1] ? [e] : b : [] } }, o.filter.ID = function (a, b) { var c = typeof a.getAttributeNode != "undefined" && a.getAttributeNode("id"); return a.nodeType === 1 && c && c.nodeValue === b }), e.removeChild(a), e = a = null }(), function () { var a = c.createElement("div"); a.appendChild(c.createComment("")), a.getElementsByTagName("*").length > 0 && (o.find.TAG = function (a, b) { var c = b.getElementsByTagName(a[1]); if (a[1] === "*") { var d = []; for (var e = 0; c[e]; e++) c[e].nodeType === 1 && d.push(c[e]); c = d } return c }), a.innerHTML = "<a href='#'></a>", a.firstChild && typeof a.firstChild.getAttribute != "undefined" && a.firstChild.getAttribute("href") !== "#" && (o.attrHandle.href = function (a) { return a.getAttribute("href", 2) }), a = null }(), c.querySelectorAll && function () { var a = m, b = c.createElement("div"), d = "__sizzle__"; b.innerHTML = "<p class='TEST'></p>"; if (!b.querySelectorAll || b.querySelectorAll(".TEST").length !== 0) { m = function (b, e, f, g) { e = e || c; if (!g && !m.isXML(e)) { var h = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b); if (h && (e.nodeType === 1 || e.nodeType === 9)) { if (h[1]) return s(e.getElementsByTagName(b), f); if (h[2] && o.find.CLASS && e.getElementsByClassName) return s(e.getElementsByClassName(h[2]), f) } if (e.nodeType === 9) { if (b === "body" && e.body) return s([e.body], f); if (h && h[3]) { var i = e.getElementById(h[3]); if (!i || !i.parentNode) return s([], f); if (i.id === h[3]) return s([i], f) } try { return s(e.querySelectorAll(b), f) } catch (j) { } } else if (e.nodeType === 1 && e.nodeName.toLowerCase() !== "object") { var k = e, l = e.getAttribute("id"), n = l || d, p = e.parentNode, q = /^\s*[+~]/.test(b); l ? n = n.replace(/'/g, "\\$&") : e.setAttribute("id", n), q && p && (e = e.parentNode); try { if (!q || p) return s(e.querySelectorAll("[id='" + n + "'] " + b), f) } catch (r) { } finally { l || k.removeAttribute("id") } } } return a(b, e, f, g) }; for (var e in a) m[e] = a[e]; b = null } }(), function () { var a = c.documentElement, b = a.matchesSelector || a.mozMatchesSelector || a.webkitMatchesSelector || a.msMatchesSelector; if (b) { var d = !b.call(c.createElement("div"), "div"), e = !1; try { b.call(c.documentElement, "[test!='']:sizzle") } catch (f) { e = !0 } m.matchesSelector = function (a, c) { c = c.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']"); if (!m.isXML(a)) try { if (e || !o.match.PSEUDO.test(c) && !/!=/.test(c)) { var f = b.call(a, c); if (f || !d || a.document && a.document.nodeType !== 11) return f } } catch (g) { } return m(c, null, null, [a]).length > 0 } } }(), function () { var a = c.createElement("div"); a.innerHTML = "<div class='test e'></div><div class='test'></div>"; if (!!a.getElementsByClassName && a.getElementsByClassName("e").length !== 0) { a.lastChild.className = "e"; if (a.getElementsByClassName("e").length === 1) return; o.order.splice(1, 0, "CLASS"), o.find.CLASS = function (a, b, c) { if (typeof b.getElementsByClassName != "undefined" && !c) return b.getElementsByClassName(a[1]) }, a = null } }(), c.documentElement.contains ? m.contains = function (a, b) { return a !== b && (a.contains ? a.contains(b) : !0) } : c.documentElement.compareDocumentPosition ? m.contains = function (a, b) { return !!(a.compareDocumentPosition(b) & 16) } : m.contains = function () { return !1 }, m.isXML = function (a) { var b = (a ? a.ownerDocument || a : 0).documentElement; return b ? b.nodeName !== "HTML" : !1 }; var y = function (a, b, c) { var d, e = [], f = "", g = b.nodeType ? [b] : b; while (d = o.match.PSEUDO.exec(a)) f += d[0], a = a.replace(o.match.PSEUDO, ""); a = o.relative[a] ? a + "*" : a; for (var h = 0, i = g.length; h < i; h++) m(a, g[h], e, c); return m.filter(f, e) }; m.attr = f.attr, m.selectors.attrMap = {}, f.find = m, f.expr = m.selectors, f.expr[":"] = f.expr.filters, f.unique = m.uniqueSort, f.text = m.getText, f.isXMLDoc = m.isXML, f.contains = m.contains }(); var O = /Until$/, P = /^(?:parents|prevUntil|prevAll)/, Q = /,/, R = /^.[^:#\[\.,]*$/, S = Array.prototype.slice, T = f.expr.match.POS, U = { children: !0, contents: !0, next: !0, prev: !0 }; f.fn.extend({ find: function (a) { var b = this, c, d; if (typeof a != "string") return f(a).filter(function () { for (c = 0, d = b.length; c < d; c++) if (f.contains(b[c], this)) return !0 }); var e = this.pushStack("", "find", a), g, h, i; for (c = 0, d = this.length; c < d; c++) { g = e.length, f.find(a, this[c], e); if (c > 0) for (h = g; h < e.length; h++) for (i = 0; i < g; i++) if (e[i] === e[h]) { e.splice(h--, 1); break } } return e }, has: function (a) { var b = f(a); return this.filter(function () { for (var a = 0, c = b.length; a < c; a++) if (f.contains(this, b[a])) return !0 }) }, not: function (a) { return this.pushStack(W(this, a, !1), "not", a) }, filter: function (a) { return this.pushStack(W(this, a, !0), "filter", a) }, is: function (a) { return !!a && (typeof a == "string" ? T.test(a) ? f(a, this.context).index(this[0]) >= 0 : f.filter(a, this).length > 0 : this.filter(a).length > 0) }, closest: function (a, b) { var c = [], d, e, g = this[0]; if (f.isArray(a)) { var h = 1; while (g && g.ownerDocument && g !== b) { for (d = 0; d < a.length; d++) f(g).is(a[d]) && c.push({ selector: a[d], elem: g, level: h }); g = g.parentNode, h++ } return c } var i = T.test(a) || typeof a != "string" ? f(a, b || this.context) : 0; for (d = 0, e = this.length; d < e; d++) { g = this[d]; while (g) { if (i ? i.index(g) > -1 : f.find.matchesSelector(g, a)) { c.push(g); break } g = g.parentNode; if (!g || !g.ownerDocument || g === b || g.nodeType === 11) break } } c = c.length > 1 ? f.unique(c) : c; return this.pushStack(c, "closest", a) }, index: function (a) { if (!a) return this[0] && this[0].parentNode ? this.prevAll().length : -1; if (typeof a == "string") return f.inArray(this[0], f(a)); return f.inArray(a.jquery ? a[0] : a, this) }, add: function (a, b) { var c = typeof a == "string" ? f(a, b) : f.makeArray(a && a.nodeType ? [a] : a), d = f.merge(this.get(), c); return this.pushStack(V(c[0]) || V(d[0]) ? d : f.unique(d)) }, andSelf: function () { return this.add(this.prevObject) } }), f.each({ parent: function (a) { var b = a.parentNode; return b && b.nodeType !== 11 ? b : null }, parents: function (a) { return f.dir(a, "parentNode") }, parentsUntil: function (a, b, c) { return f.dir(a, "parentNode", c) }, next: function (a) { return f.nth(a, 2, "nextSibling") }, prev: function (a) { return f.nth(a, 2, "previousSibling") }, nextAll: function (a) { return f.dir(a, "nextSibling") }, prevAll: function (a) { return f.dir(a, "previousSibling") }, nextUntil: function (a, b, c) { return f.dir(a, "nextSibling", c) }, prevUntil: function (a, b, c) { return f.dir(a, "previousSibling", c) }, siblings: function (a) { return f.sibling(a.parentNode.firstChild, a) }, children: function (a) { return f.sibling(a.firstChild) }, contents: function (a) { return f.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : f.makeArray(a.childNodes) } }, function (a, b) { f.fn[a] = function (c, d) { var e = f.map(this, b, c), g = S.call(arguments); O.test(a) || (d = c), d && typeof d == "string" && (e = f.filter(d, e)), e = this.length > 1 && !U[a] ? f.unique(e) : e, (this.length > 1 || Q.test(d)) && P.test(a) && (e = e.reverse()); return this.pushStack(e, a, g.join(",")) } }), f.extend({ filter: function (a, b, c) { c && (a = ":not(" + a + ")"); return b.length === 1 ? f.find.matchesSelector(b[0], a) ? [b[0]] : [] : f.find.matches(a, b) }, dir: function (a, c, d) { var e = [], g = a[c]; while (g && g.nodeType !== 9 && (d === b || g.nodeType !== 1 || !f(g).is(d))) g.nodeType === 1 && e.push(g), g = g[c]; return e }, nth: function (a, b, c, d) { b = b || 1; var e = 0; for (; a; a = a[c]) if (a.nodeType === 1 && ++e === b) break; return a }, sibling: function (a, b) { var c = []; for (; a; a = a.nextSibling) a.nodeType === 1 && a !== b && c.push(a); return c } }); var Y = "abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video", Z = / jQuery\d+="(?:\d+|null)"/g, $ = /^\s+/, _ = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig, ba = /<([\w:]+)/, bb = /<tbody/i, bc = /<|&#?\w+;/, bd = /<(?:script|style)/i, be = /<(?:script|object|embed|option|style)/i, bf = new RegExp("<(?:" + Y.replace(" ", "|") + ")", "i"), bg = /checked\s*(?:[^=]|=\s*.checked.)/i, bh = /\/(java|ecma)script/i, bi = /^\s*<!(?:\[CDATA\[|\-\-)/, bj = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], area: [1, "<map>", "</map>"], _default: [0, "", ""] }, bk = X(c); bj.optgroup = bj.option, bj.tbody = bj.tfoot = bj.colgroup = bj.caption = bj.thead, bj.th = bj.td, f.support.htmlSerialize || (bj._default = [1, "div<div>", "</div>"]), f.fn.extend({ text: function (a) { if (f.isFunction(a)) return this.each(function (b) { var c = f(this); c.text(a.call(this, b, c.text())) }); if (typeof a != "object" && a !== b) return this.empty().append((this[0] && this[0].ownerDocument || c).createTextNode(a)); return f.text(this) }, wrapAll: function (a) { if (f.isFunction(a)) return this.each(function (b) { f(this).wrapAll(a.call(this, b)) }); if (this[0]) { var b = f(a, this[0].ownerDocument).eq(0).clone(!0); this[0].parentNode && b.insertBefore(this[0]), b.map(function () { var a = this; while (a.firstChild && a.firstChild.nodeType === 1) a = a.firstChild; return a }).append(this) } return this }, wrapInner: function (a) { if (f.isFunction(a)) return this.each(function (b) { f(this).wrapInner(a.call(this, b)) }); return this.each(function () { var b = f(this), c = b.contents(); c.length ? c.wrapAll(a) : b.append(a) }) }, wrap: function (a) { return this.each(function () { f(this).wrapAll(a) }) }, unwrap: function () { return this.parent().each(function () { f.nodeName(this, "body") || f(this).replaceWith(this.childNodes) }).end() }, append: function () { return this.domManip(arguments, !0, function (a) { this.nodeType === 1 && this.appendChild(a) }) }, prepend: function () { return this.domManip(arguments, !0, function (a) { this.nodeType === 1 && this.insertBefore(a, this.firstChild) }) }, before: function () { if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (a) { this.parentNode.insertBefore(a, this) }); if (arguments.length) { var a = f(arguments[0]); a.push.apply(a, this.toArray()); return this.pushStack(a, "before", arguments) } }, after: function () { if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (a) { this.parentNode.insertBefore(a, this.nextSibling) }); if (arguments.length) { var a = this.pushStack(this, "after", arguments); a.push.apply(a, f(arguments[0]).toArray()); return a } }, remove: function (a, b) { for (var c = 0, d; (d = this[c]) != null; c++) if (!a || f.filter(a, [d]).length) !b && d.nodeType === 1 && (f.cleanData(d.getElementsByTagName("*")), f.cleanData([d])), d.parentNode && d.parentNode.removeChild(d); return this }, empty: function () { for (var a = 0, b; (b = this[a]) != null; a++) { b.nodeType === 1 && f.cleanData(b.getElementsByTagName("*")); while (b.firstChild) b.removeChild(b.firstChild) } return this }, clone: function (a, b) { a = a == null ? !1 : a, b = b == null ? a : b; return this.map(function () { return f.clone(this, a, b) }) }, html: function (a) { if (a === b) return this[0] && this[0].nodeType === 1 ? this[0].innerHTML.replace(Z, "") : null; if (typeof a == "string" && !bd.test(a) && (f.support.leadingWhitespace || !$.test(a)) && !bj[(ba.exec(a) || ["", ""])[1].toLowerCase()]) { a = a.replace(_, "<$1></$2>"); try { for (var c = 0, d = this.length; c < d; c++) this[c].nodeType === 1 && (f.cleanData(this[c].getElementsByTagName("*")), this[c].innerHTML = a) } catch (e) { this.empty().append(a) } } else f.isFunction(a) ? this.each(function (b) { var c = f(this); c.html(a.call(this, b, c.html())) }) : this.empty().append(a); return this }, replaceWith: function (a) { if (this[0] && this[0].parentNode) { if (f.isFunction(a)) return this.each(function (b) { var c = f(this), d = c.html(); c.replaceWith(a.call(this, b, d)) }); typeof a != "string" && (a = f(a).detach()); return this.each(function () { var b = this.nextSibling, c = this.parentNode; f(this).remove(), b ? f(b).before(a) : f(c).append(a) }) } return this.length ? this.pushStack(f(f.isFunction(a) ? a() : a), "replaceWith", a) : this }, detach: function (a) { return this.remove(a, !0) }, domManip: function (a, c, d) { var e, g, h, i, j = a[0], k = []; if (!f.support.checkClone && arguments.length === 3 && typeof j == "string" && bg.test(j)) return this.each(function () { f(this).domManip(a, c, d, !0) }); if (f.isFunction(j)) return this.each(function (e) { var g = f(this); a[0] = j.call(this, e, c ? g.html() : b), g.domManip(a, c, d) }); if (this[0]) { i = j && j.parentNode, f.support.parentNode && i && i.nodeType === 11 && i.childNodes.length === this.length ? e = { fragment: i } : e = f.buildFragment(a, this, k), h = e.fragment, h.childNodes.length === 1 ? g = h = h.firstChild : g = h.firstChild; if (g) { c = c && f.nodeName(g, "tr"); for (var l = 0, m = this.length, n = m - 1; l < m; l++) d.call(c ? bl(this[l], g) : this[l], e.cacheable || m > 1 && l < n ? f.clone(h, !0, !0) : h) } k.length && f.each(k, br) } return this } }), f.buildFragment = function (a, b, d) { var e, g, h, i, j = a[0]; b && b[0] && (i = b[0].ownerDocument || b[0]), i.createDocumentFragment || (i = c), a.length === 1 && typeof j == "string" && j.length < 512 && i === c && j.charAt(0) === "<" && !be.test(j) && (f.support.checkClone || !bg.test(j)) && !f.support.unknownElems && bf.test(j) && (g = !0, h = f.fragments[j], h && h !== 1 && (e = h)), e || (e = i.createDocumentFragment(), f.clean(a, i, e, d)), g && (f.fragments[j] = h ? e : 1); return { fragment: e, cacheable: g } }, f.fragments = {}, f.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (a, b) { f.fn[a] = function (c) { var d = [], e = f(c), g = this.length === 1 && this[0].parentNode; if (g && g.nodeType === 11 && g.childNodes.length === 1 && e.length === 1) { e[b](this[0]); return this } for (var h = 0, i = e.length; h < i; h++) { var j = (h > 0 ? this.clone(!0) : this).get(); f(e[h])[b](j), d = d.concat(j) } return this.pushStack(d, a, e.selector) } }), f.extend({ clone: function (a, b, c) { var d = a.cloneNode(!0), e, g, h; if ((!f.support.noCloneEvent || !f.support.noCloneChecked) && (a.nodeType === 1 || a.nodeType === 11) && !f.isXMLDoc(a)) { bn(a, d), e = bo(a), g = bo(d); for (h = 0; e[h]; ++h) g[h] && bn(e[h], g[h]) } if (b) { bm(a, d); if (c) { e = bo(a), g = bo(d); for (h = 0; e[h]; ++h) bm(e[h], g[h]) } } e = g = null; return d }, clean: function (a, b, d, e) { var g; b = b || c, typeof b.createElement == "undefined" && (b = b.ownerDocument || b[0] && b[0].ownerDocument || c); var h = [], i; for (var j = 0, k; (k = a[j]) != null; j++) { typeof k == "number" && (k += ""); if (!k) continue; if (typeof k == "string") if (!bc.test(k)) k = b.createTextNode(k); else { k = k.replace(_, "<$1></$2>"); var l = (ba.exec(k) || ["", ""])[1].toLowerCase(), m = bj[l] || bj._default, n = m[0], o = b.createElement("div"); b === c ? bk.appendChild(o) : X(b).appendChild(o), o.innerHTML = m[1] + k + m[2]; while (n--) o = o.lastChild; if (!f.support.tbody) { var p = bb.test(k), q = l === "table" && !p ? o.firstChild && o.firstChild.childNodes : m[1] === "<table>" && !p ? o.childNodes : []; for (i = q.length - 1; i >= 0; --i) f.nodeName(q[i], "tbody") && !q[i].childNodes.length && q[i].parentNode.removeChild(q[i]) } !f.support.leadingWhitespace && $.test(k) && o.insertBefore(b.createTextNode($.exec(k)[0]), o.firstChild), k = o.childNodes } var r; if (!f.support.appendChecked) if (k[0] && typeof (r = k.length) == "number") for (i = 0; i < r; i++) bq(k[i]); else bq(k); k.nodeType ? h.push(k) : h = f.merge(h, k) } if (d) { g = function (a) { return !a.type || bh.test(a.type) }; for (j = 0; h[j]; j++) if (e && f.nodeName(h[j], "script") && (!h[j].type || h[j].type.toLowerCase() === "text/javascript")) e.push(h[j].parentNode ? h[j].parentNode.removeChild(h[j]) : h[j]); else { if (h[j].nodeType === 1) { var s = f.grep(h[j].getElementsByTagName("script"), g); h.splice.apply(h, [j + 1, 0].concat(s)) } d.appendChild(h[j]) } } return h }, cleanData: function (a) { var b, c, d = f.cache, e = f.event.special, g = f.support.deleteExpando; for (var h = 0, i; (i = a[h]) != null; h++) { if (i.nodeName && f.noData[i.nodeName.toLowerCase()]) continue; c = i[f.expando]; if (c) { b = d[c]; if (b && b.events) { for (var j in b.events) e[j] ? f.event.remove(i, j) : f.removeEvent(i, j, b.handle); b.handle && (b.handle.elem = null) } g ? delete i[f.expando] : i.removeAttribute && i.removeAttribute(f.expando), delete d[c] } } } }); var bs = /alpha\([^)]*\)/i, bt = /opacity=([^)]*)/, bu = /([A-Z]|^ms)/g, bv = /^-?\d+(?:px)?$/i, bw = /^-?\d/, bx = /^([\-+])=([\-+.\de]+)/, by = { position: "absolute", visibility: "hidden", display: "block" }, bz = ["Left", "Right"], bA = ["Top", "Bottom"], bB, bC, bD; f.fn.css = function (a, c) { if (arguments.length === 2 && c === b) return this; return f.access(this, a, c, !0, function (a, c, d) { return d !== b ? f.style(a, c, d) : f.css(a, c) }) }, f.extend({ cssHooks: { opacity: { get: function (a, b) { if (b) { var c = bB(a, "opacity", "opacity"); return c === "" ? "1" : c } return a.style.opacity } } }, cssNumber: { fillOpacity: !0, fontWeight: !0, lineHeight: !0, opacity: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { "float": f.support.cssFloat ? "cssFloat" : "styleFloat" }, style: function (a, c, d, e) { if (!!a && a.nodeType !== 3 && a.nodeType !== 8 && !!a.style) { var g, h, i = f.camelCase(c), j = a.style, k = f.cssHooks[i]; c = f.cssProps[i] || i; if (d === b) { if (k && "get" in k && (g = k.get(a, !1, e)) !== b) return g; return j[c] } h = typeof d, h === "string" && (g = bx.exec(d)) && (d = +(g[1] + 1) * +g[2] + parseFloat(f.css(a, c)), h = "number"); if (d == null || h === "number" && isNaN(d)) return; h === "number" && !f.cssNumber[i] && (d += "px"); if (!k || !("set" in k) || (d = k.set(a, d)) !== b) try { j[c] = d } catch (l) { } } }, css: function (a, c, d) { var e, g; c = f.camelCase(c), g = f.cssHooks[c], c = f.cssProps[c] || c, c === "cssFloat" && (c = "float"); if (g && "get" in g && (e = g.get(a, !0, d)) !== b) return e; if (bB) return bB(a, c) }, swap: function (a, b, c) { var d = {}; for (var e in b) d[e] = a.style[e], a.style[e] = b[e]; c.call(a); for (e in b) a.style[e] = d[e] } }), f.curCSS = f.css, f.each(["height", "width"], function (a, b) { f.cssHooks[b] = { get: function (a, c, d) { var e; if (c) { if (a.offsetWidth !== 0) return bE(a, b, d); f.swap(a, by, function () { e = bE(a, b, d) }); return e } }, set: function (a, b) { if (!bv.test(b)) return b; b = parseFloat(b); if (b >= 0) return b + "px" } } }), f.support.opacity || (f.cssHooks.opacity = { get: function (a, b) { return bt.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : b ? "1" : "" }, set: function (a, b) { var c = a.style, d = a.currentStyle, e = f.isNumeric(b) ? "alpha(opacity=" + b * 100 + ")" : "", g = d && d.filter || c.filter || ""; c.zoom = 1; if (b >= 1 && f.trim(g.replace(bs, "")) === "") { c.removeAttribute("filter"); if (d && !d.filter) return } c.filter = bs.test(g) ? g.replace(bs, e) : g + " " + e } }), f(function () { f.support.reliableMarginRight || (f.cssHooks.marginRight = { get: function (a, b) { var c; f.swap(a, { display: "inline-block" }, function () { b ? c = bB(a, "margin-right", "marginRight") : c = a.style.marginRight }); return c } }) }), c.defaultView && c.defaultView.getComputedStyle && (bC = function (a, c) { var d, e, g; c = c.replace(bu, "-$1").toLowerCase(); if (!(e = a.ownerDocument.defaultView)) return b; if (g = e.getComputedStyle(a, null)) d = g.getPropertyValue(c), d === "" && !f.contains(a.ownerDocument.documentElement, a) && (d = f.style(a, c)); return d }), c.documentElement.currentStyle && (bD = function (a, b) { var c, d, e, f = a.currentStyle && a.currentStyle[b], g = a.style; f === null && g && (e = g[b]) && (f = e), !bv.test(f) && bw.test(f) && (c = g.left, d = a.runtimeStyle && a.runtimeStyle.left, d && (a.runtimeStyle.left = a.currentStyle.left), g.left = b === "fontSize" ? "1em" : f || 0, f = g.pixelLeft + "px", g.left = c, d && (a.runtimeStyle.left = d)); return f === "" ? "auto" : f }), bB = bC || bD, f.expr && f.expr.filters && (f.expr.filters.hidden = function (a) { var b = a.offsetWidth, c = a.offsetHeight; return b === 0 && c === 0 || !f.support.reliableHiddenOffsets && (a.style && a.style.display || f.css(a, "display")) === "none" }, f.expr.filters.visible = function (a) { return !f.expr.filters.hidden(a) }); var bF = /%20/g, bG = /\[\]$/, bH = /\r?\n/g, bI = /#.*$/, bJ = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, bK = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i, bL = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, bM = /^(?:GET|HEAD)$/, bN = /^\/\//, bO = /\?/, bP = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, bQ = /^(?:select|textarea)/i, bR = /\s+/, bS = /([?&])_=[^&]*/, bT = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/, bU = f.fn.load, bV = {}, bW = {}, bX, bY, bZ = ["*/"] + ["*"]; try { bX = e.href } catch (b$) { bX = c.createElement("a"), bX.href = "", bX = bX.href } bY = bT.exec(bX.toLowerCase()) || [], f.fn.extend({ load: function (a, c, d) { if (typeof a != "string" && bU) return bU.apply(this, arguments); if (!this.length) return this; var e = a.indexOf(" "); if (e >= 0) { var g = a.slice(e, a.length); a = a.slice(0, e) } var h = "GET"; c && (f.isFunction(c) ? (d = c, c = b) : typeof c == "object" && (c = f.param(c, f.ajaxSettings.traditional), h = "POST")); var i = this; f.ajax({ url: a, type: h, dataType: "html", data: c, complete: function (a, b, c) { c = a.responseText, a.isResolved() && (a.done(function (a) { c = a }), i.html(g ? f("<div>").append(c.replace(bP, "")).find(g) : c)), d && i.each(d, [c, b, a]) } }); return this }, serialize: function () { return f.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { return this.elements ? f.makeArray(this.elements) : this }).filter(function () { return this.name && !this.disabled && (this.checked || bQ.test(this.nodeName) || bK.test(this.type)) }).map(function (a, b) { var c = f(this).val(); return c == null ? null : f.isArray(c) ? f.map(c, function (a, c) { return { name: b.name, value: a.replace(bH, "\r\n") } }) : { name: b.name, value: c.replace(bH, "\r\n") } }).get() } }), f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, b) { f.fn[b] = function (a) { return this.bind(b, a) } }), f.each(["get", "post"], function (a, c) { f[c] = function (a, d, e, g) { f.isFunction(d) && (g = g || e, e = d, d = b); return f.ajax({ type: c, url: a, data: d, success: e, dataType: g }) } }), f.extend({ getScript: function (a, c) { return f.get(a, b, c, "script") }, getJSON: function (a, b, c) { return f.get(a, b, c, "json") }, ajaxSetup: function (a, b) { b ? cb(a, f.ajaxSettings) : (b = a, a = f.ajaxSettings), cb(a, b); return a }, ajaxSettings: { url: bX, isLocal: bL.test(bY[1]), global: !0, type: "GET", contentType: "application/x-www-form-urlencoded", processData: !0, async: !0, accepts: { xml: "application/xml, text/xml", html: "text/html", text: "text/plain", json: "application/json, text/javascript", "*": bZ }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText" }, converters: { "* text": a.String, "text html": !0, "text json": f.parseJSON, "text xml": f.parseXML }, flatOptions: { context: !0, url: !0 } }, ajaxPrefilter: b_(bV), ajaxTransport: b_(bW), ajax: function (a, c) { function w(a, c, l, m) { if (s !== 2) { s = 2, q && clearTimeout(q), p = b, n = m || "", v.readyState = a > 0 ? 4 : 0; var o, r, u, w = c, x = l ? cd(d, v, l) : b, y, z; if (a >= 200 && a < 300 || a === 304) { if (d.ifModified) { if (y = v.getResponseHeader("Last-Modified")) f.lastModified[k] = y; if (z = v.getResponseHeader("Etag")) f.etag[k] = z } if (a === 304) w = "notmodified", o = !0; else try { r = ce(d, x), w = "success", o = !0 } catch (A) { w = "parsererror", u = A } } else { u = w; if (!w || a) w = "error", a < 0 && (a = 0) } v.status = a, v.statusText = "" + (c || w), o ? h.resolveWith(e, [r, w, v]) : h.rejectWith(e, [v, w, u]), v.statusCode(j), j = b, t && g.trigger("ajax" + (o ? "Success" : "Error"), [v, d, o ? r : u]), i.fireWith(e, [v, w]), t && (g.trigger("ajaxComplete", [v, d]), --f.active || f.event.trigger("ajaxStop")) } } typeof a == "object" && (c = a, a = b), c = c || {}; var d = f.ajaxSetup({}, c), e = d.context || d, g = e !== d && (e.nodeType || e instanceof f) ? f(e) : f.event, h = f.Deferred(), i = f.Callbacks("once memory"), j = d.statusCode || {}, k, l = {}, m = {}, n, o, p, q, r, s = 0, t, u, v = { readyState: 0, setRequestHeader: function (a, b) { if (!s) { var c = a.toLowerCase(); a = m[c] = m[c] || a, l[a] = b } return this }, getAllResponseHeaders: function () { return s === 2 ? n : null }, getResponseHeader: function (a) { var c; if (s === 2) { if (!o) { o = {}; while (c = bJ.exec(n)) o[c[1].toLowerCase()] = c[2] } c = o[a.toLowerCase()] } return c === b ? null : c }, overrideMimeType: function (a) { s || (d.mimeType = a); return this }, abort: function (a) { a = a || "abort", p && p.abort(a), w(0, a); return this } }; h.promise(v), v.success = v.done, v.error = v.fail, v.complete = i.add, v.statusCode = function (a) { if (a) { var b; if (s < 2) for (b in a) j[b] = [j[b], a[b]]; else b = a[v.status], v.then(b, b) } return this }, d.url = ((a || d.url) + "").replace(bI, "").replace(bN, bY[1] + "//"), d.dataTypes = f.trim(d.dataType || "*").toLowerCase().split(bR), d.crossDomain == null && (r = bT.exec(d.url.toLowerCase()), d.crossDomain = !(!r || r[1] == bY[1] && r[2] == bY[2] && (r[3] || (r[1] === "http:" ? 80 : 443)) == (bY[3] || (bY[1] === "http:" ? 80 : 443)))), d.data && d.processData && typeof d.data != "string" && (d.data = f.param(d.data, d.traditional)), ca(bV, d, c, v); if (s === 2) return !1; t = d.global, d.type = d.type.toUpperCase(), d.hasContent = !bM.test(d.type), t && f.active++ === 0 && f.event.trigger("ajaxStart"); if (!d.hasContent) { d.data && (d.url += (bO.test(d.url) ? "&" : "?") + d.data, delete d.data), k = d.url; if (d.cache === !1) { var x = f.now(), y = d.url.replace(bS, "$1_=" + x); d.url = y + (y === d.url ? (bO.test(d.url) ? "&" : "?") + "_=" + x : "") } } (d.data && d.hasContent && d.contentType !== !1 || c.contentType) && v.setRequestHeader("Content-Type", d.contentType), d.ifModified && (k = k || d.url, f.lastModified[k] && v.setRequestHeader("If-Modified-Since", f.lastModified[k]), f.etag[k] && v.setRequestHeader("If-None-Match", f.etag[k])), v.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + (d.dataTypes[0] !== "*" ? ", " + bZ + "; q=0.01" : "") : d.accepts["*"]); for (u in d.headers) v.setRequestHeader(u, d.headers[u]); if (d.beforeSend && (d.beforeSend.call(e, v, d) === !1 || s === 2)) { v.abort(); return !1 } for (u in { success: 1, error: 1, complete: 1 }) v[u](d[u]); p = ca(bW, d, c, v); if (!p) w(-1, "No Transport"); else { v.readyState = 1, t && g.trigger("ajaxSend", [v, d]), d.async && d.timeout > 0 && (q = setTimeout(function () { v.abort("timeout") }, d.timeout)); try { s = 1, p.send(l, w) } catch (z) { s < 2 ? w(-1, z) : f.error(z) } } return v }, param: function (a, c) { var d = [], e = function (a, b) { b = f.isFunction(b) ? b() : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b) }; c === b && (c = f.ajaxSettings.traditional); if (f.isArray(a) || a.jquery && !f.isPlainObject(a)) f.each(a, function () { e(this.name, this.value) }); else for (var g in a) cc(g, a[g], c, e); return d.join("&").replace(bF, "+") } }), f.extend({ active: 0, lastModified: {}, etag: {} }); var cf = f.now(), cg = /(\=)\?(&|$)|\?\?/i; f.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { return f.expando + "_" + cf++ } }), f.ajaxPrefilter("json jsonp", function (b, c, d) { var e = b.contentType === "application/x-www-form-urlencoded" && typeof b.data == "string"; if (b.dataTypes[0] === "jsonp" || b.jsonp !== !1 && (cg.test(b.url) || e && cg.test(b.data))) { var g, h = b.jsonpCallback = f.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, i = a[h], j = b.url, k = b.data, l = "$1" + h + "$2"; b.jsonp !== !1 && (j = j.replace(cg, l), b.url === j && (e && (k = k.replace(cg, l)), b.data === k && (j += (/\?/.test(j) ? "&" : "?") + b.jsonp + "=" + h))), b.url = j, b.data = k, a[h] = function (a) { g = [a] }, d.always(function () { a[h] = i, g && f.isFunction(i) && a[h](g[0]) }), b.converters["script json"] = function () { g || f.error(h + " was not called"); return g[0] }, b.dataTypes[0] = "json"; return "script" } }), f.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /javascript|ecmascript/ }, converters: { "text script": function (a) { f.globalEval(a); return a } } }), f.ajaxPrefilter("script", function (a) { a.cache === b && (a.cache = !1), a.crossDomain && (a.type = "GET", a.global = !1) }), f.ajaxTransport("script", function (a) { if (a.crossDomain) { var d, e = c.head || c.getElementsByTagName("head")[0] || c.documentElement; return { send: function (f, g) { d = c.createElement("script"), d.async = "async", a.scriptCharset && (d.charset = a.scriptCharset), d.src = a.url, d.onload = d.onreadystatechange = function (a, c) { if (c || !d.readyState || /loaded|complete/.test(d.readyState)) d.onload = d.onreadystatechange = null, e && d.parentNode && e.removeChild(d), d = b, c || g(200, "success") }, e.insertBefore(d, e.firstChild) }, abort: function () { d && d.onload(0, 1) } } } }); var ch = a.ActiveXObject ? function () { for (var a in cj) cj[a](0, 1) } : !1, ci = 0, cj; f.ajaxSettings.xhr = a.ActiveXObject ? function () { return !this.isLocal && ck() || cl() } : ck, function (a) { f.extend(f.support, { ajax: !!a, cors: !!a && "withCredentials" in a }) }(f.ajaxSettings.xhr()), f.support.ajax && f.ajaxTransport(function (c) { if (!c.crossDomain || f.support.cors) { var d; return { send: function (e, g) { var h = c.xhr(), i, j; c.username ? h.open(c.type, c.url, c.async, c.username, c.password) : h.open(c.type, c.url, c.async); if (c.xhrFields) for (j in c.xhrFields) h[j] = c.xhrFields[j]; c.mimeType && h.overrideMimeType && h.overrideMimeType(c.mimeType), !c.crossDomain && !e["X-Requested-With"] && (e["X-Requested-With"] = "XMLHttpRequest"); try { for (j in e) h.setRequestHeader(j, e[j]) } catch (k) { } h.send(c.hasContent && c.data || null), d = function (a, e) { var j, k, l, m, n; try { if (d && (e || h.readyState === 4)) { d = b, i && (h.onreadystatechange = f.noop, ch && delete cj[i]); if (e) h.readyState !== 4 && h.abort(); else { j = h.status, l = h.getAllResponseHeaders(), m = {}, n = h.responseXML, n && n.documentElement && (m.xml = n), m.text = h.responseText; try { k = h.statusText } catch (o) { k = "" } !j && c.isLocal && !c.crossDomain ? j = m.text ? 200 : 404 : j === 1223 && (j = 204) } } } catch (p) { e || g(-1, p) } m && g(j, k, m, l) }, !c.async || h.readyState === 4 ? d() : (i = ++ci, ch && (cj || (cj = {}, f(a).unload(ch)), cj[i] = d), h.onreadystatechange = d) }, abort: function () { d && d(0, 1) } } } }); var cm = {}, cn, co, cp = /^(?:toggle|show|hide)$/, cq = /^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i, cr, cs = [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity"]], ct; f.fn.extend({ show: function (a, b, c) { var d, e; if (a || a === 0) return this.animate(cw("show", 3), a, b, c); for (var g = 0, h = this.length; g < h; g++) d = this[g], d.style && (e = d.style.display, !f._data(d, "olddisplay") && e === "none" && (e = d.style.display = ""), e === "" && f.css(d, "display") === "none" && f._data(d, "olddisplay", cx(d.nodeName))); for (g = 0; g < h; g++) { d = this[g]; if (d.style) { e = d.style.display; if (e === "" || e === "none") d.style.display = f._data(d, "olddisplay") || "" } } return this }, hide: function (a, b, c) { if (a || a === 0) return this.animate(cw("hide", 3), a, b, c); var d, e, g = 0, h = this.length; for (; g < h; g++) d = this[g], d.style && (e = f.css(d, "display"), e !== "none" && !f._data(d, "olddisplay") && f._data(d, "olddisplay", e)); for (g = 0; g < h; g++) this[g].style && (this[g].style.display = "none"); return this }, _toggle: f.fn.toggle, toggle: function (a, b, c) { var d = typeof a == "boolean"; f.isFunction(a) && f.isFunction(b) ? this._toggle.apply(this, arguments) : a == null || d ? this.each(function () { var b = d ? a : f(this).is(":hidden"); f(this)[b ? "show" : "hide"]() }) : this.animate(cw("toggle", 3), a, b, c); return this }, fadeTo: function (a, b, c, d) { return this.filter(":hidden").css("opacity", 0).show().end().animate({ opacity: b }, a, c, d) }, animate: function (a, b, c, d) { function g() { e.queue === !1 && f._mark(this); var b = f.extend({}, e), c = this.nodeType === 1, d = c && f(this).is(":hidden"), g, h, i, j, k, l, m, n, o; b.animatedProperties = {}; for (i in a) { g = f.camelCase(i), i !== g && (a[g] = a[i], delete a[i]), h = a[g], f.isArray(h) ? (b.animatedProperties[g] = h[1], h = a[g] = h[0]) : b.animatedProperties[g] = b.specialEasing && b.specialEasing[g] || b.easing || "swing"; if (h === "hide" && d || h === "show" && !d) return b.complete.call(this); c && (g === "height" || g === "width") && (b.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY], f.css(this, "display") === "inline" && f.css(this, "float") === "none" && (!f.support.inlineBlockNeedsLayout || cx(this.nodeName) === "inline" ? this.style.display = "inline-block" : this.style.zoom = 1)) } b.overflow != null && (this.style.overflow = "hidden"); for (i in a) j = new f.fx(this, b, i), h = a[i], cp.test(h) ? (o = f._data(this, "toggle" + i) || (h === "toggle" ? d ? "show" : "hide" : 0), o ? (f._data(this, "toggle" + i, o === "show" ? "hide" : "show"), j[o]()) : j[h]()) : (k = cq.exec(h), l = j.cur(), k ? (m = parseFloat(k[2]), n = k[3] || (f.cssNumber[i] ? "" : "px"), n !== "px" && (f.style(this, i, (m || 1) + n), l = (m || 1) / j.cur() * l, f.style(this, i, l + n)), k[1] && (m = (k[1] === "-=" ? -1 : 1) * m + l), j.custom(l, m, n)) : j.custom(l, h, "")); return !0 } var e = f.speed(b, c, d); if (f.isEmptyObject(a)) return this.each(e.complete, [!1]); a = f.extend({}, a); return e.queue === !1 ? this.each(g) : this.queue(e.queue, g) }, stop: function (a, c, d) { typeof a != "string" && (d = c, c = a, a = b), c && a !== !1 && this.queue(a || "fx", []); return this.each(function () { function h(a, b, c) { var e = b[c]; f.removeData(a, c, !0), e.stop(d) } var b, c = !1, e = f.timers, g = f._data(this); d || f._unmark(!0, this); if (a == null) for (b in g) g[b].stop && b.indexOf(".run") === b.length - 4 && h(this, g, b); else g[b = a + ".run"] && g[b].stop && h(this, g, b); for (b = e.length; b--;) e[b].elem === this && (a == null || e[b].queue === a) && (d ? e[b](!0) : e[b].saveState(), c = !0, e.splice(b, 1)); (!d || !c) && f.dequeue(this, a) }) } }), f.each({ slideDown: cw("show", 1), slideUp: cw("hide", 1), slideToggle: cw("toggle", 1), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (a, b) { f.fn[a] = function (a, c, d) { return this.animate(b, a, c, d) } }), f.extend({ speed: function (a, b, c) { var d = a && typeof a == "object" ? f.extend({}, a) : { complete: c || !c && b || f.isFunction(a) && a, duration: a, easing: c && b || b && !f.isFunction(b) && b }; d.duration = f.fx.off ? 0 : typeof d.duration == "number" ? d.duration : d.duration in f.fx.speeds ? f.fx.speeds[d.duration] : f.fx.speeds._default; if (d.queue == null || d.queue === !0) d.queue = "fx"; d.old = d.complete, d.complete = function (a) { f.isFunction(d.old) && d.old.call(this), d.queue ? f.dequeue(this, d.queue) : a !== !1 && f._unmark(this) }; return d }, easing: { linear: function (a, b, c, d) { return c + d * a }, swing: function (a, b, c, d) { return (-Math.cos(a * Math.PI) / 2 + .5) * d + c } }, timers: [], fx: function (a, b, c) { this.options = b, this.elem = a, this.prop = c, b.orig = b.orig || {} } }), f.fx.prototype = { update: function () { this.options.step && this.options.step.call(this.elem, this.now, this), (f.fx.step[this.prop] || f.fx.step._default)(this) }, cur: function () { if (this.elem[this.prop] != null && (!this.elem.style || this.elem.style[this.prop] == null)) return this.elem[this.prop]; var a, b = f.css(this.elem, this.prop); return isNaN(a = parseFloat(b)) ? !b || b === "auto" ? 0 : b : a }, custom: function (a, c, d) { function h(a) { return e.step(a) } var e = this, g = f.fx; this.startTime = ct || cu(), this.end = c, this.now = this.start = a, this.pos = this.state = 0, this.unit = d || this.unit || (f.cssNumber[this.prop] ? "" : "px"), h.queue = this.options.queue, h.elem = this.elem, h.saveState = function () { e.options.hide && f._data(e.elem, "fxshow" + e.prop) === b && f._data(e.elem, "fxshow" + e.prop, e.start) }, h() && f.timers.push(h) && !cr && (cr = setInterval(g.tick, g.interval)) }, show: function () { var a = f._data(this.elem, "fxshow" + this.prop); this.options.orig[this.prop] = a || f.style(this.elem, this.prop), this.options.show = !0, a !== b ? this.custom(this.cur(), a) : this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur()), f(this.elem).show() }, hide: function () { this.options.orig[this.prop] = f._data(this.elem, "fxshow" + this.prop) || f.style(this.elem, this.prop), this.options.hide = !0, this.custom(this.cur(), 0) }, step: function (a) { var b, c, d, e = ct || cu(), g = !0, h = this.elem, i = this.options; if (a || e >= i.duration + this.startTime) { this.now = this.end, this.pos = this.state = 1, this.update(), i.animatedProperties[this.prop] = !0; for (b in i.animatedProperties) i.animatedProperties[b] !== !0 && (g = !1); if (g) { i.overflow != null && !f.support.shrinkWrapBlocks && f.each(["", "X", "Y"], function (a, b) { h.style["overflow" + b] = i.overflow[a] }), i.hide && f(h).hide(); if (i.hide || i.show) for (b in i.animatedProperties) f.style(h, b, i.orig[b]), f.removeData(h, "fxshow" + b, !0), f.removeData(h, "toggle" + b, !0); d = i.complete, d && (i.complete = !1, d.call(h)) } return !1 } i.duration == Infinity ? this.now = e : (c = e - this.startTime, this.state = c / i.duration, this.pos = f.easing[i.animatedProperties[this.prop]](this.state, c, 0, 1, i.duration), this.now = this.start + (this.end - this.start) * this.pos), this.update(); return !0 } }, f.extend(f.fx, { tick: function () { var a, b = f.timers, c = 0; for (; c < b.length; c++) a = b[c], !a() && b[c] === a && b.splice(c--, 1); b.length || f.fx.stop() }, interval: 13, stop: function () { clearInterval(cr), cr = null }, speeds: { slow: 600, fast: 200, _default: 400 }, step: { opacity: function (a) { f.style(a.elem, "opacity", a.now) }, _default: function (a) { a.elem.style && a.elem.style[a.prop] != null ? a.elem.style[a.prop] = a.now + a.unit : a.elem[a.prop] = a.now } } }), f.each(["width", "height"], function (a, b) { f.fx.step[b] = function (a) { f.style(a.elem, b, Math.max(0, a.now)) } }), f.expr && f.expr.filters && (f.expr.filters.animated = function (a) { return f.grep(f.timers, function (b) { return a === b.elem }).length }); var cy = /^t(?:able|d|h)$/i, cz = /^(?:body|html)$/i; "getBoundingClientRect" in c.documentElement ? f.fn.offset = function (a) { var b = this[0], c; if (a) return this.each(function (b) { f.offset.setOffset(this, a, b) }); if (!b || !b.ownerDocument) return null; if (b === b.ownerDocument.body) return f.offset.bodyOffset(b); try { c = b.getBoundingClientRect() } catch (d) { } var e = b.ownerDocument, g = e.documentElement; if (!c || !f.contains(g, b)) return c ? { top: c.top, left: c.left } : { top: 0, left: 0 }; var h = e.body, i = cA(e), j = g.clientTop || h.clientTop || 0, k = g.clientLeft || h.clientLeft || 0, l = i.pageYOffset || f.support.boxModel && g.scrollTop || h.scrollTop, m = i.pageXOffset || f.support.boxModel && g.scrollLeft || h.scrollLeft, n = c.top + l - j, o = c.left + m - k; return { top: n, left: o } } : f.fn.offset = function (a) { var b = this[0]; if (a) return this.each(function (b) { f.offset.setOffset(this, a, b) }); if (!b || !b.ownerDocument) return null; if (b === b.ownerDocument.body) return f.offset.bodyOffset(b); var c, d = b.offsetParent, e = b, g = b.ownerDocument, h = g.documentElement, i = g.body, j = g.defaultView, k = j ? j.getComputedStyle(b, null) : b.currentStyle, l = b.offsetTop, m = b.offsetLeft; while ((b = b.parentNode) && b !== i && b !== h) { if (f.support.fixedPosition && k.position === "fixed") break; c = j ? j.getComputedStyle(b, null) : b.currentStyle, l -= b.scrollTop, m -= b.scrollLeft, b === d && (l += b.offsetTop, m += b.offsetLeft, f.support.doesNotAddBorder && (!f.support.doesAddBorderForTableAndCells || !cy.test(b.nodeName)) && (l += parseFloat(c.borderTopWidth) || 0, m += parseFloat(c.borderLeftWidth) || 0), e = d, d = b.offsetParent), f.support.subtractsBorderForOverflowNotVisible && c.overflow !== "visible" && (l += parseFloat(c.borderTopWidth) || 0, m += parseFloat(c.borderLeftWidth) || 0), k = c } if (k.position === "relative" || k.position === "static") l += i.offsetTop, m += i.offsetLeft; f.support.fixedPosition && k.position === "fixed" && (l += Math.max(h.scrollTop, i.scrollTop), m += Math.max(h.scrollLeft, i.scrollLeft)); return { top: l, left: m } }, f.offset = { bodyOffset: function (a) { var b = a.offsetTop, c = a.offsetLeft; f.support.doesNotIncludeMarginInBodyOffset && (b += parseFloat(f.css(a, "marginTop")) || 0, c += parseFloat(f.css(a, "marginLeft")) || 0); return { top: b, left: c } }, setOffset: function (a, b, c) { var d = f.css(a, "position"); d === "static" && (a.style.position = "relative"); var e = f(a), g = e.offset(), h = f.css(a, "top"), i = f.css(a, "left"), j = (d === "absolute" || d === "fixed") && f.inArray("auto", [h, i]) > -1, k = {}, l = {}, m, n; j ? (l = e.position(), m = l.top, n = l.left) : (m = parseFloat(h) || 0, n = parseFloat(i) || 0), f.isFunction(b) && (b = b.call(a, c, g)), b.top != null && (k.top = b.top - g.top + m), b.left != null && (k.left = b.left - g.left + n), "using" in b ? b.using.call(a, k) : e.css(k) } }, f.fn.extend({ position: function () { if (!this[0]) return null; var a = this[0], b = this.offsetParent(), c = this.offset(), d = cz.test(b[0].nodeName) ? { top: 0, left: 0 } : b.offset(); c.top -= parseFloat(f.css(a, "marginTop")) || 0, c.left -= parseFloat(f.css(a, "marginLeft")) || 0, d.top += parseFloat(f.css(b[0], "borderTopWidth")) || 0, d.left += parseFloat(f.css(b[0], "borderLeftWidth")) || 0; return { top: c.top - d.top, left: c.left - d.left } }, offsetParent: function () { return this.map(function () { var a = this.offsetParent || c.body; while (a && !cz.test(a.nodeName) && f.css(a, "position") === "static") a = a.offsetParent; return a }) } }), f.each(["Left", "Top"], function (a, c) { var d = "scroll" + c; f.fn[d] = function (c) { var e, g; if (c === b) { e = this[0]; if (!e) return null; g = cA(e); return g ? "pageXOffset" in g ? g[a ? "pageYOffset" : "pageXOffset"] : f.support.boxModel && g.document.documentElement[d] || g.document.body[d] : e[d] } return this.each(function () { g = cA(this), g ? g.scrollTo(a ? f(g).scrollLeft() : c, a ? c : f(g).scrollTop()) : this[d] = c }) } }), f.each(["Height", "Width"], function (a, c) { var d = c.toLowerCase(); f.fn["inner" + c] = function () { var a = this[0]; return a ? a.style ? parseFloat(f.css(a, d, "padding")) : this[d]() : null }, f.fn["outer" + c] = function (a) { var b = this[0]; return b ? b.style ? parseFloat(f.css(b, d, a ? "margin" : "border")) : this[d]() : null }, f.fn[d] = function (a) { var e = this[0]; if (!e) return a == null ? null : this; if (f.isFunction(a)) return this.each(function (b) { var c = f(this); c[d](a.call(this, b, c[d]())) }); if (f.isWindow(e)) { var g = e.document.documentElement["client" + c], h = e.document.body; return e.document.compatMode === "CSS1Compat" && g || h && h["client" + c] || g } if (e.nodeType === 9) return Math.max(e.documentElement["client" + c], e.body["scroll" + c], e.documentElement["scroll" + c], e.body["offset" + c], e.documentElement["offset" + c]); if (a === b) { var i = f.css(e, d), j = parseFloat(i); return f.isNumeric(j) ? j : i } return this.css(d, typeof a == "string" ? a : a + "px") } }), a.jQuery = a.$ = f })(window);

/*!
 * accounting.js v0.4.1, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function (p, z) { function q(a) { return !!("" === a || a && a.charCodeAt && a.substr) } function m(a) { return u ? u(a) : "[object Array]" === v.call(a) } function r(a) { return "[object Object]" === v.call(a) } function s(a, b) { var d, a = a || {}, b = b || {}; for (d in b) b.hasOwnProperty(d) && null == a[d] && (a[d] = b[d]); return a } function j(a, b, d) { var c = [], e, h; if (!a) return c; if (w && a.map === w) return a.map(b, d); for (e = 0, h = a.length; e < h; e++) c[e] = b.call(d, a[e], e, a); return c } function n(a, b) { a = Math.round(Math.abs(a)); return isNaN(a) ? b : a } function x(a) { var b = c.settings.currency.format; "function" === typeof a && (a = a()); return q(a) && a.match("%v") ? { pos: a, neg: a.replace("-", "").replace("%v", "-%v"), zero: a } : !a || !a.pos || !a.pos.match("%v") ? !q(b) ? b : c.settings.currency.format = { pos: b, neg: b.replace("%v", "-%v"), zero: b } : a } var c = { version: "0.4.1", settings: { currency: { symbol: "$", format: "%s%v", decimal: ".", thousand: ",", precision: 2, grouping: 3 }, number: { precision: 0, grouping: 3, thousand: ",", decimal: "." } } }, w = Array.prototype.map, u = Array.isArray, v = Object.prototype.toString, o = c.unformat = c.parse = function (a, b) { if (m(a)) return j(a, function (a) { return o(a, b) }); a = a || 0; if ("number" === typeof a) return a; var b = b || ".", c = RegExp("[^0-9-" + b + "]", ["g"]), c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(b, ".")); return !isNaN(c) ? c : 0 }, y = c.toFixed = function (a, b) { var b = n(b, c.settings.number.precision), d = Math.pow(10, b); return (Math.round(c.unformat(a) * d) / d).toFixed(b) }, t = c.formatNumber = c.format = function (a, b, d, i) { if (m(a)) return j(a, function (a) { return t(a, b, d, i) }); var a = o(a), e = s(r(b) ? b : { precision: b, thousand: d, decimal: i }, c.settings.number), h = n(e.precision), f = 0 > a ? "-" : "", g = parseInt(y(Math.abs(a || 0), h), 10) + "", l = 3 < g.length ? g.length % 3 : 0; return f + (l ? g.substr(0, l) + e.thousand : "") + g.substr(l).replace(/(\d{3})(?=\d)/g, "$1" + e.thousand) + (h ? e.decimal + y(Math.abs(a), h).split(".")[1] : "") }, A = c.formatMoney = function (a, b, d, i, e, h) { if (m(a)) return j(a, function (a) { return A(a, b, d, i, e, h) }); var a = o(a), f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency), g = x(f.format); return (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal)) }; c.formatColumn = function (a, b, d, i, e, h) { if (!a) return []; var f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency), g = x(f.format), l = g.pos.indexOf("%s") < g.pos.indexOf("%v") ? !0 : !1, k = 0, a = j(a, function (a) { if (m(a)) return c.formatColumn(a, f); a = o(a); a = (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal)); if (a.length > k) k = a.length; return a }); return j(a, function (a) { return q(a) && a.length < k ? l ? a.replace(f.symbol, f.symbol + Array(k - a.length + 1).join(" ")) : Array(k - a.length + 1).join(" ") + a : a }) }; if ("undefined" !== typeof exports) { if ("undefined" !== typeof module && module.exports) exports = module.exports = c; exports.accounting = c } else "function" === typeof define && define.amd ? define([], function () { return c }) : (c.noConflict = function (a) { return function () { p.accounting = a; c.noConflict = z; return c } }(p.accounting), p.accounting = c) })(this);

//! moment.js
//! version : 2.5.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function (a) { function b(a, b) { return function (c) { return i(a.call(this, c), b) } } function c(a, b) { return function (c) { return this.lang().ordinal(a.call(this, c), b) } } function d() { } function e(a) { u(a), g(this, a) } function f(a) { var b = o(a), c = b.year || 0, d = b.month || 0, e = b.week || 0, f = b.day || 0, g = b.hour || 0, h = b.minute || 0, i = b.second || 0, j = b.millisecond || 0; this._milliseconds = +j + 1e3 * i + 6e4 * h + 36e5 * g, this._days = +f + 7 * e, this._months = +d + 12 * c, this._data = {}, this._bubble() } function g(a, b) { for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]); return b.hasOwnProperty("toString") && (a.toString = b.toString), b.hasOwnProperty("valueOf") && (a.valueOf = b.valueOf), a } function h(a) { return 0 > a ? Math.ceil(a) : Math.floor(a) } function i(a, b, c) { for (var d = Math.abs(a) + "", e = a >= 0; d.length < b;) d = "0" + d; return (e ? c ? "+" : "" : "-") + d } function j(a, b, c, d) { var e, f, g = b._milliseconds, h = b._days, i = b._months; g && a._d.setTime(+a._d + g * c), (h || i) && (e = a.minute(), f = a.hour()), h && a.date(a.date() + h * c), i && a.month(a.month() + i * c), g && !d && cb.updateOffset(a), (h || i) && (a.minute(e), a.hour(f)) } function k(a) { return "[object Array]" === Object.prototype.toString.call(a) } function l(a) { return "[object Date]" === Object.prototype.toString.call(a) || a instanceof Date } function m(a, b, c) { var d, e = Math.min(a.length, b.length), f = Math.abs(a.length - b.length), g = 0; for (d = 0; e > d; d++) (c && a[d] !== b[d] || !c && q(a[d]) !== q(b[d])) && g++; return g + f } function n(a) { if (a) { var b = a.toLowerCase().replace(/(.)s$/, "$1"); a = Qb[a] || Rb[b] || b } return a } function o(a) { var b, c, d = {}; for (c in a) a.hasOwnProperty(c) && (b = n(c), b && (d[b] = a[c])); return d } function p(b) { var c, d; if (0 === b.indexOf("week")) c = 7, d = "day"; else { if (0 !== b.indexOf("month")) return; c = 12, d = "month" } cb[b] = function (e, f) { var g, h, i = cb.fn._lang[b], j = []; if ("number" == typeof e && (f = e, e = a), h = function (a) { var b = cb().utc().set(d, a); return i.call(cb.fn._lang, b, e || "") }, null != f) return h(f); for (g = 0; c > g; g++) j.push(h(g)); return j } } function q(a) { var b = +a, c = 0; return 0 !== b && isFinite(b) && (c = b >= 0 ? Math.floor(b) : Math.ceil(b)), c } function r(a, b) { return new Date(Date.UTC(a, b + 1, 0)).getUTCDate() } function s(a) { return t(a) ? 366 : 365 } function t(a) { return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0 } function u(a) { var b; a._a && -2 === a._pf.overflow && (b = a._a[ib] < 0 || a._a[ib] > 11 ? ib : a._a[jb] < 1 || a._a[jb] > r(a._a[hb], a._a[ib]) ? jb : a._a[kb] < 0 || a._a[kb] > 23 ? kb : a._a[lb] < 0 || a._a[lb] > 59 ? lb : a._a[mb] < 0 || a._a[mb] > 59 ? mb : a._a[nb] < 0 || a._a[nb] > 999 ? nb : -1, a._pf._overflowDayOfYear && (hb > b || b > jb) && (b = jb), a._pf.overflow = b) } function v(a) { a._pf = { empty: !1, unusedTokens: [], unusedInput: [], overflow: -2, charsLeftOver: 0, nullInput: !1, invalidMonth: null, invalidFormat: !1, userInvalidated: !1, iso: !1 } } function w(a) { return null == a._isValid && (a._isValid = !isNaN(a._d.getTime()) && a._pf.overflow < 0 && !a._pf.empty && !a._pf.invalidMonth && !a._pf.nullInput && !a._pf.invalidFormat && !a._pf.userInvalidated, a._strict && (a._isValid = a._isValid && 0 === a._pf.charsLeftOver && 0 === a._pf.unusedTokens.length)), a._isValid } function x(a) { return a ? a.toLowerCase().replace("_", "-") : a } function y(a, b) { return b._isUTC ? cb(a).zone(b._offset || 0) : cb(a).local() } function z(a, b) { return b.abbr = a, ob[a] || (ob[a] = new d), ob[a].set(b), ob[a] } function A(a) { delete ob[a] } function B(a) { var b, c, d, e, f = 0, g = function (a) { if (!ob[a] && pb) try { require("./lang/" + a) } catch (b) { } return ob[a] }; if (!a) return cb.fn._lang; if (!k(a)) { if (c = g(a)) return c; a = [a] } for (; f < a.length;) { for (e = x(a[f]).split("-"), b = e.length, d = x(a[f + 1]), d = d ? d.split("-") : null; b > 0;) { if (c = g(e.slice(0, b).join("-"))) return c; if (d && d.length >= b && m(e, d, !0) >= b - 1) break; b-- } f++ } return cb.fn._lang } function C(a) { return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "") } function D(a) { var b, c, d = a.match(tb); for (b = 0, c = d.length; c > b; b++) d[b] = Vb[d[b]] ? Vb[d[b]] : C(d[b]); return function (e) { var f = ""; for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b]; return f } } function E(a, b) { return a.isValid() ? (b = F(b, a.lang()), Sb[b] || (Sb[b] = D(b)), Sb[b](a)) : a.lang().invalidDate() } function F(a, b) { function c(a) { return b.longDateFormat(a) || a } var d = 5; for (ub.lastIndex = 0; d >= 0 && ub.test(a) ;) a = a.replace(ub, c), ub.lastIndex = 0, d -= 1; return a } function G(a, b) { var c, d = b._strict; switch (a) { case "DDDD": return Gb; case "YYYY": case "GGGG": case "gggg": return d ? Hb : xb; case "YYYYYY": case "YYYYY": case "GGGGG": case "ggggg": return d ? Ib : yb; case "S": if (d) return Eb; case "SS": if (d) return Fb; case "SSS": case "DDD": return d ? Gb : wb; case "MMM": case "MMMM": case "dd": case "ddd": case "dddd": return Ab; case "a": case "A": return B(b._l)._meridiemParse; case "X": return Db; case "Z": case "ZZ": return Bb; case "T": return Cb; case "SSSS": return zb; case "MM": case "DD": case "YY": case "GG": case "gg": case "HH": case "hh": case "mm": case "ss": case "ww": case "WW": return d ? Fb : vb; case "M": case "D": case "d": case "H": case "h": case "m": case "s": case "w": case "W": case "e": case "E": return d ? Eb : vb; default: return c = new RegExp(O(N(a.replace("\\", "")), "i")) } } function H(a) { a = a || ""; var b = a.match(Bb) || [], c = b[b.length - 1] || [], d = (c + "").match(Nb) || ["-", 0, 0], e = +(60 * d[1]) + q(d[2]); return "+" === d[0] ? -e : e } function I(a, b, c) { var d, e = c._a; switch (a) { case "M": case "MM": null != b && (e[ib] = q(b) - 1); break; case "MMM": case "MMMM": d = B(c._l).monthsParse(b), null != d ? e[ib] = d : c._pf.invalidMonth = b; break; case "D": case "DD": null != b && (e[jb] = q(b)); break; case "DDD": case "DDDD": null != b && (c._dayOfYear = q(b)); break; case "YY": e[hb] = q(b) + (q(b) > 68 ? 1900 : 2e3); break; case "YYYY": case "YYYYY": case "YYYYYY": e[hb] = q(b); break; case "a": case "A": c._isPm = B(c._l).isPM(b); break; case "H": case "HH": case "h": case "hh": e[kb] = q(b); break; case "m": case "mm": e[lb] = q(b); break; case "s": case "ss": e[mb] = q(b); break; case "S": case "SS": case "SSS": case "SSSS": e[nb] = q(1e3 * ("0." + b)); break; case "X": c._d = new Date(1e3 * parseFloat(b)); break; case "Z": case "ZZ": c._useUTC = !0, c._tzm = H(b); break; case "w": case "ww": case "W": case "WW": case "d": case "dd": case "ddd": case "dddd": case "e": case "E": a = a.substr(0, 1); case "gg": case "gggg": case "GG": case "GGGG": case "GGGGG": a = a.substr(0, 2), b && (c._w = c._w || {}, c._w[a] = b) } } function J(a) { var b, c, d, e, f, g, h, i, j, k, l = []; if (!a._d) { for (d = L(a), a._w && null == a._a[jb] && null == a._a[ib] && (f = function (b) { var c = parseInt(b, 10); return b ? b.length < 3 ? c > 68 ? 1900 + c : 2e3 + c : c : null == a._a[hb] ? cb().weekYear() : a._a[hb] }, g = a._w, null != g.GG || null != g.W || null != g.E ? h = Y(f(g.GG), g.W || 1, g.E, 4, 1) : (i = B(a._l), j = null != g.d ? U(g.d, i) : null != g.e ? parseInt(g.e, 10) + i._week.dow : 0, k = parseInt(g.w, 10) || 1, null != g.d && j < i._week.dow && k++, h = Y(f(g.gg), k, j, i._week.doy, i._week.dow)), a._a[hb] = h.year, a._dayOfYear = h.dayOfYear), a._dayOfYear && (e = null == a._a[hb] ? d[hb] : a._a[hb], a._dayOfYear > s(e) && (a._pf._overflowDayOfYear = !0), c = T(e, 0, a._dayOfYear), a._a[ib] = c.getUTCMonth(), a._a[jb] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = l[b] = d[b]; for (; 7 > b; b++) a._a[b] = l[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b]; l[kb] += q((a._tzm || 0) / 60), l[lb] += q((a._tzm || 0) % 60), a._d = (a._useUTC ? T : S).apply(null, l) } } function K(a) { var b; a._d || (b = o(a._i), a._a = [b.year, b.month, b.day, b.hour, b.minute, b.second, b.millisecond], J(a)) } function L(a) { var b = new Date; return a._useUTC ? [b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDate()] : [b.getFullYear(), b.getMonth(), b.getDate()] } function M(a) { a._a = [], a._pf.empty = !0; var b, c, d, e, f, g = B(a._l), h = "" + a._i, i = h.length, j = 0; for (d = F(a._f, g).match(tb) || [], b = 0; b < d.length; b++) e = d[b], c = (h.match(G(e, a)) || [])[0], c && (f = h.substr(0, h.indexOf(c)), f.length > 0 && a._pf.unusedInput.push(f), h = h.slice(h.indexOf(c) + c.length), j += c.length), Vb[e] ? (c ? a._pf.empty = !1 : a._pf.unusedTokens.push(e), I(e, c, a)) : a._strict && !c && a._pf.unusedTokens.push(e); a._pf.charsLeftOver = i - j, h.length > 0 && a._pf.unusedInput.push(h), a._isPm && a._a[kb] < 12 && (a._a[kb] += 12), a._isPm === !1 && 12 === a._a[kb] && (a._a[kb] = 0), J(a), u(a) } function N(a) { return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (a, b, c, d, e) { return b || c || d || e }) } function O(a) { return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") } function P(a) { var b, c, d, e, f; if (0 === a._f.length) return a._pf.invalidFormat = !0, a._d = new Date(0 / 0), void 0; for (e = 0; e < a._f.length; e++) f = 0, b = g({}, a), v(b), b._f = a._f[e], M(b), w(b) && (f += b._pf.charsLeftOver, f += 10 * b._pf.unusedTokens.length, b._pf.score = f, (null == d || d > f) && (d = f, c = b)); g(a, c || b) } function Q(a) { var b, c = a._i, d = Jb.exec(c); if (d) { for (a._pf.iso = !0, b = 4; b > 0; b--) if (d[b]) { a._f = Lb[b - 1] + (d[6] || " "); break } for (b = 0; 4 > b; b++) if (Mb[b][1].exec(c)) { a._f += Mb[b][0]; break } c.match(Bb) && (a._f += "Z"), M(a) } else a._d = new Date(c) } function R(b) { var c = b._i, d = qb.exec(c); c === a ? b._d = new Date : d ? b._d = new Date(+d[1]) : "string" == typeof c ? Q(b) : k(c) ? (b._a = c.slice(0), J(b)) : l(c) ? b._d = new Date(+c) : "object" == typeof c ? K(b) : b._d = new Date(c) } function S(a, b, c, d, e, f, g) { var h = new Date(a, b, c, d, e, f, g); return 1970 > a && h.setFullYear(a), h } function T(a) { var b = new Date(Date.UTC.apply(null, arguments)); return 1970 > a && b.setUTCFullYear(a), b } function U(a, b) { if ("string" == typeof a) if (isNaN(a)) { if (a = b.weekdaysParse(a), "number" != typeof a) return null } else a = parseInt(a, 10); return a } function V(a, b, c, d, e) { return e.relativeTime(b || 1, !!c, a, d) } function W(a, b, c) { var d = gb(Math.abs(a) / 1e3), e = gb(d / 60), f = gb(e / 60), g = gb(f / 24), h = gb(g / 365), i = 45 > d && ["s", d] || 1 === e && ["m"] || 45 > e && ["mm", e] || 1 === f && ["h"] || 22 > f && ["hh", f] || 1 === g && ["d"] || 25 >= g && ["dd", g] || 45 >= g && ["M"] || 345 > g && ["MM", gb(g / 30)] || 1 === h && ["y"] || ["yy", h]; return i[2] = b, i[3] = a > 0, i[4] = c, V.apply({}, i) } function X(a, b, c) { var d, e = c - b, f = c - a.day(); return f > e && (f -= 7), e - 7 > f && (f += 7), d = cb(a).add("d", f), { week: Math.ceil(d.dayOfYear() / 7), year: d.year() } } function Y(a, b, c, d, e) { var f, g, h = new Date(i(a, 6, !0) + "-01-01").getUTCDay(); return c = null != c ? c : e, f = e - h + (h > d ? 7 : 0), g = 7 * (b - 1) + (c - e) + f + 1, { year: g > 0 ? a : a - 1, dayOfYear: g > 0 ? g : s(a - 1) + g } } function Z(a) { var b = a._i, c = a._f; return "undefined" == typeof a._pf && v(a), null === b ? cb.invalid({ nullInput: !0 }) : ("string" == typeof b && (a._i = b = B().preparse(b)), cb.isMoment(b) ? (a = g({}, b), a._d = new Date(+b._d)) : c ? k(c) ? P(a) : M(a) : R(a), new e(a)) } function $(a, b) { cb.fn[a] = cb.fn[a + "s"] = function (a) { var c = this._isUTC ? "UTC" : ""; return null != a ? (this._d["set" + c + b](a), cb.updateOffset(this), this) : this._d["get" + c + b]() } } function _(a) { cb.duration.fn[a] = function () { return this._data[a] } } function ab(a, b) { cb.duration.fn["as" + a] = function () { return +this / b } } function bb(a) { var b = !1, c = cb; "undefined" == typeof ender && (a ? (fb.moment = function () { return !b && console && console.warn && (b = !0, console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")), c.apply(null, arguments) }, g(fb.moment, c)) : fb.moment = cb) } for (var cb, db, eb = "2.5.0", fb = this, gb = Math.round, hb = 0, ib = 1, jb = 2, kb = 3, lb = 4, mb = 5, nb = 6, ob = {}, pb = "undefined" != typeof module && module.exports && "undefined" != typeof require, qb = /^\/?Date\((\-?\d+)/i, rb = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, sb = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/, tb = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g, ub = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g, vb = /\d\d?/, wb = /\d{1,3}/, xb = /\d{1,4}/, yb = /[+\-]?\d{1,6}/, zb = /\d+/, Ab = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, Bb = /Z|[\+\-]\d\d:?\d\d/gi, Cb = /T/i, Db = /[\+\-]?\d+(\.\d{1,3})?/, Eb = /\d/, Fb = /\d\d/, Gb = /\d{3}/, Hb = /\d{4}/, Ib = /[+\-]?\d{6}/, Jb = /^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, Kb = "YYYY-MM-DDTHH:mm:ssZ", Lb = ["YYYY-MM-DD", "GGGG-[W]WW", "GGGG-[W]WW-E", "YYYY-DDD"], Mb = [["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d{1,3}/], ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/], ["HH:mm", /(T| )\d\d:\d\d/], ["HH", /(T| )\d\d/]], Nb = /([\+\-]|\d\d)/gi, Ob = "Date|Hours|Minutes|Seconds|Milliseconds".split("|"), Pb = { Milliseconds: 1, Seconds: 1e3, Minutes: 6e4, Hours: 36e5, Days: 864e5, Months: 2592e6, Years: 31536e6 }, Qb = { ms: "millisecond", s: "second", m: "minute", h: "hour", d: "day", D: "date", w: "week", W: "isoWeek", M: "month", y: "year", DDD: "dayOfYear", e: "weekday", E: "isoWeekday", gg: "weekYear", GG: "isoWeekYear" }, Rb = { dayofyear: "dayOfYear", isoweekday: "isoWeekday", isoweek: "isoWeek", weekyear: "weekYear", isoweekyear: "isoWeekYear" }, Sb = {}, Tb = "DDD w W M D d".split(" "), Ub = "M D H h m s w W".split(" "), Vb = { M: function () { return this.month() + 1 }, MMM: function (a) { return this.lang().monthsShort(this, a) }, MMMM: function (a) { return this.lang().months(this, a) }, D: function () { return this.date() }, DDD: function () { return this.dayOfYear() }, d: function () { return this.day() }, dd: function (a) { return this.lang().weekdaysMin(this, a) }, ddd: function (a) { return this.lang().weekdaysShort(this, a) }, dddd: function (a) { return this.lang().weekdays(this, a) }, w: function () { return this.week() }, W: function () { return this.isoWeek() }, YY: function () { return i(this.year() % 100, 2) }, YYYY: function () { return i(this.year(), 4) }, YYYYY: function () { return i(this.year(), 5) }, YYYYYY: function () { var a = this.year(), b = a >= 0 ? "+" : "-"; return b + i(Math.abs(a), 6) }, gg: function () { return i(this.weekYear() % 100, 2) }, gggg: function () { return this.weekYear() }, ggggg: function () { return i(this.weekYear(), 5) }, GG: function () { return i(this.isoWeekYear() % 100, 2) }, GGGG: function () { return this.isoWeekYear() }, GGGGG: function () { return i(this.isoWeekYear(), 5) }, e: function () { return this.weekday() }, E: function () { return this.isoWeekday() }, a: function () { return this.lang().meridiem(this.hours(), this.minutes(), !0) }, A: function () { return this.lang().meridiem(this.hours(), this.minutes(), !1) }, H: function () { return this.hours() }, h: function () { return this.hours() % 12 || 12 }, m: function () { return this.minutes() }, s: function () { return this.seconds() }, S: function () { return q(this.milliseconds() / 100) }, SS: function () { return i(q(this.milliseconds() / 10), 2) }, SSS: function () { return i(this.milliseconds(), 3) }, SSSS: function () { return i(this.milliseconds(), 3) }, Z: function () { var a = -this.zone(), b = "+"; return 0 > a && (a = -a, b = "-"), b + i(q(a / 60), 2) + ":" + i(q(a) % 60, 2) }, ZZ: function () { var a = -this.zone(), b = "+"; return 0 > a && (a = -a, b = "-"), b + i(q(a / 60), 2) + i(q(a) % 60, 2) }, z: function () { return this.zoneAbbr() }, zz: function () { return this.zoneName() }, X: function () { return this.unix() }, Q: function () { return this.quarter() } }, Wb = ["months", "monthsShort", "weekdays", "weekdaysShort", "weekdaysMin"]; Tb.length;) db = Tb.pop(), Vb[db + "o"] = c(Vb[db], db); for (; Ub.length;) db = Ub.pop(), Vb[db + db] = b(Vb[db], 2); for (Vb.DDDD = b(Vb.DDD, 3), g(d.prototype, { set: function (a) { var b, c; for (c in a) b = a[c], "function" == typeof b ? this[c] = b : this["_" + c] = b }, _months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), months: function (a) { return this._months[a.month()] }, _monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), monthsShort: function (a) { return this._monthsShort[a.month()] }, monthsParse: function (a) { var b, c, d; for (this._monthsParse || (this._monthsParse = []), b = 0; 12 > b; b++) if (this._monthsParse[b] || (c = cb.utc([2e3, b]), d = "^" + this.months(c, "") + "|^" + this.monthsShort(c, ""), this._monthsParse[b] = new RegExp(d.replace(".", ""), "i")), this._monthsParse[b].test(a)) return b }, _weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), weekdays: function (a) { return this._weekdays[a.day()] }, _weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), weekdaysShort: function (a) { return this._weekdaysShort[a.day()] }, _weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), weekdaysMin: function (a) { return this._weekdaysMin[a.day()] }, weekdaysParse: function (a) { var b, c, d; for (this._weekdaysParse || (this._weekdaysParse = []), b = 0; 7 > b; b++) if (this._weekdaysParse[b] || (c = cb([2e3, 1]).day(b), d = "^" + this.weekdays(c, "") + "|^" + this.weekdaysShort(c, "") + "|^" + this.weekdaysMin(c, ""), this._weekdaysParse[b] = new RegExp(d.replace(".", ""), "i")), this._weekdaysParse[b].test(a)) return b }, _longDateFormat: { LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D YYYY", LLL: "MMMM D YYYY LT", LLLL: "dddd, MMMM D YYYY LT" }, longDateFormat: function (a) { var b = this._longDateFormat[a]; return !b && this._longDateFormat[a.toUpperCase()] && (b = this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (a) { return a.slice(1) }), this._longDateFormat[a] = b), b }, isPM: function (a) { return "p" === (a + "").toLowerCase().charAt(0) }, _meridiemParse: /[ap]\.?m?\.?/i, meridiem: function (a, b, c) { return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM" }, _calendar: { sameDay: "[Today at] LT", nextDay: "[Tomorrow at] LT", nextWeek: "dddd [at] LT", lastDay: "[Yesterday at] LT", lastWeek: "[Last] dddd [at] LT", sameElse: "L" }, calendar: function (a, b) { var c = this._calendar[a]; return "function" == typeof c ? c.apply(b) : c }, _relativeTime: { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" }, relativeTime: function (a, b, c, d) { var e = this._relativeTime[c]; return "function" == typeof e ? e(a, b, c, d) : e.replace(/%d/i, a) }, pastFuture: function (a, b) { var c = this._relativeTime[a > 0 ? "future" : "past"]; return "function" == typeof c ? c(b) : c.replace(/%s/i, b) }, ordinal: function (a) { return this._ordinal.replace("%d", a) }, _ordinal: "%d", preparse: function (a) { return a }, postformat: function (a) { return a }, week: function (a) { return X(a, this._week.dow, this._week.doy).week }, _week: { dow: 0, doy: 6 }, _invalidDate: "Invalid date", invalidDate: function () { return this._invalidDate } }), cb = function (b, c, d, e) { return "boolean" == typeof d && (e = d, d = a), Z({ _i: b, _f: c, _l: d, _strict: e, _isUTC: !1 }) }, cb.utc = function (b, c, d, e) { var f; return "boolean" == typeof d && (e = d, d = a), f = Z({ _useUTC: !0, _isUTC: !0, _l: d, _i: b, _f: c, _strict: e }).utc() }, cb.unix = function (a) { return cb(1e3 * a) }, cb.duration = function (a, b) { var c, d, e, g = a, h = null; return cb.isDuration(a) ? g = { ms: a._milliseconds, d: a._days, M: a._months } : "number" == typeof a ? (g = {}, b ? g[b] = a : g.milliseconds = a) : (h = rb.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = { y: 0, d: q(h[jb]) * c, h: q(h[kb]) * c, m: q(h[lb]) * c, s: q(h[mb]) * c, ms: q(h[nb]) * c }) : (h = sb.exec(a)) && (c = "-" === h[1] ? -1 : 1, e = function (a) { var b = a && parseFloat(a.replace(",", ".")); return (isNaN(b) ? 0 : b) * c }, g = { y: e(h[2]), M: e(h[3]), d: e(h[4]), h: e(h[5]), m: e(h[6]), s: e(h[7]), w: e(h[8]) }), d = new f(g), cb.isDuration(a) && a.hasOwnProperty("_lang") && (d._lang = a._lang), d }, cb.version = eb, cb.defaultFormat = Kb, cb.updateOffset = function () { }, cb.lang = function (a, b) { var c; return a ? (b ? z(x(a), b) : null === b ? (A(a), a = "en") : ob[a] || B(a), c = cb.duration.fn._lang = cb.fn._lang = B(a), c._abbr) : cb.fn._lang._abbr }, cb.langData = function (a) { return a && a._lang && a._lang._abbr && (a = a._lang._abbr), B(a) }, cb.isMoment = function (a) { return a instanceof e }, cb.isDuration = function (a) { return a instanceof f }, db = Wb.length - 1; db >= 0; --db) p(Wb[db]); for (cb.normalizeUnits = function (a) { return n(a) }, cb.invalid = function (a) { var b = cb.utc(0 / 0); return null != a ? g(b._pf, a) : b._pf.userInvalidated = !0, b }, cb.parseZone = function (a) { return cb(a).parseZone() }, g(cb.fn = e.prototype, { clone: function () { return cb(this) }, valueOf: function () { return +this._d + 6e4 * (this._offset || 0) }, unix: function () { return Math.floor(+this / 1e3) }, toString: function () { return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ") }, toDate: function () { return this._offset ? new Date(+this) : this._d }, toISOString: function () { var a = cb(this).utc(); return 0 < a.year() && a.year() <= 9999 ? E(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : E(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]") }, toArray: function () { var a = this; return [a.year(), a.month(), a.date(), a.hours(), a.minutes(), a.seconds(), a.milliseconds()] }, isValid: function () { return w(this) }, isDSTShifted: function () { return this._a ? this.isValid() && m(this._a, (this._isUTC ? cb.utc(this._a) : cb(this._a)).toArray()) > 0 : !1 }, parsingFlags: function () { return g({}, this._pf) }, invalidAt: function () { return this._pf.overflow }, utc: function () { return this.zone(0) }, local: function () { return this.zone(0), this._isUTC = !1, this }, format: function (a) { var b = E(this, a || cb.defaultFormat); return this.lang().postformat(b) }, add: function (a, b) { var c; return c = "string" == typeof a ? cb.duration(+b, a) : cb.duration(a, b), j(this, c, 1), this }, subtract: function (a, b) { var c; return c = "string" == typeof a ? cb.duration(+b, a) : cb.duration(a, b), j(this, c, -1), this }, diff: function (a, b, c) { var d, e, f = y(a, this), g = 6e4 * (this.zone() - f.zone()); return b = n(b), "year" === b || "month" === b ? (d = 432e5 * (this.daysInMonth() + f.daysInMonth()), e = 12 * (this.year() - f.year()) + (this.month() - f.month()), e += (this - cb(this).startOf("month") - (f - cb(f).startOf("month"))) / d, e -= 6e4 * (this.zone() - cb(this).startOf("month").zone() - (f.zone() - cb(f).startOf("month").zone())) / d, "year" === b && (e /= 12)) : (d = this - f, e = "second" === b ? d / 1e3 : "minute" === b ? d / 6e4 : "hour" === b ? d / 36e5 : "day" === b ? (d - g) / 864e5 : "week" === b ? (d - g) / 6048e5 : d), c ? e : h(e) }, from: function (a, b) { return cb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b) }, fromNow: function (a) { return this.from(cb(), a) }, calendar: function () { var a = y(cb(), this).startOf("day"), b = this.diff(a, "days", !0), c = -6 > b ? "sameElse" : -1 > b ? "lastWeek" : 0 > b ? "lastDay" : 1 > b ? "sameDay" : 2 > b ? "nextDay" : 7 > b ? "nextWeek" : "sameElse"; return this.format(this.lang().calendar(c, this)) }, isLeapYear: function () { return t(this.year()) }, isDST: function () { return this.zone() < this.clone().month(0).zone() || this.zone() < this.clone().month(5).zone() }, day: function (a) { var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay(); return null != a ? (a = U(a, this.lang()), this.add({ d: a - b })) : b }, month: function (a) { var b, c = this._isUTC ? "UTC" : ""; return null != a ? "string" == typeof a && (a = this.lang().monthsParse(a), "number" != typeof a) ? this : (b = this.date(), this.date(1), this._d["set" + c + "Month"](a), this.date(Math.min(b, this.daysInMonth())), cb.updateOffset(this), this) : this._d["get" + c + "Month"]() }, startOf: function (a) { switch (a = n(a)) { case "year": this.month(0); case "month": this.date(1); case "week": case "isoWeek": case "day": this.hours(0); case "hour": this.minutes(0); case "minute": this.seconds(0); case "second": this.milliseconds(0) } return "week" === a ? this.weekday(0) : "isoWeek" === a && this.isoWeekday(1), this }, endOf: function (a) { return a = n(a), this.startOf(a).add("isoWeek" === a ? "week" : a, 1).subtract("ms", 1) }, isAfter: function (a, b) { return b = "undefined" != typeof b ? b : "millisecond", +this.clone().startOf(b) > +cb(a).startOf(b) }, isBefore: function (a, b) { return b = "undefined" != typeof b ? b : "millisecond", +this.clone().startOf(b) < +cb(a).startOf(b) }, isSame: function (a, b) { return b = b || "ms", +this.clone().startOf(b) === +y(a, this).startOf(b) }, min: function (a) { return a = cb.apply(null, arguments), this > a ? this : a }, max: function (a) { return a = cb.apply(null, arguments), a > this ? this : a }, zone: function (a) { var b = this._offset || 0; return null == a ? this._isUTC ? b : this._d.getTimezoneOffset() : ("string" == typeof a && (a = H(a)), Math.abs(a) < 16 && (a = 60 * a), this._offset = a, this._isUTC = !0, b !== a && j(this, cb.duration(b - a, "m"), 1, !0), this) }, zoneAbbr: function () { return this._isUTC ? "UTC" : "" }, zoneName: function () { return this._isUTC ? "Coordinated Universal Time" : "" }, parseZone: function () { return this._tzm ? this.zone(this._tzm) : "string" == typeof this._i && this.zone(this._i), this }, hasAlignedHourOffset: function (a) { return a = a ? cb(a).zone() : 0, (this.zone() - a) % 60 === 0 }, daysInMonth: function () { return r(this.year(), this.month()) }, dayOfYear: function (a) { var b = gb((cb(this).startOf("day") - cb(this).startOf("year")) / 864e5) + 1; return null == a ? b : this.add("d", a - b) }, quarter: function () { return Math.ceil((this.month() + 1) / 3) }, weekYear: function (a) { var b = X(this, this.lang()._week.dow, this.lang()._week.doy).year; return null == a ? b : this.add("y", a - b) }, isoWeekYear: function (a) { var b = X(this, 1, 4).year; return null == a ? b : this.add("y", a - b) }, week: function (a) { var b = this.lang().week(this); return null == a ? b : this.add("d", 7 * (a - b)) }, isoWeek: function (a) { var b = X(this, 1, 4).week; return null == a ? b : this.add("d", 7 * (a - b)) }, weekday: function (a) { var b = (this.day() + 7 - this.lang()._week.dow) % 7; return null == a ? b : this.add("d", a - b) }, isoWeekday: function (a) { return null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7) }, get: function (a) { return a = n(a), this[a]() }, set: function (a, b) { return a = n(a), "function" == typeof this[a] && this[a](b), this }, lang: function (b) { return b === a ? this._lang : (this._lang = B(b), this) } }), db = 0; db < Ob.length; db++) $(Ob[db].toLowerCase().replace(/s$/, ""), Ob[db]); $("year", "FullYear"), cb.fn.days = cb.fn.day, cb.fn.months = cb.fn.month, cb.fn.weeks = cb.fn.week, cb.fn.isoWeeks = cb.fn.isoWeek, cb.fn.toJSON = cb.fn.toISOString, g(cb.duration.fn = f.prototype, { _bubble: function () { var a, b, c, d, e = this._milliseconds, f = this._days, g = this._months, i = this._data; i.milliseconds = e % 1e3, a = h(e / 1e3), i.seconds = a % 60, b = h(a / 60), i.minutes = b % 60, c = h(b / 60), i.hours = c % 24, f += h(c / 24), i.days = f % 30, g += h(f / 30), i.months = g % 12, d = h(g / 12), i.years = d }, weeks: function () { return h(this.days() / 7) }, valueOf: function () { return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * q(this._months / 12) }, humanize: function (a) { var b = +this, c = W(b, !a, this.lang()); return a && (c = this.lang().pastFuture(b, c)), this.lang().postformat(c) }, add: function (a, b) { var c = cb.duration(a, b); return this._milliseconds += c._milliseconds, this._days += c._days, this._months += c._months, this._bubble(), this }, subtract: function (a, b) { var c = cb.duration(a, b); return this._milliseconds -= c._milliseconds, this._days -= c._days, this._months -= c._months, this._bubble(), this }, get: function (a) { return a = n(a), this[a.toLowerCase() + "s"]() }, as: function (a) { return a = n(a), this["as" + a.charAt(0).toUpperCase() + a.slice(1) + "s"]() }, lang: cb.fn.lang, toIsoString: function () { var a = Math.abs(this.years()), b = Math.abs(this.months()), c = Math.abs(this.days()), d = Math.abs(this.hours()), e = Math.abs(this.minutes()), f = Math.abs(this.seconds() + this.milliseconds() / 1e3); return this.asSeconds() ? (this.asSeconds() < 0 ? "-" : "") + "P" + (a ? a + "Y" : "") + (b ? b + "M" : "") + (c ? c + "D" : "") + (d || e || f ? "T" : "") + (d ? d + "H" : "") + (e ? e + "M" : "") + (f ? f + "S" : "") : "P0D" } }); for (db in Pb) Pb.hasOwnProperty(db) && (ab(db, Pb[db]), _(db.toLowerCase())); ab("Weeks", 6048e5), cb.duration.fn.asMonths = function () { return (+this - 31536e6 * this.years()) / 2592e6 + 12 * this.years() }, cb.lang("en", { ordinal: function (a) { var b = a % 10, c = 1 === q(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th"; return a + c } }), pb ? (module.exports = cb, bb(!0)) : "function" == typeof define && define.amd ? define("moment", function (b, c, d) { return d.config && d.config() && d.config().noGlobal !== !0 && bb(d.config().noGlobal === a), cb }) : bb() }).call(this);

/*!
 * jQuery UI 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a,b){var d=a.nodeName.toLowerCase();if("area"===d){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&l(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&l(a)}function l(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,m,n){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(m)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(n)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){return k(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var b=c.attr(a,
"tabindex"),d=isNaN(b);return(d||b>=0)&&k(a,!d)}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&
c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{b(d).triggerHandler("remove")}catch(e){}k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(d){}});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=
function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):
d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=
b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b){var d=false;b(document).mouseup(function(){d=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===b.data(c.target,a.widgetName+".preventClickEvent")){b.removeData(c.target,a.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,f=a.which==1,g=typeof this.options.cancel=="string"&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:false;if(!f||g||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}true===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return c._mouseMove(e)};this._mouseUpDelegate=function(e){return c._mouseUp(e)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=true}},_mouseMove:function(a){if(b.browser.msie&&
!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Position 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=
m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);
;/*
 * jQuery UI Draggable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(b.iframeFix)d(b.iframeFix===true?"iframe":b.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var b=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=
false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||
!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=d(a.containment);var b=a[0];if(b){a.offset();var c=d(b).css("overflow")!=
"hidden";this.containment=[(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0),(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0),(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),
10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+
this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){g=this.relative_container.offset();g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else g=this.containment;if(a.pageX-this.offset.click.left<g[0])e=g[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<g[1])h=g[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>g[2])e=g[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>g[3])h=g[3]+this.offset.click.top}if(b.grid){h=b.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-b.grid[1]:h+b.grid[1]:h;e=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/
b.grid[0])*b.grid[0]:this.originalPageX;e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<g[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,
c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.16"});d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var h=d.data(this,"sortable");if(h&&!h.options.disabled){c.sortables.push({instance:h,shouldRevert:h.options.revert});
h.refreshPositions();h._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;
c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=
a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!=
"x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<
c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-
c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,h=b.offset.left,g=h+c.helperProportions.width,n=b.offset.top,o=n+c.helperProportions.height,i=c.snapElements.length-1;i>=0;i--){var j=c.snapElements[i].left,l=j+c.snapElements[i].width,k=c.snapElements[i].top,m=k+c.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&
o<m+e){if(f.snapMode!="inner"){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left}var t=
p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(k-n)<=e;q=Math.abs(m-o)<=e;r=Math.abs(j-h)<=e;s=Math.abs(l-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m-c.helperProportions.height,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[i].snapping&&
(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=p||q||r||s||t}else{c.snapElements[i].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),
10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;/*
 * jQuery UI Droppable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(c){return c.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){if(a=="accept")this.accept=d.isFunction(b)?b:function(c){return c.is(b)};d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(b))}},_out:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(b))}},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=
d.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==c.options.scope&&g.accept.call(g.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(g,{offset:g.element.offset()}),g.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(c));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.16"});d.ui.intersect=function(a,b,c){if(!b.offset)return false;var e=(a.positionAbs||a.position.absolute).left,g=e+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,h=f+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;
switch(c){case "fit":return i<=e&&g<=k&&j<=f&&h<=l;case "intersect":return i<e+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<f+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l)&&(e>=
i&&e<=k||g>=i&&g<=k||e<i&&g>k);default:return false}};d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],e=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<c.length;f++)if(!(c[f].options.disabled||a&&!c[f].accept.call(c[f].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[f].element[0]){c[f].proportions.height=0;continue a}c[f].visible=c[f].element.css("display")!=
"none";if(c[f].visible){e=="mousedown"&&c[f]._activate.call(c[f],b);c[f].offset=c[f].element.offset();c[f].proportions={width:c[f].element[0].offsetWidth,height:c[f].element[0].offsetHeight}}}},drop:function(a,b){var c=false;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance))c=c||this._drop.call(this,b);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||
a.element)){this.isout=1;this.isover=0;this._deactivate.call(this,b)}}});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var c=d.ui.intersect(a,this,this.options.tolerance);
if(c=!c&&this.isover==1?"isout":c&&this.isover==0?"isover":null){var e;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){e=d.data(g[0],"droppable");e.greedyChild=c=="isover"?1:0}}if(e&&c=="isover"){e.isover=0;e.isout=1;e._out.call(e,b)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,b);if(e&&c=="isout"){e.isout=0;e.isover=1;e._over.call(e,b)}}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);
;/*
 * jQuery UI Resizable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var c=this.handles.split(",");this.handles={};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle '+("ui-resizable-"+f)+'"></div>');/sw|se|ne|nw/.test(f)&&g.css({zIndex:++a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(h){h=h||this.element;for(var i in this.handles){if(this.handles[i].constructor==
String)this.handles[i]=e(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var j=e(this.handles[i],this.element),l=0;l=/sw|ne|nw|se|n|s/.test(i)?j.outerHeight():j.outerWidth();j=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");h.css(j,l);this._proportionallyResize()}e(this.handles[i])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!b.resizing){if(this.className)var h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=h&&h[1]?h[1]:"se"}});if(a.autoHide){this._handles.hide();e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled)if(!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var b=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=
false;for(var c in this.handles)if(e(this.handles[c])[0]==b.target)a=true;return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};if(d.is(".ui-draggable")||/absolute/.test(d.css("position")))d.css({position:"absolute",top:c.top,left:c.left});e.browser.opera&&/relative/.test(d.css("position"))&&d.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();c=m(this.helper.css("left"));var f=m(this.helper.css("top"));if(a.containment){c+=e(a.containment).scrollLeft()||0;f+=e(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff=
{width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof a.aspectRatio=="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",a=="auto"?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];
if(!d)return false;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return false},
_mouseStop:function(b){this.resizing=false;var a=this.options,c=this;if(this._helper){var d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName);d=f&&e.ui.hasScroll(d[0],"left")?0:c.sizeDiff.height;f=f?0:c.sizeDiff.width;f={width:c.helper.width()-f,height:c.helper.height()-d};d=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var g=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;a.animate||this.element.css(e.extend(f,
{top:g,left:d}));c.helper.height(c.size.height);c.helper.width(c.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(b){var a=this.options,c,d,f;a={minWidth:k(a.minWidth)?a.minWidth:0,maxWidth:k(a.maxWidth)?a.maxWidth:Infinity,minHeight:k(a.minHeight)?a.minHeight:0,maxHeight:k(a.maxHeight)?a.maxHeight:
Infinity};if(this._aspectRatio||b){b=a.minHeight*this.aspectRatio;d=a.minWidth/this.aspectRatio;c=a.maxHeight*this.aspectRatio;f=a.maxWidth/this.aspectRatio;if(b>a.minWidth)a.minWidth=b;if(d>a.minHeight)a.minHeight=d;if(c<a.maxWidth)a.maxWidth=c;if(f<a.maxHeight)a.maxHeight=f}this._vBoundaries=a},_updateCache:function(b){this.offset=this.helper.offset();if(k(b.left))this.position.left=b.left;if(k(b.top))this.position.top=b.top;if(k(b.height))this.size.height=b.height;if(k(b.width))this.size.width=
b.width},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;if(k(b.height))b.width=b.height*this.aspectRatio;else if(k(b.width))b.height=b.width/this.aspectRatio;if(d=="sw"){b.left=a.left+(c.width-b.width);b.top=null}if(d=="nw"){b.top=a.top+(c.height-b.height);b.left=a.left+(c.width-b.width)}return b},_respectSize:function(b){var a=this._vBoundaries,c=this.axis,d=k(b.width)&&a.maxWidth&&a.maxWidth<b.width,f=k(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=k(b.width)&&a.minWidth&&
a.minWidth>b.width,h=k(b.height)&&a.minHeight&&a.minHeight>b.height;if(g)b.width=a.minWidth;if(h)b.height=a.minHeight;if(d)b.width=a.maxWidth;if(f)b.height=a.maxHeight;var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,l=/sw|nw|w/.test(c);c=/nw|ne|n/.test(c);if(g&&l)b.left=i-a.minWidth;if(d&&l)b.left=i-a.maxWidth;if(h&&c)b.top=j-a.minHeight;if(f&&c)b.top=j-a.maxHeight;if((a=!b.width&&!b.height)&&!b.left&&b.top)b.top=null;else if(a&&!b.top&&b.left)b.left=
null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(g,h){g=parseInt(g,10)||
0;h=parseInt(f[h],10)||0;return g+h})}e.browser.msie&&(e(b).is(":hidden")||e(b).parents(":hidden").length)||c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var a=e.browser.msie&&e.browser.version<7,c=a?1:0;a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+
c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);
b!="resize"&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.16"});e.ui.plugin.add("resizable","alsoResize",{start:function(){var b=e(this).data("resizable").options,a=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),
10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10),position:d.css("position")})})};if(typeof b.alsoResize=="object"&&!b.alsoResize.parentNode)if(b.alsoResize.length){b.alsoResize=b.alsoResize[0];a(b.alsoResize)}else e.each(b.alsoResize,function(c){a(c)});else a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable");b=c.options;var d=c.originalSize,f=c.originalPosition,g={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-
f.top||0,left:c.position.left-f.left||0},h=function(i,j){e(i).each(function(){var l=e(this),q=e(this).data("resizable-alsoresize"),p={},r=j&&j.length?j:l.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(n,o){if((n=(q[o]||0)+(g[o]||0))&&n>=0)p[o]=n||null});if(e.browser.opera&&/relative/.test(l.css("position"))){c._revertToRelativePosition=true;l.css({position:"absolute",top:"auto",left:"auto"})}l.css(p)})};typeof b.alsoResize=="object"&&!b.alsoResize.nodeType?
e.each(b.alsoResize,function(i,j){h(i,j)}):h(b.alsoResize)},stop:function(){var b=e(this).data("resizable"),a=b.options,c=function(d){e(d).each(function(){var f=e(this);f.css({position:f.data("resizable-alsoresize").position})})};if(b._revertToRelativePosition){b._revertToRelativePosition=false;typeof a.alsoResize=="object"&&!a.alsoResize.nodeType?e.each(a.alsoResize,function(d){c(d)}):c(a.alsoResize)}e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=
e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height;f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g};g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||null;var h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,
step:function(){var i={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:i.width,height:i.height});a._updateCache(i);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c){b.containerElement=
e(a);if(/document/.test(c)||c==document){b.containerOffset={left:0,top:0};b.containerPosition={left:0,top:0};b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(i,j){f[i]=m(d.css("padding"+j))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};c=b.containerOffset;
var g=b.containerSize.height,h=b.containerSize.width;h=e.ui.hasScroll(a,"left")?a.scrollWidth:h;g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position;b=a._aspectRatio||b.shiftKey;var g={top:0,left:0},h=a.containerElement;if(h[0]!=document&&/static/.test(h.css("position")))g=d;if(f.left<(a._helper?d.left:0)){a.size.width+=a._helper?a.position.left-d.left:
a.position.left-g.left;if(b)a.size.height=a.size.width/c.aspectRatio;a.position.left=c.helper?d.left:0}if(f.top<(a._helper?d.top:0)){a.size.height+=a._helper?a.position.top-d.top:a.position.top;if(b)a.size.width=a.size.height*c.aspectRatio;a.position.top=a._helper?d.top:0}a.offset.left=a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top;c=Math.abs((a._helper?a.offset.left-g.left:a.offset.left-g.left)+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-
d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));if(f&&g)c-=a.parentData.left;if(c+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-c;if(b)a.size.height=a.size.width/a.aspectRatio}if(d+a.size.height>=a.parentData.height){a.size.height=a.parentData.height-d;if(b)a.size.width=a.size.height*a.aspectRatio}},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,
f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width;g=g.outerHeight()-b.sizeDiff.height;b._helper&&!a.animate&&/relative/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&!a.animate&&/static/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,
display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof a.ghost=="string"?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=
e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid=typeof a.grid=="number"?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1);a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);if(/^(se|s|e)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a}else if(/^(ne)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}else{if(/^(sw)$/.test(g)){b.size.width=d.width+h;b.size.height=
d.height+a}else{b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}b.position.left=f.left-h}}});var m=function(b){return parseInt(b,10)||0},k=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
;/*
 * jQuery UI Selectable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable");this.dragged=false;var f;this.refresh=function(){f=e(c.options.filter,c.element[0]);f.each(function(){var d=e(this),b=d.offset();e.data(this,"selectable-item",{element:this,$element:d,left:b.left,top:b.top,right:b.left+d.outerWidth(),bottom:b.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),
selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(c){var f=this;this.opos=[c.pageX,
c.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",c);e(d.appendTo).append(this.helper);this.helper.css({left:c.clientX,top:c.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=true;if(!c.metaKey){b.$element.removeClass("ui-selected");b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;f._trigger("unselecting",
c,{unselecting:b.element})}});e(c.target).parents().andSelf().each(function(){var b=e.data(this,"selectable-item");if(b){var g=!c.metaKey||!b.$element.hasClass("ui-selected");b.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting");b.unselecting=!g;b.selecting=g;(b.selected=g)?f._trigger("selecting",c,{selecting:b.element}):f._trigger("unselecting",c,{unselecting:b.element});return false}})}},_mouseDrag:function(c){var f=this;this.dragged=true;if(!this.options.disabled){var d=
this.options,b=this.opos[0],g=this.opos[1],h=c.pageX,i=c.pageY;if(b>h){var j=h;h=b;b=j}if(g>i){j=i;i=g;g=j}this.helper.css({left:b,top:g,width:h-b,height:i-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!(!a||a.element==f.element[0])){var k=false;if(d.tolerance=="touch")k=!(a.left>h||a.right<b||a.top>i||a.bottom<g);else if(d.tolerance=="fit")k=a.left>b&&a.right<h&&a.top>g&&a.bottom<i;if(k){if(a.selected){a.$element.removeClass("ui-selected");a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");
a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",c,{selecting:a.element})}}else{if(a.selecting)if(c.metaKey&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");a.unselecting=true}f._trigger("unselecting",c,{unselecting:a.element})}if(a.selected)if(!c.metaKey&&
!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",c,{unselecting:a.element})}}}});return false}},_mouseStop:function(c){var f=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;f._trigger("unselected",c,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=
e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;f._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}});e.extend(e.ui.selectable,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Sortable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a===
"disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&
!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<
b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,
a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],
e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();
c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,
dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},
toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||
this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();
var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();
if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),
this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=0;b--){var c=this.items[b];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=
this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=
d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||
0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",
a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-
f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=
this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==
""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=
this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a=
{top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=
this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-
this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",
f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,
this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Slider 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(b.range===true){if(!b.values)b.values=[this._valueMin(),this._valueMin()];if(b.values.length&&b.values.length!==2)b.values=[b.values[0],b.values[0]]}this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(b.range==="min"||b.range==="max"?" ui-slider-range-"+b.range:""))}for(var j=c.length;j<f;j+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(g){g.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(b.disabled)d(this).blur();else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(g){d(this).data("index.ui-slider-handle",
g)});this.handles.keydown(function(g){var k=true,l=d(this).data("index.ui-slider-handle"),i,h,m;if(!a.options.disabled){switch(g.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:k=false;if(!a._keySliding){a._keySliding=true;d(this).addClass("ui-state-active");i=a._start(g,l);if(i===false)return}break}m=a.options.step;i=a.options.values&&a.options.values.length?
(h=a.values(l)):(h=a.value());switch(g.keyCode){case d.ui.keyCode.HOME:h=a._valueMin();break;case d.ui.keyCode.END:h=a._valueMax();break;case d.ui.keyCode.PAGE_UP:h=a._trimAlignValue(i+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:h=a._trimAlignValue(i-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(i===a._valueMax())return;h=a._trimAlignValue(i+m);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(i===a._valueMin())return;h=a._trimAlignValue(i-
m);break}a._slide(g,l,h);return k}}).keyup(function(g){var k=d(this).data("index.ui-slider-handle");if(a._keySliding){a._keySliding=false;a._stop(g,k);a._change(g,k);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
return this},_mouseCapture:function(a){var b=this.options,c,f,e,j,g;if(b.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;j=this;this.handles.each(function(k){var l=Math.abs(c-j.values(k));if(f>l){f=l;e=d(this);g=k}});if(b.range===true&&this.values(1)===b.min){g+=1;e=d(this.handles[g])}if(this._start(a,g)===false)return false;
this._mouseSliding=true;j._handleIndex=g;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,g,c);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;if(this.orientation==="horizontal"){b=
this.elementSize.width;a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}b=a/b;if(b>1)b=1;if(b<0)b=0;if(this.orientation==="vertical")b=1-b;a=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);
c.values=this.values()}return this._trigger("start",a,c)},_slide:function(a,b,c){var f;if(this.options.values&&this.options.values.length){f=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===true&&(b===0&&c>f||b===1&&c<f))c=f;if(c!==this.values(b)){f=this.values();f[b]=c;a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:f});this.values(b?0:1);a!==false&&this.values(b,c,true)}}else if(c!==this.value()){a=this._trigger("slide",a,{handle:this.handles[b],value:c});
a!==false&&this.value(c)}},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=
this._trimAlignValue(a);this._refreshValue();this._change(null,0)}else return this._value()},values:function(a,b){var c,f,e;if(arguments.length>1){this.options.values[a]=this._trimAlignValue(b);this._refreshValue();this._change(null,a)}else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1){c[e]=this._trimAlignValue(f[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):
this.value();else return this._values()},_setOption:function(a,b){var c,f=0;if(d.isArray(this.options.values))f=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":if(b){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length){b=this.options.values[a];
return b=this._trimAlignValue(b)}else{b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=this._trimAlignValue(b[c]);return b}},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;a=a-c;if(Math.abs(c)*2>=b)a+=c>0?b:-b;return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=
this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:false,e,j={},g,k,l,i;if(this.options.values&&this.options.values.length)this.handles.each(function(h){e=(c.values(h)-c._valueMin())/(c._valueMax()-c._valueMin())*100;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](j,b.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(h===0)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({width:e-
g+"%"},{queue:false,duration:b.animate})}else{if(h===0)c.range.stop(1,1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({height:e-g+"%"},{queue:false,duration:b.animate})}g=e});else{k=this.value();l=this._valueMin();i=this._valueMax();e=i!==l?(k-l)/(i-l)*100:0;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](j,b.animate);if(a==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},
b.animate);if(a==="max"&&this.orientation==="horizontal")this.range[f?"animate":"css"]({width:100-e+"%"},{queue:false,duration:b.animate});if(a==="min"&&this.orientation==="vertical")this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if(a==="max"&&this.orientation==="vertical")this.range[f?"animate":"css"]({height:100-e+"%"},{queue:false,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Datepicker 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,C){function M(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=N(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function N(a){return a.bind("mouseout",
function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");b.length&&b.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!(d.datepicker._isDisabledDatepicker(J.inline?a.parent()[0]:J.input[0])||!b.length)){b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
b.addClass("ui-state-hover");b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover");b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")}})}function H(a,b){d.extend(a,b);for(var c in b)if(b[c]==null||b[c]==C)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.16"}});var B=(new Date).getTime(),J;d.extend(M.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){H(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:N(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b);b.settings.disabled&&this._disableDatepicker(a)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c==
"focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():
d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,
b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.settings.disabled&&this._disableDatepicker(a);b.dpDiv.css("display","block")}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=
1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}H(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/
2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=
d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=
a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().removeClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,
"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().addClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==
a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?
d.extend({},e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true),i=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");H(e.settings,f);if(i!==null&&f.dateFormat!==C&&f.minDate===C)e.settings.minDate=this._formatDate(e,i);if(g!==null&&f.dateFormat!==C&&f.maxDate===C)e.settings.maxDate=this._formatDate(e,g);this._attachments(d(a),e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);
this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");
b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]);if(a=d.datepicker._get(b,"onSelect")){c=d.datepicker._formatDate(b);a.apply(b.input?b.input[0]:null,[c,b])}else d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,
a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=
a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,
"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==C?a.keyCode:a.charCode);
return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",
a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);if(d.datepicker._curInst&&d.datepicker._curInst!=b){d.datepicker._datepickerShowing&&d.datepicker._triggerOnClose(d.datepicker._curInst);d.datepicker._curInst.dpDiv.stop(true,true)}var c=d.datepicker._get(b,"beforeShow");c=c?c.apply(a,[a,b]):{};if(c!==false){H(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value=
"";if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
true;d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);J=a;a.dpDiv.empty().append(this._generateHTML(a));var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});
a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");c>1&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(b[0]!=1||b[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&
!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),
h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=
this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");if(b)b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);
this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();d.datepicker._triggerOnClose(b);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):
0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e["selected"+(c=="M"?
"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);
this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");
if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?
b.toString():b+"";if(b=="")return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=A+1<a.length&&a.charAt(A+1)==p)&&A++;return p},m=function(p){var D=
o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&D?4:p=="o"?3:2)+"}");p=b.substring(q).match(p);if(!p)throw"Missing number at position "+q;q+=p[0].length;return parseInt(p[0],10)},n=function(p,D,K){p=d.map(o(p)?K:D,function(w,x){return[[x,w]]}).sort(function(w,x){return-(w[1].length-x[1].length)});var E=-1;d.each(p,function(w,x){w=x[1];if(b.substr(q,w.length).toLowerCase()==w.toLowerCase()){E=x[0];q+=w.length;return false}});if(E!=-1)return E+1;else throw"Unknown name at position "+q;},s=
function(){if(b.charAt(q)!=a.charAt(A))throw"Unexpected literal at position "+q;q++},q=0,A=0;A<a.length;A++)if(k)if(a.charAt(A)=="'"&&!o("'"))k=false;else s();else switch(a.charAt(A)){case "d":l=m("d");break;case "D":n("D",f,h);break;case "o":u=m("o");break;case "m":j=m("m");break;case "M":j=n("M",i,g);break;case "y":c=m("y");break;case "@":var v=new Date(m("@"));c=v.getFullYear();j=v.getMonth()+1;l=v.getDate();break;case "!":v=new Date((m("!")-this._ticksTo1970)/1E4);c=v.getFullYear();j=v.getMonth()+
1;l=v.getDate();break;case "'":if(o("'"))s();else k=true;break;default:s()}if(q<b.length)throw"Extra/unparsed characters found in date: "+b.substring(q);if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,j-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=j||v.getDate()!=l)throw"Invalid date";return v},ATOM:"yy-mm-dd",
COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:
null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,s){return i(o)?s[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case "d":l+=g("d",b.getDate(),2);break;case "D":l+=j("D",b.getDay(),e,f);break;case "o":l+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":l+=g("m",b.getMonth()+1,2);break;case "M":l+=j("M",b.getMonth(),h,c);break;case "y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":l+=b.getTime();break;case "!":l+=b.getTime()*1E4+this._ticksTo1970;break;case "'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=
0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==C?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);
var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;
i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case "d":case "D":g+=parseInt(k[1],10);break;case "w":case "W":g+=parseInt(k[1],10)*7;break;case "m":case "M":l+=parseInt(k[1],10);g=
Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case "y":case "Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>
12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&
a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?
new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));
n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var s=this._get(a,"nextText");s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(m,
g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>";j=this._get(a,"currentText");s=this._get(a,"gotoCurrent")&&
a.currentDay?u:b;j=!h?j:this.formatDate(j,s,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+B+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
B+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var q=this._get(a,"dayNamesMin"),A=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),D=this._get(a,"showOtherMonths"),K=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var E=this._getDefaultDate(a),w="",x=0;x<i[0];x++){var O=
"";this.maxRows=4;for(var G=0;G<i[1];G++){var P=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",y="";if(l){y+='<div class="ui-datepicker-group';if(i[1]>1)switch(G){case 0:y+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:y+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:y+=" ui-datepicker-group-middle";t="";break}y+='">'}y+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&
x==0?c?f:n:"")+(/all|right/.test(t)&&x==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,x>0||G>0,A,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var r=(t+h)%7;z+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+s[r]+'">'+q[r]+"</span></th>"}y+=z+"</tr></thead><tbody>";z=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,
z);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;z=Math.ceil((t+z)/7);this.maxRows=z=l?this.maxRows>z?this.maxRows:z:z;r=this._daylightSavingAdjust(new Date(m,g,1-t));for(var Q=0;Q<z;Q++){y+="<tr>";var R=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(r)+"</td>";for(t=0;t<7;t++){var I=p?p.apply(a.input?a.input[0]:null,[r]):[true,""],F=r.getMonth()!=g,L=F&&!K||!I[0]||k&&r<k||o&&r>o;R+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(r.getTime()==
P.getTime()&&g==a.selectedMonth&&a._keyEvent||E.getTime()==r.getTime()&&E.getTime()==P.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!D?"":" "+I[1]+(r.getTime()==u.getTime()?" "+this._currentClass:"")+(r.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!F||D)&&I[2]?' title="'+I[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+B+".datepicker._selectDay('#"+a.id+"',"+r.getMonth()+","+r.getFullYear()+', this);return false;"')+">"+(F&&!D?"&#xa0;":L?'<span class="ui-state-default">'+
r.getDate()+"</span>":'<a class="ui-state-default'+(r.getTime()==b.getTime()?" ui-state-highlight":"")+(r.getTime()==u.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+'" href="#">'+r.getDate()+"</a>")+"</td>";r.setDate(r.getDate()+1);r=this._daylightSavingAdjust(r)}y+=R+"</tr>"}g++;if(g>11){g=0;m++}y+="</tbody></table>"+(l?"</div>"+(i[0]>0&&G==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");O+=y}w+=O}w+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=false;return w},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&
(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&l)?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var s=(new Date).getFullYear();i=function(q){q=q.match(/c[+-].*/)?c+parseInt(q.substring(1),10):q.match(/[+-].*/)?s+parseInt(q,10):parseInt(q,10);return isNaN(q)?s:q};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,
e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+
(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b)b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,
e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;
if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));return this.each(function(){typeof a==
"string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new M;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.16";window["DP_jQuery_"+B]=d})(jQuery);
;/*
 * jQuery UI Effects 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||function(f,j){function m(c){var a;if(c&&c.constructor==Array&&c.length==3)return c;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)];if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return[parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55];if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)];if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(c))return n.transparent;return n[f.trim(c).toLowerCase()]}function s(c,a){var b;do{b=f.curCSS(c,a);if(b!=""&&b!="transparent"||f.nodeName(c,"body"))break;a="backgroundColor"}while(c=c.parentNode);return m(b)}function o(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
a={},b,d;if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;){b=c[e];if(typeof c[b]=="string"){d=b.replace(/\-(\w)/g,function(g,h){return h.toUpperCase()});a[d]=c[b]}}else for(b in c)if(typeof c[b]==="string")a[b]=c[b];return a}function p(c){var a,b;for(a in c){b=c[a];if(b==null||f.isFunction(b)||a in t||/scrollbar/.test(a)||!/color/i.test(a)&&isNaN(parseFloat(b)))delete c[a]}return c}function u(c,a){var b={_:0},d;for(d in a)if(c[d]!=a[d])b[d]=a[d];return b}function k(c,a,b,d){if(typeof c=="object"){d=
a;b=null;a=c;c=a.effect}if(f.isFunction(a)){d=a;b=null;a={}}if(typeof a=="number"||f.fx.speeds[a]){d=b;b=a;a={}}if(f.isFunction(b)){d=b;b=null}a=a||{};b=b||a.duration;b=f.fx.off?0:typeof b=="number"?b:b in f.fx.speeds?f.fx.speeds[b]:f.fx.speeds._default;d=d||a.complete;return[c,a,b,d]}function l(c){if(!c||typeof c==="number"||f.fx.speeds[c])return true;if(typeof c==="string"&&!f.effects[c])return true;return false}f.effects={};f.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
"borderTopColor","borderColor","color","outlineColor"],function(c,a){f.fx.step[a]=function(b){if(!b.colorInit){b.start=s(b.elem,a);b.end=m(b.end);b.colorInit=true}b.elem.style[a]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},q=["add","remove","toggle"],t={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.effects.animateClass=function(c,a,b,
d){if(f.isFunction(b)){d=b;b=null}return this.queue(function(){var e=f(this),g=e.attr("style")||" ",h=p(o.call(this)),r,v=e.attr("class");f.each(q,function(w,i){c[i]&&e[i+"Class"](c[i])});r=p(o.call(this));e.attr("class",v);e.animate(u(h,r),{queue:false,duration:a,easing:b,complete:function(){f.each(q,function(w,i){c[i]&&e[i+"Class"](c[i])});if(typeof e.attr("style")=="object"){e.attr("style").cssText="";e.attr("style").cssText=g}else e.attr("style",g);d&&d.apply(this,arguments);f.dequeue(this)}})})};
f.fn.extend({_addClass:f.fn.addClass,addClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{add:c},a,b,d]):this._addClass(c)},_removeClass:f.fn.removeClass,removeClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{remove:c},a,b,d]):this._removeClass(c)},_toggleClass:f.fn.toggleClass,toggleClass:function(c,a,b,d,e){return typeof a=="boolean"||a===j?b?f.effects.animateClass.apply(this,[a?{add:c}:{remove:c},b,d,e]):this._toggleClass(c,a):f.effects.animateClass.apply(this,
[{toggle:c},a,b,d])},switchClass:function(c,a,b,d,e){return f.effects.animateClass.apply(this,[{add:a,remove:c},b,d,e])}});f.extend(f.effects,{version:"1.8.16",save:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.data("ec.storage."+a[b],c[0].style[a[b]])},restore:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.css(a[b],c.data("ec.storage."+a[b]))},setMode:function(c,a){if(a=="toggle")a=c.is(":hidden")?"show":"hide";return a},getBaseline:function(c,a){var b;switch(c[0]){case "top":b=
0;break;case "middle":b=0.5;break;case "bottom":b=1;break;default:b=c[0]/a.height}switch(c[1]){case "left":c=0;break;case "center":c=0.5;break;case "right":c=1;break;default:c=c[1]/a.width}return{x:c,y:b}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var a={width:c.outerWidth(true),height:c.outerHeight(true),"float":c.css("float")},b=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),
d=document.activeElement;c.wrap(b);if(c[0]===d||f.contains(c[0],d))f(d).focus();b=c.parent();if(c.css("position")=="static"){b.css({position:"relative"});c.css({position:"relative"})}else{f.extend(a,{position:c.css("position"),zIndex:c.css("z-index")});f.each(["top","left","bottom","right"],function(e,g){a[g]=c.css(g);if(isNaN(parseInt(a[g],10)))a[g]="auto"});c.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return b.css(a).show()},removeWrapper:function(c){var a,b=document.activeElement;
if(c.parent().is(".ui-effects-wrapper")){a=c.parent().replaceWith(c);if(c[0]===b||f.contains(c[0],b))f(b).focus();return a}return c},setTransition:function(c,a,b,d){d=d||{};f.each(a,function(e,g){unit=c.cssUnit(g);if(unit[0]>0)d[g]=unit[0]*b+unit[1]});return d}});f.fn.extend({effect:function(c){var a=k.apply(this,arguments),b={options:a[1],duration:a[2],callback:a[3]};a=b.options.mode;var d=f.effects[c];if(f.fx.off||!d)return a?this[a](b.duration,b.callback):this.each(function(){b.callback&&b.callback.call(this)});
return d.call(this,b)},_show:f.fn.show,show:function(c){if(l(c))return this._show.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="show";return this.effect.apply(this,a)}},_hide:f.fn.hide,hide:function(c){if(l(c))return this._hide.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)}},__toggle:f.fn.toggle,toggle:function(c){if(l(c)||typeof c==="boolean"||f.isFunction(c))return this.__toggle.apply(this,arguments);else{var a=k.apply(this,
arguments);a[1].mode="toggle";return this.effect.apply(this,a)}},cssUnit:function(c){var a=this.css(c),b=[];f.each(["em","px","%","pt"],function(d,e){if(a.indexOf(e)>0)b=[parseFloat(a),e]});return b}});f.easing.jswing=f.easing.swing;f.extend(f.easing,{def:"easeOutQuad",swing:function(c,a,b,d,e){return f.easing[f.easing.def](c,a,b,d,e)},easeInQuad:function(c,a,b,d,e){return d*(a/=e)*a+b},easeOutQuad:function(c,a,b,d,e){return-d*(a/=e)*(a-2)+b},easeInOutQuad:function(c,a,b,d,e){if((a/=e/2)<1)return d/
2*a*a+b;return-d/2*(--a*(a-2)-1)+b},easeInCubic:function(c,a,b,d,e){return d*(a/=e)*a*a+b},easeOutCubic:function(c,a,b,d,e){return d*((a=a/e-1)*a*a+1)+b},easeInOutCubic:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a+b;return d/2*((a-=2)*a*a+2)+b},easeInQuart:function(c,a,b,d,e){return d*(a/=e)*a*a*a+b},easeOutQuart:function(c,a,b,d,e){return-d*((a=a/e-1)*a*a*a-1)+b},easeInOutQuart:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a+b;return-d/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(c,a,b,
d,e){return d*(a/=e)*a*a*a*a+b},easeOutQuint:function(c,a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b},easeInOutQuint:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a*a+b;return d/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(c,a,b,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+b},easeOutSine:function(c,a,b,d,e){return d*Math.sin(a/e*(Math.PI/2))+b},easeInOutSine:function(c,a,b,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+b},easeInExpo:function(c,a,b,d,e){return a==0?b:d*Math.pow(2,10*(a/e-1))+b},easeOutExpo:function(c,
a,b,d,e){return a==e?b+d:d*(-Math.pow(2,-10*a/e)+1)+b},easeInOutExpo:function(c,a,b,d,e){if(a==0)return b;if(a==e)return b+d;if((a/=e/2)<1)return d/2*Math.pow(2,10*(a-1))+b;return d/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(c,a,b,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+b},easeOutCirc:function(c,a,b,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+b},easeInOutCirc:function(c,a,b,d,e){if((a/=e/2)<1)return-d/2*(Math.sqrt(1-a*a)-1)+b;return d/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(c,a,b,
d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g))+b},easeOutElastic:function(c,a,b,d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*a)*Math.sin((a*e-c)*2*Math.PI/g)+d+b},easeInOutElastic:function(c,a,b,d,e){c=1.70158;var g=
0,h=d;if(a==0)return b;if((a/=e/2)==2)return b+d;g||(g=e*0.3*1.5);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);if(a<1)return-0.5*h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)+b;return h*Math.pow(2,-10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)*0.5+d+b},easeInBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*(a/=e)*a*((g+1)*a-g)+b},easeOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*((a=a/e-1)*a*((g+1)*a+g)+1)+b},easeInOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;
if((a/=e/2)<1)return d/2*a*a*(((g*=1.525)+1)*a-g)+b;return d/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b},easeInBounce:function(c,a,b,d,e){return d-f.easing.easeOutBounce(c,e-a,0,d,e)+b},easeOutBounce:function(c,a,b,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(c,a,b,d,e){if(a<e/2)return f.easing.easeInBounce(c,a*2,0,d,e)*0.5+b;return f.easing.easeOutBounce(c,
a*2-e,0,d,e)*0.5+d*0.5+b}})}(jQuery);
;/*
 * jQuery UI Effects Blind 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h=d=="vertical"?"height":"width";d=d=="vertical"?e.height():e.width();f=="show"&&e.css(h,0);var i={};i[h]=f=="show"?d:0;e.animate(i,c.duration,c.options.easing,function(){f=="hide"&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
;/*
 * jQuery UI Effects Bounce 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f=d=="up"||d=="down"?"top":"left";d=d=="up"||d=="left"?"pos":"neg";c=b.options.distance||(f=="top"?a.outerHeight({margin:true})/3:a.outerWidth({margin:true})/
3);if(h=="show")a.css("opacity",0).css(f,d=="pos"?-c:c);if(h=="hide")c/=m*2;h!="hide"&&m--;if(h=="show"){var g={opacity:1};g[f]=(d=="pos"?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=(d=="pos"?"-=":"+=")+c;k[f]=(d=="pos"?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c=h=="hide"?c*2:c/2}if(h=="hide"){g={opacity:0};g[f]=(d=="pos"?"-=":"+=")+c;a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})}else{j={};k={};j[f]=(d=="pos"?"-=":"+=")+c;k[f]=(d=="pos"?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)})}a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Clip 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),i=["position","top","bottom","left","right","height","width"],f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,i);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"});d=a[0].tagName=="IMG"?d:a;var g={size:c=="vertical"?"height":"width",position:c=="vertical"?"top":"left"};c=c=="vertical"?d.height():d.width();if(f=="show"){d.css(g.size,0);d.css(g.position,
c/2)}var h={};h[g.size]=f=="show"?c:0;h[g.position]=f=="show"?0:c/2;d.animate(h,{queue:false,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,i);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Drop 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right","opacity"],e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f=b=="up"||b=="down"?"top":"left";b=b=="up"||b=="left"?"pos":"neg";var g=d.options.distance||(f=="top"?a.outerHeight({margin:true})/2:a.outerWidth({margin:true})/2);if(e=="show")a.css("opacity",0).css(f,b=="pos"?-g:g);var i={opacity:e==
"show"?1:0};i[f]=(e=="show"?b=="pos"?"+=":"-=":b=="pos"?"-=":"+=")+g;a.animate(i,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){e=="hide"&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Explode 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),g=b.offset();g.top-=parseInt(b.css("marginTop"),10)||0;g.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(true),i=b.outerHeight(true),e=0;e<c;e++)for(var f=
0;f<d;f++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*(h/d),top:-e*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:g.left+f*(h/d)+(a.options.mode=="show"?(f-Math.floor(d/2))*(h/d):0),top:g.top+e*(i/c)+(a.options.mode=="show"?(e-Math.floor(c/2))*(i/c):0),opacity:a.options.mode=="show"?0:1}).animate({left:g.left+f*(h/d)+(a.options.mode=="show"?0:(f-Math.floor(d/2))*(h/d)),top:g.top+
e*(i/c)+(a.options.mode=="show"?0:(e-Math.floor(c/2))*(i/c)),opacity:a.options.mode=="show"?1:0},a.duration||500);setTimeout(function(){a.options.mode=="show"?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
;/*
 * jQuery UI Effects Fade 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Fold 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f=d=="show"!=h,l=f?["width","height"]:["height","width"];f=f?[e.width(),e.height()]:[e.height(),e.width()];var i=/([0-9]+)%/.exec(g);if(i)g=parseInt(i[1],
10)/100*f[d=="hide"?0:1];if(d=="show")e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]=d=="show"?f[0]:g;i[l[1]]=d=="show"?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){d=="hide"&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
;/*
 * jQuery UI Effects Highlight 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};if(d=="hide")f.opacity=0;b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Pulsate 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(d){d.effects.pulsate=function(a){return this.queue(function(){var b=d(this),c=d.effects.setMode(b,a.options.mode||"show");times=(a.options.times||5)*2-1;duration=a.duration?a.duration/2:d.fx.speeds._default/2;isVisible=b.is(":visible");animateTo=0;if(!isVisible){b.css("opacity",0).show();animateTo=1}if(c=="hide"&&isVisible||c=="show"&&!isVisible)times--;for(c=0;c<times;c++){b.animate({opacity:animateTo},duration,a.options.easing);animateTo=(animateTo+1)%2}b.animate({opacity:animateTo},duration,
a.options.easing,function(){animateTo==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Scale 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),e=c.effects.setMode(a,b.options.mode||"hide"),g=parseInt(b.options.percent,10)||150,h=g/100,i={height:a.height(),width:a.width()};c.extend(b.options,{fade:true,mode:e,percent:e=="hide"?g:100,from:e=="hide"?i:{height:i.height*h,width:i.width*h}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),e=c.extend(true,{},b.options),g=c.effects.setMode(a,
b.options.mode||"effect"),h=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:g=="hide"?0:100),i=b.options.direction||"both",f=b.options.origin;if(g!="effect"){e.origin=f||["middle","center"];e.restore=true}f={height:a.height(),width:a.width()};a.from=b.options.from||(g=="show"?{height:0,width:0}:f);h={y:i!="horizontal"?h/100:1,x:i!="vertical"?h/100:1};a.to={height:f.height*h.y,width:f.width*h.x};if(b.options.fade){if(g=="show"){a.from.opacity=0;a.to.opacity=1}if(g=="hide"){a.from.opacity=
1;a.to.opacity=0}}e.from=a.from;e.to=a.to;e.mode=g;a.effect("size",e,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),e=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],i=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],k=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
p=c.effects.setMode(a,b.options.mode||"effect"),n=b.options.restore||false,m=b.options.scale||"both",l=b.options.origin,j={height:a.height(),width:a.width()};a.from=b.options.from||j;a.to=b.options.to||j;if(l){l=c.effects.getBaseline(l,j);a.from.top=(j.height-a.from.height)*l.y;a.from.left=(j.width-a.from.width)*l.x;a.to.top=(j.height-a.to.height)*l.y;a.to.left=(j.width-a.to.width)*l.x}var d={from:{y:a.from.height/j.height,x:a.from.width/j.width},to:{y:a.to.height/j.height,x:a.to.width/j.width}};
if(m=="box"||m=="both"){if(d.from.y!=d.to.y){e=e.concat(f);a.from=c.effects.setTransition(a,f,d.from.y,a.from);a.to=c.effects.setTransition(a,f,d.to.y,a.to)}if(d.from.x!=d.to.x){e=e.concat(k);a.from=c.effects.setTransition(a,k,d.from.x,a.from);a.to=c.effects.setTransition(a,k,d.to.x,a.to)}}if(m=="content"||m=="both")if(d.from.y!=d.to.y){e=e.concat(i);a.from=c.effects.setTransition(a,i,d.from.y,a.from);a.to=c.effects.setTransition(a,i,d.to.y,a.to)}c.effects.save(a,n?e:g);a.show();c.effects.createWrapper(a);
a.css("overflow","hidden").css(a.from);if(m=="content"||m=="both"){f=f.concat(["marginTop","marginBottom"]).concat(i);k=k.concat(["marginLeft","marginRight"]);h=e.concat(f).concat(k);a.find("*[width]").each(function(){child=c(this);n&&c.effects.save(child,h);var o={height:child.height(),width:child.width()};child.from={height:o.height*d.from.y,width:o.width*d.from.x};child.to={height:o.height*d.to.y,width:o.width*d.to.x};if(d.from.y!=d.to.y){child.from=c.effects.setTransition(child,f,d.from.y,child.from);
child.to=c.effects.setTransition(child,f,d.to.y,child.to)}if(d.from.x!=d.to.x){child.from=c.effects.setTransition(child,k,d.from.x,child.from);child.to=c.effects.setTransition(child,k,d.to.x,child.to)}child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){n&&c.effects.restore(child,h)})})}a.animate(a.to,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);p=="hide"&&a.hide();c.effects.restore(a,
n?e:g);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Shake 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g=c=="up"||c=="down"?"top":"left",h=c=="up"||c=="left"?"pos":"neg";c={};var i={},k={};c[g]=(h=="pos"?"-=":"+=")+e;i[g]=(h=="pos"?"+=":"-=")+e*2;k[g]=
(h=="pos"?"-=":"+=")+e*2;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Slide 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g=b=="up"||b=="down"?"top":"left";b=b=="up"||b=="left"?"pos":"neg";var e=d.options.distance||(g=="top"?a.outerHeight({margin:true}):a.outerWidth({margin:true}));if(f=="show")a.css(g,b=="pos"?isNaN(e)?"-"+e:-e:e);
var i={};i[g]=(f=="show"?b=="pos"?"+=":"-=":b=="pos"?"-=":"+=")+e;a.animate(i,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){f=="hide"&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Transfer 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset();c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()};d=b.offset();var f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);
b.dequeue()})})}})(jQuery);
;
/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
// Created: 2008-06-04 
// Updated: 2012-05-21
// REQUIRES: jquery 1.7.x

;(function( $ ){

// add the jquery instance method
$.fn.drag = function( str, arg, opts ){
	// figure out the event type
	var type = typeof str == "string" ? str : "",
	// figure out the event handler...
	fn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;
	// fix the event type
	if ( type.indexOf("drag") !== 0 ) 
		type = "drag"+ type;
	// were options passed
	opts = ( str == fn ? arg : opts ) || {};
	// trigger or bind event handler
	return fn ? this.bind( type, opts, fn ) : this.trigger( type );
};

// local refs (increase compression)
var $event = $.event, 
$special = $event.special,
// configure the drag special event 
drag = $special.drag = {
	
	// these are the default settings
	defaults: {
		which: 1, // mouse button pressed to start drag sequence
		distance: 0, // distance dragged before dragstart
		not: ':input', // selector to suppress dragging on target elements
		handle: null, // selector to match handle target elements
		relative: false, // true to use "position", false to use "offset"
		drop: true, // false to suppress drop events, true or selector to allow
		click: false // false to suppress click events after dragend (no proxy)
	},
	
	// the key name for stored drag data
	datakey: "dragdata",
	
	// prevent bubbling for better performance
	noBubble: true,
	
	// count bound related events
	add: function( obj ){ 
		// read the interaction data
		var data = $.data( this, drag.datakey ),
		// read any passed options 
		opts = obj.data || {};
		// count another realted event
		data.related += 1;
		// extend data options bound with this event
		// don't iterate "opts" in case it is a node 
		$.each( drag.defaults, function( key, def ){
			if ( opts[ key ] !== undefined )
				data[ key ] = opts[ key ];
		});
	},
	
	// forget unbound related events
	remove: function(){
		$.data( this, drag.datakey ).related -= 1;
	},
	
	// configure interaction, capture settings
	setup: function(){
		// check for related events
		if ( $.data( this, drag.datakey ) ) 
			return;
		// initialize the drag data with copied defaults
		var data = $.extend({ related:0 }, drag.defaults );
		// store the interaction data
		$.data( this, drag.datakey, data );
		// bind the mousedown event, which starts drag interactions
		$event.add( this, "touchstart mousedown", drag.init, data );
		// prevent image dragging in IE...
		if ( this.attachEvent ) 
			this.attachEvent("ondragstart", drag.dontstart ); 
	},
	
	// destroy configured interaction
	teardown: function(){
		var data = $.data( this, drag.datakey ) || {};
		// check for related events
		if ( data.related ) 
			return;
		// remove the stored data
		$.removeData( this, drag.datakey );
		// remove the mousedown event
		$event.remove( this, "touchstart mousedown", drag.init );
		// enable text selection
		drag.textselect( true ); 
		// un-prevent image dragging in IE...
		if ( this.detachEvent ) 
			this.detachEvent("ondragstart", drag.dontstart ); 
	},
		
	// initialize the interaction
	init: function( event ){ 
		// sorry, only one touch at a time
		if ( drag.touched ) 
			return;
		// the drag/drop interaction data
		var dd = event.data, results;
		// check the which directive
		if ( event.which != 0 && dd.which > 0 && event.which != dd.which ) 
			return; 
		// check for suppressed selector
		if ( $( event.target ).is( dd.not ) ) 
			return;
		// check for handle selector
		if ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) 
			return;

		drag.touched = event.type == 'touchstart' ? this : null;
		dd.propagates = 1;
		dd.mousedown = this;
		dd.interactions = [ drag.interaction( this, dd ) ];
		dd.target = event.target;
		dd.pageX = event.pageX;
		dd.pageY = event.pageY;
		dd.dragging = null;
		// handle draginit event... 
		results = drag.hijack( event, "draginit", dd );
		// early cancel
		if ( !dd.propagates )
			return;
		// flatten the result set
		results = drag.flatten( results );
		// insert new interaction elements
		if ( results && results.length ){
			dd.interactions = [];
			$.each( results, function(){
				dd.interactions.push( drag.interaction( this, dd ) );
			});
		}
		// remember how many interactions are propagating
		dd.propagates = dd.interactions.length;
		// locate and init the drop targets
		if ( dd.drop !== false && $special.drop ) 
			$special.drop.handler( event, dd );
		// disable text selection
		drag.textselect( false ); 
		// bind additional events...
		if ( drag.touched )
			$event.add( drag.touched, "touchmove touchend", drag.handler, dd );
		else 
			$event.add( document, "mousemove mouseup", drag.handler, dd );
		// helps prevent text selection or scrolling
		if ( !drag.touched || dd.live )
			return false;
	},	
	
	// returns an interaction object
	interaction: function( elem, dd ){
		var offset = $( elem )[ dd.relative ? "position" : "offset" ]() || { top:0, left:0 };
		return {
			drag: elem, 
			callback: new drag.callback(), 
			droppable: [],
			offset: offset
		};
	},
	
	// handle drag-releatd DOM events
	handler: function( event ){ 
		// read the data before hijacking anything
		var dd = event.data;	
		// handle various events
		switch ( event.type ){
			// mousemove, check distance, start dragging
			case !dd.dragging && 'touchmove': 
				event.preventDefault();
			case !dd.dragging && 'mousemove':
				//  drag tolerance, x� + y� = distance�
				if ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) 
					break; // distance tolerance not reached
				event.target = dd.target; // force target from "mousedown" event (fix distance issue)
				drag.hijack( event, "dragstart", dd ); // trigger "dragstart"
				if ( dd.propagates ) // "dragstart" not rejected
					dd.dragging = true; // activate interaction
			// mousemove, dragging
			case 'touchmove':
				event.preventDefault();
			case 'mousemove':
				if ( dd.dragging ){
					// trigger "drag"		
					drag.hijack( event, "drag", dd );
					if ( dd.propagates ){
						// manage drop events
						if ( dd.drop !== false && $special.drop )
							$special.drop.handler( event, dd ); // "dropstart", "dropend"							
						break; // "drag" not rejected, stop		
					}
					event.type = "mouseup"; // helps "drop" handler behave
				}
			// mouseup, stop dragging
			case 'touchend': 
			case 'mouseup': 
			default:
				if ( drag.touched )
					$event.remove( drag.touched, "touchmove touchend", drag.handler ); // remove touch events
				else 
					$event.remove( document, "mousemove mouseup", drag.handler ); // remove page events	
				if ( dd.dragging ){
					if ( dd.drop !== false && $special.drop )
						$special.drop.handler( event, dd ); // "drop"
					drag.hijack( event, "dragend", dd ); // trigger "dragend"	
				}
				drag.textselect( true ); // enable text selection
				// if suppressing click events...
				if ( dd.click === false && dd.dragging )
					$.data( dd.mousedown, "suppress.click", new Date().getTime() + 5 );
				dd.dragging = drag.touched = false; // deactivate element	
				break;
		}
	},
		
	// re-use event object for custom events
	hijack: function( event, type, dd, x, elem ){
		// not configured
		if ( !dd ) 
			return;
		// remember the original event and type
		var orig = { event:event.originalEvent, type:event.type },
		// is the event drag related or drog related?
		mode = type.indexOf("drop") ? "drag" : "drop",
		// iteration vars
		result, i = x || 0, ia, $elems, callback,
		len = !isNaN( x ) ? x : dd.interactions.length;
		// modify the event type
		event.type = type;
		// remove the original event
		event.originalEvent = null;
		// initialize the results
		dd.results = [];
		// handle each interacted element
		do if ( ia = dd.interactions[ i ] ){
			// validate the interaction
			if ( type !== "dragend" && ia.cancelled )
				continue;
			// set the dragdrop properties on the event object
			callback = drag.properties( event, dd, ia );
			// prepare for more results
			ia.results = [];
			// handle each element
			$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){
				// identify drag or drop targets individually
				callback.target = subject;
				// force propagtion of the custom event
				event.isPropagationStopped = function(){ return false; };
				// handle the event	
				result = subject ? $event.dispatch.call( subject, event, callback ) : null;
				// stop the drag interaction for this element
				if ( result === false ){
					if ( mode == "drag" ){
						ia.cancelled = true;
						dd.propagates -= 1;
					}
					if ( type == "drop" ){
						ia[ mode ][p] = null;
					}
				}
				// assign any dropinit elements
				else if ( type == "dropinit" )
					ia.droppable.push( drag.element( result ) || subject );
				// accept a returned proxy element 
				if ( type == "dragstart" )
					ia.proxy = $( drag.element( result ) || ia.drag )[0];
				// remember this result	
				ia.results.push( result );
				// forget the event result, for recycling
				delete event.result;
				// break on cancelled handler
				if ( type !== "dropinit" )
					return result;
			});	
			// flatten the results	
			dd.results[ i ] = drag.flatten( ia.results );	
			// accept a set of valid drop targets
			if ( type == "dropinit" )
				ia.droppable = drag.flatten( ia.droppable );
			// locate drop targets
			if ( type == "dragstart" && !ia.cancelled )
				callback.update(); 
		}
		while ( ++i < len )
		// restore the original event & type
		event.type = orig.type;
		event.originalEvent = orig.event;
		// return all handler results
		return drag.flatten( dd.results );
	},
		
	// extend the callback object with drag/drop properties...
	properties: function( event, dd, ia ){		
		var obj = ia.callback;
		// elements
		obj.drag = ia.drag;
		obj.proxy = ia.proxy || ia.drag;
		// starting mouse position
		obj.startX = dd.pageX;
		obj.startY = dd.pageY;
		// current distance dragged
		obj.deltaX = event.pageX - dd.pageX;
		obj.deltaY = event.pageY - dd.pageY;
		// original element position
		obj.originalX = ia.offset.left;
		obj.originalY = ia.offset.top;
		// adjusted element position
		obj.offsetX = obj.originalX + obj.deltaX; 
		obj.offsetY = obj.originalY + obj.deltaY;
		// assign the drop targets information
		obj.drop = drag.flatten( ( ia.drop || [] ).slice() );
		obj.available = drag.flatten( ( ia.droppable || [] ).slice() );
		return obj;	
	},
	
	// determine is the argument is an element or jquery instance
	element: function( arg ){
		if ( arg && ( arg.jquery || arg.nodeType == 1 ) )
			return arg;
	},
	
	// flatten nested jquery objects and arrays into a single dimension array
	flatten: function( arr ){
		return $.map( arr, function( member ){
			return member && member.jquery ? $.makeArray( member ) : 
				member && member.length ? drag.flatten( member ) : member;
		});
	},
	
	// toggles text selection attributes ON (true) or OFF (false)
	textselect: function( bool ){ 
		$( document )[ bool ? "unbind" : "bind" ]("selectstart", drag.dontstart )
			.css("MozUserSelect", bool ? "" : "none" );
		// .attr("unselectable", bool ? "off" : "on" )
		document.unselectable = bool ? "off" : "on"; 
	},
	
	// suppress "selectstart" and "ondragstart" events
	dontstart: function(){ 
		return false; 
	},
	
	// a callback instance contructor
	callback: function(){}
	
};

// callback methods
drag.callback.prototype = {
	update: function(){
		if ( $special.drop && this.available.length )
			$.each( this.available, function( i ){
				$special.drop.locate( this, i );
			});
	}
};

// patch $.event.$dispatch to allow suppressing clicks
var $dispatch = $event.dispatch;
$event.dispatch = function( event ){
	if ( $.data( this, "suppress."+ event.type ) - new Date().getTime() > 0 ){
		$.removeData( this, "suppress."+ event.type );
		return;
	}
	return $dispatch.apply( this, arguments );
};

// event fix hooks for touch events...
var touchHooks = 
$event.fixHooks.touchstart = 
$event.fixHooks.touchmove = 
$event.fixHooks.touchend =
$event.fixHooks.touchcancel = {
	props: "clientX clientY pageX pageY screenX screenY".split( " " ),
	filter: function( event, orig ) {
		if ( orig ){
			var touched = ( orig.touches && orig.touches[0] )
				|| ( orig.changedTouches && orig.changedTouches[0] )
				|| null; 
			// iOS webkit: touchstart, touchmove, touchend
			if ( touched ) 
				$.each( touchHooks.props, function( i, prop ){
					event[ prop ] = touched[ prop ];
				});
		}
		return event;
	}
};

// share the same special event configuration with related events...
$special.draginit = $special.dragstart = $special.dragend = drag;

})( jQuery );
/*
 * jQuery UI Dialog 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(c,l){var m={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},n={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},o=c.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};c.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,
position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;b<0&&c(this).css("top",a.top-b)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=b.title||"&#160;",e=c.ui.dialog.getTitleId(a.element),g=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){if(b.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===c.ui.keyCode.ESCAPE){a.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(i){a.moveToTop(false,i)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),
h=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){a.close(i);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(h);c("<span></span>").addClass("ui-dialog-title").attr("id",
e).html(d).prependTo(f);if(c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose))b.beforeClose=b.beforeclose;f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=false;c.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
a.uiDialog.remove();a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(false!==b._trigger("beforeClose",a)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)});else{b.uiDialog.hide();b._trigger("close",a)}c.ui.dialog.overlay.resize();if(b.options.modal){d=0;c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){e=c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}});c.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this,e=d.options;if(e.modal&&!a||!e.stack&&!e.modal)return d._trigger("focus",b);if(e.zIndex>c.ui.dialog.maxZ)c.ui.dialog.maxZ=e.zIndex;if(d.overlay){c.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ)}a={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()};c.ui.dialog.maxZ+=1;
d.uiDialog.css("z-index",c.ui.dialog.maxZ);d.element.attr(a);d._trigger("focus",b);return d},open:function(){if(!this._isOpen){var a=this,b=a.options,d=a.uiDialog;a.overlay=b.modal?new c.ui.dialog.overlay(a):null;a._size();a._position(b.position);d.show(b.show);a.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===c.ui.keyCode.TAB){var g=c(":tabbable",this),f=g.filter(":first");g=g.filter(":last");if(e.target===g[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===
f[0]&&e.shiftKey){g.focus(1);return false}}});c(a.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();a._isOpen=true;a._trigger("open");return a}},_createButtons:function(a){var b=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();typeof a==="object"&&a!==null&&c.each(a,
function(){return!(d=true)});if(d){c.each(a,function(f,h){h=c.isFunction(h)?{click:h,text:f}:h;var i=c('<button type="button"></button>').click(function(){h.click.apply(b.element[0],arguments)}).appendTo(g);c.each(h,function(j,k){if(j!=="click")j in o?i[j](k):i.attr(j,k)});c.fn.button&&i.button()});e.appendTo(b.uiDialog)}},_makeDraggable:function(){function a(f){return{position:f.position,offset:f.offset}}var b=this,d=b.options,e=c(document),g;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){g=d.height==="auto"?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",f,a(h))},drag:function(f,h){b._trigger("drag",f,a(h))},stop:function(f,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(g);b._trigger("dragStop",f,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(f){return{originalPosition:f.originalPosition,
originalSize:f.originalSize,position:f.position,size:f.size}}a=a===l?this.options.resizable:a;var d=this,e=d.options,g=d.uiDialog.css("position");a=typeof a==="string"?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(f,h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",f,b(h))},resize:function(f,h){d._trigger("resize",
f,b(h))},stop:function(f,h){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",f,b(h));c.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if(typeof a==="string"||typeof a==="object"&&"0"in a){b=a.split?a.split(" "):
[a[0],a[1]];if(b.length===1)b[1]=b[0];c.each(["left","top"],function(g,f){if(+b[g]===b[g]){d[g]=b[g];b[g]=f}});a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")}}a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=false;c.each(a,function(g,f){b._setOption(g,f);
if(g in m)e=true;if(g in n)d[g]=f});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this,e=d.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":d._createButtons(b);break;case "closeText":d.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?e.addClass("ui-dialog-disabled"):
e.removeClass("ui-dialog-disabled");break;case "draggable":var g=e.is(":data(draggable)");g&&!b&&e.draggable("destroy");!g&&b&&d._makeDraggable();break;case "position":d._position(b);break;case "resizable":(g=e.is(":data(resizable)"))&&!b&&e.resizable("destroy");g&&typeof b==="string"&&e.resizable("option","handles",b);!g&&b!==false&&d._makeResizable(b);break;case "title":c(".ui-dialog-title",d.uiDialogTitlebar).html(""+(b||"&#160;"));break}c.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var a=
this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(a.minWidth>a.width)a.width=a.minWidth;b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);if(a.height==="auto")if(c.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();a=this.element.css("height","auto").height();e||this.uiDialog.hide();this.element.height(Math.max(a,d))}else this.element.height(Math.max(a.height-
b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.16",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),
create:function(a){if(this.instances.length===0){setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(d){if(c(d.target).zIndex()<c.ui.dialog.overlay.maxZ)return false})},1);c(document).bind("keydown.dialog-overlay",function(d){if(a.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||
c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);b!=-1&&this.oldInstances.push(this.instances.splice(b,1)[0]);this.instances.length===0&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;if(c.browser.msie&&
c.browser.version<7){a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return a<b?c(window).height()+"px":a+"px"}else return c(document).height()+"px"},width:function(){var a,b;if(c.browser.msie){a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a<b?c(window).width()+"px":a+"px"}else return c(document).width()+
"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);

/*
 * jQuery UI Datepicker 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,C){function M(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=N(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function N(a){return a.bind("mouseout",
function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");b.length&&b.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!(d.datepicker._isDisabledDatepicker(J.inline?a.parent()[0]:J.input[0])||!b.length)){b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
b.addClass("ui-state-hover");b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover");b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")}})}function H(a,b){d.extend(a,b);for(var c in b)if(b[c]==null||b[c]==C)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.16"}});var B=(new Date).getTime(),J;d.extend(M.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){H(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:N(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b);b.settings.disabled&&this._disableDatepicker(a)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c==
"focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():
d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,
b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.settings.disabled&&this._disableDatepicker(a);b.dpDiv.css("display","block")}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=
1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}H(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/
2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=
d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=
a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().removeClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,
"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().addClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==
a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?
d.extend({},e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true),i=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");H(e.settings,f);if(i!==null&&f.dateFormat!==C&&f.minDate===C)e.settings.minDate=this._formatDate(e,i);if(g!==null&&f.dateFormat!==C&&f.maxDate===C)e.settings.maxDate=this._formatDate(e,g);this._attachments(d(a),e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);
this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");
b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]);if(a=d.datepicker._get(b,"onSelect")){c=d.datepicker._formatDate(b);a.apply(b.input?b.input[0]:null,[c,b])}else d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,
a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=
a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,
"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==C?a.keyCode:a.charCode);
return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",
a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);if(d.datepicker._curInst&&d.datepicker._curInst!=b){d.datepicker._datepickerShowing&&d.datepicker._triggerOnClose(d.datepicker._curInst);d.datepicker._curInst.dpDiv.stop(true,true)}var c=d.datepicker._get(b,"beforeShow");c=c?c.apply(a,[a,b]):{};if(c!==false){H(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value=
"";if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
true;d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);J=a;a.dpDiv.empty().append(this._generateHTML(a));var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});
a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");c>1&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(b[0]!=1||b[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&
!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),
h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=
this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");if(b)b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);
this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();d.datepicker._triggerOnClose(b);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):
0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e["selected"+(c=="M"?
"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);
this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");
if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?
b.toString():b+"";if(b=="")return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=A+1<a.length&&a.charAt(A+1)==p)&&A++;return p},m=function(p){var D=
o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&D?4:p=="o"?3:2)+"}");p=b.substring(q).match(p);if(!p)throw"Missing number at position "+q;q+=p[0].length;return parseInt(p[0],10)},n=function(p,D,K){p=d.map(o(p)?K:D,function(w,x){return[[x,w]]}).sort(function(w,x){return-(w[1].length-x[1].length)});var E=-1;d.each(p,function(w,x){w=x[1];if(b.substr(q,w.length).toLowerCase()==w.toLowerCase()){E=x[0];q+=w.length;return false}});if(E!=-1)return E+1;else throw"Unknown name at position "+q;},s=
function(){if(b.charAt(q)!=a.charAt(A))throw"Unexpected literal at position "+q;q++},q=0,A=0;A<a.length;A++)if(k)if(a.charAt(A)=="'"&&!o("'"))k=false;else s();else switch(a.charAt(A)){case "d":l=m("d");break;case "D":n("D",f,h);break;case "o":u=m("o");break;case "m":j=m("m");break;case "M":j=n("M",i,g);break;case "y":c=m("y");break;case "@":var v=new Date(m("@"));c=v.getFullYear();j=v.getMonth()+1;l=v.getDate();break;case "!":v=new Date((m("!")-this._ticksTo1970)/1E4);c=v.getFullYear();j=v.getMonth()+
1;l=v.getDate();break;case "'":if(o("'"))s();else k=true;break;default:s()}if(q<b.length)throw"Extra/unparsed characters found in date: "+b.substring(q);if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,j-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=j||v.getDate()!=l)throw"Invalid date";return v},ATOM:"yy-mm-dd",
COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:
null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,s){return i(o)?s[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case "d":l+=g("d",b.getDate(),2);break;case "D":l+=j("D",b.getDay(),e,f);break;case "o":l+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":l+=g("m",b.getMonth()+1,2);break;case "M":l+=j("M",b.getMonth(),h,c);break;case "y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":l+=b.getTime();break;case "!":l+=b.getTime()*1E4+this._ticksTo1970;break;case "'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=
0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==C?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);
var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;
i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case "d":case "D":g+=parseInt(k[1],10);break;case "w":case "W":g+=parseInt(k[1],10)*7;break;case "m":case "M":l+=parseInt(k[1],10);g=
Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case "y":case "Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>
12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&
a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?
new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));
n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var s=this._get(a,"nextText");s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(m,
g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>";j=this._get(a,"currentText");s=this._get(a,"gotoCurrent")&&
a.currentDay?u:b;j=!h?j:this.formatDate(j,s,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+B+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
B+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var q=this._get(a,"dayNamesMin"),A=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),D=this._get(a,"showOtherMonths"),K=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var E=this._getDefaultDate(a),w="",x=0;x<i[0];x++){var O=
"";this.maxRows=4;for(var G=0;G<i[1];G++){var P=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",y="";if(l){y+='<div class="ui-datepicker-group';if(i[1]>1)switch(G){case 0:y+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:y+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:y+=" ui-datepicker-group-middle";t="";break}y+='">'}y+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&
x==0?c?f:n:"")+(/all|right/.test(t)&&x==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,x>0||G>0,A,v)+'</div><table class="ui-datepicker-calendar" cellspacing="0" cellpadding="0"><thead><tr>';var z=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var r=(t+h)%7;z+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+s[r]+'">'+q[r]+"</span></th>"}y+=z+"</tr></thead><tbody>";z=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,
z);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;z=Math.ceil((t+z)/7);this.maxRows=z=l?this.maxRows>z?this.maxRows:z:z;r=this._daylightSavingAdjust(new Date(m,g,1-t));for(var Q=0;Q<z;Q++){y+="<tr>";var R=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(r)+"</td>";for(t=0;t<7;t++){var I=p?p.apply(a.input?a.input[0]:null,[r]):[true,""],F=r.getMonth()!=g,L=F&&!K||!I[0]||k&&r<k||o&&r>o;R+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(r.getTime()==
P.getTime()&&g==a.selectedMonth&&a._keyEvent||E.getTime()==r.getTime()&&E.getTime()==P.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!D?"":" "+I[1]+(r.getTime()==u.getTime()?" "+this._currentClass:"")+(r.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!F||D)&&I[2]?' title="'+I[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+B+".datepicker._selectDay('#"+a.id+"',"+r.getMonth()+","+r.getFullYear()+', this);return false;"')+">"+(F&&!D?"&#xa0;":L?'<span class="ui-state-default">'+
r.getDate()+"</span>":'<a class="ui-state-default'+(r.getTime()==b.getTime()?" ui-state-highlight":"")+(r.getTime()==u.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+'" href="#">'+r.getDate()+"</a>")+"</td>";r.setDate(r.getDate()+1);r=this._daylightSavingAdjust(r)}y+=R+"</tr>"}g++;if(g>11){g=0;m++}y+="</tbody></table>"+(l?"</div>"+(i[0]>0&&G==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");O+=y}w+=O}w+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=false;return w},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&
(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&l)?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var s=(new Date).getFullYear();i=function(q){q=q.match(/c[+-].*/)?c+parseInt(q.substring(1),10):q.match(/[+-].*/)?s+parseInt(q,10):parseInt(q,10);return isNaN(q)?s:q};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,
e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+
(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b)b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,
e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;
if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));return this.each(function(){typeof a==
"string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new M;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.16";window["DP_jQuery_"+B]=d})(jQuery);

/*
 * jQuery UI Autocomplete 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(d){var e=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.propAttr("readOnly"))){g=
false;var f=d.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:a._move("previousPage",c);break;case f.PAGE_DOWN:a._move("nextPage",c);break;case f.UP:a._move("previous",c);c.preventDefault();break;case f.DOWN:a._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:if(a.menu.active){g=true;c.preventDefault()}case f.TAB:if(!a.menu.active)return;a.menu.select(c);break;case f.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=
a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(g){g=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};
this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",b)[0]).mousedown(function(c){var f=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(h){h.target!==a.element[0]&&h.target!==f&&!d.ui.contains(f,h.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,f){f=f.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:f})&&/^key/.test(c.originalEvent.type)&&
a.element.val(f.value)},selected:function(c,f){var h=f.item.data("item.autocomplete"),i=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=i;setTimeout(function(){a.previous=i;a.selectedItem=h},1)}false!==a._trigger("select",c,{item:h})&&a.element.val(h.value);a.term=a.element.val();a.close(c);a.selectedItem=h},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&
b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,g;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,f){f(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(c,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:g,data:c,dataType:"json",autocompleteRequest:++e,success:function(h){this.autocompleteRequest===e&&f(h)},error:function(){this.autocompleteRequest===e&&f([])}})}}else this.source=
this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();
this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||
b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var g=this;
d.each(b,function(c,f){g._renderItem(a,f)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")},filter:function(a,b){var g=new RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return g.test(c.label||c.value||c)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){if(d(a.target).closest(".ui-menu-item a").length){a.preventDefault();e.select(a)}});this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){e.activate(a,d(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(e,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,g=this.element.scrollTop(),c=this.element.height();if(b<0)this.element.scrollTop(g+b);else b>=c&&this.element.scrollTop(g+b-c+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:a})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
this._trigger("blur");this.active=null}},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,a,b){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.activate(b,e):this.activate(b,this.element.children(a))}else this.activate(b,
this.element.children(a))},nextPage:function(e){if(this.hasScroll())if(!this.active||this.last())this.activate(e,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return c<10&&c>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(e,g)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll())if(!this.active||this.first())this.activate(e,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=d(this).offset().top-a+b-d(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})})(jQuery);

/*!
 * $ Templates Plugin 1.1
 * https://github.com/KanbanSolutions/jquery-tmpl
 * Requires $ 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

/*
    Tags:
    {%if <condition> %}<action>{%/if%}
    {%if <condition> %}<action>{%else%}<action>{%/if%}
    {%if <condition> %}<action>{%elif <condition> %}<action>{%else%}<action>{%/if%}
    {%each <array_or_object> %}$value, $index{%/each%}
    {%tmpl <template>%}
    {%= js call %}
    {%html js call %}
*/
(function($, undefined) {
    var oldManip = $.fn.domManip, tmplItmAtt = "_tmplitem",
            newTmplItems = {}, wrappedItems = {}, appendToTmplItems, topTmplItem = { key: 0, data: {} }, itemKey = 0, cloneIndex = 0, stack = [];


    var regex = {
        sq_escape: /([\\'])/g,
        sq_unescape: /\\'/g,
        dq_unescape: /\\\\/g,
        nl_strip: /[\r\t\n]/g,
        shortcut_replace: /\$\{([^\}]*)\}/g,
        lang_parse: /\{\%(\/?)(\w+|.)(?:\(((?:[^\%]|\%(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\%]|\%(?!\}))*?)\))?\s*\%\}/g,
        old_lang_parse: /\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
        template_anotate: /(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,
        text_only_template: /^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
        html_expr: /^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! |\{\%! /,
        last_word: /\w$/
    };

    function newTmplItem(options, parentItem, fn, data) {
        // Returns a template item data structure for a new rendered instance of a template (a 'template item').
        // The content field is a hierarchical array of strings and nested items (to be
        // removed and replaced by nodes field of dom elements, once inserted in DOM).
        var newItem = {
            data: data || (data === 0 || data === false) ? data : (parentItem ? parentItem.data : {}),
            _wrap: parentItem ? parentItem._wrap : null,
            tmpl: null,
            parent: parentItem || null,
            nodes: [],
            calls: tiCalls,
            nest: tiNest,
            wrap: tiWrap,
            html: tiHtml,
            update: tiUpdate
        };
        if(options) {
            $.extend(newItem, options, { nodes: [], parent: parentItem });
        }
        if(fn) {
            // Build the hierarchical content to be used during insertion into DOM
            newItem.tmpl = fn;
            newItem._ctnt = newItem._ctnt || $.isFunction(newItem.tmpl) && newItem.tmpl($, newItem) || fn;
            newItem.key = ++itemKey;
            // Keep track of new template item, until it is stored as $ Data on DOM element
            (stack.length ? wrappedItems : newTmplItems)[itemKey] = newItem;
        }
        return newItem;
    }

    // Override appendTo etc., in order to provide support for targeting multiple elements. (This code would disappear if integrated in jquery core).
    $.each({
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith"
            }, function(name, original) {
                $.fn[ name ] = function(selector) {
                    var ret = [], insert = $(selector), elems, i, l, tmplItems,
                            parent = this.length === 1 && this[0].parentNode;

                    appendToTmplItems = newTmplItems || {};
                    if(parent && parent.nodeType === 11 && parent.childNodes.length === 1 && insert.length === 1) {
                        insert[ original ](this[0]);
                        ret = this;
                    } else {
                        for(i = 0,l = insert.length; i < l; i++) {
                            cloneIndex = i;
                            elems = (i > 0 ? this.clone(true) : this).get();
                            $(insert[i])[ original ](elems);
                            ret = ret.concat(elems);
                        }
                        cloneIndex = 0;
                        ret = this.pushStack(ret, name, insert.selector);
                    }
                    tmplItems = appendToTmplItems;
                    appendToTmplItems = null;
                    $.tmpl.complete(tmplItems);
                    return ret;
                };
            });

    $.fn.extend({
        // Use first wrapped element as template markup.
        // Return wrapped set of template items, obtained by rendering template against data.
        tmpl: function(data, options, parentItem) {
            var ret = $.tmpl(this[0], data, options, parentItem);
            return ret;
        },

        // Find which rendered template item the first wrapped DOM element belongs to
        tmplItem: function() {
            var ret = $.tmplItem(this[0]);
            return ret;
        },

        // Consider the first wrapped element as a template declaration, and get the compiled template or store it as a named template.
        template: function(name) {
            var ret = $.template(name, this[0]);
            return ret;
        },

        domManip: function(args, table, callback, options) {
            if(args[0] && $.isArray(args[0])) {
                var dmArgs = $.makeArray(arguments), elems = args[0], elemsLength = elems.length, i = 0, tmplItem;
                while(i < elemsLength && !(tmplItem = $.data(elems[i++], "tmplItem"))) {
                }
                if(tmplItem && cloneIndex) {
                    dmArgs[2] = function(fragClone) {
                        // Handler called by oldManip when rendered template has been inserted into DOM.
                        $.tmpl.afterManip(this, fragClone, callback);
                    };
                }
                oldManip.apply(this, dmArgs);
            } else {
                oldManip.apply(this, arguments);
            }
            cloneIndex = 0;
            if(!appendToTmplItems) {
                $.tmpl.complete(newTmplItems);
            }
            return this;
        }
    });

    $.extend({
        // Return wrapped set of template items, obtained by rendering template against data.
        tmpl: function(tmpl, data, options, parentItem) {
            var ret, topLevel = !parentItem;
            if(topLevel) {
                // This is a top-level tmpl call (not from a nested template using {{tmpl}})
                parentItem = topTmplItem;
                tmpl = $.template[tmpl] || $.template(null, tmpl);
                wrappedItems = {}; // Any wrapped items will be rebuilt, since this is top level
            } else if(!tmpl) {
                // The template item is already associated with DOM - this is a refresh.
                // Re-evaluate rendered template for the parentItem
                tmpl = parentItem.tmpl;
                newTmplItems[parentItem.key] = parentItem;
                parentItem.nodes = [];
                if(parentItem.wrapped) {
                    updateWrapped(parentItem, parentItem.wrapped);
                }
                // Rebuild, without creating a new template item
                return $(build(parentItem, null, parentItem.tmpl($, parentItem)));
            }
            if(!tmpl) {
                return []; // Could throw...
            }
            if(typeof data === "function") {
                data = data.call(parentItem || {});
            }
            if(options && options.wrapped) {
                updateWrapped(options, options.wrapped);
            }
            ret = $.isArray(data) ?
                    $.map(data, function(dataItem) {
                        return dataItem ? newTmplItem(options, parentItem, tmpl, dataItem) : null;
                    }) :
                    [ newTmplItem(options, parentItem, tmpl, data) ];
            return topLevel ? $(build(parentItem, null, ret)) : ret;
        },

        // Return rendered template item for an element.
        tmplItem: function(elem) {
            var tmplItem;
            if(elem instanceof $) {
                elem = elem[0];
            }
            while(elem && elem.nodeType === 1 && !(tmplItem = $.data(elem,
                    "tmplItem")) && (elem = elem.parentNode)) {
            }
            return tmplItem || topTmplItem;
        },

        // Set:
        // Use $.template( name, tmpl ) to cache a named template,
        // where tmpl is a template string, a script element or a $ instance wrapping a script element, etc.
        // Use $( "selector" ).template( name ) to provide access by name to a script block template declaration.

        // Get:
        // Use $.template( name ) to access a cached template.
        // Also $( selectorToScriptBlock ).template(), or $.template( null, templateString )
        // will return the compiled template, without adding a name reference.
        // If templateString includes at least one HTML tag, $.template( templateString ) is equivalent
        // to $.template( null, templateString )
        template: function(name, tmpl) {
            if(tmpl) {
                // Compile template and associate with name
                if(typeof tmpl === "string") {
                    // This is an HTML string being passed directly in.
                    tmpl = buildTmplFn(tmpl)
                } else if(tmpl instanceof $) {
                    tmpl = tmpl[0] || {};
                }
                if(tmpl.nodeType) {
                    // If this is a template block, use cached copy, or generate tmpl function and cache.
                    tmpl = $.data(tmpl, "tmpl") || $.data(tmpl, "tmpl", buildTmplFn(tmpl.innerHTML));
                    // Issue: In IE, if the container element is not a script block, the innerHTML will remove quotes from attribute values whenever the value does not include white space.
                    // This means that foo="${x}" will not work if the value of x includes white space: foo="${x}" -> foo=value of x.
                    // To correct this, include space in tag: foo="${ x }" -> foo="value of x"
                }
                return typeof name === "string" ? ($.template[name] = tmpl) : tmpl;
            }
            // Return named compiled template
            return name ? (typeof name !== "string" ? $.template(null, name) :
                    ($.template[name] ||
                        // If not in map, treat as a selector. (If integrated with core, use quickExpr.exec)
                     $.template(null, name))) : null;
        },

        encode: function(text) {
            // Do HTML encoding replacing < > & and ' and " by corresponding entities.
            return ("" + text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");
        }
    });

    $.extend($.tmpl, {
        tag: {
            "tmpl": {
                _default: { $2: "null" },
                open: "if($notnull_1){__=__.concat($item.nest($1,$2));}"
                // tmpl target parameter can be of type function, so use $1, not $1a (so not auto detection of functions)
                // This means that {{tmpl foo}} treats foo as a template (which IS a function).
                // Explicit parens can be used if foo is a function that returns a template: {{tmpl foo()}}.
            },
            "wrap": {
                _default: { $2: "null" },
                open: "$item.calls(__,$1,$2);__=[];",
                close: "call=$item.calls();__=call._.concat($item.wrap(call,__));"
            },
            "each": {
                _default: { $2: "$index, $value" },
                open: "if($notnull_1){$.each($1a,function($2){with(this){",
                close: "}});}"
            },
            "if": {
                open: "if(($notnull_1) && $1a){",
                close: "}"
            },
            "else": {
                open: "}else{"
            },
            "elif": {
                open: "}else if(($notnull_1) && $1a){"
            },
            "elseif": {
                open: "}else if(($notnull_1) && $1a){"
            },
            "html": {
                // Unecoded expression evaluation.
                open: "if($notnull_1){__.push($1a);}"
            },
            "=": {
                // Encoded expression evaluation. Abbreviated form is ${}.
                _default: { $1: "$data" },
                open: "if($notnull_1){__.push($.encode($1a));}"
            },
            "!": {
                // Comment tag. Skipped by parser
                open: ""
            }
        },

        // This stub can be overridden, e.g. in jquery.tmplPlus for providing rendered events
        complete: function(items) {
            newTmplItems = {};
        },

        // Call this from code which overrides domManip, or equivalent
        // Manage cloning/storing template items etc.
        afterManip: function afterManip(elem, fragClone, callback) {
            // Provides cloned fragment ready for fixup prior to and after insertion into DOM
            var content = fragClone.nodeType === 11 ?
                    $.makeArray(fragClone.childNodes) :
                    fragClone.nodeType === 1 ? [fragClone] : [];

            // Return fragment to original caller (e.g. append) for DOM insertion
            callback.call(elem, fragClone);

            // Fragment has been inserted:- Add inserted nodes to tmplItem data structure. Replace inserted element annotations by $.data.
            storeTmplItems(content);
            cloneIndex++;
        }
    });

    //========================== Private helper functions, used by code above ==========================

    function build(tmplItem, nested, content) {
        // Convert hierarchical content into flat string array
        // and finally return array of fragments ready for DOM insertion
        var frag, ret = content ? $.map(content, function(item) {
            return (typeof item === "string") ?
                // Insert template item annotations, to be converted to $.data( "tmplItem" ) when elems are inserted into DOM.
                    (tmplItem.key ? item.replace(regex.template_anotate,
                            "$1 " + tmplItmAtt + "=\"" + tmplItem.key + "\" $2") : item) :
                // This is a child template item. Build nested template.
                    build(item, tmplItem, item._ctnt);
        }) :
            // If content is not defined, insert tmplItem directly. Not a template item. May be a string, or a string array, e.g. from {{html $item.html()}}.
                tmplItem;
        if(nested) {
            return ret;
        }

        // top-level template
        ret = ret.join("");

        // Support templates which have initial or final text nodes, or consist only of text
        // Also support HTML entities within the HTML markup.
        ret.replace(regex.text_only_template, function(all, before, middle, after) {
            frag = $(middle).get();

            storeTmplItems(frag);
            if(before) {
                frag = unencode(before).concat(frag);
            }
            if(after) {
                frag = frag.concat(unencode(after));
            }
        });
        return frag ? frag : unencode(ret);
    }

    function unencode(text) {
        // Use createElement, since createTextNode will not render HTML entities correctly
        var el = document.createElement("div");
        el.innerHTML = text;
        return $.makeArray(el.childNodes);
    }

    // Generate a reusable function that will serve to render a template against data
    function buildTmplFn(markup) {
        var parse_tag = function(all, slash, type, fnargs, target, parens, args) {
            if(!type) {
                return "');__.push('";
            }

            var tag = $.tmpl.tag[ type ], def, expr, exprAutoFnDetect;
            if(!tag) {
                console.group("Exception");
                console.error(markup);
                console.error('Unknown tag: ', type);
                console.error(all);
                console.groupEnd("Exception");
                return "');__.push('";
            }
            def = tag._default || [];
            if(parens && !regex.last_word.test(target)) {
                target += parens;
                parens = "";
            }
            if(target) {
                target = unescape(target);
                args = args ? ("," + unescape(args) + ")") : (parens ? ")" : "");
                // Support for target being things like a.toLowerCase();
                // In that case don't call with template item as 'this' pointer. Just evaluate...
                expr = parens ? (target.indexOf(".") > -1 ? target + unescape(parens) : ("(" + target + ").call($item" + args)) : target;
                exprAutoFnDetect = parens ? expr : "(typeof(" + target + ")==='function'?(" + target + ").call($item):(" + target + "))";
            } else {
                exprAutoFnDetect = expr = def.$1 || "null";
            }
            fnargs = unescape(fnargs);
            return "');" +
                   tag[ slash ? "close" : "open" ]
                           .split("$notnull_1").join(target ? "typeof(" + target + ")!=='undefined' && (" + target + ")!=null" : "true")
                           .split("$1a").join(exprAutoFnDetect)
                           .split("$1").join(expr)
                           .split("$2").join(fnargs || def.$2 || "") +
                   "__.push('";
        };

        var depreciated_parse = function() {
            if($.tmpl.tag[arguments[2]]) {
                console.group("Depreciated");
                console.info(markup);
                console.info('Markup has old style indicators, use {% %} instead of {{ }}');
                console.info(arguments[0]);
                console.groupEnd("Depreciated");
                return parse_tag.apply(this, arguments);
            } else {
                return "');__.push('{{" + arguments[2] + "}}');__.push('";
            }
        };

        // Use the variable __ to hold a string array while building the compiled template. (See https://github.com/jquery/jquery-tmpl/issues#issue/10).
        // Introduce the data as local variables using with(){}
        var parsed_markup_data = "var $=$,call,__=[],$data=$item.data; with($data){__.push('";

        // Convert the template into pure JavaScript
        var parsed_markup = $.trim(markup);
        parsed_markup = parsed_markup.replace(regex.sq_escape, "\\$1");
        parsed_markup = parsed_markup.replace(regex.nl_strip, " ");
        parsed_markup = parsed_markup.replace(regex.shortcut_replace, "{%= $1%}");
        parsed_markup = parsed_markup.replace(regex.lang_parse,  parse_tag);
        parsed_markup = parsed_markup.replace(regex.old_lang_parse, depreciated_parse);
        parsed_markup_data += parsed_markup;

        parsed_markup_data += "');}return __;";

        return new Function("$", "$item", parsed_markup_data);
    }

    function updateWrapped(options, wrapped) {
        // Build the wrapped content.
        options._wrap = build(options, true,
                // Suport imperative scenario in which options.wrapped can be set to a selector or an HTML string.
                $.isArray(wrapped) ? wrapped : [regex.html_expr.test(wrapped) ? wrapped : $(wrapped).html()]
        ).join("");
    }

    function unescape(args) {
        return args ? args.replace(regex.sq_unescape, "'").replace(regex.dq_unescape, "\\") : null;
    }

    function outerHtml(elem) {
        var div = document.createElement("div");
        div.appendChild(elem.cloneNode(true));
        return div.innerHTML;
    }

    // Store template items in $.data(), ensuring a unique tmplItem data data structure for each rendered template instance.
    function storeTmplItems(content) {
        var keySuffix = "_" + cloneIndex, elem, elems, newClonedItems = {}, i, l, m;
        for(i = 0,l = content.length; i < l; i++) {
            if((elem = content[i]).nodeType !== 1) {
                continue;
            }
            elems = elem.getElementsByTagName("*");
            for(m = elems.length - 1; m >= 0; m--) {
                processItemKey(elems[m]);
            }
            processItemKey(elem);
        }
        function processItemKey(el) {
            var pntKey, pntNode = el, pntItem, tmplItem, key;
            // Ensure that each rendered template inserted into the DOM has its own template item,
            if((key = el.getAttribute(tmplItmAtt))) {
                while(pntNode.parentNode && (pntNode = pntNode.parentNode).nodeType === 1 && !(pntKey = pntNode.getAttribute(tmplItmAtt))) {
                }
                if(pntKey !== key) {
                    // The next ancestor with a _tmplitem expando is on a different key than this one.
                    // So this is a top-level element within this template item
                    // Set pntNode to the key of the parentNode, or to 0 if pntNode.parentNode is null, or pntNode is a fragment.
                    pntNode = pntNode.parentNode ? (pntNode.nodeType === 11 ? 0 : (pntNode.getAttribute(tmplItmAtt) || 0)) : 0;
                    if(!(tmplItem = newTmplItems[key])) {
                        // The item is for wrapped content, and was copied from the temporary parent wrappedItem.
                        tmplItem = wrappedItems[key];
                        tmplItem = newTmplItem(tmplItem, newTmplItems[pntNode] || wrappedItems[pntNode]);
                        tmplItem.key = ++itemKey;
                        newTmplItems[itemKey] = tmplItem;
                    }
                    if(cloneIndex) {
                        cloneTmplItem(key);
                    }
                }
                el.removeAttribute(tmplItmAtt);
            } else if(cloneIndex && (tmplItem = $.data(el, "tmplItem"))) {
                // This was a rendered element, cloned during append or appendTo etc.
                // TmplItem stored in $ data has already been cloned in cloneCopyEvent. We must replace it with a fresh cloned tmplItem.
                cloneTmplItem(tmplItem.key);
                newTmplItems[tmplItem.key] = tmplItem;
                pntNode = $.data(el.parentNode, "tmplItem");
                pntNode = pntNode ? pntNode.key : 0;
            }
            if(tmplItem) {
                pntItem = tmplItem;
                // Find the template item of the parent element.
                // (Using !=, not !==, since pntItem.key is number, and pntNode may be a string)
                while(pntItem && pntItem.key != pntNode) {
                    // Add this element as a top-level node for this rendered template item, as well as for any
                    // ancestor items between this item and the item of its parent element
                    pntItem.nodes.push(el);
                    pntItem = pntItem.parent;
                }
                // Delete content built during rendering - reduce API surface area and memory use, and avoid exposing of stale data after rendering...
                delete tmplItem._ctnt;
                delete tmplItem._wrap;
                // Store template item as $ data on the element
                $.data(el, "tmplItem", tmplItem);
            }
            function cloneTmplItem(key) {
                key = key + keySuffix;
                tmplItem = newClonedItems[key] =
                           (newClonedItems[key] || newTmplItem(tmplItem,
                                   newTmplItems[tmplItem.parent.key + keySuffix] || tmplItem.parent));
            }
        }
    }

    //---- Helper functions for template item ----

    function tiCalls(content, tmpl, data, options) {
        if(!content) {
            return stack.pop();
        }
        stack.push({ _: content, tmpl: tmpl, item:this, data: data, options: options });
    }

    function tiNest(tmpl, data, options) {
        // nested template, using {{tmpl}} tag
        return $.tmpl($.template(tmpl), data, options, this);
    }

    function tiWrap(call, wrapped) {
        // nested template, using {{wrap}} tag
        var options = call.options || {};
        options.wrapped = wrapped;
        // Apply the template, which may incorporate wrapped content,
        return $.tmpl($.template(call.tmpl), call.data, options, call.item);
    }

    function tiHtml(filter, textOnly) {
        var wrapped = this._wrap;
        return $.map(
                $($.isArray(wrapped) ? wrapped.join("") : wrapped).filter(filter || "*"),
                function(e) {
                    return textOnly ?
                            e.innerText || e.textContent :
                            e.outerHTML || outerHtml(e);
                });
    }

    function tiUpdate() {
        var coll = this.nodes;
        $.tmpl(null, null, null, this).insertBefore(coll[0]);
        $(coll).remove();
    }
})(jQuery);

(function ($) {

    $.fn.syncData = function(data, fromDom) {
        if (data == null) return this;

        var members = this.find("[member]");
        if (members == null || members.length == 0) return this;

        members.each(function(index, item) {
            var member = $(item);
            var memberName = member.member();
            var objToSearch = data;
            
            if (memberName.indexOf(".") != -1) {
                var splits = memberName.split(".");
                memberName = splits[1];
                var memberObj = splits[0];

                if (memberObj in data) objToSearch = data[memberObj];
                if (typeof objToSearch !== "object") {
                    objToSearch = data;
                }
            }

            if (memberName in objToSearch) {
                if (fromDom) {
                    objToSearch[memberName] = member.valExt();
                } else {
                    member.valExt(objToSearch[memberName]);
                }
            }
        });
        return this;
    };

    $.fn.member = function() {
        return this.attr("member");
    };

    $.fn.valExt = function(value) {
        // If value is present it means we're setting the value in the dom
        var type = this.attr("type");
        if (type == "checkbox") {
            if (value == null) {
                return this.prop("checked");
            } else {
                return this.prop("checked", !!value);
            }
        } if (type == "file") {
            if (value == null) {
                return $('form')[0];
            }
        }
        else if (this.is("span")) {
            if (value == null) {
                return this.text();
            } else {
                return this.text(value);
            }
        } else if (this.is("select")) {
            if (value == null) {
                return this.find(":selected")[0].id;
            } else {
                return this.find("option[id='" + value + "']").prop("selected", true);
            }
        }

        
        if (value == null) {
            return this.val();
        } else {
            return this.val(value);
        }
    };
})(jQuery);

(function ($) {
	var menu = $('<div class="context-menu"></div>');
	var hide = function () {
		menu.remove();
	};
	$(document).click(hide).contextmenu(hide);

	/*
	options: { items: [{label: "...", action: function(...) {...}}, ...], position: {top: ..., left: ...} }
	*/
	$.fn.contextMenu = function (options) {
		menu.remove().empty();
		$(options.items).each(function (index, item) {
			var a = $('<a class="context-menu-link" href="javascript:void(0);"></a>').html(item.label);
			$("<div></div").append(a).click(item.action).appendTo(menu);
		});

		menu.css({ top: options.position.top, left: options.position.left }).appendTo(document.body);
		return this;
	}
})(jQuery);
function k(a){throw a;}var l=void 0,n=!0,o=null,s=!1;function aa(){return function(){}}function v(a){return function(b){this[a]=b}}function x(a){return function(){return this[a]}}function ba(a){return function(){return a}}var z,da=da||{},A=this;window.dojo&&window.dojo.provide("shared.html5chart.TrWebChart");function ea(a){for(var a=a.split("."),b=A,c;c=a.shift();)if(b[c]!=o)b=b[c];else return o;return b}function fa(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return"array"==ha(a)}function la(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function na(a){return"function"==ha(a)}function oa(a){a=ha(a);return"object"==a||"array"==a||"function"==a}function pa(a){return a[qa]||(a[qa]=++ra)}var qa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ra=0;
function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){a||k(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(o,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};function B(a,b){var c=a.split("."),d=A;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==l?d[f]=b:d=d[f]?d[f]:d[f]={}}function za(a,b){function c(){}c.prototype=b.prototype;a.ud=b.prototype;a.prototype=new c};B("TRWebchart_Fin.MACDDisplayType",{NoForest:0,ForestOnly:1,All:2});B("TRWebchart_Shared.YAxisTitleLocation",{Top:0,Side:1});B("TRWebchart_Shared.MarqueeDisplayMode",{Static:0,Interactive:1,None:2});B("TRWebchart_Shared.TextAlignmentH",{Left:"left",Center:"center",Right:"right",Start:"start",End:"end"});B("TRWebchart_Shared.TextAlignmentV",{Top:"top",Middle:"middle",Bottom:"bottom"});B("TRWebchart_Shared.YAxisLocation",{Left:0,Right:1});B("TRWebchart_Shared.GridLineTypeDef",{Solid:0,Dotted:1});B("TRWebchart_Shared.GradientPattern",{Alternate:0,FullScreen:1});B("TRWebchart_Shared.ScatterType",{None:0,Square:1,Circle:2,Diamond:3});B("TRWebchart_Shared.LegendLocation",{TopOutside:0,TopInside:1});
B("TRWebchart_Shared.LastPointMarkerSeriesColorOption",{OnBackground:0,OnFrame:1});B("TRWebchart_Shared.CursorEffect",{BouncyBalls:0,VerticalLine:1});B("TRWebchart_Shared.LabelAlignment",{Top:0,Right:1});B("TRWebchart_Shared.YieldType",{ys:0,xs:1,ss:2,rs:3,ks:4,js:5});B("TRWebchart_Shared.ShortNameOption",{None:0,K:1,M:2,B:3,T:4});B("TRWebchart_Shared.DecimalNumberOption",{NoDecimal:0,OneDecimal:1,TwoDecimal:2,ThreeDecimal:3,FourDecimal:4,FiveDecimal:5});
B("TRWebchart_Shared.GroupingSeparatorOption",{None:"",Comma:","});function C(a,b,c){this.stroke=a;this.Dg=b;this.Eg=c};function Aa(){this.aa={zj:"Auto",jj:"Auto",eg:0,G:"#000000",lf:"#202020",mj:n,Ea:{Ac:n,Ib:"",Ua:"#c8c7c7",o:"15px",u:"bold",m:this.hb,kg:"#242424",G:"#000000"},ij:{wj:n,Ua:"#cccccc",o:"15px",m:this.hb},ge:{sj:n,G:"#000000",th:0,pf:20},m:this.hb,o:"15px"};this.eb={Yc:s,Ee:0,mf:"#242424",dg:"#1f1f1f"};this.Bd={uj:n,uh:"#363636",vh:1,gg:0};this.sb={rb:[new C("#ff9900","#ff9900","#1f1f1f"),new C("#cc33ff","#cc33ff","#1f1f1f"),new C("#66cc00","#66cc00","#1f1f1f"),new C("#0099ff","#0099ff","#1f1f1f"),new C("#ff3300",
"#ff3300","#1f1f1f"),new C("#e6de00","#e6de00","#1f1f1f"),new C("#999999","#999999","#1f1f1f"),new C("#5533ff","#5533ff","#1f1f1f"),new C("#ff0073","#ff0073","#1f1f1f"),new C("#996300","#996300","#1f1f1f"),new C("#00ccff","#00ccff","#1f1f1f"),new C("#ff4d9d","#ff4d9d","#1f1f1f"),new C("#ffffff","#ffffff","#1f1f1f"),new C("#cc1f00","#cc1f00","#1f1f1f"),new C("#00ffc3","#00ffc3","#1f1f1f"),new C("#00b3e3","#00b3e3","#1f1f1f"),new C("#cccccc","#cccccc","#1f1f1f"),new C("#339900","#339900","#1f1f1f"),
new C("#0000ff","#0000ff","#1f1f1f"),new C("#660099","#660099","#1f1f1f"),new C("#c40c79","#c40c79","#1f1f1f"),new C("#def37f","#def37f","#1f1f1f"),new C("#6386d3","#6386d3","#1f1f1f"),new C("#e9484e","#e9484e","#1f1f1f"),new C("#00b3e3","#00b3e3","#1f1f1f")],Zo:2,Ml:1,yj:new C("#bebebe","#bebebe","#1f1f1f"),nf:[[new C("#def37f","#def37f","#1f1f1f"),new C("#6386d3","#6386d3","#1f1f1f"),new C("#996300","#996300","#1f1f1f")],[new C("#996300","#996300","#1f1f1f"),new C("#ff0073","#ff0073","#1f1f1f"),
new C("#5533ff","#5533ff","#1f1f1f")],[new C("#0099ff","#0099ff","#1f1f1f"),new C("#ff3300","#ff3300","#1f1f1f"),new C("#e6de00","#e6de00","#1f1f1f")]]};this.he={rb:[new C("#7e8e90","#7e8e90","#1f1f1f"),new C("#7e8e90","#7e8e90","#1f1f1f")],hc:1};this.hg={km:s,Ua:new C("#7e8e90","#7e8e90","#1f1f1f"),hc:1,Ul:1};this.p={Oa:1,qc:0,m:this.hb,o:"15px",u:"bold",Ca:"#c8c7c7",ig:n,tj:s,Ah:26,Na:{G:"#000000",Hb:"#222222",fc:"#1f2120",gc:"#112121"}};this.H={m:this.hb,u:"normal",o:"10px",rc:"#3b3b3c",Ca:"#cccccc",
Ba:"#202020",G:"#363636",Bc:n,Ch:s,kb:{Dd:n,Oa:0,u:"bold",o:"15px"}};this.W={m:this.hb,u:"bold",o:"15px",rc:"#3b3b3c",Ca:"#cccccc",Ba:"#202020",G:"#000000",Cd:n,He:{xj:n,m:this.hb,u:"bold",o:"15px",Ib:"",Ua:"#cccccc"}};this.fg={jm:n,m:this.hb,u:"bold",o:"15px",Ca:"#bfbfbf",fj:"solid 1px #ffffff",Ba:{Hb:"#5f5f5f",fc:"#282828",gc:"#1f1f1f"}};this.jg={Ua:"#000000",hc:"2px"};this.Ad={Ge:{vj:n,m:this.hb,u:"bold",o:"15px",gm:0},gj:{rm:s,sm:n}};this.qm={Pl:s,kp:{m:"sans-serif",u:"bold",o:"15px",Ua:"#fff",
jp:2},Lp:{Yo:"#fff",ej:4,dj:"#fff"},Qo:{gq:[{value:0,color:"#fff"},{value:0.236068,color:"#ff0"},{value:0.381966,color:"#0ff"}],Ro:"#f0f",Lo:n,ej:4,dj:"#fff",Eo:"#fff"}};this.Mp="scheme2"}Aa.prototype.hb="Helvetica, Arial";function Ba(){Aa.call(this)}Ba.prototype=new Aa;function Da(){this.aa={zj:"Auto",jj:"Auto",eg:0,G:"#000000",lf:"#232423",mj:n,Ea:{Ac:s,Ib:"",Ua:"#c8c7c7",o:"12px",u:"bold",m:"Helvetica, Arial",kg:"#242424",G:"#000000"},ij:{wj:n,Ua:"#cccccc",o:"11px",m:"Helvetica, Arial"},ge:{sj:n,G:"#000000",th:0,pf:0}};this.eb={Yc:s,Ee:0,mf:"#242424",dg:"#1f1f1f"};this.Bd={uj:n,yh:s,uh:"#363636",vh:1,gg:0};this.sb={rb:[new C("#ffbe26","#ffbe26","#ffffff"),new C("#25acc5","#25acc5","#ffffff"),new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29","#ff4c29","#ffffff"),
new C("#e0e05b","#e0e05b","#ffffff"),new C("#2381c4","#2381c4","#ffffff"),new C("#54af2d","#54af2d","#ffffff"),new C("#de2a2a","#de2a2a","#ffffff"),new C("#f6e128","#f6e128","#ffffff"),new C("#24c4a0","#24c4a0","#ffffff"),new C("#b7cf40","#b7cf40","#ffffff"),new C("#b52838","#b52838","#ffffff"),new C("#2692d1","#2692d1","#ffffff"),new C("#ff8826","#ff8826","#ffffff"),new C("#2273bf","#2273bf","#ffffff")],Jp:2,Kp:2,nf:[[new C("#25acc5","#25acc5","#ffffff"),new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29",
"#ff4c29","#ffffff")],[new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29","#ff4c29","#ffffff"),new C("#e0e05b","#e0e05b","#ffffff")],[new C("#ff4c29","#ff4c29","#ffffff"),new C("#e0e05b","#e0e05b","#ffffff"),new C("#2381c4","#2381c4","#ffffff")]],Xl:new C("#cc1f00","#cc1f00","#ffffff"),bm:new C("#339900","#339900","#ffffff")};this.om={Ba:"#dfdfdf",mm:"#434343",o:"12px",m:"Helvetica, Arial",im:"rgba(0, 0, 0, 0.2)",nj:5,hm:10};this.he={rb:[new C("#7e8e90","#7e8e90","#1f1f1f"),new C("#7e8e90","#7e8e90",
"#1f1f1f")],hc:1};this.p={Oa:1,qc:0,m:"Helvetica, Arial",o:"11px",u:"bold",Ca:"#c8c7c7",ig:s,tj:s,Ah:26,Na:{G:"#000000",Hb:"#222222",fc:"#1f2120",gc:"#112121"}};this.Wl={Oa:1,xp:n,m:"Helvetica, Arial",o:"11px",u:"normal",Yl:"#c8c7c7",Uo:"#ffffff",Fe:"1px solid #ffffff",wp:"#ff8000",fm:"1px solid #f49b23",Na:{G:"#000000",Hb:"#222222",fc:"#1f2120",gc:"#112121"}};this.H={m:"Helvetica, Arial",u:"normal",o:"10px",rc:"#3b3b3c",Ca:"#cccccc",Ba:"#202020",G:"#363636",Bc:n,Ch:s,kb:{Dd:n,Oa:1,u:"bold",o:"11px"}};
this.W={m:"Helvetica, Arial",u:"bold",o:"11px",rc:"#3b3b3c",Ca:"#cccccc",Ba:"#202020",G:"#000000",Cd:n,He:{xj:n,m:"Helvetica, Arial",u:"bold",o:"11px",Ib:"",Ua:"#cccccc"}};this.jg={G:"#000000",hc:"2px"};this.qf={m:"Helvetica, Arial",u:"normal",$l:"11px",Zl:"#777777",Rl:"11px",Ql:"#cccccc",wh:"#e5e5e5",Fe:"1",rj:"14px",em:"#ffffff",xh:"#e5e5e5",qj:"2",pj:"2"}};function Ea(){Da.call(this)}Ea.prototype=new Da;function Fa(a){if(!Ga.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ha,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ia,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ja,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ka,"&quot;"));return a}var Ha=/&/g,Ia=/</g,Ja=/>/g,Ka=/\"/g,Ga=/[&<>\"]/;function La(a,b){var c=String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,b-d);return Array(d+1).join("0")+c}var Ma=2147483648*Math.random()|0,Na={};var Oa,Pa,Ta,Ua;function Va(){return A.navigator?A.navigator.userAgent:o}Ua=Ta=Pa=Oa=s;var Wa;if(Wa=Va()){var Xa=A.navigator;Oa=0==Wa.indexOf("Opera");Pa=!Oa&&-1!=Wa.indexOf("MSIE");Ta=!Oa&&-1!=Wa.indexOf("WebKit");Ua=!Oa&&!Ta&&"Gecko"==Xa.product}var Ya=Oa,Za=Pa,$a=Ua,ab=Ta,bb=A.navigator,cb=-1!=(bb&&bb.platform||"").indexOf("Mac"),fb;
a:{var gb="",hb;if(Ya&&A.opera)var ib=A.opera.version,gb="function"==typeof ib?ib():ib;else if($a?hb=/rv\:([^\);]+)(\)|;)/:Za?hb=/MSIE\s+([^\);]+)(\)|;)/:ab&&(hb=/WebKit\/(\S+)/),hb)var jb=hb.exec(Va()),gb=jb?jb[1]:"";if(Za){var kb,lb=A.document;kb=lb?lb.documentMode:l;if(kb>parseFloat(gb)){fb=String(kb);break a}}fb=gb}var mb={};
function pb(a){var b;if(!(b=mb[a])){b=0;for(var c=String(fb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",h=d[e]||"",i=RegExp("(\\d*)(\\D*)","g"),j=RegExp("(\\d*)(\\D*)","g");do{var m=i.exec(g)||["","",""],p=j.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=mb[a]=0<=b}return b}var qb={};function rb(){return qb[9]||(qb[9]=Za&&document.documentMode&&9<=document.documentMode)};var D={Oo:["BC","AD"],No:["Before Christ","Anno Domini"],dp:"JFMAMJJASOND".split(""),dm:"JFMAMJJASOND".split(""),ap:"January February March April May June July August September October November December".split(" "),cm:"January February March April May June July August September October November December".split(" "),pp:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),oj:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Op:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
vp:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),rp:"Sun Mon Tue Wed Thu Fri Sat".split(" "),up:"Sun Mon Tue Wed Thu Fri Sat".split(" "),vs:"SMTWTFS".split(""),tp:"SMTWTFS".split(""),qp:["Q1","Q2","Q3","Q4"],lp:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Do:["AM","PM"],Ol:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],lm:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],os:6,Bs:[5,6],ps:2};var sb=Array.prototype,tb=sb.indexOf?function(a,b,c){return sb.indexOf.call(a,b,c)}:function(a,b,c){c=c==o?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ub=sb.forEach?function(a,b,c){sb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=ma(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)};
function vb(a,b){for(var c=a.length,d=ma(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(l,d[f],f,a))return f;return-1}function wb(a){if(!ia(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function xb(a){return sb.concat.apply(sb,arguments)}function yb(a,b,c,d){sb.splice.apply(a,zb(arguments,1))}function zb(a,b,c){return 2>=arguments.length?sb.slice.call(a,b):sb.slice.call(a,b,c)}
function Ab(a){for(var b={},c=0,d=0;d<a.length;){var f=a[d++],e=oa(f)?"o"+pa(f):(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(b,e)||(b[e]=n,a[c++]=f)}a.length=c}function Bb(a,b){return a>b?1:a<b?-1:0};function Cb(){}function Db(a){if("number"==typeof a){var b=new Cb;b.Oi=a;var c;c=a;if(0==c)c="Etc/GMT";else{var d=["Etc/GMT",0>c?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);c%=60;0!=c&&d.push(":",La(c,2));c=d.join("")}b.so=c;0==a?a="UTC":(c=["UTC",0>a?"+":"-"],a=Math.abs(a),c.push(Math.floor(a/60)%100),a%=60,0!=a&&c.push(":",a),a=c.join(""));b.Dl=[a,a];b.Ui=[];return b}b=new Cb;b.so=a.id;b.Oi=-a.std_offset;b.Dl=a.names;b.Ui=a.transitions;return b}
function Fb(a,b){for(var c=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5,d=0;d<a.Ui.length&&c>=a.Ui[d];)d+=2;return 0==d?0:a.Ui[d-1]};function Gb(a){this.xi=[];"number"==typeof a?this.Gh(a):this.ke(a)}var Hb=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvzZ]+/];Gb.prototype.ke=function(a){for(;a;)for(var b=0;b<Hb.length;++b){var c=a.match(Hb[b]);if(c){c=c[0];a=a.substring(c.length);0==b&&("''"==c?c="'":(c=c.substring(1,c.length-1),c=c.replace(/\'\'/,"'")));this.xi.push({text:c,type:b});break}}};
Gb.prototype.ea=function(a,b){var c=b?6E4*(a.getTimezoneOffset()-(b.Oi-Fb(b,a))):0,d=c?new Date(a.getTime()+c):a,f=d;b&&d.getTimezoneOffset()!=a.getTimezoneOffset()&&(f=new Date(a.getTime()+(c+(0<c?-864E5:864E5))));for(var c=[],e=0;e<this.xi.length;++e){var g=this.xi[e].text;1==this.xi[e].type?c.push(Ib(g,a,d,f,b)):c.push(g)}return c.join("")};Gb.prototype.Gh=function(a){if(4>a)a=D.Ol[a];else if(8>a)a=D.lm[a-4];else if(12>a)a=D.Ol[a-8]+" "+D.lm[a-8];else{this.Gh(10);return}this.ke(a)};
function Kb(a,b){var c=b.getMonth();switch(a){case 5:return D.dp[c];case 4:return D.ap[c];case 3:return D.pp[c];default:return La(c+1,a)}}function Lb(a,b){var c=b.getDay();switch(a){case 5:return D.tp[c];case 4:return D.vp[c];case 3:return D.up[c];default:return La(c,1)}}function Mb(a,b){var c=b.getMonth();switch(a){case 5:return D.dm[c];case 4:return D.cm[c];case 3:return D.oj[c];default:return La(c+1,a)}}
function Ib(a,b,c,d,f){var e=a.length;switch(a.charAt(0)){case "G":return b=0<c.getFullYear()?1:0,4<=e?D.No[b]:D.Oo[b];case "y":return b=c.getFullYear(),0>b&&(b=-b),2==e?La(b%100,2):String(b);case "M":return Kb(e,c);case "k":return La(d.getHours()||24,e);case "S":return(d.getTime()%1E3/1E3).toFixed(Math.min(3,e)).substr(2)+(3<e?La(0,e-3):"");case "E":return b=c.getDay(),4<=e?D.Op[b]:D.rp[b];case "a":return e=d.getHours(),D.Do[12<=e&&24>e?1:0];case "h":return La(d.getHours()%12||12,e);case "K":return La(d.getHours()%
12,e);case "H":return La(d.getHours(),e);case "c":return Lb(e,c);case "L":return Mb(e,c);case "Q":return b=Math.floor(c.getMonth()/3),4>e?D.qp[b]:D.lp[b];case "d":return La(c.getDate(),e);case "m":return La(d.getMinutes(),e);case "s":return La(d.getSeconds(),e);case "v":return e=f||Db(b.getTimezoneOffset()),e.so;case "z":return a=f||Db(b.getTimezoneOffset()),4>e?a.Dl[0<Fb(a,b)?2:0]:a.Dl[0<Fb(a,b)?3:1];case "Z":return a=f||Db(b.getTimezoneOffset()),4>e?(e=-(a.Oi-Fb(a,b)),b=[0>e?"-":"+"],e=Math.abs(e),
b.push(La(Math.floor(e/60)%100,2),La(e%60,2))):(e=a.Oi-Fb(a,b),b=["GMT"],b.push(0>=e?"+":"-"),e=Math.abs(e),b.push(La(Math.floor(e/60)%100,2),":",La(e%60,2))),e=b.join("");default:return""}};function Nb(a){Gb.call(this,a)}za(Nb,Gb);B("TRWebchart_Shared.DateTimeFormat",Nb);Nb.prototype.ea=function(a,b){return Nb.ud.ea.call(this,a,b)};Nb.prototype.format=Nb.prototype.ea;var Ob="Price",Pb="Vol",Qb="Yield",Rb="Value % ",Sb="Display Range",Tb="Rebase Date",Ub="Unknown",Vb={en:{lj:"MMM-yyyy",zd:"dd-MMM-yyyy"},ja:{lj:"yyyy\u5e74M\u6708",zd:"yyyy\u5e74M\u6708d\u65e5"},zh:{lj:"yyyy\u5e74M\u6708",zd:"yyyy\u5e74M\u6708d\u65e5"},get:function(a){return 0===a.toLowerCase().indexOf("zh")?Vb.zh:0===a.toLowerCase().indexOf("ja")?Vb.ja:Vb.en}};function F(a){return a&&0<a.length}
function Wb(a){if(!("undefined"!==typeof window.Html5ChartMessages&&"undefined"!=typeof window.Html5ChartMessages.PRICE))return a;switch(a){case Ob:return F(window.Html5ChartMessages.PRICE)?window.Html5ChartMessages.PRICE:a;case Pb:return F(window.Html5ChartMessages.VOLUME)?window.Html5ChartMessages.VOLUME:a;case Qb:return F(window.Html5ChartMessages.YIELD)?window.Html5ChartMessages.YIELD:a;case Rb:return F(window.Html5ChartMessages.Np)?window.Html5ChartMessages.Np:a;case Ub:return F(window.Html5ChartMessages.UNKNOWN)?
window.Html5ChartMessages.UNKNOWN:a;case Sb:return F(window.Html5ChartMessages.Ko)?window.Html5ChartMessages.Ko:a;case Tb:return F(window.Html5ChartMessages.mp)?window.Html5ChartMessages.mp:a;default:return a}}
var Zb={"TA-RequestFormat":"Request format is incorrect","TA-InvalidRequestField":"Request has an invalid field","TA-IntervalNotSupported":"Interval is not supported","TA-MissingField":"Request is missing a required field","TA-TSIOperationCancelled":"TimeSeries request has been canceled","TA-TSIEmptyResult":"TimeSeries returns empty result","TA-TSIRequestFailed":"TimeSeries request failed","TA-TSIUnknownFeed":"Invalid feed","TA-TSIUnknownInstrument":"Invalid RIC","TA-TSIIntervalNotSupported":"Interval is not supported",
"TA-TSINotPermissioned":"The user does not have permission for the requested data","TA-TSIUnknownView":"Invalid field name","TA-TSIUnsupportedRequest":"Request is not supported","TA-TSIInvalidRequest":"Invalid Timeseries request","TA-TSIGeneralError":"Timeseries data retrieval error","TA-SNSGeneralError":"Data retrieval error","TA-InvalidUDAInput":"Invalid parameters","TA-NotAccessSnapshotServer":"Data retrieval error","TA-NotSupported":"Not supported","TA-GeneralError":"Server internal error","TA-MismatchNumOfRICs":"Number of RICs not enough"};
function $b(a){var b=Zb[a];if(!b)return o;if("undefined"===typeof window.Html5ChartMessages)return b;switch(a){case "TA-RequestFormat":return F(window.Html5ChartMessages.np)?window.Html5ChartMessages.np:b;case "TA-InvalidRequestField":return F(window.Html5ChartMessages.Wo)?window.Html5ChartMessages.Wo:b;case "TA-MissingField":return F(window.Html5ChartMessages.bp)?window.Html5ChartMessages.bp:b;case "TA-TSIOperationCancelled":return F(window.Html5ChartMessages.Dp)?window.Html5ChartMessages.Dp:b;case "TA-TSIEmptyResult":return F(window.Html5ChartMessages.yp)?
window.Html5ChartMessages.yp:b;case "TA-TSIRequestFailed":return F(window.Html5ChartMessages.Ep)?window.Html5ChartMessages.Ep:b;case "TA-TSIUnknownFeed":return F(window.Html5ChartMessages.Fp)?window.Html5ChartMessages.Fp:b;case "TA-TSIUnknownInstrument":return F(window.Html5ChartMessages.Gp)?window.Html5ChartMessages.Gp:b;case "TA-TSIIntervalNotSupported":return F(window.Html5ChartMessages.Ap)?window.Html5ChartMessages.Ap:b;case "TA-TSINotPermissioned":return F(window.Html5ChartMessages.Cp)?window.Html5ChartMessages.Cp:
b;case "TA-TSIUnknownView":return F(window.Html5ChartMessages.Hp)?window.Html5ChartMessages.Hp:b;case "TA-TSIUnsupportedRequest":return F(window.Html5ChartMessages.Ip)?window.Html5ChartMessages.Ip:b;case "TA-TSIInvalidRequest":return F(window.Html5ChartMessages.Bp)?window.Html5ChartMessages.Bp:b;case "TA-TSIGeneralError":return F(window.Html5ChartMessages.zp)?window.Html5ChartMessages.zp:b;case "TA-SNSGeneralError":return F(window.Html5ChartMessages.sp)?window.Html5ChartMessages.sp:b;case "TA-InvalidUDAInput":return F(window.Html5ChartMessages.Xo)?
window.Html5ChartMessages.Xo:b;case "TA-NotAccessSnapshotServer":return F(window.Html5ChartMessages.ep)?window.Html5ChartMessages.ep:b;case "TA-GeneralError":return F(window.Html5ChartMessages.To)?window.Html5ChartMessages.To:b;default:return b}};function ac(){}function bc(a,b){if(!b||!b.StandardOffset||!b.DaylightSavingStart)return a;a.setUTCMinutes(a.getUTCMinutes()+parseInt(b.StandardOffset,10));b.HasDaylightSaving===n&&a>b.DaylightSavingStart&&a<b.DaylightSavingEnd&&a.setUTCMinutes(a.getUTCMinutes()+b.DaylightSavingDelta);return a}function cc(){this.ef=new ac};function dc(a,b){this.start=a;this.end=b}B("TRWebchart_Shared.DateTimeRange",dc);function ec(a,b){this.analysisType=a;this.analysisParamList=b;this.analysisRICList=[];this.analysisOptions=l}B("TRWebchart_Fin.AnalysisInfo",ec);ec.prototype.or=v("analysisOptions");ec.prototype.setAnalysisOptions=ec.prototype.or;ec.prototype.pr=v("analysisRICList");ec.prototype.setAnalysisRICList=ec.prototype.pr;B("TRWebchart_Fin.AnalysisParam",function(a,b,c){this.name=a;this.value=b;this.__type=c});B("TRWebchart_Fin.AnalysisOption",function(a,b){this.ts=a;this.As=b});
var fc={None:0,SMA:1,DoubleSMA:2,TripleSMA:3,BBands:4,RSI:5,StochasticsFast:6,StochasticsSlow:7,MACD:8,VolCloseToClose:9,PreviousDayClose:10,Volume:11,Correlation:12,Rebase:13,TwoWayRatio:14,ThreeWayRatio:15,CrackSpread:16,ButterflySpread:17,SimpleRatio:18,Spread:19,CrushSpread:20};B("TRWebchart_Fin.AnalysisType",fc);
var gc={AnalysisParamDoubleType:"AnalysisParameterDouble:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",AnalysisParamIntType:"AnalysisParameterInt:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",AnalysisParamStringType:"AnalysisParameterString:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/"};B("TRWebchart_Fin.AnalysisParamType",gc);
var hc={1:"SimpleMovingAverage",2:"DoubleMA",3:"TripleMA",4:"BBands",6:"StochasticsFast",7:"StochasticsSlow",8:"MACD",5:"RSI",9:"VolCloseToClose",10:"PreviousDayClose",12:"Correlation",13:"Rebase",14:"TwoWayRatio",15:"ThreeWayRatio",16:"CrackSpread",17:"ButterflySpread",18:"SimpleRatio",19:"Spread",20:"CrushSpread"};B("TRWebchart_Fin.ParamMeta",function(a,b,c,d,f){this.qs=a;this.ws=b;this.zs=c;this.ms=d;this.hs=f});function J(){}J.prototype.Vh=function(){var a=new Date;return a.getFullYear()+""+a.getMonth()+""+a.getDate()+""+a.getHours()+""+a.getMinutes()+""+a.getSeconds()+""+a.getMilliseconds()+"_"+(Math.floor(1E3*Math.random())+1)};function ic(a){var b=[0,0],c=document.getElementById(a);for(c===o&&k("incoming id '"+a+"' is not valid");c;)b[0]+=c.offsetLeft+c.clientLeft,b[1]+=c.offsetTop+c.clientTop,c=c.offsetParent;return b}
function jc(a,b,c){if(a>b)var d=a,a=b,b=d;var d=0,f=c.length-1;a>c[d]&&(d=kc(a,c,n));b<c[f]&&(f=kc(b,c,s));d===o||f===o?f=d=-1:d>f&&(f=d=-1);return{vl:d,Ag:f}}function kc(a,b,c){for(var d=0,f=b.length-1,e;d<=f;)if(e=d+(f-d)/2,0<e%1&&(e=Math.ceil(e)),a<b[e])f=e-1;else if(a>b[e])d=e+1;else return e;if(c===n){if(b[e]<a&&(e+=1,e>=b.length||b[e]<a))return o}else if(b[e]>a&&(e-=1,0>e||b[e]>a))return o;return e}
J.prototype.Fd=function(a,b){b||k("Incoming dateList cannot be null.");var c=b[b.length-1],d=new Date(+c);d.setHours(0,0,0,0);var f=1,e;if(1===a)return d;if(1<a)for(var g=d=new Date(+c);!(e=kc(d,b,s),e!==o&&(c=b[e],d.setFullYear(c.getFullYear()),d.setMonth(c.getMonth()),c.getFullYear()===g.getFullYear()&&c.getMonth()===g.getMonth()&&c.getDate()===g.getDate()?d.setDate(c.getDate()-1):(d.setDate(c.getDate()),f++),g=new Date(c.getFullYear(),c.getMonth(),c.getDate())),f==a||e===o););d.setHours(0,0,0,
0);return d};function lc(a,b){CanvasRenderingContext2D.prototype.lineTo.call(this,mc(a)+0.5,mc(b)+0.5)}function nc(a,b){CanvasRenderingContext2D.prototype.moveTo.call(this,mc(a)+0.5,mc(b)+0.5)}function oc(a){var b=HTMLCanvasElement.prototype.getContext.call(this,a);"2d"===a&&(b.moveTo=nc,b.lineTo=lc);return b}var mc=Math.round;J.prototype.Ec=function(){var a=document.createElement("canvas");Za&&window.G_vmlCanvasManager?window.G_vmlCanvasManager.initElement(a):a.getContext=oc;return a};
function pc(a,b,c){isNaN(b)&&(b=1);isNaN(c)&&(c=1);var d=a.getContext("2d"),f=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);a.style.width=b+"px";a.style.height=c+"px";a.width=b*f;a.height=c*f;1!==f&&d.scale(f,f)}
function qc(a,b){if(0===b)return a;1!==b&&k("It is not supported.");for(var c=[],d=0,d=0;d<a.length;++d)!isNaN(a[d].g)&&!isNaN(a[d].i)&&c.push(a[d]);var f=[],e=[];e.push(0);var g,h,i;if(0<c.length)if(f[f.length]=c[0],2===c.length)f[f.length]=c[1];else{for(var j=[],m=c.length,d=0;d<m;d++)j[j.length]=c[d];for(c=0;c<=m-2;c++){if(0===c)g=j[0],h=j[1],i=j[2],d=g,g=h,i=rc(d,g,i)[0],d=sc(d,tc(d,i),i,g);else if(c===m-2)d=j[m-3],g=j[m-2],h=j[m-1],i=g,g=h,d=rc(d,i,g)[1],d=sc(i,d,tc(g,d),g);else{d=j[c-1];g=j[c];
h=j[c+1];i=j[c+2];var d=rc(d,g,h),p=d[1],d=rc(g,h,i),d=sc(g,p,d[0],h)}if(0<d.length){for(i=0;i<=d.length;i++)f.push(d[i]);e.push(f.length-1)}}}return f}function uc(a,b,c){if(!c.Columns||!c.Columns.length)return o;for(var d,f=0,e=c.Columns.length;f<e;f++)if(c.Columns[f].Name.toUpperCase()===a.toUpperCase()){d=c.Columns[f].ColumnProperties;for(var g=0,h=d?d.length:0;g<h;++g)if(d[g].Name.toUpperCase()===b.toUpperCase())return d[g].Value}return o}
function vc(a,b){var c=o,d=b.Scalars;if(d)for(var f=0,e=d.length;f<e;f++)if(d[f].Name.toUpperCase()===a.toUpperCase()){c=d[f].Value;break}return c}J.prototype.e=function(a,b){for(var c=0,d=b.Columns.length;c<d;c++)if(b.Columns[c].Name.toUpperCase()===a.toUpperCase())return b.Columns[c].Values;return o};function K(a){return!a||!a.k?s:(a=a.k.MessageId)&&-1<a.indexOf("Fundamental")}function wc(a){return!a||!a.k?s:(a=a.k.MessageId)&&-1<a.indexOf("Economic")}
function xc(a){return a&&(a.c&&0<a.c.length)&&"Volume"===a.c[0]?n:s}function yc(a){return!a||!a.k?s:(a=a.k.MessageId)&&-1<a.indexOf("AnalysisType:")?n:s}function zc(a){return 0===a.indexOf("FID|")}function Ac(a){return a.split("|")[1]}function Bc(a){return 0===a.indexOf("YLD|")}function Cc(a){return a.split("|")[1]}function Dc(a){for(var a=a.analysisParamList,b=[],c=0;c<a.length;c++)-1!==a[c].name.indexOf("scalingFactor")&&b.push(a[c].value);return b}
function Ec(a){return!yc(a)&&!xc(a)&&!K(a)&&!wc(a)}function Fc(a){var b=0,a=a.split(":");"AnalysisType"===a[0]&&(b=parseInt(a[1],10));return b}function Gc(a){var b=-1,a=a.split(":");"AnalysisType"===a[0]&&(b=parseInt(a[2],10));return b}function Hc(a){return-1<[5,6,7,8,9,11,12].indexOf(a)}function Mc(a){return-1<[14,15,16,17,18,19,20].indexOf(a)}
J.prototype.Xh=function(a,b,c,d){var f=-1;if(!b||d!==Nc&&d!==Oc&&this.f.q.end<b[0])f=-1;else for(var e=a.length-1;0<e;e--)if(d=a[e],!isNaN(d)&&(!c||b[e]<=c)){f=e;break}return f};function Pc(a,b,c){var d=a?a.uq:"";b&&!a&&(d=",");b=""!==d?"#"+d+"##0":"0";a=a?a.Mm:c;for(c=0;c<a;c++)b+=0===c?".0":"0";return b}function Qc(a,b){var c,d,f;zc(a)?(d=a.split("|")[2],f=Ac(a)):f=Bc(a)?Cc(a):a;for(var e=0,g=b?b.length:0;e<g;++e)d!==l?d===b[e].hq&&b[e].Sa===f&&(c=b[e]):b[e].Sa===f&&(c=b[e]);return c}
function Rc(a,b,c){if(!a||!(0<=a.length)||!b||!(0<b.length))return 0;for(var d=0,f=0;f<b.length;++f){var e=b[f];1>a.filter(function(a){return c(a,e)}).length&&(a.push(e),++d)}return d}function Sc(a){return!a?o:-1<a.indexOf("Fundamental")?a.split("|")[2]||o:o}function Tc(a){return!a?o:-1<a.indexOf("Economic")?a.split("|")[1]||o:o}J.prototype.Xd=function(a){var b=s;a&&0<=Uc(a.analysisParamList)&&(b=n);return b};
function Uc(a){var b=-1;if(!a||!a.length)return b;var c=vb(a,function(a){return"rebase_scale"===a.name});-1!==c&&(b=a[c].value);return b}function Vc(a){var b=s,c;for(c in a)if(a.hasOwnProperty(c)){b=n;break}return b};function N(){this.F=new J}B("TRWebchart_Shared.TextUtil",N);function Wc(a,b){return a.measureText(b).width}N.prototype.Jd=function(a){return this.sg(a,"M")};N.prototype.determineFontHeight=N.prototype.Jd;
N.prototype.sg=function(a,b){var c;c=document.getElementById("html5DummyForMeasuring");c||(c=document.createElement("span"),c.setAttribute("id","html5DummyForMeasuring"),c.style.position="absolute",c.style.left="-300px",document.body.appendChild(c));c.innerHTML=b;c.setAttribute("style","position:absolute;left:-300px;"+a);return c.offsetHeight+3};N.prototype.determineTextFontHeight=N.prototype.sg;
N.prototype.pe=function(a,b){var c;if(!a||2>a.length)c="normal 11px Helvetica, Arial";else{c=a.split(";");for(var d="normal",f="11px",e="Helvetica, Arial",g,h,i=0;i<c.length;i++)g=c[i].split(":"),1<g.length&&(h=g[0],-1<h.toLowerCase().indexOf("font-family")?e=g[1]:-1<h.toLowerCase().indexOf("font-size")?f=g[1]:-1<h.toLowerCase().indexOf("font-weight")&&(d=g[1]));c=d+" "+f+" "+e}d=document.getElementById("html5DummyForCanvasMeasuring");d||(d=this.F.Ec(),d.setAttribute("id","html5DummyForCanvasMeasuring"),
d.setAttribute("height",5),d.setAttribute("width",5),d.style.position="absolute",d.style.left="-300px",document.body.appendChild(d));d=d.getContext("2d");d.font=c;return d.measureText(b).width+6};N.prototype.determineFontWidth=N.prototype.pe;N.prototype.kq=function(a){if(a===o||1>a.length)return"";var b=a.search(/[A-Z]/g),c=a.search(/[a-z]/g);return-1<b&&-1<c?a:a.toUpperCase()};N.prototype.formatSymbolInput=N.prototype.kq;function Xc(a,b){for(var c in a)b.call(l,a[c],c,a)}function Yc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Zc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var $c="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ad(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<$c.length;e++)c=$c[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function bd(a){if("function"==typeof a.Yh)return a.Yh();if(ma(a))return a.split("");if(la(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Yc(a)}function cd(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(la(a)||ma(a))ub(a,b,c);else{var d;if("function"==typeof a.Cf)d=a.Cf();else if("function"!=typeof a.Yh)if(la(a)||ma(a)){d=[];for(var f=a.length,e=0;e<f;e++)d.push(e)}else d=Zc(a);else d=l;for(var f=bd(a),e=f.length,g=0;g<e;g++)b.call(c,f[g],d&&d[g],a)}};var fd="StopIteration"in A?A.StopIteration:Error("StopIteration");function gd(){}gd.prototype.next=function(){k(fd)};gd.prototype.Aj=function(){return this};function hd(a){if(a instanceof gd)return a;if("function"==typeof a.Aj)return a.Aj(s);if(la(a)){var b=0,c=new gd;c.next=function(){for(;;){b>=a.length&&k(fd);if(b in a)return a[b++];b++}};return c}k(Error("Not implemented"))};function id(a,b){this.nd={};this.Qk={};var c=arguments.length;if(1<c){c%2&&k(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof id?(c=a.Cf(),d=a.Yh()):(c=Zc(a),d=Yc(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}z=id.prototype;z.Eb=0;z.Xi=0;z.Yh=function(){var a=[],b;for(b in this.nd)":"==b.charAt(0)&&a.push(this.nd[b]);return a};
z.Cf=function(){var a=[],b;for(b in this.nd)if(":"==b.charAt(0)){var c=b.substring(1);a.push(this.Qk[b]?Number(c):c)}return a};z.clear=function(){this.nd={};this.Xi=this.Eb=0;this.Qk={}};z.get=function(a,b){var c=":"+a;return c in this.nd?this.nd[c]:b};z.set=function(a,b){var c=":"+a;c in this.nd||(this.Xi++,this.Eb++,"number"==typeof a&&(this.Qk[c]=n));this.nd[c]=b};z.clone=function(){return new id(this)};
z.Aj=function(a){var b=0,c=this.Cf(),d=this.nd,f=this.Xi,e=this,g=new gd;g.next=function(){for(;;){f!=e.Xi&&k(Error("The map has changed since the iterator was created"));b>=c.length&&k(fd);var g=c[b++];return a?g:d[":"+g]}};return g};function jd(a){return kd(a||arguments.callee.caller,[])}
function kd(a,b){var c=[];if(0<=tb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ld(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var e;e=d[f];switch(typeof e){case "object":e=e?"object":"null";break;case "string":break;case "number":e=String(e);break;case "boolean":e=e?"true":"false";break;case "function":e=(e=ld(e))?e:"[fn]";break;default:e=typeof e}40<e.length&&(e=e.substr(0,40)+"...");c.push(e)}b.push(a);c.push(")\n");try{c.push(kd(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ld(a){if(md[a])return md[a];a=String(a);if(!md[a]){var b=/function ([^\(]+)/.exec(a);md[a]=b?b[1]:"[Anonymous]"}return md[a]}var md={};function nd(){}nd.prototype.Pm=s;nd.prototype.yf=function(){this.Pm||(this.Pm=n,this.cd())};nd.prototype.cd=function(){this.aq&&od.apply(o,this.aq)};function od(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];la(d)?od.apply(o,d):d&&"function"==typeof d.yf&&d.yf()}};function pd(a,b){this.Kn=b;this.Gg=[];a>this.Kn&&k(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Gg.push(this.Oh())}za(pd,nd);z=pd.prototype;z.Gm=o;z.Om=o;function qd(a,b){a.Gg.length<a.Kn?a.Gg.push(b):a.Zj(b)}z.Oh=function(){return this.Gm?this.Gm():{}};z.Zj=function(a){if(this.Om)this.Om(a);else if(oa(a))if(na(a.yf))a.yf();else for(var b in a)delete a[b]};z.cd=function(){pd.ud.cd.call(this);for(var a=this.Gg;a.length;)this.Zj(a.pop());delete this.Gg};function rd(a,b,c,d,f){this.reset(a,b,c,d,f)}rd.prototype.nr=0;rd.prototype.Ym=o;rd.prototype.Xm=o;var sd=0;rd.prototype.reset=function(a,b,c,d,f){this.nr="number"==typeof f?f:sd++;this.st=d||ya();this.Ug=a;this.Pq=b;this.Vs=c;delete this.Ym;delete this.Xm};rd.prototype.eo=v("Ug");function td(a){this.Qq=a}td.prototype.wi=o;td.prototype.Ug=o;td.prototype.Rj=o;td.prototype.ln=o;function ud(a,b){this.name=a;this.value=b}ud.prototype.toString=x("name");var vd=new ud("SEVERE",1E3),wd=new ud("WARNING",900),xd=new ud("CONFIG",700),yd=new ud("FINE",500);td.prototype.getParent=x("wi");td.prototype.eo=v("Ug");function zd(a){return a.Ug?a.Ug:a.wi?zd(a.wi):o}
td.prototype.log=function(a,b,c){if(a.value>=zd(this).value){a=this.pq(a,b,c);b="log:"+a.Pq;A.console&&(A.console.timeStamp?A.console.timeStamp(b):A.console.markTimeline&&A.console.markTimeline(b));A.msWriteProfilerMark&&A.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.ln)for(var f=0,e=l;e=c.ln[f];f++)e(d);b=b.getParent()}}};
td.prototype.pq=function(a,b,c){var d=new rd(a,String(b),this.Qq);if(c){d.Ym=c;var f;var e=arguments.callee.caller;try{var g;var h=ea("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var i,j,m=s;try{i=c.lineNumber||c.Us||"Not available"}catch(p){i="Not available",m=n}try{j=c.fileName||c.filename||c.sourceURL||h}catch(q){j="Not available",m=n}g=m||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:i,fileName:j,stack:c.stack||"Not available"}:c}f="Message: "+Fa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Fa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Fa(jd(e)+"-> ")}catch(r){f="Exception trying to expose exception! You win, we lose. "+r}d.Xm=f}return d};function Ad(a,b){a.log(yd,b,l)}var Gd={},Hd=o;
function Id(a){Hd||(Hd=new td(""),Gd[""]=Hd,Hd.eo(xd));var b;if(!(b=Gd[a])){b=new td(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Id(a.substr(0,c));c.Rj||(c.Rj={});c.Rj[d]=b;b.wi=c;Gd[a]=b}return b};function Jd(){this.Bg=[];this.Wk=new id;this.uo=this.vo=this.wo=this.oo=0;this.mh=new id;this.Dm=this.to=0;this.Sq=1;this.ck=new pd(0,4E3);this.ck.Oh=function(){return new Kd};this.po=new pd(0,50);this.po.Oh=function(){return new Ld};var a=this;this.xk=new pd(0,2E3);this.xk.Oh=function(){return String(a.Sq++)};this.xk.Zj=aa();this.$p=3}Jd.prototype.Zb=Id("goog.debug.Trace");function Ld(){this.Hl=this.time=this.count=0}
Ld.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Hl&&a.push(" [VarAlloc = ",this.Hl,"]");return a.join("")};function Kd(){}function Md(a,b,c,d){var f=[];-1==c?f.push("    "):f.push(Nd(a.Vm-c));f.push(" ",Od(a.Vm-b));0==a.dk?f.push(" Start        "):1==a.dk?(f.push(" Done "),f.push(Nd(a.rt-a.startTime)," ms ")):f.push(" Comment      ");f.push(d,a);0<a.Ur&&f.push("[VarAlloc ",a.Ur,"] ");return f.join("")}
Kd.prototype.toString=function(){return this.type==o?this.Vp:"["+this.type+"] "+this.Vp};Jd.prototype.reset=function(a){this.$p=a;for(a=0;a<this.Bg.length;a++){var b=this.ck.id;b&&qd(this.xk,b);qd(this.ck,this.Bg[a])}this.Bg.length=0;this.Wk.clear();this.oo=ya();this.Dm=this.to=this.uo=this.vo=this.wo=0;b=this.mh.Cf();for(a=0;a<b.length;a++){var c=this.mh.get(b[a]);c.count=0;c.time=0;c.Hl=0;qd(this.po,c)}this.mh.clear()};
Jd.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Bg.length;d++){var f=this.Bg[d];1==f.dk&&c.pop();a.push(" ",Md(f,this.oo,b,c.join("")));b=f.Vm;a.push("\n");0==f.dk&&c.push("|  ")}if(0!=this.Wk.Eb){var e=ya();a.push(" Unstopped timers:\n");d=this.Wk;b=function(b){a.push("  ",b," (",e-b.startTime," ms, started at ",Od(b.startTime),")\n")};if(la(d))try{ub(d,b,l)}catch(g){g!==fd&&k(g)}else{d=hd(d);try{for(;;)b.call(l,d.next())}catch(h){h!==fd&&k(h)}}}b=this.mh.Cf();for(d=0;d<b.length;d++)c=
this.mh.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.to,"\n","Total comments created ",this.Dm,"\n","Overhead start: ",this.wo," ms\n","Overhead end: ",this.vo," ms\n","Overhead comment: ",this.uo," ms\n");return a.join("")};function Nd(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Od(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Jd;function Pd(){}var Qd=0;z=Pd.prototype;z.key=0;z.Of=s;z.xm=s;z.bi=function(a,b,c,d,f,e){na(a)?this.un=n:a&&a.handleEvent&&na(a.handleEvent)?this.un=s:k(Error("Invalid listener argument"));this.Vg=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.wk=e;this.xm=s;this.key=++Qd;this.Of=s};z.handleEvent=function(a){return this.un?this.Vg.call(this.wk||this.src,a):this.Vg.handleEvent.call(this.Vg,a)};!Za||rb();var Rd=!Za||rb();Za&&pb("8");!ab||pb("528");$a&&pb("1.9b")||Za&&pb("8")||Ya&&pb("9.5")||ab&&pb("528");!$a||pb("8");var Sd="createTouch"in document?"touchstart":"mousedown",Td="createTouch"in document?"touchmove":"mousemove",Ud="createTouch"in document?"touchend":"mouseup";function Vd(a,b){this.type=a;this.currentTarget=this.target=b}za(Vd,nd);Vd.prototype.cd=function(){delete this.type;delete this.target;delete this.currentTarget};Vd.prototype.Nf=s;Vd.prototype.Di=n;function Wd(a){Wd[" "](a);return a}Wd[" "]=fa;function Xd(a,b){a&&this.bi(a,b)}za(Xd,Vd);z=Xd.prototype;z.target=o;z.relatedTarget=o;z.offsetX=0;z.offsetY=0;z.clientX=0;z.clientY=0;z.yi=0;z.zi=0;z.screenX=0;z.screenY=0;z.button=0;z.keyCode=0;z.charCode=0;z.ctrlKey=s;z.altKey=s;z.shiftKey=s;z.metaKey=s;z.fr=s;z.Wm=o;
z.bi=function(a,b){var c=this.type=a.type;Vd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if($a){var f;a:{try{Wd(d.nodeName);f=n;break a}catch(e){}f=s}f||(d=o)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=a.offsetX!==l?a.offsetX:a.layerX;this.offsetY=a.offsetY!==l?a.offsetY:a.layerY;this.clientX=a.clientX!==l?a.clientX:a.pageX;this.clientY=a.clientY!==l?a.clientY:a.pageY;this.yi=a.touches!==
l&&a.touches[0]?a.touches[0].clientX:this.clientX;this.zi=a.touches!==l&&a.touches[0]?a.touches[0].clientY:this.clientY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.fr=cb?a.metaKey:a.ctrlKey;this.state=a.state;this.Wm=a;delete this.Di;delete this.Nf};
z.cd=function(){Xd.ud.cd.call(this);this.relatedTarget=this.currentTarget=this.target=this.Wm=o};var Yd={},Zd={},$d={},ae={};
function be(a,b,c,d,f){if(b)if(ia(b))for(var e=0;e<b.length;e++)be(a,b[e],c,d,f);else{var d=!!d,g=Zd;b in g||(g[b]={Eb:0,yc:0});g=g[b];d in g||(g[d]={Eb:0,yc:0},g.Eb++);var g=g[d],h=pa(a),i;g.yc++;if(g[h]){i=g[h];for(e=0;e<i.length;e++)if(g=i[e],g.Vg==c&&g.wk==f){if(g.Of)break;return}}else i=g[h]=[],g.Eb++;var j=ce,m=Rd?function(a){return j.call(m.src,m.key,a)}:function(a){a=j.call(m.src,m.key,a);if(!a)return a},e=m;e.src=a;g=new Pd;g.bi(c,e,a,b,d,f);c=g.key;e.key=c;i.push(g);Yd[c]=g;$d[h]||($d[h]=
[]);$d[h].push(g);a.addEventListener?(a==A||!a.Im)&&a.addEventListener(b,e,d):a.attachEvent(b in ae?ae[b]:ae[b]="on"+b,e)}else k(Error("Invalid event type"))}function de(a,b,c,d,f){if(ia(b))for(var e=0;e<b.length;e++)de(a,b[e],c,d,f);else{d=!!d;a:{e=Zd;if(b in e&&(e=e[b],d in e&&(e=e[d],a=pa(a),e[a]))){a=e[a];break a}a=o}if(a)for(e=0;e<a.length;e++)if(a[e].Vg==c&&a[e].capture==d&&a[e].wk==f){ee(a[e].key);break}}}
function ee(a){if(Yd[a]){var b=Yd[a];if(!b.Of){var c=b.src,d=b.type,f=b.proxy,e=b.capture;c.removeEventListener?(c==A||!c.Im)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in ae?ae[d]:ae[d]="on"+d,f);c=pa(c);f=Zd[d][e][c];if($d[c]){var g=$d[c],h=tb(g,b);0<=h&&sb.splice.call(g,h,1);0==g.length&&delete $d[c]}b.Of=n;f.Nn=n;fe(d,e,c,f);delete Yd[a]}}}
function fe(a,b,c,d){if(!d.ki&&d.Nn){for(var f=0,e=0;f<d.length;f++)d[f].Of?d[f].proxy.src=o:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Nn=s;0==e&&(delete Zd[a][b][c],Zd[a][b].Eb--,0==Zd[a][b].Eb&&(delete Zd[a][b],Zd[a].Eb--),0==Zd[a].Eb&&delete Zd[a])}}function ge(a,b,c,d,f){var e=1,b=pa(b);if(a[b]){a.yc--;a=a[b];a.ki?a.ki++:a.ki=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];i&&!i.Of&&(e&=he(i,f)!==s)}}finally{a.ki--,fe(c,d,b,a)}}return Boolean(e)}
function he(a,b){var c=a.handleEvent(b);a.xm&&ee(a.key);return c}
function ce(a,b){if(!Yd[a])return n;var c=Yd[a],d=c.type,f=Zd;if(!(d in f))return n;var f=f[d],e,g;if(!Rd){e=b||ea("window.event");var h=n in f,i=s in f;if(h){if(0>e.keyCode||e.returnValue!=l)return n;a:{var j=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(m){j=n}if(j||e.returnValue==l)e.returnValue=n}}j=new Xd;j.bi(e,this);e=n;try{if(h){for(var p=[],q=j.currentTarget;q;q=q.parentNode)p.push(q);g=f[n];g.yc=g.Eb;for(var r=p.length-1;!j.Nf&&0<=r&&g.yc;r--)j.currentTarget=p[r],e&=ge(g,p[r],d,n,j);
if(i){g=f[s];g.yc=g.Eb;for(r=0;!j.Nf&&r<p.length&&g.yc;r++)j.currentTarget=p[r],e&=ge(g,p[r],d,s,j)}}else e=he(c,j)}finally{p&&(p.length=0),j.yf()}return e}d=new Xd(b,this);try{e=he(c,d)}finally{d.yf()}return e};var ie={Io:".",So:",",fp:"%",Eh:"0",ip:"+",$o:"-",Po:"E",hp:"\u2030",Vo:"\u221e",cp:"NaN",Ho:"#,##0.###",op:"#E0",gp:"#,##0%",Go:"\u00a4#,##0.00;(\u00a4#,##0.00)",Jo:"USD"},O=ie,O=ie;function ne(a){var b=O.Go,c=["0"],a=oe[a][0]&7;if(0<a){c.push(".");for(var d=0;d<a;d++)c.push("0")}return b.replace(/0.00/g,c.join(""))}
var oe={AED:[2,"dh","\u062f.\u0625.","DH"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[2,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],EUR:[18,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],
KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[18,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],RUB:[2,"Rup","Rup"],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],USD:[2,"$","US$"],UYU:[2,"$","UY$"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function pe(a,b,c){this.Qg=b||O.Jo;this.Xp=c||qe;this.ni=40;this.Oc=1;this.Kk=3;this.oi=this.Wg=0;this.zo=s;this.Zk=this.Yk="";this.ti="-";this.vi="";this.Yg=1;this.uk=3;this.Wi=this.Nm=s;"number"==typeof a?this.Gh(a):this.ke(a)}var qe=0;
pe.prototype.ke=function(a){this.bt=a.replace(/ /g,"\u00a0");var b=[0];this.Yk=re(this,a,b);for(var c=b[0],d=-1,f=0,e=0,g=0,h=-1,i=a.length,j=n;b[0]<i&&j;b[0]++)switch(a.charAt(b[0])){case "#":0<e?g++:f++;0<=h&&0>d&&h++;break;case "0":0<g&&k(Error('Unexpected "0" in pattern "'+a+'"'));e++;0<=h&&0>d&&h++;break;case ",":h=0;break;case ".":0<=d&&k(Error('Multiple decimal separators in pattern "'+a+'"'));d=f+e+g;break;case "E":this.Wi&&k(Error('Multiple exponential symbols in pattern "'+a+'"'));this.Wi=
n;this.oi=0;b[0]+1<i&&"+"==a.charAt(b[0]+1)&&(b[0]++,this.zo=n);for(;b[0]+1<i&&"0"==a.charAt(b[0]+1);)b[0]++,this.oi++;(1>f+e||1>this.oi)&&k(Error('Malformed exponential pattern "'+a+'"'));j=s;break;default:b[0]--,j=s}0==e&&(0<f&&0<=d)&&(e=d,0==e&&e++,g=f-e,f=e-1,e=1);(0>d&&0<g||0<=d&&(d<f||d>f+e)||0==h)&&k(Error('Malformed pattern "'+a+'"'));g=f+e+g;this.Kk=0<=d?g-d:0;0<=d&&(this.Wg=f+e-d,0>this.Wg&&(this.Wg=0));this.Oc=(0<=d?d:g)-f;this.Wi&&(this.ni=f+this.Oc,0==this.Kk&&0==this.Oc&&(this.Oc=1));
this.uk=Math.max(0,h);this.Nm=0==d||d==g;c=b[0]-c;this.Zk=re(this,a,b);b[0]<a.length&&a.charAt(b[0])==se?(b[0]++,this.ti=re(this,a,b),b[0]+=c,this.vi=re(this,a,b)):(this.ti=this.Yk+this.ti,this.vi+=this.Zk)};pe.prototype.Gh=function(a){switch(a){case 1:this.ke(O.Ho);break;case 2:this.ke(O.op);break;case 3:this.ke(O.gp);break;case 4:this.ke(ne(this.Qg));break;default:k(Error("Unsupported pattern type."))}};
pe.prototype.ea=function(a){if(isNaN(a))return O.cp;var b=[],c=0>a||0==a&&0>1/a;b.push(c?this.ti:this.Yk);if(isFinite(a))if(a=a*(c?-1:1)*this.Yg,this.Wi)if(0==a)te(this,a,this.Oc,b),ue(this,0,b);else{var d=Math.floor(Math.log(a)/Math.log(10)),a=a/Math.pow(10,d),f=this.Oc;if(1<this.ni&&this.ni>this.Oc){for(;0!=d%this.ni;)a*=10,d--;f=1}else 1>this.Oc?(d++,a/=10):(d-=this.Oc-1,a*=Math.pow(10,this.Oc-1));te(this,a,f,b);ue(this,d,b)}else te(this,a,this.Oc,b);else b.push(O.Vo);b.push(c?this.vi:this.Zk);
return b.join("")};
function te(a,b,c,d){for(var f=Math.pow(10,a.Kk),b=Math.round(b*f),e=Math.floor(b/f),g=Math.floor(b-e*f),h=0<a.Wg||0<g,i="",b=e;1E20<b;)i="0"+i,b=Math.round(b/10);var i=b+i,j=O.Io,m=O.So,b=O.Eh.charCodeAt(0),p=i.length;if(0<e||0<c){for(e=p;e<c;e++)d.push(O.Eh);for(e=0;e<p;e++)d.push(String.fromCharCode(b+1*i.charAt(e))),1<p-e&&(0<a.uk&&1==(p-e)%a.uk)&&d.push(m)}else h||d.push(O.Eh);(a.Nm||h)&&d.push(j);c=""+(g+f);for(f=c.length;"0"==c.charAt(f-1)&&f>a.Wg+1;)f--;for(e=1;e<f;e++)d.push(String.fromCharCode(b+1*
c.charAt(e)))}function ue(a,b,c){c.push(O.Po);0>b?(b=-b,c.push(O.$o)):a.zo&&c.push(O.ip);for(var b=""+b,d=b.length;d<a.oi;d++)c.push(O.Eh);c.push(b)}var se=";";
function re(a,b,c){for(var d="",f=s,e=b.length;c[0]<e;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<e&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):f=!f;else if(f)d+=g;else switch(g){case "#":case "0":case ",":case ".":case se:return d;case "\u00a4":if(c[0]+1<e&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.Qg;else switch(a.Xp){case qe:d+=oe[a.Qg][1];break;case 2:var g=a.Qg,h=oe[g],d=d+(g==h[1]?g:g+" "+h[1]);break;case 1:d+=oe[a.Qg][2]}break;case "%":1!=a.Yg&&k(Error("Too many percent/permill"));a.Yg=100;d+=O.fp;
break;case "\u2030":1!=a.Yg&&k(Error("Too many percent/permill"));a.Yg=1E3;d+=O.hp;break;default:d+=g}}return d};var Nc=8,Oc=13,ve={Line:0,VerticalBar:1,Scatter:2,OHLC:3,Candlestick:4,FilledLine:5,Histogram:6,ScatterWithConnector:7,SteppedLine:Nc,YieldCurve:9,Event:10,LevelLine:11,Dot:12,FilledSteppedLine:Oc,LinkedHistogram:14,Line2D:15,Bar2D:16,Histogram2D:17,StackedHistogram2D:18,Area2D:19,Pie2D:20,Scatter2D:21,StackedBar2D:22,CategorizedHistogram2D:23,Spline2D:24,DynamicCategorizedHistogram2D:25};B("TRWebchart_Shared.ChartType",ve);function we(){this.aa={zj:"Auto",jj:"Auto",eg:0,G:"#D0CCCC",lf:"#f9fbfc",mj:n,Ea:{Ac:s,Ib:"",Ua:"#4C4C4C",o:"12px",u:"bold",m:"Helvetica, Arial",kg:"#ECECEC",G:"#D0CCCC"},ij:{wj:n,Ua:"#8E8E90",o:"11px",m:"Helvetica, Arial"},ge:{sj:n,G:"transparent",th:0,pf:0}};this.eb={Yc:s,Ee:0,mf:"#ffffff",dg:"#f7f7f7"};this.Bd={uj:n,yh:s,uh:"#E4DEDC",vh:1,gg:0};this.sb={rb:[new C("#ffbe26","#ffbe26","#ffffff"),new C("#25acc5","#25acc5","#ffffff"),new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29","#ff4c29","#ffffff"),
new C("#e0e05b","#e0e05b","#ffffff"),new C("#2381c4","#2381c4","#ffffff"),new C("#54af2d","#54af2d","#ffffff"),new C("#de2a2a","#de2a2a","#ffffff"),new C("#f6e128","#f6e128","#ffffff"),new C("#24c4a0","#24c4a0","#ffffff"),new C("#b7cf40","#b7cf40","#ffffff"),new C("#b52838","#b52838","#ffffff"),new C("#2692d1","#2692d1","#ffffff"),new C("#ff8826","#ff8826","#ffffff"),new C("#2273bf","#2273bf","#ffffff")],Jp:2,Kp:2,nf:[[new C("#25acc5","#25acc5","#ffffff"),new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29",
"#ff4c29","#ffffff")],[new C("#87cb30","#87cb30","#ffffff"),new C("#ff4c29","#ff4c29","#ffffff"),new C("#e0e05b","#e0e05b","#ffffff")],[new C("#ff4c29","#ff4c29","#ffffff"),new C("#e0e05b","#e0e05b","#ffffff"),new C("#2381c4","#2381c4","#ffffff")]],Xl:new C("#cc1f00","#cc1f00","#ffffff"),bm:new C("#339900","#339900","#ffffff")};this.om={Ba:"#f9f9f9",mm:"#434343",o:"12px",u:"normal",m:"Helvetica, Arial",im:"rgba(0, 0, 0, 0.2)",nj:5,hm:10};this.he={rb:[new C("#7e8e90","#7e8e90","#ffffff"),new C("#7e8e90",
"#7e8e90","#ffffff")],hc:1};this.p={Oa:1,qc:0,m:"Helvetica, Arial",o:"11px",u:"bold",Ca:"#4c4c4c",ig:s,tj:s,Ah:26,Na:{G:"#BEBEBE",Hb:"#FFFFFF",fc:"#F5F5F5",gc:"#E6E6E6"}};this.Wl={Oa:1,xp:n,m:"Helvetica, Arial",o:"11px",u:"normal",Yl:"#777777",Uo:"#ffffff",Fe:"1px solid #777777",wp:"#ff8000",fm:"1px solid #f49b23",Na:{G:"#D2D2D2",Hb:"#FFFFFF",fc:"#F5F5F5",gc:"#E6E6E6"}};this.H={m:"Helvetica, Arial",u:"normal",o:"10px",rc:"#cecece",Ca:"#4c4c4c",Ba:"#F2F1F1",G:"#D0CCCC",Bc:n,Ch:s,kb:{Dd:n,Oa:1,u:"bold",
o:"11px"}};this.W={m:"Helvetica, Arial",u:"bold",o:"11px",rc:"#cecece",Ca:"#4c4c4c",Ba:"#E5E6E6",G:"#D0CCCC",Cd:n,He:{xj:n,m:"Helvetica, Arial",u:"bold",o:"11px",Ib:"",Ua:"#4C4C4C"}};this.jg={G:"#D0CCCC",hc:"2px"};this.qf={m:"Helvetica, Arial",u:"normal",$l:"11px",Zl:"#777777",Rl:"11px",Ql:"#000000",wh:"#4c4c4c",Fe:"1",rj:"14px",em:"#000000",xh:"#4c4c4c",qj:"2",pj:"2"}};function xe(){we.call(this)}xe.prototype=new we;function ye(){this.aa={zj:"Auto",jj:"Auto",eg:0,G:"#D0CCCC",lf:"#F2F1F1",mj:n,Ea:{Ac:s,Ib:"",Ua:"#4C4C4C",o:"12px",u:"bold",m:this.hb,kg:"#ECECEC",G:"#D0CCCC"},ij:{wj:n,Ua:"#8E8E90",o:"11px",m:this.hb},ge:{sj:n,G:"transparent",th:0,pf:20},m:this.hb,o:"12px"};this.eb={Yc:s,Ee:0,mf:"#ffffff",dg:"#f7f7f7"};this.Bd={uj:n,yh:n,uh:"#E4DEDC",vh:1,gg:0};this.sb={rb:[new C("#1e9ff1","#1e9ff1","#ffffff"),new C("#ff9900","#ff9900","#ffffff"),new C("#cc33ff","#cc33ff","#ffffff"),new C("#66cc00","#66cc00","#ffffff"),
new C("#ff3300","#ff3300","#ffffff"),new C("#d9ca00","#d9ca00","#ffffff"),new C("#00ccff","#00ccff","#ffffff"),new C("#5533ff","#5533ff","#ffffff"),new C("#ff33da","#ff33da","#ffffff"),new C("#00bfb6","#00bfb6","#ffffff"),new C("#999999","#999999","#ffffff"),new C("#cc1f00","#cc1f00","#ffffff"),new C("#660099","#660099","#ffffff"),new C("#339900","#339900","#ffffff"),new C("#996300","#996300","#ffffff"),new C("#0000ff","#0000ff","#ffffff"),new C("#333333","#333333","#ffffff"),new C("#ff4d9d","#ff4d9d",
"#ffffff"),new C("#ff6600","#ff6600","#ffffff"),new C("#cc8500","#cc8500","#ffffff"),new C("#c40c79","#c40c79","#ffffff"),new C("#e9484e","#e9484e","#ffffff"),new C("#6386d3","#6386d3","#ffffff"),new C("#def37f","#def37f","#ffffff"),new C("#00b3e3","#00b3e3","#ffffff")],Zo:2,Ml:1,yj:new C("#bebebe","#bebebe","#ffffff"),nf:[[new C("#c40c79","#c40c79","#ffffff"),new C("#e9484e","#e9484e","#ffffff"),new C("#00bfb6","#00bfb6","#ffffff")],[new C("#00bfb6","#00bfb6","#ffffff"),new C("#ff33da","#ff33da",
"#ffffff"),new C("#5533ff","#5533ff","#ffffff")],[new C("#66cc00","#66cc00","#ffffff"),new C("#ff3300","#ff3300","#ffffff"),new C("#d9ca00","#d9ca00","#ffffff")]]};this.he={rb:[new C("#7e8e90","#7e8e90","#ffffff"),new C("#7e8e90","#7e8e90","#ffffff")],hc:1};this.hg={km:s,Ua:new C("#000000","#000000","#ffffff"),hc:1,Ul:1};this.p={Oa:1,qc:0,m:this.hb,o:"11px",u:"bold",Ca:"#4c4c4c",ig:n,tj:s,Ah:26,Na:{G:"#BEBEBE",Hb:"#FFFFFF",fc:"#F5F5F5",gc:"#E6E6E6"}};this.H={m:this.hb,u:"normal",o:"10px",rc:"#cecece",
Ca:"#000000",Ba:"#f2f1f1",G:"#D0CCCC",Bc:n,Ch:s,kb:{Dd:n,Oa:0,u:"bold",o:"11px"}};this.W={m:this.hb,u:"bold",o:"11px",rc:"#cecece",Ca:"#000000",Ba:"#E5E6E6",G:"#D0CCCC",Cd:n,He:{xj:n,m:this.hb,u:"bold",o:"11px",Ib:"",Ua:"#4C4C4C"}};this.jg={Ua:"#D0CCCC",hc:"3px"};this.fg={jm:n,m:this.hb,u:"bold",o:"11px",Ca:"#434343",fj:"solid 1px #777777",Ba:{Hb:"#ffffff",fc:"#cccccc",gc:"#bfbfbf"}};this.Ad={Ge:{vj:n,m:this.hb,u:"bold",o:"11px",gm:0},gj:{rm:s,sm:n}};this.qm={Pl:s,kp:{m:"sans-serif",u:"bold",o:"12px",
Ua:"#000",jp:2},Lp:{Yo:"#000",ej:4,dj:"#000"},Qo:{gq:[{value:0,color:"#000"},{value:0.236068,color:"#00f"},{value:0.381966,color:"#f00"}],Ro:"#0f0",Lo:n,ej:4,dj:"#000",Eo:"#000"}};this.Mp="scheme1"}ye.prototype.hb="Helvetica, Arial";function ze(){ye.call(this)}ze.prototype=new ye;function Ae(){this.length=0;this.xb={}}z=Ae.prototype;z.setItem=function(a,b){var c=l;this.xb.hasOwnProperty(a)?c=this.xb[a]:this.length++;this.xb[a]=b;return c};z.getItem=function(a){return this.xb.hasOwnProperty(a)?this.xb[a]:l};z.keys=function(){var a=[],b;for(b in this.xb)this.xb.hasOwnProperty(b)&&a.push(b);return a};z.each=function(a){for(var b in this.xb)if(this.xb.hasOwnProperty(b)&&a(b,this.xb[b]))break};z.clear=function(){this.xb={};this.length=0};function Be(a,b){this.a=a;this.P=b;this.cb=new N;this.mt=new J;this.Le="html5ChartChartTypeAndColorPickerPopup";this.xl="html5ChartChartSymbolInputPopup";this.Pp="html5ChartAddingSeriesPopup_goog_"+Ma++;this.zk=Ce();var c=this.uf=new Ae;this.a instanceof ze||this.a instanceof xe?(c.setItem(0,"light/Line.png"),c.setItem(5,"light/Mountain.png"),c.setItem(4,"light/Candle.png"),c.setItem(3,"light/OHLC.png"),c.setItem(Nc,"light/SteppedLine.png"),c.setItem(6,"light/Histogram.png")):(c.setItem(0,"dark/Line.png"),
c.setItem(5,"dark/Mountain.png"),c.setItem(4,"dark/Candle.png"),c.setItem(3,"dark/OHLC.png"),c.setItem(Nc,"dark/SteppedLine.png"),c.setItem(6,"dark/Histogram.png"));(c=document.getElementById(this.Le))&&document.body.removeChild(c);(c=document.getElementById(this.xl))&&document.body.removeChild(c);this.qn="1px solid #D47728";this.rn="1px solid transparent";this.ht=this.Fi=o;this.yg={};var d=this.uf,c=[],f;for(f in d.xb)d.xb.hasOwnProperty(f)&&c.push(d.xb[f]);c.push("trashcan.gif");f=0;for(d=c.length;f<
d;++f)(new Image).src=this.zk+"/"+c[f];var e=this;be(document.body,Ud,function(a){a=a.target;a===o&&k("incoming id '"+a.id+"' is not valid");for(var b="",c="",d=s;a&&a.getAttribute;){b=a.getAttribute("id");c=a.className;if(b&&(b.indexOf(e.Le)>-1||b.indexOf(e.xl)>-1||b.indexOf(e.Pp)>-1||b.indexOf("_genAddButton")>-1)){d=n;break}if(c&&(c.indexOf("tr-dropdown")>-1||c.indexOf("tr-combobox")>-1)){d=n;break}a=a.parentNode}d===s&&e.Ef()},s);this.jc=this.kc=this.je=o;this.Es={};this.Xs=24;this.Eq=s;this.Fh=
o}
function De(a,b,c,d,f,e,g,h){var i="",j=d!==o?d:"noIndex",m="font-family:"+a.a.p.m+";color:"+a.a.p.Ca+";font-size:"+a.a.p.o+";font-weight:"+a.a.p.u+";",p=a.cb.pe(m,c),q=14+p+3,i=i+('<span id="'+b+'_sym" style="margin-left:2px; display:inline-block; width:80%; white-space:nowrap;">')+('<span id="'+b+"_swatchSym_"+j+'"  style="margin-left:2px;padding:1px;display:inline-block;border:1px solid transparent; ">')+('<span style="vertical-align:middle; display:inline-block;height:10px;width:10px;font-size:1px;background-color:'+g[0]+
';">'),i=i+('</span> <span style="padding-left:2px;vertical-align:middle;'+m+"width:"+p+'px; ">'+c+"</span>")+"</span>";a.a.p.ig===n&&d!==o&&(b="price_"+b+"_"+d,c="font-family:"+a.a.p.m+";font-size:"+a.a.p.o+";",f=(new pe(Pc(o,n,e))).ea(+f),f=a.cb.pe(c,f),q=q+f+5,i+='<span id="'+b+'" style="display:inline-block;text-align:left;padding-right:3px;padding-left:2px;vertical-align:middle;font-family:'+a.a.p.m+";color:"+a.a.p.Ca+";font-size:"+a.a.p.o+";font-weight:normal;width:"+f+'px; ">&nbsp;</span>');
i=Ee(i+"</span>");i.style.width=q+"px";Fe(a,i.firstChild,h);return i}z=Be.prototype;z.kh=function(a,b){this.P=a;this.Fl(b)};z.Fl=function(a){this.a=a;a="scheme1";if(this.a instanceof Ba||this.a instanceof Ea)a="scheme2";var b;if(this.yg)for(b in this.yg)this.yg[b].Sm.className=a};function Ge(){return Ee('<span style="vertical-align:middle; display:inline-block;height:11px;margin-left:2px;width:1px;font-size:1px;background-color:rgb(180,180,180);"></span>')}
function He(a,b,c,d,f,e,g,h){var i="scheme1";if(a.a instanceof Ba||a.a instanceof Ea)i="scheme2";(!b||1>b.length)&&k("This method requires a valid ID as first parameter");var j=o,m=a.yg[b];if(m){var j=m.cq,i=m.Sm,p=j.cn();if(!h){var q=g?tr.ui.ComboBoxItem:tr.ui.Mo;p.clear();f.forEach(function(a){p.add(new q({isEnabled:n,text:a}))})}}else{h=i=Ee(""+('<div style="margin-left:2px;display:inline-block;vertical-align:top;width:'+c+'px;" class="'+i+'">')+"</div>");(!f||f instanceof Array===s)&&k("Incoming param 'values' must be a valid text array");
j=document.createElement("div");Ie(j,"chartDropDown");var m=Je||(Je=new Ke),r=o;if(Za)r=m.zf.createStyleSheet(),Le(r);else{var t=Me(m,"head")[0];t||(r=Me(m,"body")[0],t=m.Fm("head"),r.parentNode.insertBefore(t,r));r=m.Fm("style");Le(r);m.appendChild(t,r)}h.appendChild(document.createTextNode(""));h.appendChild(j);h=new (g?tr.ui.ComboBox:tr.ui.ns)({Ts:n});g&&h.it(tr.ui.Ms.us.ls);h.Nb(j);var y=g?tr.ui.ComboBoxItem:tr.ui.Mo,u=h.cn();f.forEach(function(a,b){u.add(new y({isEnabled:n,text:f[b],tooltip:a}))});
j=h;a.yg[b]={cq:j,Sm:i}}e||(i.onclick=function(){a.Ef()});if(j!==o&&(j.Qs().ut(),0<j.cn().Eb&&j.kt(d),i)){d=i.getElementsByTagName("div");g&&(g=d[0].children[0].children[0],g.style.height="17px",g.style.top="-1px",e=g.children[0],e.style.height="17px",e.style.fontFamily=a.a.p.m,e.style.fontSize="11px",g=g.children[1],g.style.height="14px",g.style.width="15px",g.style.lineHeight="16px");for(h=0;h<d.length;h++)if(g=d[h].getAttribute("role"),e=d[h].className,g&&(-1<g.indexOf("listbox")||-1<g.indexOf("option")?
(d[h].style.lineHeight="17px",d[h].style.height="17px",d[h].style.whiteSpace="nowrap",d[h].style.padding="0px",d[h].style.paddingLeft="3px","periodDropdown"===b&&(d[h].style.width="70px"),d[h].style.fontFamily=a.a.p.m,d[h].style.fontSize=a.a.p.o):-1<g.indexOf("menu")&&(d[h].style.padding="0px")),e)if(-1<e.indexOf("-dropdownlist-dropdown"))d[h].style.top="-3px";else if(-1<e.indexOf("-dropdownlist-caption")||-1<e.indexOf("tr-combobox-item-content"))d[h].style.lineHeight="15px"}if(j&&(b=ma(l)?j.zf.getElementById(l):
l))b.style.width=c+"px";return i}function Fe(a,b,c){if(b&&c){var d=b.style.border;c&&(b.onclick=function(a){c(a)});var f=a.qn;b.onmouseover=function(){b.style.border=f};b.onmouseout=function(){b.style.border=d}}}function Ee(a){var b=document.createDocumentFragment();b.appendChild(document.createElement("div"));b.firstChild.innerHTML=a;return b.firstChild.firstChild}function Ne(a){if(a=document.getElementById(a.Le))a.style.display="none"}
function Oe(a){var b=a.Le,c="",c=c+'<span style="height:33px;width:180px;font-size:3px;">',c=c+'<span style="display:inline-block;float:right;margin-top:2px;margin-right:2px;" >',c=c+('<span style="display:inline-block;margin-top:0px;margin-right:1px;border:1px solid transparent;" ><img id="'+b+'_trashcan" src="'+a.zk+'/trashcan.gif" style="vertical-align:top;display:inline-block;"/></span>'),c=c+'<span style="display:inline-block;" ></span>',c=c+"</span></br>",c=c+('<div id="'+b+'_topSection" style="width:170px;height:30px;margin-left:0px;display:block;border-bottom:0px solid rgb(160,160,160);white-space:nowrap;">'),
d=a.zk;a.uf.each(function(a,e){c+='<div style="text-align:center;margin-left:0px;border:1px solid transparent;display:inline-block;" ><img id="'+b+"_"+e+'" chartTypeCode="'+a+'" src="'+d+"/"+e+'" style="vertical-align:top;display:inline-block;"/></div>'});c+="</div>";c+="</span>";return Ee(c)}z.Wd=function(){var a=this.P.n.Ma;return a[a.length-1].I.J.Wd};z.Ef=function(){Ne(this);var a=document.getElementById(this.xl);a&&(a.style.display="none");this.Fh&&this.Fh.lt(s);this.Eq=s};z.gh=v("je");
z.ih=v("kc");z.hh=v("jc");function Pe(){}
function Qe(a,b,c,d){var f=b,b=Math.abs(b);d||(d=s);if(!b||isNaN(b)===n)return"";var e=parseFloat(b),a=Math.floor(a.Lf(e))/3;if(1>a)return Re(parseFloat(f),c);var a=Math.round(a),b=Math.pow(10,3*a),g=e/b;1===a&&10>g?(g*=b,a--):(2===a||3===a||4===a)&&1>g?(g*=1E3,a--):4<a&&(g*=Math.pow(10,3*(a-4)),a=4);e=Re(g,c);g=parseFloat(e);Se(g)<c&&(e=g.toFixed(c));if(d)c=parseFloat(e)*b,c=Math.round(c);else{c="";switch(a){case 0:c="";break;case 1:c="K";break;case 2:c="M";break;case 3:c="B";break;default:c="T"}c=
e+c}0>f&&(c="-"+c);return""+c}function Re(a,b){var c=Se(a);if(!b||isNaN(b)===n)b=2;var d=a+"";c>b&&(d=a.toFixed(b));d.indexOf(".")==d.length-1&&(d=d.substr(0,d.length-1));return d}Pe.prototype.Lf=function(a){return Math.log(a)/Math.log(10)};function Se(a){if(!a)return 0;var a=a+"",b=a.indexOf(".");return-1<b?a.length-b-1:0}function Te(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}function Ue(a){return"number"===typeof a&&parseFloat(a)==parseInt(a,10)&&!isNaN(a)}function Ve(){}
function We(a,b,c){return(!a?s:-1<"|ALL=|AFN=|ARS=|AWG=|AUD=|AZN=|BSD=|BBD=|BYR=|BZD=|BMD=|BOB=|BAM=|BWP=|BGN=|BRL=|BND=|KHR=|CAD=|KYD=|CLP=|CNY=|COP=|CRC=|HRK=|CUP=|CZK=|DKK=|DOP=|XCD=|EGP=|SVC=|EEK=|EUR=|FKP=|FJD=|GHC=|GIP=|GTQ=|GGP=|GYD=|HNL=|HKD=|HUF=|ISK=|INR=|IRR=|IMP=|ILS=|JMD=|JPY=|JEP=|KZT=|KPW=|KRW=|KGS=|LAK=|LVL=|LBP=|LRD=|LTL=|MKD=|MYR=|MUR=|MXN=|MNT=|MZN=|NAD=|NPR=|ANG=|NZD=|NIO=|NGN=|KPW=|NOK=|OMR=|PKR=|PAB=|PYG=|PEN=|PHP=|PLN=|QAR=|RON=|RUB=|SHP=|SAR=|RSD=|SCR=|SGD=|SBD=|SOS=|ZAR=|KRW=|LKR=|SEK=|CHF=|SRD=|SYP=|TWD=|THB=|TTD=|TRY=|TRL=|TVD=|UAH=|GBP=|USD=|UYU=|UZS=|VEF=|VND=|YER=|ZWD=|".indexOf("|"+
a+"|"))===n?-1<a.indexOf("JPY")?2:4:isNaN(b)===n?2:c===o||"undefined"===typeof c?2:9999<Math.abs(b)&&2>c?c:2<c?c:2};function Xe(a,b,c,d){this.od=a+"_marquee";this.a=b;this.w=d;this.P=c;this.bb=new Be(this.a,this.P);this.bb.qe=this.w.qe;this.Lm=new Ve;this.xc=new Pe;this.Lc={};this.cb=new N;this.F=new J;this.s=s;if(this.a&&(this.a instanceof xe||this.a instanceof Ea))this.s=n;this.Jc=1===this.a.p.qc;this.Ck=[];var f,c={Minute1:"1 Minute",Minute5:"5 Minutes",Minute10:"10 Minutes",Minute30:"30 Minutes"};for(f in P)a=f+"","None"!==a&&("Tick"!==a&&"HalfYearly"!==a)&&((b=c[a])?this.Ck.push(b):this.Ck.push(a));this.zq=
{2:0,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,11:9};this.no=17;this.cg=3;this.Uj=this.gk=o}z=Xe.prototype;z.P=o;z.kh=function(a,b,c,d){this.od=a+"_marquee";this.a=b;this.w=d;this.P=c;this.Jc=1===this.a.p.qc;this.bb.kh(this.P,this.a)};
function Ye(a,b,c){a.w||k("this.chartObj cannot be null or undefined.");if(!b||!b.length)return o;for(var d=Ee(Ze(a)),f=a.w.h,e=o,g=o,h=[],i,j,m=[1,1,1],p=0;p<b.length;p++){e=b[p];if(h=e.k.MessageId)var q=h.split(":"),r=Fc(h);i="";if(r===fc.ButterflySpread||r===fc.CrackSpread||r===fc.Spread||r===fc.CrushSpread||r===fc.Correlation||18===r)if(g=f[q[2]],18===r)i=" "+g.analysisRICList[0]+" / "+g.analysisRICList[1];else if(19===r)i=" "+g.analysisRICList[0]+" - "+g.analysisRICList[1];else if(16===r){h=
Dc(g);for(j=0;j<g.analysisRICList.length;j++)i=0===j?" "+h[j]+g.analysisRICList[j]:i+":"+h[j]+g.analysisRICList[j]}else if(20===r){var h=Dc(g),t="",t=h.toString()===m.toString()?" Dalian":" CBOT";for(j=0;j<g.analysisRICList.length;j++)i=0===j?" 1"+g.analysisRICList[j]:i+":1"+g.analysisRICList[j];i=t+i}else for(j=0;j<g.analysisRICList.length;j++)i=0===j?" "+g.analysisRICList[j]:i+" | "+g.analysisRICList[j];h=e.Sa+i;17===r&&4===g.analysisRICList.length&&(h="Condor Spread"+i);t=e.Qb;j=$e(a,c[p]);i=af(j);
j=We(!t?h:t,i,j.tb);e=[e.O[0].stroke];t=o;a.Jc&&(t=function(b){bf(a,b)});d.appendChild(De(a.bb,a.od,h,c[p],i,j,e,t))}cf(d,s);return d}
function df(a,b,c,d){a.w||k("this.chartObj cannot be null or undefined.");if(!b||!b.length)return o;for(var f=Ee(Ze(a)),e=o,g,h,i,j=Sc(b[0].k.MessageId),m=0;m<b.length;m++){e=b[m];g=e.Sa.split(" ")[0];i=$e(a,c[m]);h=af(i);i=We(g,h,i.tb);e=[e.O[0].stroke];h=Qe(a.xc,h,i,s);var p=o;a.Jc&&(p=function(b){bf(a,b)});f.appendChild(De(a.bb,a.od,g,c[m],h,i,e,p))}if(!a.s&&a.Jc&&(a.gk||(a.gk=a.P.Wh().keys()),b=a.gk,c=(a.P.n?a.P.n.ba.da:o).filter(function(a){return a.ce.be===j}),h=c[0].fieldName,c.length)){g=
a.P.Wh().getItem(h);h=Math.max(0,b.indexOf(h));m=[];wb(m);for(i=0;i<g.length;i++)"Unknown"===g[i].Tn?(m.push("Interim"),m.push("Annual")):m.push(g[i].Tn);Ab(m);c=Math.max(0,m.indexOf(c[0].ce.er));b.length&&(f.appendChild(He(a.bb,"fundamentalDropdown"+d,150,h,b,n,n,n)),f.appendChild(He(a.bb,"periodDropdown"+d,70,c,m,s,s,s)))}cf(f,!a.Jc);return f}
function tf(a,b,c,d){a.w||k("this.chartObj cannot be null or undefined.");if(!b||!b.length)return o;for(var f=Ee(Ze(a)),e=o,g,h,i,j=Tc(b[0].k.MessageId),m=0;m<b.length;m++){e=b[m];g=e.Sa.split(" ")[0];i=$e(a,c[m]);h=af(i);i=We(g,h,i.tb);e=[e.O[0].stroke];h=Qe(a.xc,h,i,s);var p=o;a.Jc&&(p=function(b){bf(a,b)});f.appendChild(De(a.bb,a.od,g,c[m],h,i,e,p))}if(!a.s&&a.Jc&&(c=a.P.ik(),a.Uj||(a.Uj=c.keys()),b=a.Uj,h=(a.P.n?a.P.n.ba.sa:o).filter(function(a){return a.EconomicRic===j}),h.length)){var q=h[0].EconomicRic,
c=c.getItem(h[0].CountryName);g=[];wb(g);for(m=0;m<c.length;m++)g.push(c[m].Label);h=b.indexOf(h[0].CountryName);m=vb(c,function(a){return a.EconomicRic===q});c.length&&(f.appendChild(He(a.bb,"economicCountryDropdown"+d,100,h,b,n,n,n)),f.appendChild(He(a.bb,"economicTypeDropdown"+d,130,m,g,s,n,s)))}cf(f,!a.Jc);return f}
function uf(a){var b=document.getElementById(a.od+"_genAddButton"),c;if(c=a.Jc)c=a.w.l[0],c=!yc(c)&&!K(c)&&!xc(c);if(c){if(!b){b=a.bb;c=a.od+"_genAddButton";var d="",f="font-family:"+b.a.p.m+";color:"+b.a.p.Ca+";font-size:"+b.a.p.o+";font-weight:bold;",e=b.cb.pe(f,"+")+5,d=d+('<div id="'+c+'" style="'+f+"text-align:center;margin-left:2px;position:relative;vertical-align:top;display:inline-block;width:"+e+"px;height:15px;line-height:14px;background:-webkit-gradient(linear, left top, left bottom, from("+
b.a.p.Na.Hb+"), color-stop(0.4, "+b.a.p.Na.fc+"), to("+b.a.p.Na.gc+"));border:1px solid "+b.a.p.Na.G+';padding:0px;border-radius:3px;cursor:pointer;">+</div>');c=Ee(d);Fe(b,c,aa());b=c;b.style.width="32px";b.style["font-size"]="20px";a=a.no+4;b.style.height=a+"px";b.style.lineHeight=a+"px"}b.style.display="inline-block";return b}b&&(b.style.display="none");return o}
function cf(a,b){var c=0,d;if(a.hasChildNodes())for(var f=0;f<a.childNodes.length;f++)d=parseInt(a.childNodes[f].style.width.replace("px",""),10),isNaN(d)||(c+=d);d=2*a.childNodes.length;"undefined"!==typeof b&&b&&(d+=15);a.style.width=c+d+"px"}
function af(a){return a!==o&&((!a.Ha||a.Ha instanceof Array===s||0>a.Ha.length)&&k("The labels for target YAxis is not present."),0<a.Ha.length)?(a=a.Ha[0].text,a=a.replace(/M|m|B|b|,|K|k/g,""),a=parseFloat(a),isNaN(a)&&k("The resulting YAxis label is not a numeric value."),a):888.88}function $e(a,b){var c=o;a.w.I.$h&&(c=a.w.I.$h(b));return c}z.Ci=function(){var a,b;for(b in this.Lc)if((a=document.getElementById(b))&&a.innerHTML!==this.Lc[b])a.innerHTML=this.Lc[b]};
z.ph=function(a,b,c,d,f){if(a===o)this.Ci();else{var e=this.w.l,g=document.getElementById("price_"+this.od+"_"+b);if(g!==o){var h;h=c===o||isNaN(c)?NaN:c;var i="",j=$e(this,b).tb,m=n,b=e[b],e=K(b),p=wc(b),q=xc(b);if(b&&(q||e||p))m=s;isNaN(h)||((h=parseFloat(c),a=We(!d?a:d,h,j),f&&a<this.cg&&(a=this.cg),m)?(f=new pe(Pc(o,m,a)),0===h&&(h=0),i=f.ea(h)):i=Qe(this.xc,h,a,m));if(""===i||isNaN(h))i="N/A";g.innerHTML=i+""}}};
function bf(a,b){var b=b||window.event,c=b.srcElement;1>c.id.length&&(c=c.parentNode);var d=c.id.split("_"),f=parseInt(d[d.length-1],10),e=o;0<=f&&f<a.w.l.length?e=a.w.l[f]:k("Failed obtaining target seriesParam via this index val: "+f);var g=K(e),h=wc(e),i=yc(e),j=xc(e),m=e.jd,p=9===e.d,q=s,d=[];a.s||(g||h?d=m===n?[0,5]:[6,Nc]:!i&&(!p&&!j)&&(q=n,d=m===n?[0,5]:[0,5,4,3]));var r=a.P.n.$c,t=r.PriceSeriesTypes,y=r.FundamentalSeriesTypes,i=o;Ec(e)&&-1<c.id.indexOf("_swatchSym_0")||(i=function(){a.bb.Ef();
for(var b=e.k.MessageId,c=a.w.l,d=c.length,f,g=s,h=new Ae,i=0;i<d;i++){if(i<0||i>=c.length)break;var j=c[i],m=j.k.MessageId;f=n;if(m===b){var p,q=[];if(a.P)if(Ec(j)){var m=j.Sa,r=a.P,j=[m];r.n||k("The key participant 'this.compositeChartLayout' is not present.");r=r.n;r.Uk&&r.Uk(j);j=a.bb;j.Fh&&j.Fh.jt(j.P.qk());p=zc(m)?Ac(m):Bc(m)?Cc(m):m;q.push(i);c.forEach(function(a,b){K(a)&&a.k.MessageId.split("|")[1]===p&&q.push(parseInt(b,10))})}else if(yc(j)){if(!h.xb.hasOwnProperty(b)){m=Fc(b);vf(a.P,m,Gc(b));
Hc(m)&&(g=n);h.setItem(b,1)}}else if(K(j)){var t=Sc(m),j=a.P,m=[t];j.n||k("The key participant 'this.compositeChartLayout' is not present.");j=j.n;j.Tk&&j.Tk(m);c.forEach(function(a,b){K(a)&&Sc(a.k.MessageId)===t&&q.push(b)})}else if(wc(j)){j=a.P;m=[m.split("|")[1]];j.n||k("The key participant 'this.compositeChartLayout' is not present.");j=j.n;j.Sk&&j.Sk(m)}else if(xc(j)===n){vf(a.P,11,-1);f=s;g=n}if(f===n)if(q&&q.length){sb.sort.call(q,Bb);for(b=q.length-1;b>=0;--b)yb(c,q[b],1);break}else{yb(c,
i,1);i--}}}if(a.P)if(g===n)a.P.El();else{c=a.P;c.n||k("The key participant 'this.compositeChartLayout' is not present.");wf(c.n,c.n.Vj);c.n.Qe(s)}});var u=a.bb,j=document.getElementById(u.Le);if(!j||"none"===j.style.display){var j=c.id,w=d,E=i,L=u.Le;j||k("Incoming targetElementId cannot be null.");(c=document.getElementById(j))||k("The incoming targetElementId '"+j+"' cannot be resolved to a valid dom obj.");var i=ic(j),j=document.getElementById(L),I;j||(j=Ee('<div id="'+L+'" style="position:absolute;display:none;width:180px;height:33px;background:-webkit-gradient(linear, left top, left bottom, from('+
u.a.p.Na.Hb+"), color-stop(0.6, "+u.a.p.Na.fc+"), to("+u.a.p.Na.gc+"));border:1px solid "+u.a.p.Na.G+';padding:0px;border-radius:3px;z-index:111;"></div>'),j.appendChild(Oe(u)),document.body.appendChild(j));p=document.getElementById(L+"_trashcan");E?(p.onclick=function(a){E(a)},p.onmouseover=function(a){a=a||window.event;a=a.srcElement.parentNode;a.setAttribute("prevBorder",a.style.border);a.style.border=G},p.onmouseout=function(a){var a=a||window.event,a=a.srcElement.parentNode,b=a.getAttribute("prevBorder");
a.style.border=b?b:ca},p.parentNode.style.display="inline-block"):p.parentNode.style.display="none";var G=u.qn,ca=u.rn;document.createElement("div");u.uf.each(function(b,c){I=document.getElementById(L+"_"+c);if(w.indexOf(parseInt(b,10))===-1)I.parentNode.style.display="none";else{I.parentNode.style.display="inline-block";I.onclick=function(b){b=b||window.event;if(u.Fi)u.Fi.style.border=ca;u.Fi=b.srcElement.parentNode;Ne(u);var b=b||window.event,c=b.srcElement.getAttribute("chartTypeCode");if(b.srcElement.src.indexOf("_Selected.png")===
-1){var d=b.srcElement.src.replace(".png","_Selected.png");b.srcElement.src=d}c=parseInt(c,10);isNaN(c)&&k("Failed parsing the selected chartType: "+c);e.d=c;if(q){b=a.w.l;d=0;if(f!==0)for(var i=1;i<b.length;i++)if(Ec(b[i])){d++;if(f===i)break}t[d]=c;r.PriceSeriesTypes=t}h&&(r.EconomicSeriesTypes[Tc(e.k.MessageId)]=c);if(g){var j=Sc(e.k.MessageId);a.w.l.forEach(function(a){if(K(a)&&Sc(a.k.MessageId)===j)a.d=c});y[j]=c}e.c=c===4||c===3?[xf,yf,zf,Af]:g||h?[Bf]:[Af];if(m===n)e.c=[Cf];a.w||k("the chart obj cannot be null.");
Df(a.w);a.w.oh();a.w.fb.S();for(b=0;b<a.w.ia.length;b++)a.w.ia[b].S(a.w.D);a.w.Pg()};I.onmouseover=function(a){a=a||window.event;a=a.srcElement.parentNode;a.setAttribute("prevBorder",a.style.border);a.style.border=G};I.onmouseout=function(a){var a=a||window.event,a=a.srcElement.parentNode,b=a.getAttribute("prevBorder");a.style.border=b?b:ca}}});w&&0<w.length?(j.style.height="33px",j.style.width=2===w.length?"110px":E?"180px":"160px",document.getElementById(L+"_topSection").style.display="block"):
(j.style.height="25px",j.style.width="40px",document.getElementById(L+"_topSection").style.display="none");j.style.left=i[0]+"px";j.style.top=i[1]+c.clientHeight+8+"px";j.style.display="block"}else Ne(u);var H=a.bb,ja=d,M,Y=H.Le,Z;if(0<ja.length){var Jb=H.uf.getItem(e.d);H.uf.each(function(a,b){if(ja.indexOf(parseInt(a,10))!==-1){M=document.getElementById(Y+"_"+b);if(Jb&&Jb===b){if(M.src.indexOf("_Selected.png")===-1){Z=M.src.replace(".png","_Selected.png");M.src=Z}H.Fi=M.parentNode}else{M.parentNode.style.border=
H.rn;if(M.src.indexOf(b)===-1){Z=M.src.replace("_Selected.png",".png");M.src=Z}}}})}}function Ze(a){return'<div id="'+a.od+'" style="position:relative;vertical-align:middle;display:inline-block;width:auto;height:'+a.no+"px;background:-webkit-gradient(linear, left top, left bottom, from("+a.a.p.Na.Hb+"), color-stop(0.2, "+a.a.p.Na.fc+"), to("+a.a.p.Na.gc+"));border:1px solid "+a.a.p.Na.G+';padding-left:0px;padding-right:0px;padding-top:2px;padding-bottom:2px;border-radius:3px;"></div>'}z.Ef=function(){this.bb.Ef()};
z.gh=function(a){this.bb.gh(a)};z.ih=function(a){this.bb.ih(a)};z.hh=function(a){this.bb.hh(a)};function Ce(){return window.Rs||"../../../libs/scripts/layer/images/charts"}B("TRWebchart_Shared.TRWebChartLibVersion","3.73_2013_d2");function Ef(a,b){this.lb=a;this.visible=b}Ef.prototype.Nb=function(){k("The 'render' can only be called on an instance of a subclass of this 'ComponentBase' type")};function Ff(a,b,c,d){Ef.call(this,a,n);this.a=b;this.w=d;this.P=c;this.Sb=new Xe(a,this.a,this.P,this.w);this.je=this.ab=o;this.pd=[]}Ff.prototype=new Ef("",s);z=Ff.prototype;
z.Nb=function(){function a(a,b){for(var d=0,f=a.length;d<f;++d){var e=a[d];b&&(e.style.marginLeft=c+"px");w.ab.appendChild(e);w.pd.push(e)}}(this.ab=document.getElementById(this.lb))||k("The incoming id '"+this.lb+"' cannot be resolved into a valid DOM object.");this.ab.style.cursor="pointer";var b=s,c=2,d;var f=this.Sb;f.w||k("this.chartObj cannot be null or undefined.");d=Ee(Ze(f));var e=f.w.l,g=o,h=s,i,j,m,p,q=s,r=s,t=o;f.P&&(t=f.P.jk());for(var y=[],u=0;u<e.length;u++)if(g=e[u],0===u&&(r=9===
g.d),!yc(g)&&!K(g)&&!wc(g)){h=n;if(0<u){if(g.pn){y.push(g.d);continue}d.appendChild(Ge())}i=(i=g.bq)&&0<i.length?i:zc(g.Sa)?Ac(g.Sa):Bc(g.Sa)?Cc(g.Sa):g.Sa;m=$e(f,u);j=af(m);m=We(i,j,m.tb);r&&m<f.cg&&(m=f.cg);xc(g)?(q=n,p=[f.a.sb.yj.stroke]):(p=[g.O[0].stroke],y.push(g.d));g=o;q&&(i=Gf,j=Qe(f.xc,j,m,s));f.Jc&&(g=function(a){bf(f,a)});d.appendChild(De(f.bb,f.od,i,u,j,m,p,g))}f.P.n.$c.PriceSeriesTypes=y;!f.s&&(f.Jc&&h&&!q)&&!r&&(e=5,t&&(t=f.zq[t.interval+""],t!==o&&!isNaN(t)&&(e=t)),d.appendChild(He(f.bb,
"intervalDropdown",70,e,f.Ck,s,s,n)));h?cf(d,q):d=o;this.pd=[];var w=this;d&&(b=n,a([d],s));d=this.Sb;d.w||k("this.chartObj cannot be null or undefined.");var E={},L={},I,h=[];d.w.l.forEach(function(a,b){if(yc(a)&&!(a&&(a.c&&a.c.length>0)&&a.c[0].indexOf("LevelLine")>-1)){I=a.k.MessageId;if(E[I]){E[I].push(a);L[I].push(b)}else{E[I]=[a];L[I]=[b]}}});for(I in E)(q=Ye(d,E[I],L[I]))&&h.push(q);h&&h.length&&(b=n,a(h,n));d=this.Sb;d.w||k("this.chartObj cannot be null or undefined.");var G={},ca={},H,h=
[];d.w.l.forEach(function(a,b){if(K(a)){H=Sc(a.k.MessageId);if(G[H]){G[H].push(a);ca[H].push(b)}else{G[H]=[a];ca[H]=[b]}}});q=0;t={};for(H in G)t[H]||(t[H]=G[H][0].d);d.P.n.$c.FundamentalSeriesTypes=t;for(H in G)(t=df(d,G[H],ca[H],q))&&h.push(t),++q;h&&h.length&&(b=n,a(h,n));d=this.Sb;d.w||k("this.chartObj cannot be null or undefined.");var h=[],ja={},M={},Y;d.w.l.forEach(function(a,b){if(wc(a)){Y=Tc(a.k.MessageId);if(ja[Y]){ja[Y].push(a);M[Y].push(b)}else{ja[Y]=[a];M[Y]=[b]}}});q=0;t={};for(Y in ja)t[Y]||
(t[Y]=ja[Y][0].d);d.P.n.$c.EconomicSeriesTypes=t;for(Y in ja)(t=tf(d,ja[Y],M[Y],q))&&h.push(t),++q;h&&h.length&&(b=n,a(h,n));if(b===n&&(b=uf(this.Sb)))b.style.marginLeft=c+"px",this.ab.appendChild(b),this.pd.push(b);this.Sb.Ef()};
z.Dj=function(){for(var a=this.ab.clientWidth,b=this.pd[0].clientWidth,c=this.pd[0].offsetHeight,d=1,f=1;f<this.pd.length;++f)b+=this.pd[f].offsetWidth,b>a&&(c+=this.pd[f].offsetHeight,d++,this.pd[f].style.marginLeft="0px",b=this.pd[f].offsetWidth);this.ab.style.height=c+2*d+"px"};z.kh=function(a,b,c,d){this.lb=a;this.a=b;this.w=d;this.P=c;this.Sb.kh(a,b,c,d);if(a=uf(this.Sb))a.style.marginLeft="2px",this.ab.appendChild(a)};z.ph=function(a,b,c,d,f){this.Sb.ph(a,b,c,d,f)};z.gh=function(a){this.Sb.gh(a)};
z.ih=function(a){this.Sb.ih(a)};z.hh=function(a){this.Sb.hh(a)};function Hf(a,b){this.Cn=a;this.color=b}B("TRWebchart_Shared.LegendColor",Hf);Hf.prototype.oq=x("Cn");Hf.prototype.getLegend=Hf.prototype.oq;Hf.prototype.lq=x("color");Hf.prototype.getColor=Hf.prototype.lq;function If(){this.nn="0123456789abcdef"}function Jf(a){"#"==a.charAt(0)&&(a=a.slice(1));6>a.length&&k("Incoming hex value for a color has to have 6 characters.");var b=Array(3);b[0]=parseInt(a.substring(0,2),16);b[1]=parseInt(a.substring(2,4),16);b[2]=parseInt(a.substring(4,6),16);return b}function Kf(a,b){(!b||3>b.length)&&k("Incoming rgb must be an array of 3 elements.");for(var c="#",d,f,e=0;3>e;e++)d=b[e]/16,f=b[e]%16,c+=a.nn.charAt(d)+a.nn.charAt(f);return c}
function Lf(a,b){for(var c=Jf(b),d=0,f=Array(3),e=Array(3),g=0;g<c.length;g++)d=0.4*c[g],f[g]=c[g]+d,255<f[g]&&(f[g]=255),e[g]=c[g]-d,0>e[g]&&(e[g]=0);return{kj:Kf(a,f),hj:Kf(a,e)}}function Mf(a,b){var c=Jf(a);return"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+b+")"};function Nf(a,b){this.$a=a;this.a=b;this.gt=0;this.Ej=12;this.fk=15;this.Tm=21}Nf.prototype.Ng=function(a,b){var c=this.a.sb.rb,d=c.length,c=a<d?c[a]:c[a%d];if(0!==b){c=c.stroke;d=b;c=String(c).replace(/[^0-9a-f]/gi,"");6>c.length&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);var d=d||0,f="#",e,g;for(g=0;3>g;g++)e=parseInt(c.substr(2*g,2),16),e=Math.round(Math.min(Math.max(0,e+e*d),255)).toString(16),f+=("00"+e).substr(e.length);c=f;c=new C(c,c,0>b?"#ffffff":"#1f1f1f")}return c};
function Of(a,b,c){return Math.floor(b/c)*(a.a instanceof ze||a.a instanceof xe?-0.2:0.2)};B("TRWebchart_Fin.TimePeriods",{Latest6Months:0,Latest1Day:1,Latest2Days:2,Latest3Days:3,Latest4Days:4,Latest5Days:5,Latest6Days:6,Latest7Days:7,Latest8Days:8,Latest9Days:9,Latest10Days:10,Latest15Days:11,Latest20Days:12,Latest1Month:13,Latest2Months:14,Latest3Months:16,Latest4Months:17,Latest5Months:18,Latest1Year:19,Latest2Years:20,Latest3Years:21,Latest4Years:22,Latest5Years:23,Latest6Years:24,Latest10Years:25,Latest15Years:26,Latest20Years:27,Latest25Years:28,Latest30Years:29,Latest40Years:30,
Latest50Years:31,YearToDate:32});var P={None:0,Tick:1,Minute1:2,Minute5:3,Minute10:4,Minute30:5,Hourly:6,Daily:7,Weekly:8,Monthly:9,Quarterly:10,HalfYearly:12,Yearly:11};B("TRWebchart_Fin.Intervals",P);function Q(a,b,c,d,f,e,g,h){this.Sa=a;this.k=b;this.d=c;this.Q=d;this.c=f;this.dc=e;this.Yb=g;this.Gb=h;this.La=2;this.Dc=[];this.Cb=s;this.Qb=zc(a)?Ac(a):Bc(a)?Cc(a):a;this.O=[];this.Gd=this.interval=0;this.Ia=o;this.pn=s;this.seriesName=this.Sa;this.dataCollection=this.k;this.chartType=this.d;this.xColumnName=this.Q;this.yColumnNameList=this.c;this.yAxisSharingCode=this.dc;this.lineStyle=this.Yb;this.showMarker=this.Gb;this.lineThickness=this.La;this.colorChangeDataIndexes=this.Dc;this.showLabel=
this.Cb;this.associatedRic=this.Qb;this.seriesColors=this.O;this.interval=this.interval;this.colorIndex=this.Gd;this.numberFormat=this.Ia}B("TRWebchart_Shared.SeriesParam",Q);Q.prototype.vr=v("Cb");Q.prototype.setLabelEnabled=Q.prototype.vr;Q.prototype.ll=v("La");Q.prototype.setLineThickness=Q.prototype.ll;Q.prototype.qr=v("Dc");Q.prototype.setColorChangeDataIndexes=Q.prototype.qr;Q.prototype.rr=function(a){this.ic=a&&0<a.trim().length?a:o};Q.prototype.setColorSharingCode=Q.prototype.rr;
Q.prototype.$n=v("Qb");Q.prototype.setAssociatedRic=Q.prototype.$n;Q.prototype.co=v("bq");Q.prototype.setDisplayName=Q.prototype.co;Q.prototype.$e=v("O");Q.prototype.setSeriesColors=Q.prototype.$e;Q.prototype.setInterval=v("interval");Q.prototype.setInterval=Q.prototype.setInterval;Q.prototype.ao=v("Gd");Q.prototype.setColorIndex=Q.prototype.ao;Q.prototype.xr=v("Ia");Q.prototype.setNumericLabelFormat=Q.prototype.xr;Q.prototype.sr=function(a){this.pn=!!a};Q.prototype.setHideInMarquee=Q.prototype.sr;
Q.prototype.F=new J;B("TRWebchart_Shared.YAxisOptions",function(a,b,c,d,f){this.Sa=a;this.hd=b;this.re=c;this.dc=d;this.hq=f});function Pf(a,b){this.En=a;this.F=b}B("TRWebchart_Shared.YAxisOptionLocator",Pf);function Qf(a,b,c,d,f){this.Fa=a;this.mg=b;this.Fa.length!=this.mg.length&&k("The incoming 2 parameters must have equal length.");this.Jb=c;this.Fs=d;this.h=f?f:[];this.De=this.t=this.sd=this.Tb=this.Ai=this.interval=o;this.kf="";this.arrayOfSeriesParamList=this.Fa}B("TRWebchart_Fin.CompositeChartParam",Qf);Qf.prototype.setInterval=v("interval");Qf.prototype.setInterval=Qf.prototype.setInterval;Qf.prototype.yr=v("Ai");Qf.prototype.setPredefinedRange=Qf.prototype.yr;B("TRWebchart_Bus.AxisType.DateTime",0);B("TRWebchart_Bus.AxisType.Numeric",1);B("TRWebchart_Bus.AxisType.Customized",2);B("TRWebchart_Bus.ChartType",{Line2D:0,Bar2D:1,Histogram2D:2,StackedHistogram2D:3,Area2D:4,Pie2D:5,Scatter2D:6,StackedBar2D:8,CategorizedHistogram2D:9,Spline2D:10,DynamicCategorizedHistogram2D:11});function Rf(){this.F=new J}Rf.prototype.e=function(a,b){return this.F.e(a,b)};function Sf(a,b){for(var c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,f=b.k,e=a.e(b.c[0],f),g=[],h=[],i,j=0;j<e.length;j++){var m=0,p=0;for(i=0;i<b.c.length;i++){var q=a.e(b.c[i],f)[j];q!==o&&!isNaN(q)&&(0<q?m+=q:p+=q)}g[g.length]=m;h[h.length]=p}for(i=0;i<g.length;i++)d=Math.max(g[i],d),c=Math.min(h[i],c);0<c&&(c=0);f=[0,0];f[0]=c;f[1]=d;return f}
function Tf(a,b,c,d){var f=[],e=b.k,g=b.d;switch(g){case 10:for(var a=[0,0],f=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,h=b.k,c=[],i=d.e(b.Q,h),h=d.e(b.c[0],h),j,b=0;b<i.length;b++)j=d instanceof Uf?d.va(i[b]):d instanceof Vf?d.A(i[b]):Wf(d,i[b]),c.push(new Xf(j,h[b]));d=qc(c,1);for(b=0;b<d.length;b++)d[b]===o||"undefined"===typeof d[b]||(f=Math.min(d[b].i,f),e=Math.max(d[b].i,e));a[0]=f;a[1]=e;f=a;break;case 1:case 8:d=a.e(b.Q,e);f=dg(d);break;default:if(1<b.c.length)if(c)f=Sf(a,b);else{b=
b.c;c=b.length;for(i=0;i<c;i++)d=a.e(b[i],e),f.push(dg(d));f=eg(f)}else d=a.e(b.c[0],e),f=dg(d)}if(2==g||9==g)f[0]=Math.min(f[0],0),f[1]=Math.max(f[1],0);return f}function eg(a){for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=o,f=0;f<a.length;f++)d=a[f],d[0]!==o&&(d[1]!==o&&!isNaN(d[0])&&!isNaN(d[1]))&&(c=Math.max(d[1],c),b=Math.min(d[0],b));return[b,c]}
function dg(a){for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d,f=0;f<a.length;f++)d=a[f],d!==o&&!isNaN(d)&&(b=Math.min(d,b),c=Math.max(d,c));return[b,c]};var xf="Open",yf="High",zf="Low",Af="Close",Bf="Value",Gf="Volume",Cf="Rebase_data";function fg(){this.F=new J;this.ef=new ac}fg.prototype=new Rf;function gg(a,b,c){for(var d=[0,0],f=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=a.e(Bf,b),h=s,i=[],b=a.e("DaysToMaturity",b),a=0;a<b.length;a++)i.push(new Xf(hg(c,b[a]),g[a]));c=qc(i,1);for(a=0;a<c.length;a++)c[a]===o||"undefined"===typeof c[a]||(f=Math.min(c[a].i,f),e=Math.max(c[a].i,e),h=n);h?(d[0]=f,d[1]=e):(d[0]=0,d[1]=0);return d}fg.prototype.e=J.prototype.e;
function ig(a,b,c){for(var d=[0,0],f=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=a.e(yf,b),h=a.e(zf,b),i=a.e(xf,b),a=a.e(Af,b),j,b=c[0];b<=c[1];b++)if(g!==o&&(j=g[b],e=isNaN(j)?e:Math.max(j,e),f=isNaN(j)?f:Math.min(j,f)),i!==o&&(j=i[b],e=isNaN(j)?e:Math.max(j,e),f=isNaN(j)?f:Math.min(j,f)),h!==o&&(j=h[b],e=isNaN(j)?e:Math.max(j,e),f=isNaN(j)?f:Math.min(j,f)),a!==o)j=a[b],e=isNaN(j)?e:Math.max(j,e),f=isNaN(j)?f:Math.min(j,f);d[0]=f;d[1]=e;return d}
function jg(a,b,c,d){var f=[0,0],e=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=b.k,i=h.TimeZone,j=a.e("Date",h),m=0;if(j===o)return[NaN,NaN];d=a.ub(j,c,d,i);m=b.d;if(-1===d[0]||-1===d[1])return m===Nc||m===Oc?(f=a.e(b.c[0],h),e=a.F.Xh(f,j,c.end,m),f=0<=e?[f[e],f[e]]:[NaN,NaN]):f=[NaN,NaN],f;if(3===m||4===m)g=ig(a,h,d),e=g[0],g=g[1];else if(-1!==b.c[0].indexOf("LevelLineScalar"))a=h.Scalars.Value,e=Math.min(a[1],e),g=Math.max(a[1],g);else if(-1!==b.c[0].indexOf("LevelLine"))a=h.LevelLines,
b=parseInt(b.c[0].substring(b.c[0].length-1),10),e=Math.min(a[b].Value,e),g=Math.max(a[b].Value,g);else{c=a.e(b.c[0],h);j=d[0];if(0===m||5===m||m===Nc||m===Oc)for(m=d[0];0<m;m--)if(m!=d[0]&&(j=c[m],isNaN(j)===s)){j=m;d[0]=j;break}if(Ec(b)&&!b.jd)g=ig(a,h,d),e=g[0],g=g[1];else for(m=d[0];m<=d[1];m++)a=c[m],isNaN(a)===s&&(e=Math.min(a,e),g=Math.max(a,g))}e===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY?(f[0]=NaN,f[1]=NaN):(f[0]=e,f[1]=g);return f}
fg.prototype.ub=function(a,b,c,d){for(var f=[-1,-1],e=o,g=-1,h=0,h=0;h<a.length;h++)if(d&&c===n){if(e=this.R(a[h]),bc(e,d),e>=b.start){g=h;break}}else if(a[h]>=b.start){g=h;break}for(var i=-1,h=a.length-1;0<=h;h--)if(d&&c===n){if(e=this.R(a[h]),bc(e,d),e<=b.end){i=h;break}}else if(a[h]<=b.end){i=h;break}f[0]=g;f[1]=i;return f[0]>f[1]?[-1,-1]:f};fg.prototype.R=function(a){return new Date(a.valueOf())};function kg(a,b,c,d){this.C=a;this.xa=b;this.hf=c;this.bg=d}function R(a,b,c){this.C=a;this.xa=b;this.text=c};function lg(a,b){this.q=a;this.L=b;this.scale=0;this.F=new J;this.q&&this.tf()}lg.prototype.tf=function(){var a=this.q.end-this.q.start;this.scale=this.L/(0>=a?1:a)};lg.prototype.e=function(a,b){return this.F.e(a,b)};function mg(a,b){this.start=a;this.end=b;if(this.end<this.start)if(0>this.end&&0>this.start){var c=this.end;this.end=this.start;this.start=c}else k("Incoming start value cannot be greater than or the same as the incoming end value.")};function ng(a,b,c,d){this.b=a;this.V=b;this.ga=c;this.xc=new Pe;this.Lq=2;this.cb=new N;this.tb=o;this.Ta=d;this.F=new J}
function og(a){var b=[0,0],c;c=22;300<a.b.L&&(c=30);c=a.b.L/c;var d=Math.round(c);d>c&&(d-=1);c=20<d?20:d;if(1>c)return o;var a=a.b.q.end-a.b.q.start,f=Math.abs(a/c),d=[0,0.01,0.05,0.1,0.2,0.25,0.4,0.5,1],e=Math.abs(f),g=0,h=[e,g];if(0!==e){if(1<=e)for(;1<=e;)e/=10,g++;else if(0.1>e)for(;0.1>e;)e*=10,g--;0>f&&(e*=-1)}h[0]=e;h[1]=g;for(var e=f=h[0],h=h[1],i=g=0;i<d.length;i++)if(!(f>d[i])){g=i;f=d[i];break}f>0.5*a&&(f=1<g?d[g-1]:e);f*=Math.pow(10,h);b[0]=f;b[1]=c;return b}
function pg(a,b){var c=Math.abs(b),d;if(99<b)a:{c=b+"";d=c.length;var f=c.match("0{1,}");if(f&&0<f.length&&(f=f[0],c.indexOf(f)===d-f.length)){c=parseInt("1"+f,10);d=Math.ceil(a/c)*c;break a}d=a}else if(c=Math.abs(c),f=1<c?0:0.5<c?1:0.1<c?2:0.01<c?3:0.001<c?4:1E-4<c?5:1E-5<c?6:7,d=Te(a,f),d>a){c=1;for(1==f?c=0.1:2==f?c=0.01:3==f?c=0.001:4==f?c=1E-4:5==f?c=1E-5:6<=f&&(c=1E-6);d>a;)d-=c}return d}
function qg(a,b,c){var d=a.b.q,f=0,e=10;1E-5>c?(f=6,e=1E-5):1E-4>c?(f=5,e=1E-4):0.001>c?(f=4,e=0.001):0.01>c?(f=3,e=0.01):0.1>c?(f=2,e=0.1):1>c&&(e=f=1);d.end<a.Lq&&0===f&&(f=1);var g=c=Math.abs(c);if(1!=c){var c=Te(c,f),d=c+"",h=d.charAt(d.length-1);if(h=rg[h])1<h.length&&(h="0",d=c+e+""),d=d.substr(0,d.length-1)+h;c=parseFloat(d);0>=c&&(c=Te(g,f+1))}d=c+"";0>d.indexOf(".")?d=0:(d=d.split("."),d=2>d.length?0:d[1].length);d>f&&(f=d);d=c+"";h=d.charAt(d.length-1);e=sg[h];h=b;g=h+"";b=Te(b,f);b>h&&
(b=Math.floor(h*Math.pow(10,f))/Math.pow(10,f));g=b.toFixed(f);-1>=d.indexOf(".")&&0<=g.indexOf(".")&&(e=sg["0"]);-1>=g.indexOf(".")&&1>c&&(e=o);1===c&&0===f&&(e=o);b=g.charAt(g.length-1);if(e&&-1>=e.indexOf("|"+b+"|")){b=parseInt(b,10);for(d=0;10>d;d++){b--;if(0>b)break;if(0<=e.indexOf("|"+b+"|")){g=g.substr(0,g.length-1)+""+b;break}}}b=parseFloat(g);1E3<=Math.abs(b)&&!a.V&&(d=tg(a,b,f),a=tg(a,c,f),f=Math.max(d,a));return{pm:b,Sl:c,of:f}}
function tg(a,b,c){a=Qe(a.xc,b,c,a.V);isNaN(a.substring(a.length-1))&&(c=Se(a.substring(0,a.length-1)));return c}var rg={1:"0",3:"2",4:"5",6:"5",7:"5",8:"10",9:"10"},sg={"0":"|0|5|",1:"|0|1|2|3|4|5|6|7|8|9|",2:"|0|2|4|6|8|",5:"|0|5|"};function ug(a,b,c,d){ng.call(this,a,b,c,d)}ug.prototype=new ng(o,s,o,s);
ug.prototype.lc=function(a,b,c){a.length=0;b.length=0;var d=og(this);if(d!==o){var f=d[0],d=d[1],e=pg(this.b.q.end,f),e=qg(this,e,f);c&&(f=c.Mm,0<=f&&(e.of=f));this.tb=e.of;var g=e.pm,f=e.Sl,h=this.b.A(g),i="",h=h+1,j=c?c.ob:"",c=new pe(Pc(c,this.V,e.of)),i=1E3>Math.abs(g)||this.V?c.ea(g):Qe(this.xc,g,e.of,this.V);0===parseFloat(i)&&(i=i.replace("-"," "));0>this.b.q.start&&0<=g&&(i=" "+i);this.Ta?(i=parseFloat(i.trim()),Ue(i)&&(i=i.toString()+j,a[a.length]=new R(0,h,i),b[b.length]=new kg(0,h,0,h))):
(a[a.length]=new R(0,h,i+j),b[b.length]=new kg(0,h,0,h));g-=f;this.b.A(this.b.q.start);for(var m=this.b.q.start,p=0;p<d+20;++p){1E-10>Math.abs(g-m)&&(g=m);if(g<m)break;h=this.b.A(g);h+=1;i=1E3>Math.abs(g)||this.V?c.ea(g):Qe(this.xc,g,e.of,this.V);0===parseFloat(i)&&(i=i.replace("-"," "));0>this.b.q.start&&0<=g&&(i=" "+i);this.Ta?(i=parseFloat(i.trim()),Ue(i)&&(i=i.toString()+j,a[a.length]=new R(0,h,i),b[b.length]=new kg(0,h,0,h))):(i+=j,a[a.length]=new R(0,h,i),b[b.length]=new kg(0,h,0,h));g-=f}}};function vg(a,b){this.canvas=a;this.a=b;this.jq=10;this.Ob=3;this.Xf=0}vg.prototype.Xa=function(){k("This method cannot be called.  It must be overriden by sub-classes.")};vg.prototype.S=function(){k("This method cannot be called.  It must be overriden by sub-classes.")};function wg(a,b,c,d,f){vg.call(this,a,b);this.hd=c?c:s;this.Ic=d;this.Vd=s;this.s=f}wg.prototype=new vg(o,o);wg.prototype.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.H.u+" "+this.a.H.o+" "+this.a.H.m};
wg.prototype.S=function(a,b,c,d,f){this.canvas||k("Canvas was not properly initialized.");var e=this.canvas.getContext("2d");e||k("The current browser does not support canvas");var g=this.a.H.Ba;e.beginPath();e.fillStyle=g;e.fillRect(0,0,this.canvas.clientWidth,this.canvas.clientHeight);e.closePath();var g=this.Ic,h=this.a.H.Ca,i,j=(new N).Jd(this.Xa());if(this.a.H.kb.Dd===n&&c&&0<c.length)for(var m=0,p=c.length;m<p;++m){i=c[m];var q=parseInt(i.C,10),r=parseInt(i.xa,10);(isNaN(q)||isNaN(r))&&k("The positioning value is not number type.");
var t=e;this.a||k("The chart scheme of this axis obj is not properly set.");t.font=this.a.H.kb.u+" "+this.a.H.kb.o+" "+this.a.H.m;e.fillStyle=h;e.strokeStyle=h;1==this.a.H.kb.Oa?this.s||this.Vd?(e.save(),e.translate(q,r),e.rotate(-Math.PI/2),e.textAlign="center",e.fillText(i.text,0,6),e.restore()):(e.textAlign="left",e.textBaseline="top",e.fillText(i.text,q,r),g=0===m?j:g+=j):(e.textAlign="left",e.textBaseline="top",e.fillText(i.text,q,r),g=0===m?j:g+=j)}else g=10;e.textAlign=a;e.textBaseline=b;e.font=
this.Xa();a=0;b=this.jq/2;c=n;if(d&&0<d.length){e.fillStyle=h;e.strokeStyle=h;for(a=0;a<d.length;a++)if(h=d[a],2>h.xa-b&&(h.xa+=b),h.xa+b>this.canvas.clientHeight&&(h.xa-=b),h.xa>=g)0===a&&(0<g&&h.xa-b<g+2)&&(h.xa+=b),c=n,a<d.length-1&&(this.hd?h.xa+b<d[a+1].xa-b&&(c=s):h.xa+b>d[a+1].xa-b&&(c=s)),c&&e.fillText(h.text,h.C,h.xa)}if(f&&0<f.length&&0<this.Ob){e.fillStyle=this.a.H.rc;e.strokeStyle=this.a.H.rc;e.lineWidth=1;e.beginPath();for(a=0;a<f.length;a++)d=f[a],d.xa>=g&&(e.moveTo(d.C,d.xa+this.Xf),
e.lineTo(d.hf,d.bg+this.Xf));e.stroke();e.closePath()}};function xg(a){this.ah=a;this.rd=o;this.Hn=1E-5;this.In=1;this.Gn=o;if(this.ah){this.rd=new mg(this.ah.start,this.ah.end);var a=Math.max(this.Hn,this.ah.start),b=Math.max(this.Hn,this.ah.end);a<b&&(this.rd=new mg(a,b),this.In=(this.rd.end-this.rd.start)/(this.Lf(this.rd.end)-this.Lf(this.rd.start)),this.Gn=this.Lf(this.rd.start))}}xg.prototype.Zg=function(a){var b=a;a>=this.rd.start&&a<=this.rd.end&&(b=this.rd.start+(this.Lf(a)-this.Gn)*this.In);return b};
xg.prototype.Lf=function(a){return Math.log(a)/Math.LN10};function yg(a,b,c,d){lg.call(this,a,b);this.Rg=d;this.re=c?c:s;this.Qn=0;this.Fn=o;this.q&&this.re===n&&(this.Fn=new xg(this.q))}yg.prototype=new lg(o,0);yg.prototype.A=function(a){if(a===l||a===o)return Number.NaN;if(a<this.q.start)return o;var b=a;this.re===n&&(b=this.Fn.Zg(a));a=(b-this.q.start)*this.scale;this.Rg&&(a=this.L-a);return a+this.Qn};yg.prototype.mc=function(){return this.L-this.Qn};B("TRWebchart_Bus.LabelRotateDegree",{Degree0:0,Degree30:30,Degree45:45,Degree60:60,Degree90:90,Degree270:270,Degree300:300,Degree315:315,Degree330:330});function zg(a,b,c,d,f,e){this.r=a;this.b=o;this.Ob=3;this.cf=1;this.Ha=[];this.ta=[];this.Jf=[];this.ji=[];this.Za=this.ro="left";this.Ce="middle";this.v=[];this.canvas=o;this.r&&this.wa();this.a=this.d=o;this.fq=9;this.ee=o;this.D=b;this.ib=s;this.ka=c;this.V=d;this.Ta=f;this.Ia=e;this.F=new J}function Ag(a){for(var b=[],c=0;c<a.ta.length;c++)a.ta[c]&&(b[b.length]=a.ta[c].C);return b}function Bg(a){for(var b=[],c=0;c<a.ta.length;c++)a.ta[c]&&(b[b.length]=a.ta[c].xa);return b}z=zg.prototype;
z.td=function(a){this.a=a;this.yn=this instanceof Cg?this.a.H.Ca:this.yn=this.a.W.Ca};z.Xa=function(){k("This method cannot be called. It must be overridden by sub-classes.")};z.wa=function(){this.r.innerHTML="";var a=this.F.Ec();pc(a,1,1);this.canvas=this.r.appendChild(a)};function Dg(a,b){0===a.v.length&&(a.d=b.d);a.v.push(b)}
function Eg(a){a.canvas||k("Canvas was not properly initialized.");var b=a.canvas.getContext("2d");b||k("The current browser does not support canvas");b.font=a.Xa();return b}z.cc=function(a,b){this.r||k("setSize cannot be called directly on base class.");this.canvas||k("Canvas was not properly initialized.");a&&(this.r.style.width=a+"px");b&&(this.r.style.height=b+"px");pc(this.canvas,a,b)};
function Fg(a){a.v.length=0;a.b=o;a.canvas||k("Canvas was not properly initialized.");var b=a.canvas.getContext("2d");b||k("The current browser does not support canvas");b.clearRect(0,0,a.canvas.offsetWidth,a.canvas.offsetHeight)}
z.S=function(){this.Zc instanceof wg?this.Zc.S(this.Za,this.Ce,this.ee,this.Ha,this.ta):(this.Zc.s&&(90>this.ka?0==this.ka?this.Za="center":(this.Za="start",this.Ce="middle"):(this.Za=90==this.ka?"start":"end",this.Ce="middle")),this.Zc.S(this.Za,this.Ce,this.ro,this.Ha,this.ta,this.Jf,this.ji,this.ka))};z.fo=v("ka");
function Gg(a,b){var c=new N;if(0===a.ka)return c.Jd(b);for(var d=0,f=0;f<a.Ha.length;f++)d=Math.max(d,Wc(Eg(a),a.Ha[f].text));c=c.Jd(b);d=d*Math.abs(Math.sin(a.ka*(Math.PI/180)))+c*Math.abs(Math.sin((90-a.ka)*(Math.PI/180)));return d=90==a.ka?d+6:d+3}z.ok=function(){for(var a=0,b=Eg(this),c=o,d=0;d<this.Ha.length;d++)c=b.measureText(this.Ha[d].text),a=Math.max(c.width,a);return a};function Cg(a,b,c,d,f,e){zg.call(this,a,b,0,d,f,e);this.location=1;this.Ti=2;this.pa=0;this.Kl=5;this.Nc=!c?new fg:new Rf;this.dq=12;this.di=s;this.s=c;this.An=o;this.Ic=0;this.hd=this.re=s;this.tb=o;this.yo=n;this.qh=0;this.F=new J;this.V=c&&this.Ia?n:d;this.Vd=s}Cg.prototype=new zg(o,o,0,s,s,o);z=Cg.prototype;z.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.H.u+" "+this.a.H.o+" "+this.a.H.m};
z.Vb=function(a){var b,c,d=[],f;(!this.v||0>=this.v.length)&&k("Error! The data series are not available for this yAxis.");var e=s;for(b=0;b<this.v.length;++b)if(0>=this.v[b].length&&k("Time series list is not valid.  It  has zero length"),this.s===n)d[d.length]=3==this.d?Tf(this.Nc,this.v[b],n,this.f):Tf(this.Nc,this.v[b],s,this.f);else if(9===this.d)0<this.v[b].k.Columns.length&&(d[d.length]=gg(this.Nc,this.v[b].k,this.f));else if(18===this.d)d[d.length]=Tf(this.Nc,this.v[b],n,this.f);else{if(11===
this.v[b].d){var g=this.v[b].k.Scalars;if(g!==o)for(c=0;c<g.length;++c)if("PreviousDayClose"==g[c].Name){f=g[c].Value.Value;e=n;break}}e===s&&(d[d.length]=jg(this.Nc,this.v[b],this.D,this.ib))}b=eg(d);this.s===n&&3==this.d&&0<b[0]&&(b[0]=0);e&&(b[0]=Math.min(b[0],f),b[1]=Math.max(b[1],f));e=parseInt(this.r.style.height.replace(/px/g,""),10);c=b[1]-b[0];f=n;this.hd===n&&(f=s);c===Number.NEGATIVE_INFINITY||c===Number.POSITIVE_INFINITY?(b=new mg(0,0),e-=2*this.Ti,this.b=new yg(b,e,this.re,f)):(d=0.02,
this.Ic&&0<this.Ic?(d=8,60>e?d=50:70>e?d=45:85>e?d=40:110>e&&(d=35),52<this.Ic&&(d=20),d=(this.Ic+d)/e,d+=0.06,0.6<d&&(d=0.6)):this.a.H.kb.Dd===n&&0==this.a.H.kb.Oa&&(d=0.06),b[1]==Number.NEGATIVE_INFINITY&&(b[1]=0),b[0]==Number.POSITIVE_INFINITY&&(b[0]=0),b[1]==b[0]&&(g=0.05*b[0],0===g&&(g=1),b[0]-=g,b[1]+=g),b=new mg(b[0]-0.03*c,b[1]+c*d),e-=2*this.Ti,this.b=new yg(b,e,this.re,f),b=new ug(this.b,this.V,Eg(this),this.Ta),b.lc(this.Ha,this.ta,this.Ia),this.tb=b.tb);this.Lj(a);for(b=0;b<this.ta.length;b++)0==
this.location?(this.ta[b].C=this.pa,this.ta[b].hf=this.ta[b].C-this.Ob):(this.ta[b].C=0,this.ta[b].hf=this.ta[b].C+this.Ob);for(b=0;b<this.Ha.length;b++)this.Ha[b].C=0==this.location?this.pa-this.Ob-this.cf:this.Ob+this.cf};
function Hg(a){var b=0;if(a.s===s){a.An||(a.An=new Ve);var b=a.v[0].k,c=a.F.e("Date",b);if(b===o||c===o)return 0;var c=jc(a.D.start,a.D.end,c),d=a.F.e(K(a.v[0])||wc(a.v[0])||xc(a.v[0])||yc(a.v[0])?a.v[0].c[0]:"Close",b),b=d[d.length-1];if(-1!==c.Ag){for(c=c.Ag;0<=c&&isNaN(d[c]);)--c;0<=c&&(b=d[c])}c=a.v[0].Sa;d=a.v[0].Qb;c=We(!d?c:d,b,a.tb);1E4<Math.abs(b)&&(c=a.tb);d="";d=a.yo===n?Qe(new Pe,b,c,a.V):Number(b).toFixed(c);b=Eg(a).measureText(d).width+6}return b}
z.Lj=function(a){var b=this.ok()+this.Ob+this.Kl,c=Hg(this);this.pa=b=Math.max(b,c);if(this.a.H.kb.Dd===n)a=this.$k(this.pa,a),1==this.a.H.kb.Oa?this.s||this.Vd?(this.pa=b+a,this.qh=b):this.qh=this.pa=a>this.pa?a:this.pa:this.qh=this.pa=a>this.pa?a:this.pa;else if(a=this.a.Ad,(a!==l?a.Ge.vj:s)===n&&this.di===n)this.qh=this.pa+=this.dq};
z.$k=function(a,b){if(!b||b&&0===b.length)return 0;this.ee=[];var c=Eg(this),d=c.measureText("").width,f,e;f=0;for(e=b.length;f<e;++f)d=Math.max(d,c.measureText(b[f]).width);this.s===s&&9==this.d&&(d+=5);var g=0,h,c=this.a.H,c="font-family:"+c.m+";font-size:"+c.o+";font-weight:"+c.u+";";h=new N;var i;if(1==this.a.H.kb.Oa)if(this.s||this.Vd)d=Math.round(this.canvas.clientHeight/2),c=h.sg(c,b[0]),1===this.location?(h=Hg(this),h=(h>a?h:a)+5):h=5,this.ee.push(new R(h,d,b[0])),g=c;else{f=this.cf;g=d+f+
6;i=1;d=1===this.location?f+3:g-d-3;f=0;for(e=b.length;f<e;++f)this.ee.push(new R(d,i,b[f])),i+=h.sg(c,b[f])+1}else{f=this.cf;g=d+f+6;i=1;d=1===this.location?f+3:g-d-3;f=0;for(e=b.length;f<e;++f)this.ee.push(new R(d,i,b[f])),i+=h.sg(c,b[f])+1}this.vq=n;return g};z.Rh=function(){this.Za=1===this.location?"left":"right";this.cc(this.pa,parseInt(this.r.style.height.replace(/px/g,""),10));this.Zc=new wg(this.canvas,this.a,this.hd,this.Ic,this.s);var a=this.Vd;a!==l&&a!==o&&(this.Zc.Vd=a);this.S()};function Ig(a){this.Id=a;this.Va=this.ab=o;this.F=new J}function Jg(a){if(a.ab){var b=a.ab.clientHeight,c=a.ab.clientWidth;if(a.Va)pc(a.Va,c,b);else{var d=a.F.Ec();pc(d,c,b);d.style.position="absolute";d.style.top="0px";d.style.left="0px";a.Va=a.ab.appendChild(d);a.Va.style.zIndex=a.zIndex!==l?a.zIndex:90}}}Ig.prototype.Nd=function(){k("This method can only be called from sub classes of 'CursorEffectProducerBase'")};Ig.prototype.Jg=function(){k("This method can only be called from sub classes of 'CursorEffectProducerBase'")};
function Kg(a,b,c,d){var f=b.x,e=b.y,g=b.Bb;if(!isNaN(f)&&!isNaN(e)){var h=2*Math.PI;a.beginPath();try{var i=a.createRadialGradient(f,e-(g/2+1),1,f,e,g);i.addColorStop(0,c);i.addColorStop(1,d);a.fillStyle=i}catch(j){a.fillStyle=b.fill.stroke}a.arc(f,e,g,0,h,s);a.fill();a.strokeStyle="#ffffff"===b.fill.stroke?"#f49b23":"#ffffff";a.lineWidth=1;a.stroke();a.closePath()}}function Lg(a,b,c,d,f){this.xValue=a;this.yValue=b;this.selectedIndex=c;this.xColumnName=d;this.yColumnName=f}
B("TRWebchart_Shared.OriginalData",Lg);function Mg(a){Ig.call(this,a);this.Ed=[];this.Mh=new If;this.Bb=4.3}Mg.prototype=new Ig(o);
Mg.prototype.Nd=function(a){var b=a.x;this.Ed=[];for(var c=[],d=0,f=o,e=this.Id.pg.Fg-3,g=0;g<this.Id.Ma.length;g++)for(var h=this.Id.Ma[g].ia.length-1;0<=h;h--){var i=this.Id.Ma[g].ia[h];if(i.Ud){if(d=o,i.me.length){for(var f=i.me.length,j=s,m=0;m<f;m++)if(b>=i.me[m].bs&&b<i.me[m].as){d=new Ng(o,i.me[m].xa,i.me[m].Oe,i.me[m].value);j=n;break}j||(d=new Ng(o,o,o,NaN))}}else{var d=i,f=b,p=o;if(!(d instanceof Og)&&d.$.length){j=d.$.length;for(m=1;m<j;m++)if(f>=d.$[m-1].C&&f<=d.$[m].C){var p=Math.abs(f-
d.$[m-1].C),q=Math.abs(f-d.$[m].C),p=d instanceof Pg||p<q?d.$[m-1]:d.$[m];break}f>d.$[j-1].C&&(p=d.$[j-1],p.Pk=s);f<d.$[0].C&&(p=d.$[0])}d=p}f=d;f!==o&&(d=i.Sf,j=this.Id.Ma[g].l[d],m=Qg(i),this.Ed.push(new Rg({dh:j?j.Sa:"",bc:d,Oe:f.Oe,value:f.value,C:f.C,bf:g,ei:i.c&&i.c[0]==Gf,d:i.d,Qb:j?j.Qb:o,Ud:i.Ud})),f.bg=this.Id.ii[g].offsetTop+f.xa-(0>=g?0:e)-i.nk()/2,f.color=m,f.d=i.d,i.Ud||c.push(f))}b=this.Va.getContext("2d");b.clearRect(0,0,this.Va.width,this.Va.height);h=a.x;e=[];g=[];for(a=0;a<c.length;++a)if(i=
Math.abs(h-c[a].C),(9!==c[a].d||10>i)&&!(0<i&&c[a].d===Nc&&isNaN(c[a].value)))e.push(c[a]),g.push(i);c=o;if(0<e.length){c=e[0].C;h=g[0];for(a=1;a<g.length;a++)g[a]<h&&(c=e[a].C,h=g[a])}if(c!==o)for(a=0;a<e.length;a++)if(e[a].d===Nc||e[a].d===Oc?(i=c<e[a].C?NaN:c+1,d=e[a].bg+2+1):(i=e[a].C+1,d=e[a].bg+2),!isNaN(i))g=b,h=e[a].color,f=Lf(this.Mh,h.stroke),Kg(g,new Sg(i,d,this.Bb,h),f.kj,f.hj)};Mg.prototype.ze=function(){this.Va.getContext("2d").clearRect(0,0,this.Va.width,this.Va.height)};
Mg.prototype.Jg=x("Ed");function Rg(a){this.dh=a.dh;this.bc=a.bc;this.Oe=a.Oe;this.value=a.value;this.C=a.C;this.bf=a.bf;this.ei=a.ei;this.d=a.d;this.Qb=a.Qb;this.Al=a.Al};function Tg(a,b,c,d){vg.call(this,a,b);this.s=c;this.vn=d;this.cb=new N}Tg.prototype=new vg(o,o);Tg.prototype.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.W.u+" "+this.a.W.o+" "+this.a.W.m};
Tg.prototype.S=function(a,b,c,d,f,e,g,h){this.canvas||k("Canvas was not properly initialized.");var i=this.canvas.getContext("2d");i||k("The current browser does not support canvas");i.textAlign=a;i.textBaseline=b;i.font=this.Xa();var j,m=this.a.W.Ca,p;if(d&&0<d.length)if(i.fillStyle=m,i.strokeStyle=m,this.s){if(!this.vn&&(0==h||90<=h))for(var q,a=0;a<f.length;a++)if(p=f[a].C,j=a+1<f.length?f[a+1].C:this.canvas.clientWidth,a<d.length){q=(j-p)/2;q=p+q;var r=Wc(i,d[a].text);0==h?j-p<=r?d[a]=o:d[a].C=
q:d[a].C=q}a=h*(Math.PI/180);for(p=0;p<d.length;p++)j=d[p],j===o||this.vn&&0===j.C||(i.save(),i.translate(j.C,j.xa+3),i.rotate(a),0==h?i.fillText(j.text,0,0):(q=Wc(i,j.text),q=90<=h?90==h||270==h?Math.ceil(j.C):j.C-q*Math.cos(a):j.C+q*Math.cos(a),0<=q&&q<=this.canvas.clientWidth-2&&i.fillText(j.text,3,2)),i.restore())}else for(p=0;p<d.length;p++)j=d[p],j!==o&&(h=j.C,q=a,r=Wc(i,j.text),"center"==q&&(r/=2),(h+r<=this.canvas.clientWidth?n:s)===n&&i.fillText(j.text,j.C,j.xa));if(f&&0<f.length&&0<this.Ob){d=
this.a.W.rc;i.fillStyle=d;i.strokeStyle=d;i.lineWidth=1;i.beginPath();for(p=0;p<f.length;p++)d=f[p],i.moveTo(d.C+this.Xf,d.xa),i.lineTo(d.hf+this.Xf,d.bg);i.stroke();i.closePath()}if(this.s===s){if(e&&0<e.length){i.fillStyle=m;i.strokeStyle=m;i.textAlign=c;i.textBaseline=b;i.font=this.Xa();for(p=0;p<e.length;p++)(j=e[p])&&i.fillText(j.text,j.C,j.xa)}if(g&&0<g.length){i.fillStyle=this.a.W.rc;i.strokeStyle=this.a.W.rc;i.lineWidth=2;i.beginPath();for(p=0;p<g.length;p++)if(d=g[p])i.moveTo(d.C+this.Xf,
d.xa),i.lineTo(d.hf+this.Xf,d.bg);i.stroke();i.closePath()}}};function Vf(a,b){lg.call(this,a,b);this.Pn=0;this.q&&this.tf()}Vf.prototype=new lg(o,0);Vf.prototype.A=function(a){return a<this.q.start?o:(a-this.q.start)*this.scale+this.Pn};Vf.prototype.mc=function(){return this.L-this.Pn};Vf.prototype.gf=function(a){this.L=a;this.tf()};function Ug(a,b,c,d){ng.call(this,a,b,c,d);this.Si=5;this.gi=0;this.Kc=2}Ug.prototype=new ng(o,s,o,s);Ug.prototype.lc=function(a,b){a.length=0;b.length=0;var c=og(this);if(c!==o){for(var d=c[0],c=c[1],f=pg(this.b.q.start,d),d=qg(this,f,d),f=d.of,e=d.pm,d=d.Sl,g="0",h=0;h<f;h++)g+=0===h?".0":"0";for(var g=new pe(g),h=Vg(this,a,b,g,f,e,0),i=e,e=e+d,j=0;j<c+20;j++){0>i&&0<e&&(h=Vg(this,a,b,g,f,0,h));if(e>this.b.q.end)break;h=Vg(this,a,b,g,f,e,h);i=e;e+=d}}};
function Vg(a,b,c,d,f,e,g){var h=a.b.A(e),i="",i=1E3>Math.abs(e)||a.V?d.ea(e):Qe(a.xc,e,f,a.V),d=Wc(a.ga,i);g+d/2<=h?(a.Ta?(e=parseFloat(i.trim()),Ue(e)&&(b.push(new R(h,0-a.gi,e.toString())),c.push(new kg(h,0,h,a.Si)))):(b.push(new R(h,0-a.gi,i)),c.push(new kg(h,0,h,a.Si))),g=h+d/2):0===e&&0===g&&(a.Ta?(e=parseFloat(i.trim()),Ue(e)&&(b.push(new R(h+d/2,0-a.gi,e.toString())),c.push(new kg(h,0,h,a.Si)))):(b.push(new R(h+d/2,0-a.gi,i)),c.push(new kg(h,0,h,a.Si))),g=h+d);return g};function Wg(a){zg.call(this,a.qg,a.D,a.ka,a.V,a.Ta,a.Ia);this.s=a.s;this.Nc=!a.s?new fg:new Rf;this.Gf=a.Gf}Wg.prototype=new zg(o,o,0,s,s,o);Wg.prototype.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.W.u+" "+this.a.W.o+" "+this.a.W.m};Wg.prototype.Qd=function(){var a=this.Xa();return Gg(this,a)};
Wg.prototype.Vb=function(){var a,b=[];(!this.v||0>=this.v.length)&&k("Error! The data series are not available for this yAxis.");var c=s;for(a=0;a<this.v.length;a++)if(0>=this.v[a].length&&k("Time series list is not valid.  It  has zero length"),this.s===n){var d=b,f=b.length,e=this.Nc,g=this.v[a],h=g.k,i=[],j=l;switch(g.d){case 1:for(var g=g.c,m=g.length,p=0;p<m;p++)j=e.e(g[p],h),i.push(dg(j));i=eg(i);i[0]=Math.min(i[0],0);i[1]=Math.max(i[1],0);break;case 8:i=Sf(e,g);break;default:j=e.e(g.Q,h),i=
dg(j)}d[f]=i;this.v[a].Cb===n&&(c=n)}else 9===this.d?b[b.length]=gg(this.Nc,this.v[a].k,this.D):11!==this.v[a].d&&(b[b.length]=jg(this.Nc,this.v[a],this.D,this.ib));d=eg(b);a=d[1]-d[0];a=new mg(d[0]-a*(0>d[0]?0.03:0),d[1]+0.02*a);b=this.r.clientWidth;c===n&&(c=new N,f=this.a.qf,f=""+f.rj+" "+f.m+" "+f.u,this.Gf?(h=Pc(this.Gf,n,0),e=this.Gf.ob?this.Gf.ob:""):(h=o,e=""),h=h?new pe(h):o,d=-1*Math.max(Math.abs(d[0]),Math.abs(d[1])),d=h?h.ea(d):d,c=c.pe(f,d+e),b-=c);this.b=new Vf(a,b);(new Ug(this.b,this.V,
Eg(this),this.Ta)).lc(this.Ha,this.ta)};Wg.prototype.Af=function(){this.Za="center";this.Ce="top";this.cc(this.r.clientWidth,this.Qd());this.Zc=new Tg(this.canvas,this.a,n,n);this.S()};function T(a,b){this.ga=a;this.b=b;this.Za="left";this.Pf=n;this.Nq=D.oj;this.Oq=D.dm;this.Mq=D.cm;this.Pe=new Nb(Vb.get("en").zd);this.Xj=new Nb(Vb.get("en").lj)}function Xg(a,b,c,d){c=1+c;a=a.b.R(b);d===n?a.setFullYear(a.getFullYear()+c):a.setFullYear(a.getFullYear()-c);a.setMonth(0,1);return a}function Yg(a,b){return 1===Zg?a.Oq[b]:1===$g?a.Mq[b]:a.Nq[b]}function ah(a){var b=a.getHours(),c=a.getMinutes(),a=a.getSeconds();10>c&&(c="0"+c);10>a&&(a="0"+a);return b+":"+c+":"+a}
function bh(a,b){var c=a.b.R(b);c.setHours(8,0,0,0);return c}function ch(a,b){var c=a.b.R(b);c.setMonth(0,1);c.setHours(0,0,0,0);return c}function dh(a,b){var c=s;if(a.getFullYear()===b.getFullYear()===s||a.getMonth()!=b.getMonth()||a.getDate()!=b.getDate())b>a&&(c=n);return c}function eh(a,b){var c=s;if(a.getFullYear()===b.getFullYear()===s||a.getMonth()!=b.getMonth())b>a&&(c=n);return c}var Zg=0,$g=2;B("TRWebchart_Fin.DaysOfWeek",{Sunday:0,Monday:1,Tuesday:2,Wednsday:3,Thursday:4,Friday:5,Saturday:6});B("TRWebchart_Fin.EventTypes",{Undefined:0,Dividend:1,Earnings:2,Splits:3});function hh(a,b){T.call(this,a,b)}hh.prototype=new T(o,o);z=hh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){return this.Lg(a,n)};z.Fb=function(a){return this.Lg(a,s)};z.Lg=function(a,b){for(var c=this.b.R(a),d,f=d=0;7>f;f++)if(d=c.getDate(),b===n?c.setDate(d+1):c.setDate(d-1),d=c.getDay(),1==d)return c.setHours(8,0,0,0),c;k("Something is wrong.")};z.vb=function(a){return a<this.b.q.start?this.b.q.start.getDate()+"":a.getDate()+""};z.Lb=function(a){return this.Xj.ea(a)};
z.uc=function(a,b){return eh(a,b)};z.tc=function(a){a=this.b.R(a);a.setDate(1);a.setHours(0,0,0,0);return a};function lh(a,b){T.call(this,a,b)}lh.prototype=new T(o,o);z=lh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setDate(a.getDate()+1);return a};z.Fb=function(a){a=this.b.R(a);a.setDate(a.getDate()-1);return a};z.vb=function(a){return a.getDate()+""};z.Lb=function(a){return this.Xj.ea(a)};z.uc=function(a,b){return eh(a,b)};z.tc=function(a){return bh(this,a)};function qh(a,b){T.call(this,a,b);this.Za="left";this.Pf=s}qh.prototype=new T(o,o);qh.prototype.wb=function(){return Xg(this,this.b.q.start,0,n)};qh.prototype.Ra=function(a){return Xg(this,a,1,n)};qh.prototype.Fb=function(a){return Xg(this,a,1,s)};qh.prototype.vb=function(a){var b=this.b.q.start.getFullYear();return a.getFullYear()<b?b+"":a.getFullYear()+""};function rh(a,b){T.call(this,a,b)}rh.prototype=new T(o,o);z=rh.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()+30,0,0);return a};z.Fb=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()-30,0,0);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function sh(a,b){T.call(this,a,b)}sh.prototype=new T(o,o);z=sh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setHours(a.getHours()+2);return a};z.Fb=function(a){a=this.b.R(a);a.setHours(a.getHours()-2);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function th(a,b){T.call(this,a,b);this.Za="center";this.Pf=s}th.prototype=new T(o,o);th.prototype.wb=function(){return Xg(this,this.b.q.start,0,n)};th.prototype.Ra=function(a){return Xg(this,a,9,n)};th.prototype.Fb=function(a){return Xg(this,a,9,s)};th.prototype.vb=function(a){a=a.getFullYear();return a+"-"+(a+10)};function uh(a,b){T.call(this,a,b);this.Za="center";this.Pf=s}uh.prototype=new T(o,o);uh.prototype.wb=function(){return Xg(this,this.b.q.start,0,n)};uh.prototype.Ra=function(a){return Xg(this,a,0,n)};uh.prototype.Fb=function(a){return Xg(this,a,0,s)};uh.prototype.vb=function(a){return a.getFullYear()+""};function vh(a,b){T.call(this,a,b)}vh.prototype=new T(o,o);z=vh.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()+1,0,0);return a};z.Fb=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()-1,0,0);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function wh(a,b){T.call(this,a,b);this.Za="center";this.Pf=s}wh.prototype=new T(o,o);wh.prototype.wb=function(){return Xg(this,this.b.q.start,0,n)};wh.prototype.Ra=function(a){return Xg(this,a,4,n)};wh.prototype.Fb=function(a){return Xg(this,a,4,s)};wh.prototype.vb=function(a){a=a.getFullYear();return a+"-"+(a+4)};function xh(a,b){T.call(this,a,b);this.Za="center"}xh.prototype=new T(o,o);z=xh.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setMonth(a.getMonth()+1,1);return a};z.Fb=function(a){a=this.b.R(a);a.setMonth(a.getMonth()-1,1);return a};z.vb=function(a){return Yg(this,a.getMonth())};z.Lb=function(a){return a.getFullYear()+""};z.uc=function(a,b){return(a.getFullYear()===b.getFullYear()===s&&b>a?n:s)||0===a.getMonth()};z.tc=function(a){return ch(this,a)};function yh(a,b){T.call(this,a,b)}yh.prototype=new T(o,o);z=yh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setDate(a.getDate()+2);return a};z.Fb=function(a){a=this.b.R(a);a.setDate(a.getDate()-2);return a};z.vb=function(a){return a.getDate()+""};z.Lb=function(a){return this.Xj.ea(a)};z.uc=function(a,b){return eh(a,b)};z.tc=function(a){return bh(this,a)};function zh(a,b){T.call(this,a,b)}zh.prototype=new T(o,o);z=zh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setHours(a.getHours()+4);return a};z.Fb=function(a){a=this.b.R(a);a.setHours(a.getHours()-4);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function Ah(a,b){T.call(this,a,b)}Ah.prototype=new T(o,o);z=Ah.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()+5,0,0);return a};z.Fb=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()-5,0,0);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function Bh(a,b){T.call(this,a,b);this.Za="center"}Bh.prototype=new T(o,o);z=Bh.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){return this.Lg(a,n)};z.Fb=function(a){return this.Lg(a,s)};z.Lg=function(a,b){for(var c=this.b.R(a),d,f=d=0;4>f;f++)if(d=c.getMonth(),b===n?c.setMonth(d+1,1):c.setMonth(d-1,1),d=c.getMonth(),d===Ch||d===Dh||d===Eh||d===Fh)return c;k("Something is wrong.")};
z.vb=function(a){var b=a.getMonth(),c=Yg(this,b),a=this.b.R(a);a.setMonth(b+2);return c+"-"+Yg(this,a.getMonth())};z.Lb=function(a){return a.getFullYear()+""};z.uc=function(a,b){return(a.getFullYear()===b.getFullYear()===s&&b>a?n:s)||0===a.getMonth()};z.tc=function(a){return ch(this,a)};var Ch=0,Dh=3,Eh=6,Fh=9;function Gh(a,b){T.call(this,a,b)}Gh.prototype=new T(o,o);z=Gh.prototype;z.wb=function(){return this.b.R(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setHours(a.getHours()+1);return a};z.Fb=function(a){a=this.b.R(a);a.setHours(a.getHours()-1);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function Hh(a,b){T.call(this,a,b)}Hh.prototype=new T(o,o);z=Hh.prototype;z.wb=function(){return this.Ra(this.b.q.start)};z.Ra=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()+10,0,0);return a};z.Fb=function(a){a=this.b.R(a);a.setMinutes(a.getMinutes()-10,0,0);return a};z.vb=function(a){return ah(a)};z.Lb=function(a){return this.Pe.ea(a)};z.uc=function(a,b){return dh(a,b)};z.tc=function(a){return bh(this,a)};function Ih(a,b){this.ga=a;this.b=b;this.Kq=50;this.Ln=15;this.mo=this.dl=o}function Jh(a,b,c){return 2>b?new lh(a.ga,a.b):6>b?new yh(a.ga,a.b):12>b?new hh(a.ga,a.b):32>b?new xh(a.ga,a.b):92>b?new Bh(a.ga,a.b):360>b?new uh(a.ga,a.b):!c&&720>b?new qh(a.ga,a.b):1800>b?new wh(a.ga,a.b):new th(a.ga,a.b)}
function Kh(a,b){if(2>b)return new vh(a.ga,a.b);if(6>b)return new Ah(a.ga,a.b);if(12>b)return new Hh(a.ga,a.b);if(30>b)return new rh(a.ga,a.b);if(60>b)return new Gh(a.ga,a.b);if(120>b)return new sh(a.ga,a.b);if(240>b)return new zh(a.ga,a.b);if(500>b)return new lh(a.ga,a.b);var c=Math.round(b/60/24);return Jh(a,c,s)};function Lh(a,b){this.ga=a;this.b=b;this.df=5;this.zl=10;this.fi=5;this.Pd=10;this.Hf=0;this.Kc=this.Hk=2}function Mh(a,b,c){for(var d,f,e,g=0;g<c.length;g++)if(d=c[g].C,f=g+1<c.length?c[g+1].C:a.b.L,g<b.length){e=(f-d)/2;e=d+e;var h=Wc(a.ga,b[g].text);f-d<=h?b[g]=o:b[g].C=e}};function Nh(a,b,c){Lh.call(this,a,b);this.ga=a;this.Dq=c}Nh.prototype=new Lh(o,o);
Nh.prototype.lc=function(a,b,c,d){var f="left";a.length=0;b.length=0;c.length=0;d.length=0;var e=new Ih(this.ga,this.b),g;g=this.Dq;var h;h=Math.round(e.b.L/e.Kq);if(2>h)h=0;else{h>e.Ln&&(h=e.Ln);var i=Math.round(e.b.L/h);h=[h,i]}e.dl=h[0];i=h[1];2>e.dl?g=o:(h=o,e.b.ib===s?(h=Oh(e.b,i),h=Math.floor(Math.abs(h)/36E5/24),h=Jh(e,h,g)):(g=Oh(e.b,i),g=Math.floor(Math.abs(g)/6E4),h=Kh(e,g)),g=h.wb(),i=e.b.va(g),e.mo=e.b.va(h.Ra(g))-i,g=h);if(!g)return[f,"center"];f=g.Za;h=0.7*e.mo;for(var j,m,p,q,r,t=this.b.L,
y=0;y<e.dl+20;y++){if(0===y)i=g.wb(),p=this.b.va(i),b.push(new kg(p,0,p,this.df)),q=g.Fb(i),r=g.vb(q),m=Wc(this.ga,r),j="center"==f?p/2:this.Kc,p>this.fi+m&&a.push(new R(j,0-this.Hf,r)),g.Pf===n&&g.Lb&&(d.push(new kg(0,this.Pd,0,this.Pd+this.zl)),c.push(new R(this.Kc,this.Pd+this.Hk,g.Lb(this.b.q.start))));else{i=g.Ra(j);p=this.b.va(i);p-q<h&&p!=t&&(i=this.b.lk(p+h),p=this.b.va(i));m=j;g.Pf===n&&(g.Lb&&g.uc(m,i))&&(m=g.tc(i),r=this.b.va(m),d.push(new kg(r,this.Pd,r,this.Pd+this.zl)),c.push(new R(r+
this.Kc,this.Pd+this.Hk,g.Lb(m))));r=g.vb(j);j="center"==f?q+(p-q)/2:q+this.Kc;m=Wc(this.ga,r);if("center"==f&&j+m/2>t)break;else if("left"==f&&j+m>t)break;p<t&&b.push(new kg(p,0,p,this.df));m+this.fi<=p-q&&a.push(new R(j,0-this.Hf,r))}q=p;j=i}d&&Mh(this,c,d);0<d.length&&(d[0]=o);return[f,"center"]};function Ph(a){a=a||{};this.ib=s;a.ib&&(this.ib=a.ib);this.xf=!!a.xf;this.se=!!a.se;this.ha=a.ha===l?s:a.ha;this.Ie=a.Ie?a.Ie:0;this.L=a.Qp-this.Ie;this.Ye=100;this.mb=50;this.ra=[];this.wf={};this.q=this.scale=this.qd=this.Wf=o;this.oe=new Ae;this.F=new J;this.interval=a.interval;this.Wa=a.Wa===l?s:a.Wa;a.Km&&this.wa(a.Km)}z=Ph.prototype;
z.wa=function(a){var b="",c=a.length,d,f=[];if(this.Wa){for(var e=new Date,b=new Date,g=0;g<c;++g)d=a[g][0],f=a[g][a[g].length-1],e=d<e?d:e,b=f>b?f:b;c=e;a=[];a.push(c);for(c=this.R(c);c<b;)c.setDate(c.getDate()+1),a.push(this.R(c));for(e=0;e<a.length;e++)b=Qh(this,a[e]),this.ra[e]=a[e],this.wf[b]=e}else{for(var h=0;h<c;h++){d=a[h].length;for(e=0;e<d;e++){var i=a[h][e],b=Qh(this,i);f.push([b,i])}}f.sort(this.Pr);c=f.length;for(h=0;h<c;h++)this.wf[f[h][0]]=f[h][1];for(g in this.wf)a=this.ra.length,
this.ra[a]=this.wf[g],this.wf[g]=a}this.q=new dc(this.ra[0],this.ra[this.ra.length-1]);if(this.ha===n){this.oe=new Ae;for(a=0;a<this.ra.length;++a)c=this.ra[a].getDate(),b=this.ra[a].getMonth(),c=(10>b?"0":"")+b+"-"+(10>c?"0":"")+c,this.oe.setItem(c,a);this.Wf=this.oe.keys();this.Wf.sort();for(a=0;a<this.Wf.length;a++)this.oe.setItem(this.Wf[a],a);a=this.oe.keys().length}else a=this.ra.length;this.mb=50*a/300;50<this.mb&&(this.mb=50);1>this.mb&&(this.mb=1);this.qd=(a-(this.xf?1:0))*this.Ye+this.mb;
this.scale=this.L/this.qd;0>=this.scale&&(this.scale=1)};z.gf=function(a){this.L=a-this.Ie;this.scale=(this.L-2)/this.qd;0>=this.scale&&(this.scale=1)};function Rh(a,b){var c=a.scale*(b*a.Ye+a.mb),c=Math.max(0,Math.min(c,a.L));return c+=a.L/a.Wf.length/2}
function Sh(a,b){var c=s,d=a.wf[Qh(a,b)];d===l&&(c=n);var f=0,e=a.ra.length-1,g,h=s,i=0,j=0,m=0,p=s;if(c===n){for(;f<=e;)if(g=f+(e-f)/2,0<g%1&&(g=Math.ceil(g)),b<a.ra[g])e=g-1;else if(b>a.ra[g])f=g+1;else{h=n;i=g;break}h===s&&(i=g,j=i-1,m=i+1,d=a.ra[i],d>b&&0<=j?d-b>b-a.ra[j]&&(i=j):d<b&&m<a.ra.length&&b-d>a.ra[m]-b&&(i=m,p=n))}else i=d;j=i*a.Ye+a.mb;c===n&&h===s&&(0>=i?j=0:i>=a.ra.length-1?j=a.qd:(j=p===n?j-a.mb:j+a.mb,0>j?j=0:j>a.qd&&(j=a.qd)));c=a.scale*j;0>c?c=0:c>a.L&&(c=a.L);a.se&&(c+=a.L/a.ra.length/
2);return Math.min(c,a.L)}function Th(a,b){if(0>=b)return a.ra[0];if(b>=a.L)return a.ra[a.ra.length-1];var c=b/a.scale/a.Ye,c=Math.floor(c);0>c&&(c=0);c>a.ra.length-1&&(c=a.ra.length-1);return a.ra[c]}function Oh(a,b){var c=a.lk(b);return Math.round(Math.abs(c-a.ra[0]))}z.R=function(a){return new Date(a.valueOf())};function Qh(a,b){var c=1E4*b.getFullYear()+100*b.getMonth()+b.getDate();a.ib&&(c=1E6*c+1E4*b.getHours()+100*b.getMinutes()+b.getSeconds());return""+c}
z.Pr=function(a,b){return a[0]<b[0]?-1:b[0]<a[0]?1:0};z.Bf=x("ra");z.Df=function(){return this.ha?this.oe.keys().length:this.ra.length};z.e=function(a,b){return this.F.e(a,b)};function Uf(a){Ph.call(this,a)}Uf.prototype=new Ph(o);Uf.prototype.va=function(a){var b;this.ha?(b=a.getDate(),a=a.getMonth(),b=parseInt(this.oe.getItem((10>a?"0":"")+a+"-"+(10>b?"0":"")+b),10),b=Rh(this,b)):b=Sh(this,a);return b};Uf.prototype.lk=function(a){return Th(this,a)};function Uh(a){Ph.call(this,a);this.ef=new ac;this.F=new J}Uh.prototype=new Ph(o);Uh.prototype.va=function(a,b){if(b){var c=this.R(a);bc(c,b);return Sh(this,c)}return Sh(this,a)};Uh.prototype.lk=function(a,b){var c=Th(this,a);b&&(c=this.R(c),b&&(b.StandardOffset&&b.DaylightSavingStart)&&(c.setUTCMinutes(c.getUTCMinutes()-parseInt(b.StandardOffset,10)),b.HasDaylightSaving===n&&c>b.DaylightSavingStart&&c<b.DaylightSavingEnd&&c.setUTCMinutes(c.getUTCMinutes()-b.DaylightSavingDelta)));return c};function Vh(a,b,c,d,f){Lh.call(this,a,b);this.ga=a;this.ka=c;this.la=d;this.fontStyle=f}Vh.prototype=new Lh(o,o);
Vh.prototype.lc=function(a,b){a.length=0;var c=b.length=0,d=this.b.oe,f=this.b.Wf,e=o,g=D.oj,h,e=d.getItem(f[0]),i=f[0].indexOf("-"),j=i=parseInt(f[c].substring(0,i),10);h=g[i];e=this.Ih(e,h);b[b.length]=e.wd;a[a.length]=e.label;for(c=1;c<f.length;++c)e=d.getItem(f[c]),i=f[c].indexOf("-"),-1!=i&&(i=parseInt(f[c].substring(0,i),10),i!==j&&(h=g[i],e=this.Ih(e,h),b[b.length]=e.wd,a[a.length]=e.label,j=i));return["left","left"]};
Vh.prototype.Ih=function(a,b){var c=Rh(this.b,a);return{wd:new kg(c,0,c,this.df),label:new R(c+this.Kc,0-this.Hf,b)}};function Wh(a,b,c,d,f){Lh.call(this,a,b);this.ga=a;this.ka=c;this.la=d;this.Ub=new Nb(this.la);this.fontStyle=f}Wh.prototype=new Lh(o,o);
Wh.prototype.lc=function(a,b,c,d){a.length=0;b.length=0;c.length=0;for(var f=d.length=0,e=this.Yj(),g=this.b.Bf(),h=new Date(g[0].getFullYear(),g[0].getMonth(),g[0].getDate()),i=o,j=o,f=0;f<g.length;f++)if(0===f%e&&(j=this.Ih(g[f]),b[b.length]=j.wd,a[a.length]=j.label),this.b.ib===n)if(i=new Date(g[f].getFullYear(),g[f].getMonth(),g[f].getDate()),0===f||i>h){var j=g[f],m=this.b.va(j),h=new kg(m,this.Pd,m,this.Pd+this.zl),m=m+this.Kc,j=this.Ub.ea(j),j={wd:h,label:new R(m,this.Pd+this.Hk,j)};d[d.length]=
j.wd;c[c.length]=j.label;h=i}d&&Mh(this,c,d);0<d.length&&(d[0]=o);return["left","center"]};Wh.prototype.Yj=function(){var a="";this.b.ib===n?a="22:00":(a=new Date,a.setMonth(8),a=this.Ub.ea(a));var b=new N,a=0===this.ka?Wc(this.ga,a)+10:b.Jd(this.fontStyle),a=this.b.L/a,a=Math.round(a),b=this.b.Bf().length;if(a>=b)return 1;a=Math.round(b/a)+1;return 1>a?1:a};
Wh.prototype.Ih=function(a){var b=this.b.va(a),c=new kg(b,0,b,this.df),b=b+this.Kc,d;if(this.b.ib){var f=a.getHours();d=f+"";10>f&&(d="0"+d);a=a.getMinutes();f=a+"";10>a&&(f="0"+f);d=d+":"+f}else d=this.Ub.ea(a);return{wd:c,label:new R(b,0-this.Hf,d)}};function Xh(a){a=a||{};zg.call(this,a.qg,a.D,a.ka,s,s,o);this.s=a.s;this.la=a.la;this.ef=this.s===s?new ac:o;this.F=new J;this.ha=a.ha;this.Wd=s;this.interval=0;this.Wa=a.Wa}Xh.prototype=new zg(o,o,0,s,s,o);Xh.prototype.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.W.u+" "+this.a.W.o+" "+this.a.W.m};Xh.prototype.Qd=function(){var a=this.Xa(),a=Gg(this,a);return this.Jf&&0<this.Jf.length?a+9:a};
Xh.prototype.Af=function(){this.Ce="top";this.cc(this.r.clientWidth,this.Qd());this.Zc=new Tg(this.canvas,this.a,this.s,s);this.S()};
Xh.prototype.Vb=function(a){if(this.s||9!==this.d){var b=this.r.clientWidth;if(a===n){for(var c=[],d=s,a=0;a<this.v.length;a++)if(this.s||11!==this.v[a].d){var f=this.v[a];if(f.k.Columns.length){if(0===a){d=f.k;if(!d||!d.Columns.length||3>d.Columns[0].Values.length)d=s;else var d=d.Columns[0].Values,e=d[1]-d[0],e=Math.min(e,d[2]-d[1]),d=300>=Math.floor(Math.abs(e)/6E4);this.interval=f.interval}d&&f.k.TimeZone!==o?c.push(Yh(this,f)):c.push(Zh(this,f))}}b={Km:c,Qp:b,ib:d,Ie:this.a.aa.ge.pf,interval:this.interval};
d?(b.xf=this.xf,b.se=this.se!==l?this.se:n,b.ha=s,this.b=new Uh(b)):(b.xf=this.xf,b.se=this.se!==l?this.se:!this.s,b.ha=this.ha,b.Wa=this.Wa,this.b=new Uf(b));this.Wd=d}b=(this.s?this.ha===n?new Vh(Eg(this),this.b,this.ka,this.la,this.Xa()):new Wh(Eg(this),this.b,this.ka,this.la,this.Xa()):120>this.b.Bf().length?new Wh(Eg(this),this.b,this.ka,this.la,this.Xa()):new Nh(Eg(this),this.b,s)).lc(this.Ha,this.ta,this.Jf,this.ji);this.Za=b[0];this.ro=b[1]}};
function Zh(a,b){var c=b.k,d=c.Columns,f=[];if(!d||!d.length)return f;c=c.Columns[0].Values;a.D?(d=jc(a.D.start,a.D.end,c),-1!==d.vl&&-1!==d.Ag&&(f=c.slice(d.vl,d.Ag+1))):f=c.slice(0,c.length);0>=f.length&&(a.D&&!K(b))&&(f[f.length]=a.D.start,f[f.length]=a.D.end);return f}
function Yh(a,b){for(var c=b.k,d=c.Columns[0].Values,f=[],e=o,c=c.TimeZone,g=0;g<d.length;g++)a.D?(e=new Date(d[g].valueOf()),bc(e,c),e>=a.D.start&&e<=a.D.end&&(f[f.length]=e)):(e=new Date(d[g].valueOf()),bc(e,c),f[f.length]=e);0>=f.length&&a.D&&(e=new Date(a.D.start.valueOf()),f[f.length]=e,e=new Date(a.D.end.valueOf()),f[f.length]=e);return f};function $h(a){(!a||4>a.length)&&k("YAxis index list must not be null or less than 4 elements");this.rf=[];for(var b=0;b<a.length;b++)this.rf[this.rf.length]={index:a[b],qo:s};this.wc=[]}B("TRWebchart_Shared.SeriesToYAxisMapper",$h);
$h.prototype.Cj=function(a,b){var c;a:{for(var d=0;d<this.wc.length;d++)if(c=this.wc[d],c.bc===a){c=n;break a}c=s}if(c===n)return o;c=s;a:{if(b&&!(0>=b.length))for(var f=0;f<this.wc.length;f++)if(d=this.wc[f],d.dc&&0<d.dc.length&&d.dc===b){d=d.ag;break a}d=-1}if(0<=d)this.wc[this.wc.length]=new ai(a,d,b),c=n;else{a:{for(d=0;d<this.rf.length;d++)if(this.rf[d].qo===s){this.rf[d].qo=n;d=this.rf[d].index;break a}d=-1}if(0<=d)this.wc[this.wc.length]=new ai(a,d,b);else return o}return[d,c]};
$h.prototype.addMapping=$h.prototype.Cj;$h.prototype.Te=function(a){for(var b,c=0;c<this.wc.length;c++)if(b=this.wc[c],b.bc===a)return b.ag;return-1};$h.prototype.getYAxisIndexBySeriesIndex=$h.prototype.Te;function ai(a,b,c){this.bc=a;this.ag=b;this.dc=c};function bi(a,b,c){this.Ie=c?c:0;this.L=b-this.Ie;this.Ye=100;this.mb=50;this.oc=a;this.scale=this.qd=o;this.F=new J;a&&this.wa()}bi.prototype.wa=function(){this.mb=50*this.oc.length/300;50<this.mb&&(this.mb=50);1>this.mb&&(this.mb=1);this.qd=this.oc.length*this.Ye+this.mb;this.scale=this.L/this.qd;0>=this.scale&&(this.scale=1)};bi.prototype.Df=function(){return this.oc.length};bi.prototype.e=function(a,b){return this.F.e(a,b)};function ci(a,b,c){bi.call(this,a,b,c)}ci.prototype=new bi([],0,0);ci.prototype.gf=function(a){this.L=a;this.scale=this.L/this.qd;0>=this.scale&&(this.scale=1)};function Wf(a,b){for(var c=0,d=0;d<a.oc.length;d++)if(a.oc[d]==b){c=d;break}c=a.scale*(c*a.Ye+a.mb);return c=Math.max(0,Math.min(c,a.L))};function di(a,b,c,d){this.ga=a;this.b=b;this.Za="center";this.Ob=5;this.Iq=0;this.Kc=2;this.ka=c;this.fontStyle=d}di.prototype.lc=function(a,b){a.length=0;b.length=0;var c=this.Yj(),d=this.b.oc,f=o,e;for(e=0;e<d.length;e++)0===e%c&&(f=this.Ij(d[e]),b[b.length]=f.wd,a[a.length]=f.label);return[this.Za]};
di.prototype.Yj=function(){for(var a=this.b.oc,b=a[0],c=b.length,d=1;d<a.length;d++)a[d].length>c&&(b=a[d],c=a[d].length);a=new N;b=0===this.ka?Wc(this.ga,b)+10:a.Jd(this.fontStyle);b=this.b.L/b;b=Math.round(b);a=this.b.oc.length;if(b>=a)return 1;b=Math.round(a/b)+1;return 1>b?1:b};di.prototype.Ij=function(a){var b=Wf(this.b,a);return{wd:new kg(b,0,b,this.Ob),label:new R(b+this.Kc,0-this.Iq,a)}};function ei(a,b){zg.call(this,a,o,b,s,s,o);this.ka=b}ei.prototype=new zg(o,o,0,s,s,o);z=ei.prototype;z.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.W.u+" "+this.a.W.o+" "+this.a.W.m};z.Qd=function(){var a=this.Xa();return Gg(this,a)};z.Af=function(){this.Za="center";this.Ce="top";this.cc(this.r.clientWidth,this.Qd());this.Zc=new Tg(this.canvas,this.a,n,s);this.S()};
z.Vb=function(a){var b=this.r.clientWidth;a===n&&(this.b=new ci(this.kk(this.v[0].k,this.v[0].Q),b,this.a.aa.ge.pf));this.Za=this.dn().lc(this.Ha,this.ta)[0]};z.dn=function(){return new di(Eg(this),this.b,this.ka,this.Xa())};z.kk=function(a,b){for(var c=[],d=0;d<a.Columns.length;d++)if(a.Columns[d].Name==b){c=a.Columns[d].Values;break}return c};function fi(){}function gi(a){var b=0,c=0,d=0,f=hi;0!==a&&(b=Math.floor(a/360),360<=a&&(f|=ii),c=Math.floor(a%360/30),30<=a&&0!==a%360&&(f|=ji),d=a%30,0!==a%30&&0!==a%360&&(f|=ki));switch(f){case hi:a=d+"";break;case ki:a=d+"D";break;case ji:a=c+"M";break;case ii:a=b+"Y";break;case li:a=c+"M"+d+"D";break;case mi:a=b+"Y"+d+"D";break;case ni:a=b+"Y"+c+"M";break;case oi:a=b+"Y"+c+"M"+d+"D";break;default:a=d+"D"}return a}var hi=0,ki=1,ji=2,li=3,ii=4,mi=5,ni=6,oi=7;function pi(a,b){this.ga=a;this.b=b;this.Os=new fi;this.df=3;this.fi=2;this.Hf=1}pi.prototype.lc=function(a,b,c){b.length=0;c.length=0;(!a||1>a.length)&&k("Incoming dayCountList cannot be null or empty.");for(var d,f,e,g=0,h,i,j,m=a.length,p=0;p<m;p++)j=n,f=parseInt(a[p],10),d=hg(this.b,f),e=gi(f),f=d,h=Wc(this.ga,e)+this.fi,i=h/2,f-i<g&&("10Y"===e?b.pop():j=s),c[c.length]=new kg(d,0,d,this.df),j&&(b[b.length]=new R(f,this.df-this.Hf,e),g=f+h);return["center","left"]};function qi(){this.ec=[];this.wa()}qi.prototype.wa=function(){this.ec[this.ec.length]=new ri(0,6,{first:0,last:7});this.ec[this.ec.length]=new ri(6,3,{first:7,last:30});this.ec[this.ec.length]=new ri(9,11,{first:30,last:360});this.ec[this.ec.length]=new ri(20,80,{first:360,last:18E3})};
qi.prototype.Zg=function(a){a=parseFloat(a);isNaN(a)===n&&k("Incoming data is not a number.");var b=this.ec.length,c;if(a<parseInt(this.ec[0].Ne.first,10))return a;if(a==parseInt(this.ec[b-1].Ne.last,10))return 100;if(a>parseInt(this.ec[b-1].Ne.last,10))return c=this.ec[b-1],si(c,a);for(var d=0;d<b;d++)if(c=this.ec[d],a>=parseInt(c.Ne.first,10)&&a<parseInt(c.Ne.last,10))return si(c,a);return a};
function si(a,b){var c=parseInt(a.Ne.first,10);return parseInt(a.gr,10)+parseInt(a.Vr,10)*((b-c)/(parseInt(a.Ne.last,10)-c))}function ri(a,b,c){this.gr=a;this.Vr=b;this.Ne=c};function ti(a,b){this.Hj=20;this.q=a;this.Ei=o;this.L=b-2*this.Hj;this.scale=o;this.cl=new qi;this.wa()}ti.prototype.wa=function(){var a=this.cl.Zg(this.q.start),b=this.cl.Zg(this.q.end);this.Ei=new mg(a,b);this.tf()};ti.prototype.gf=function(a){this.L=a-2*this.Hj;this.tf()};function hg(a,b){isNaN(b)===n&&k("Incoming dayCount must be a valid number.");b<a.q.start&&(b=a.q.start);b>a.q.end&&(b=a.q.end);return(a.cl.Zg(b)-a.Ei.start)*a.scale+a.Hj}
ti.prototype.tf=function(){var a=this.Ei.end-this.Ei.start;this.scale=this.L/(0>=a?1:a)};function ui(a,b){zg.call(this,a,b,0,n,s,o);this.Nc=new fg}ui.prototype=new zg(o,o,0,n,s,o);z=ui.prototype;z.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.H.u+" "+this.a.H.o+" "+this.a.H.m};z.Qd=function(){var a=this.Xa();return Gg(this,a)};z.Af=function(){this.Ce="top";this.cc(this.r.clientWidth,this.Qd());this.Zc=new Tg(this.canvas,this.a,s,s);this.S()};
z.Vb=function(){9!=this.d&&k("This obj should not be used for other chart type other than yield curve.");(!this.v||0>=this.v.length)&&k("Error! The data series are not available for this yAxis.");for(var a=[],b,c={},d=0;d<this.v.length;d++)if(b=this.v[d],b.k.Columns.length){b=this.Nc.e("DaysToMaturity",b.k);for(var f=0;f<b.length;f++)isNaN(b[f])===s&&!c[b[f]]&&(a[a.length]=b[f],c[b[f]]=b[f])}a.sort(this.Tq);c=[0,0];d=Number.POSITIVE_INFINITY;b=Number.NEGATIVE_INFINITY;for(var f=s,e=0;e<a.length;e++)isNaN(a[e])===
s&&(d=Math.min(a[e],d),b=Math.max(a[e],b),f=n);f?(c[0]=d,c[1]=b):(c[0]=0,c[1]=0);c=new mg(c[0],c[1]);d=this.r.clientWidth;this.b||(this.b=new ti(c,d));this.Za=(new pi(Eg(this),this.b)).lc(a,this.Ha,this.ta)[0]};z.Tq=function(a,b){return a<b?-1:b<a?1:0};function vi(a,b){this.r=a;this.a=b;this.gd=o};function wi(a,b,c){vi.call(this,a,b);this.Wb=c;this.gd="";this.Lc={};this.Lm=new Ve;this.cb=new N;this.xc=new Pe}wi.prototype=new vi(o,o);wi.prototype.Lk=function(a,b,c,d){for(var b=parseFloat(b),a=We(a,b,d),d="0",f=0;f<a;f++)d+=0===f?".0":"0";a=(new pe(d)).ea(b);0>b&&(a="-"+a);return this.cb.pe(c,a)};wi.prototype.Ci=function(){var a,b;for(b in this.Lc)if(a=document.getElementById(b))a.innerHTML=this.Lc[b]};function xi(a,b,c){wi.call(this,a,b,c)}xi.prototype=new wi(o,o,[]);
xi.prototype.wa=function(){var a="";this.gd=this.r.id+"_LegendInnerWrapper";for(var a=1==this.a.p.Oa?a+('<div id="'+this.gd+'" style="position:relative;display:block;width:100%;height:16px;background:-webkit-gradient(linear, left top, left bottom, from('+this.a.p.Na.Hb+"), color-stop(0.2, "+this.a.p.Na.fc+"), to("+this.a.p.Na.gc+"));border:1px solid "+this.a.p.Na.G+';padding:3px;padding-bottom:1px;border-radius:3px;">'):a+('<div id="'+this.gd+'" style="padding-top:1px;height:98%;position:relative;display:block;width:100%;">'),
b=0,c,d,b=0;b<this.Wb.length;b++)c=this.Wb[b],a+='<span id="'+this.r.id+"_item"+b+'" style="margin-left:4px;float:left; white-space:nowrap; ">',a=c.Kr===n?a+('<span style="vertical-align:middle; display:inline-block;border-radius:5px;border: 5px '+c.color+" dotted;background-color:"+c.color+';">'):a+('<span style="vertical-align:middle; display:inline-block;height:9px;width:9px;font-size:1px;background-color:'+c.color+';">'),a+='</span> <span style="padding-left:2px;vertical-align:middle;font-family:'+
this.a.p.m+";color:"+this.a.p.Ca+";font-size:"+this.a.p.o+";font-weight:"+this.a.p.u+'; ">'+c.text+"</span>",this.a.p.ig===n&&c.bc!==o&&(d="price_"+this.r.id+"_"+c.bc,c=this.Lk(c.text,c.Jq,"font-family:"+this.a.p.m+";font-size:"+this.a.p.o+";",c.tb),a+='<span id="'+d+'" style="display:inline-block;padding-left:4px;vertical-align:middle;font-family:'+this.a.p.m+";color:"+this.a.p.Ca+";font-size:"+this.a.p.o+";font-weight:normal;width:"+c+'px; ">&nbsp;</span>'),a+="</span>";this.r.innerHTML=a+"</div>"};
xi.prototype.Dj=function(){if(1==this.a.p.Oa){for(var a,b=document.getElementById(this.r.id+"_item0").offsetWidth+6,c=n,d=document.getElementById(this.gd),f=this.r.scrollWidth-20,e=1;e<this.Wb.length;++e)if(a=document.getElementById(this.r.id+"_item"+e))b+=a.offsetWidth,b>f?(b=a.offsetWidth+6,c=s):b+=6;c?(d.style.width=b+"px",d.style.height="16px"):(d.style.width=f+"px",a=this.r.scrollHeight,this.r.style.height=a+"px",d.style.height=a-6+"px")}};function yi(a,b,c){this.a=b;this.ac=a;this.Cc=o;this.$i=this.Jk=this.Hh=this.Am=this.Lh=this.le=this.Nj=this.Yi=this.Kb="";this.Dn=16;this.Bl=30;this.borderColor="#B4B4B4";this.cj=[];this.If=4;this.wn=c;this.ac&&this.wa()}
yi.prototype.wa=function(){this.borderColor=this.a.aa.ge.G;this.Cc=this.Vh();this.Kb="holder_"+this.Cc;this.Nj="chartBody_"+this.Cc;this.Yi="xAxis_"+this.Cc;this.Hh="bottomSpaceFiller_"+this.Cc;this.Jk="leftSpaceFiller_"+this.Cc;this.le="legend_"+this.Cc;this.Lh="title_"+this.Cc;this.Am="titleText_"+this.Cc;this.$i="xAxisTitle_"+this.Cc;var a=this.ac.clientHeight,b=this.ac.clientWidth,c="",d="solid",f=this.a.aa.Ea,e=this.a.W,g=e.He;1==this.a.aa.ge.th&&(d="dotted");c='<div id="'+this.Kb+'"  style="background-color:'+
this.a.aa.lf+";-webkit-user-select:none;position:relative;visibility:hidden;padding:0px;margin:0px;font-size:1px;width:"+b+"px;height:"+a+'px;overflow:hidden;" >';c+='<div id="'+this.Lh+'" style="vertical-align:middle;overflow:hidden;position:absolute;border-bottom:1px solid '+f.G+";background-color:"+f.kg+';z-index:15;"></div>';c+='<div id="'+this.le+'" style="background-color:transparent;overflow:hidden;position:absolute;border:1px '+d+" "+this.borderColor+';border-bottom:0px;"></div>';c+='<div id="'+
this.Nj+'" style="overflow:hidden;position:absolute;border:1px '+d+" "+this.borderColor+';"></div>';c+='<div id="'+this.Jk+'" style="overflow:hidden;position:absolute;border-right:1px solid '+this.a.H.G+';"></div>';c+='<div id="'+this.$i+'" style="vertical-align:middle;text-align:center;overflow:hidden;position:absolute;font-weight:'+g.u+";font-size:"+g.o+";font-family:"+g.m+";color:"+g.Ua+";border-left:1px solid "+e.G+";border-right:1px solid"+e.G+';z-index:15;"></div>';b=a="";for(d=0;4>d;d++){this.cj[d]=
"yAxis"+d+"_"+this.Cc;b="border:0px;";if(2==d||0===d)b="border-top:1px solid transparent;border-left:1px solid "+this.a.H.G+";";else if(3==d||1==d)b="border-top:1px solid transparent;border-right:1px solid "+this.a.H.G+";";a+='<div id="'+this.cj[d]+'" style="overflow:hidden;position:absolute;'+b+'" ></div>'}c=c+a+('<div id="'+this.Hh+'" style="overflow:hidden;position:absolute;background:-webkit-gradient(linear, left top, left bottom, from('+this.a.p.Na.Hb+"), color-stop(0.1, "+this.a.W.Ba+"), to("+
this.a.W.Ba+"));border-top:1px solid "+this.a.W.G+';"></div>');c=this.wn?c+('<div id="'+this.Yi+'" style="overflow:hidden;position:absolute;background:transparent;z-index:99;"></div>'):c+('<div id="'+this.Yi+'" style="overflow:hidden;position:absolute;background:-webkit-gradient(linear, left top, left bottom, from('+this.a.p.Na.Hb+"), color-stop(0.1, "+this.a.W.Ba+"), to("+this.a.W.Ba+"));border-top:1px solid "+this.a.W.G+";border-left:1px solid "+this.a.W.G+";border-right:1px solid "+this.a.W.G+
';"></div>');this.ac.innerHTML=c+"</div>"};function Ai(a,b,c,d,f){var e=0;a.a.aa.Ea.Ac===n&&(e=a.Bl);c=parseInt(c,10);a.a.W.Cd===s&&(f=c=0);1!=a.a.p.Oa&&(e+=d);a=b-e-c-f;1>a&&(a=1);return a}
yi.prototype.dd=function(a,b,c,d,f,e){a=parseInt(a,10);b=parseInt(b,10);c=parseInt(c,10);e=parseInt(e,10);d=parseInt(d,10);this.a.W.Cd===s&&(e=d=0);c<this.Dn&&(c=this.Dn);var g=document.getElementById(this.Kb);g.style.width=a+"px";g.style.height=b+"px";g.style.visibility="visible";var g=this.a.H.Bc?parseInt(f[1],10)+parseInt(f[3],10):0,h=a-0,a=h-(g+(this.a.H.Bc?parseInt(f[0],10)+parseInt(f[2],10):0)),i=0,j=document.getElementById(this.Lh);this.a.aa.Ea.Ac===n?(j.style.left="0px",j.style.top=i+"px",
j.style.width=h+"px",j.style.height=this.Bl+"px",j.style.visibility="visible",j.innerHTML='<span id="'+this.Am+'" style="margin-left:8px;position:absolute;top:25%;color:'+this.a.aa.Ea.Ua+";font-size:"+this.a.aa.Ea.o+";font-family:"+this.a.aa.Ea.m+";font-weight:"+this.a.aa.Ea.u+';" >'+this.a.aa.Ea.Ib+"</span>",i+=this.Bl):j.style.visibility="hidden";var j=Bi(this),m=document.getElementById(this.le);2!==this.a.p.qc?1==this.a.p.Oa?(m.style.left=g+this.If+"px",m.style.top=i+this.If+"px",m.style.width=
a-2*this.If+"px",m.style.height=c+this.If+"px",m.style.visibility="visible",m.style.zIndex=90,m.style.border="0px"):(m.style.left=g+"px",m.style.top=i+"px",m.style.width=a+"px",m.style.height=c+"px",m.style.visibility="visible",i+=c,j.style.borderTop="1px dotted "+this.borderColor):m.style.visibility="hidden";c=i;b=b-0-i-d-e;j.style.left=g+"px";j.style.top=c+"px";j.style.width=a+"px";j.style.height=b+"px";j.style.visibility="visible";i=o;i=Ci(this,3);j=parseInt(f[3],10);0<j?(i.style.left="0px",i.style.top=
c+"px",i.style.width=j+"px",i.style.height=b+"px",i.style.visibility="visible"):i.style.visibility="hidden";this.a.H.Bc||(i.style.visibility="hidden");i=Ci(this,1);m=parseInt(f[1],10);0<m?(i.style.left=j+"px",i.style.top=c+"px",i.style.width=m+"px",i.style.height=b+"px",i.style.visibility="visible"):i.style.visibility="hidden";this.a.H.Bc||(i.style.visibility="hidden");i=Ci(this,0);j=g+a+1;m=parseInt(f[0],10);0<m?(i.style.left=j+"px",i.style.top=c+"px",i.style.width=m+"px",i.style.height=b+"px",i.style.visibility=
"visible"):i.style.visibility="hidden";this.a.H.Bc||(i.style.visibility="hidden");i=Ci(this,2);f=parseInt(f[2],10);0<f?(i.style.left=j+m+"px",i.style.top=c+"px",i.style.width=f+"px",i.style.height=b+"px",i.style.visibility="visible"):i.style.visibility="hidden";this.a.H.Bc||(i.style.visibility="hidden");f=Di(this);this.a.W.Cd===n?(f.style.left=g+"px",this.wn?(f.style.top=c+"px",f.style.height=b+"px",f.style.width=h+"px"):(f.style.top=c+b+1+"px",f.style.height=d+"px",f.style.width=a+"px"),f.style.visibility=
"visible"):f.style.visibility="hidden";f=document.getElementById(this.Hh);f.style.left="0px";f.style.top=c+b+1+"px";f.style.height=d+e+"px";f.style.width=h+"px";f.style.visibility="visible";h=document.getElementById(this.$i);0<e?(h.style.left=g+"px",h.style.top=c+b+d+"px",h.style.width=a+"px",h.style.height=e+"px",h.style.visibility="visible",h.innerHTML=this.a.W.He.Ib):h.style.visibility="hidden"};
yi.prototype.tg=function(a,b){var c=parseInt(a,10),d=parseInt(b,10),f=Bi(this);f.style.left=c+"px";f.style.width=d+"px";var e,g=0,h=s;e=Ci(this,1);g=c-parseInt(e.style.width.replace("px",""),10);isNaN(g)||(e.style.left=g+"px");h="visible"==e.style.visibility;e=Ci(this,3);g-=parseInt(e.style.width.replace("px",""),10);isNaN(g)||(e.style.left=g+"px");g=document.getElementById(this.Jk);"visible"!=e.style.visibility&&h===s&&5<c?(g.style.top=f.offsetTop+"px",g.style.left="1px",g.style.width=c+"px",g.style.height=
f.style.height,g.style.visibility="visible"):g.style.visibility="hidden";e=Ci(this,0);g=c+d;isNaN(g)||(e.style.left=g+"px");g+=parseInt(e.style.width.replace("px",""),10);e=Ci(this,2);isNaN(g)||(e.style.left=g+"px");f=document.getElementById(this.le);"visible"==f.style.visibility&&(1==this.a.p.Oa?(f.style.left=c+this.If+"px",f.style.width=d-2*this.If+"px"):(f.style.left=c+"px",f.style.width=d+"px"));e=Di(this);"visible"==e.style.visibility&&(e.style.left=c+"px",e.style.width=d-1+"px")};
function Di(a){return document.getElementById(a.Yi)}function Bi(a){return document.getElementById(a.Nj)}function Ci(a,b){(0>b||b>=a.cj.length)&&k("Index passing in is out of bound");return document.getElementById(a.cj[b])}function Ei(a){a=Bi(a);return[a.clientWidth,a.clientHeight]}yi.prototype.Vh=function(){return(new J).Vh()};function Fi(a,b,c){this.text=a;this.color=b;this.Kr=c;this.ei=s;this.Jq=Infinity};function Gi(a,b,c,d){bi.call(this,a,b,0);this.offsetTop=d;this.Rg=c}Gi.prototype=new bi([],0,0);Gi.prototype.mc=function(){return this.L-this.offsetTop};Gi.prototype.A=function(a){for(var b=0,c=0;c<this.oc.length;c++)if(this.oc[c]==a){b=c;break}this.scale=this.mc()/this.oc.length;return this.scale*(this.Rg?this.oc.length-b-1:b)+this.offsetTop+this.scale/2};function Hi(a){this.b=a;this.Kc=0}Hi.prototype.lc=function(a,b){a.length=0;b.length=0;for(var c=this.b.oc,d=o,f=0;f<c.length;f++)0===f%1&&(d=this.Ij(c[f]),b[b.length]=d.wd,a[a.length]=d.label)};Hi.prototype.Ij=function(a){var b=this.b.A(a);return{wd:new kg(0,b,0,b),label:new R(0,b,a)}};function Ii(a){zg.call(this,a,o,0,s,s,o);this.location=0;this.Ti=1;this.pa=0;this.Kl=5;this.di=s;this.hd=n}Ii.prototype=new zg(o,o,0,s,s,o);z=Ii.prototype;z.Xa=function(){this.a||k("The chart scheme of this axis obj is not properly set.");return this.a.H.u+" "+this.a.H.o+" "+this.a.H.m};z.Lj=function(a){this.pa=this.ok()+this.Ob+this.Kl;this.a.H.kb.Dd===n&&(a=this.$k(this.pa,a),this.pa=1==this.a.H.kb.Oa?this.pa+a:a>this.pa?a:this.pa)};
z.Vb=function(a,b){var c;(!this.v||0>=this.v.length)&&k("Error! The data series are not available for this yAxis.");this.b=new Gi(this.kk(this.v[0].k,this.v[0].Q),this.r.clientHeight-2*this.Ti,this.hd,b);(new Hi(this.b)).lc(this.Ha,this.ta);this.Lj(a);for(c=0;c<this.ta.length;c++)0==this.location?(this.ta[c].C=this.pa,this.ta[c].hf=this.ta[c].C-this.Ob):(this.ta[c].C=0,this.ta[c].hf=this.ta[c].C+this.Ob);for(c=0;c<this.Ha.length;c++)this.Ha[c].C=0==this.location?this.pa-this.Ob-this.cf:this.Ob+this.cf};
z.$k=function(a,b){if(!b||b&&0===b.length)return 0;this.ee=[];var c=Eg(this).measureText(b[0]).width,d=0;if(1==this.a.H.kb.Oa)d=Math.round(this.canvas.clientHeight/2),c=1===this.location?a-1:5,this.ee.push(new R(c,d,b[0])),d=this.fq;else{var f=this.cf,d=c+f+0;1===this.location?this.ee.push(new R(f+2,0,b[0])):this.ee.push(new R(d-c-2,0,b[0]))}this.vq=n;return d};z.dn=function(){return new Hi(this.b)};
z.kk=function(a,b){for(var c=[],d=0;d<a.Columns.length;d++)if(a.Columns[d].Name==b){c=a.Columns[d].Values;break}return c};z.Rh=function(){this.Za=1===this.location?"left":"right";this.cc(this.pa,this.r.clientHeight);this.Zc=new wg(this.canvas,this.a,this.hd,0,n);this.S()};z.ok=function(){for(var a=0,b=Eg(this),c=o,d=0;d<this.Ha.length;d++)c=b.measureText(this.Ha[d].text),a=Math.max(c.width,a);return a};function Ji(a,b){this.ac=a;this.D=this.l=o;this.ci=s;this.z=[];this.$a=this.J=o;this.a=b;this.ad=new Nf(this.$a,this.a);this.Ab=30;this.Y=o;this.ac&&(this.Y=new yi(this.ac,this.a,s));this.nc=this.Gk=s;this.pc=o;this.Zs=new fg;this.rh=o;this.pb=0;this.qb=1;this.F=new J}z=Ji.prototype;
z.dd=function(a,b){var c=a.Zi;this.l=a.l;this.D=a.D;this.fe=a.fe;this.pb=a.pb!==l?a.pb:this.pb;this.ka=a.te;this.la=a.la;this.qb=a.qb!==l?a.qb:this.qb;this.O=a.O;this.V=a.V===l?s:a.V;this.Ta=!!a.Ta;this.fd=a.fd===l?s:a.fd;this.Vc=a.Vc;this.ha=!a.ha?s:a.ha;this.el=a.el;this.we=a.we;this.s=a.s;this.kc=a.kc;this.jc=a.jc;this.Wa=!a.Wa?s:a.Wa;this.xe=a.xe;this.zb=a.zb;this.wa(l);var d=0,f=[0,1,2,3];if(this.ci)f=[1,0,3,2];else{var e=this.l,g=e.filter(function(a){return Ec(a)}).length,h=e.filter(function(a){return a&&
(a.c&&0<a.c.length)&&-1<a.c[0].indexOf("LevelLineScalar")?n:s}).length,d=this.rh?this.rh.length:0;if(g+h===e.length&&g===d){g=n;for(h=0;h<d;++h)if(this.rh[h].dc===l){g=s;break}if(g){f=[];d={"0":n,1:n,2:n,3:n};for(g=0;g<e.length;++g)h=parseInt(e[g].dc,10),d[h]!==l&&d[h]===n&&(f.push(h),d[h]=s);for(var i in d)d[i]===n&&(f.push(i),d[i]=s)}}}this.$a=new $h(f);this.Sj();this.hl();h=o;i=f=0;e=new Pf(this.rh,this.F);g=n;for(d=0;d<this.l.length;d++)if(g=this.l[d],f=g.dc,this.Gk===n&&(f="y"),h=this.$a.Cj(d,
f),h!==o&&1<h.length){f=h[0];h[1]===s&&i++;Dg(this.z[f],g);this.z[f].di=this.Ek(f);if(h=!e.En||!g?o:Qc(g.Sa,e.En))this.z[f].re=h.re,this.z[f].hd=h.hd;var j=K(g)||wc(g),h=s;g.c&&g.c[0]===Gf||j===n?(g=s,h=n):(g=n,h=s);this.z[f].V=g;this.z[f].yo=h;b||Dg(this.J,this.l[d])}else k("There are more series than the number of y-Axis allowed.");this.ad.$a=this.$a;f=o;for(e=0;e<this.z.length;e++){for(var f=this.ad,d=f.$a,g=e,h=l,j=[],m=0;m<d.wc.length;m++)h=d.wc[m],h.ag===g&&(j[j.length]=h.bc);d=j;f=!d||1>d.length?
f.a.H.Ca:f.a.H.Ch===s||1<d.length?f.a.H.Ca:f.Ng(d[0],0).stroke;this.z[e].yn=f}f=this.pk();e=f[0];e<this.Ab&&(e=this.Ab);f=f[1];f<this.Ab&&(f=this.Ab);i=e-33*i;20>i&&(i=20);this.J.cc(i,18);if(c&&c.b)this.J.b=c.b,this.J.Ha=c.Gq,this.J.Jf=c.Hq,this.J.ta=c.Qr,this.J.ji=c.Rr;else{if(b){Fg(this.J);for(d=0;d<b.length;d++)Dg(this.J,b[d])}this.J.Vb(n)}i=this.J.Qd();var g=0,p;if(2!==this.zb){p=a.w;Ki(p);if(2!==p.zb){var q=document.createDocumentFragment();q.appendChild(document.createElement("div"));d=parseInt(p.Pa.style.width.replace("px",
""),10);d-=8;1>d&&(d=10);q.firstChild.innerHTML='<div id="'+p.xe+'"  style="left:2px;top:2px;border:0px solid red;position:absolute;visibility:visible;padding:0px;margin:0px;font-size:1px;width:'+d+"px;min-height:"+p.a.p.Ah+'px;overflow-y:visible;z-index:111;text-align:left;" ></div>';p.Pa.appendChild(q.firstChild.firstChild);p.$b===o?p.$b=new Ff(p.xe,p.a,p.P,p):p.$b.kh(p.xe,p.a,p.P,p);p.$b.gh(p.je);p.$b.ih(p.kc);p.$b.hh(p.jc);p.$b.Nb()}p=p.$b;g=(q=document.getElementById(this.xe))?q.clientHeight:
20}i+=2;d=Ai(this.Y,f,i,0,0);if(1!==this.zb)d=this.Bi(d,g,0);else{for(var h=[],r=j=0,t=(m=this.J.b)?m.q:o,y=m.ib,u,j=0;j<this.z.length;j++)r=this.z[j],r.v&&0<r.v.length?(r.D=t,r.ib=y,r.Ic=g,r.f=m,r.location=this.Og(j),r.cc(35,d),u=Li(this,r),r.Vb(u,0),r=r.pa,h[j]=r):h[j]=0;d=h}this.Y.dd(e,f,0,i,d,0);if(1===this.zb&&p){p.Dj();p=g=q.clientHeight;for(q=0;q<this.z.length;q++)i=this.z[q],i.v&&0<i.v.length&&(i.Ic=p,e=Li(this,i),i.Vb(e,0),i.Rh())}c||(this.J.b.gf(Bi(this.Y).clientWidth),this.J.Vb(s),this.J.Af())};
z.Uf=v("rh");z.pk=function(){var a=[this.ac.clientWidth,this.ac.clientHeight],b=a[0];b<this.Ab&&(b=this.Ab);a=a[1];a<this.Ab&&(a=this.Ab);return[b,a]};z.Sj=function(){Fg(this.J);for(var a=0;a<this.z.length;a++)Fg(this.z[a])};z.Og=function(a){return 0===a||2===a?1:0};z.Ek=function(a){return 0===a||1===a};z.$h=function(a){var b=this.$a.Te(a);0>b&&k("Failed getting y-axis index via this series index: '"+a+"'.");return this.z[b]};
function Li(a,b){if(!b||b.v&&0===b.v.length)return[];var c=s,d=s,f=s,e,g,h=[];b.Vd=s;for(var i=0;i<b.v.length;i++)if(e=b.v[i],g=e.k,9==e.d){e=Bf;(e=uc(e,"ValueType",g))&&e.toUpperCase()===Qb.toUpperCase()?h.push(Wb(Qb)):e&&e.toUpperCase()===Ob.toUpperCase()?(h.push(Wb(Ob)),(e=vc("Currency",g))&&h.push(e),(e=vc("Unit",g))&&h.push(e)):h.push(Wb(Qb));break}else{if(d=K(e)){g=g.MessageId.split("|")[2];d=a.kc.keys();for(i=0;i<d.length;++i){for(var j=a.kc.getItem(d[i]),f=s,c=0;c<j.length;++c)if(j[c].be===
g){h.push(d[i]);f=n;e.jd&&e.jd===n&&(h[h.length-1]+=" (%)");break}if(f)break}b.Vd=n;break}if(j=wc(e)){a.jc.keys();for(var f=a.jc.getItem(g.MessageId.split("|")[3]),m=g.MessageId.split("|")[1],c=0;c<f.length;++c)if(f[c].EconomicRic===m){h.push(f[c].Label);e.jd&&e.jd===n&&(h[h.length-1]+=" (%)");break}b.Vd=n}if(f=yc(e)){c=Fc(g.MessageId);if(c===fc.TwoWayRatio||c===fc.ThreeWayRatio)(e=e.Sa)&&h.push(e);if(c===fc.SimpleRatio)h.push(Wb("Value "));else if(c===fc.Spread||c===fc.CrackSpread)h.push(Wb("Value ")),
(e=vc("Currency",g))&&h.push(e),(e=vc("Unit",g))&&h.push(e);else if(c===fc.ButterflySpread||c===fc.CrackSpread||c===fc.Spread||c===fc.CrushSpread)(e=vc("Currency",g))&&h.push(e),(e=vc("Unit",g))&&h.push(e);break}if(c=xc(e))break;if(!c&&!f&&!d&&!j){e.jd&&e.jd===n?h.push(Wb(Rb)):(e=Af,e=uc(e,"ValueType",g),!e||e.toUpperCase()===Ob.toUpperCase()?(h.push(Wb(Ob)),(e=vc("Currency",g))&&h.push(e),(e=vc("Unit",g))&&h.push(e)):e.toUpperCase()===Qb.toUpperCase()&&h.push(Wb(Qb)));break}}return h}
z.Bi=function(a,b,c){for(var d=[],f=0,e=0,g=this.J.b,h=g?g.q:o,i=g.ib,j,f=0;f<this.z.length;f++)j=this.z[f],j.v&&0<j.v.length?(j.D=h,j.ib=i,j.Ic=b,j.f=g,j.location=this.Og(f),j.cc(35,a),j.Vb(Li(this,j),c),e=j.pa,d[f]=e,j.Rh()):d[f]=0;return d};
z.sk=function(a){this.$a||k("layout.doLayout method must be called first!");var b=this.$a.Te(a);0>b&&k("Failed getting y-axis index via this series index: '"+a+"'.");this.z[b]||k("Failed getting y-axis object via this index: '"+b+"'.");this.z[b].b||k("This y-axis ["+b+"] does not have a valid coordService.  You must call method on it to generate labels first.");return this.z[b].b};z.rk=function(){for(var a,b=0,c=this.z.length;b<c&&!(a=Bg(this.z[b]),0<a.length);++b);return[Ag(this.J),a]};z.Kg=function(){return Bi(this.Y)};
z.wa=function(){20===this.l[0].d?this.nc=n:(this.nc=s,this.Gl());var a;9===this.l[0].d?(this.Gk=n,this.J=new ui(Di(this.Y),this.D)):2===this.pb?this.J=new ei(Di(this.Y),this.ka):1===this.pb?(a={qg:Di(this.Y),D:this.D,s:this.s,ka:this.ka,V:this.V,Ta:this.Ta},this.J=new Wg(a)):(a={qg:Di(this.Y),D:this.D,s:this.s,ka:this.ka,la:this.la,ha:this.ha,Wa:this.Wa},this.J=new Xh(a));for(a=0;4>a;a++){var b=Ci(this.Y,a);this.z[a]=2===this.qb?new Ii(b):new Cg(b,this.D,this.s,this.V,this.Ta,o)}};
z.hl=function(){this.J&&this.J.td(this.a);if(this.z&&0<this.z.length)for(var a=0;a<this.z.length;a++)this.z[a].td(this.a)};z.tg=function(a,b){this.Y.tg(a,b);this.J.b.gf(b)};z.Zh=function(){return Di(this.Y).clientHeight};z.Gl=function(){0==this.qb&&k("Y Axis cannot use date time type. ")};function Mi(a){this.w=a;this.a=this.w.a;this.I=this.w.I;this.Zi=this.Od=this.D=this.l=o}z=Mi.prototype;z.Tf=v("D");z.lh=v("l");function Ni(a,b,c){var d=a.w,f=Oi(d);f.Zi=b;f.xe=d.xe;f.w=d;a.I.dd(f,c);b||(b=a.I.J,a.Zi={b:b.b,Gq:b.Ha,Hq:b.Jf,Qr:b.ta,Rr:b.ji})}z.Zh=function(){return this.I.Zh()};z.tg=function(a,b){this.I.tg(a,b)};z.Li=function(a){this.I.b=a};
function Pi(a,b){Df(a.w);a.w.oh();b===o?(a.w.fb.S(),a.Od=a.w.fb.Od):(a.w.fb.Od=b,a.w.fb.S());for(var c=a.w.ia,d=Array(c.length),f=Array(c.length),e=0,g=c.length;e<g;e++)a.w.ia[e].S(a.D),a.a.qm.Pl&&(d[e]=c[e].data,f[e]=c[e].j);if(2!==a.w.zb){c=a.w.$b.Sb;c.Lc={};for(var d=c.w.ia,f=c.w.l,h=0,i="",j,m,p,g=0;g<d.length;g++){j=d[g].Aa?d[g].Aa.hi:o;h=d[g].Sf;m=f[h];var e="price_"+c.od+"_"+h,q=K(m),r=wc(m),t=9===m.d;if(m.k.Status)(j=$b(m.k.Status.ErrorCode))||(j=m.k.Status.Description),c.Lc[e]='<img src="'+
Ce()+'/error.png" title="'+j+'" />';else if(j)if(isNaN(j.jf))c.Lc[e]="N/A";else{var i=f[h].Sa,y=f[h].Qb;j=j.jf;p=$e(c,h);var h=n,u=xc(m);if(m&&(u||q||r))h=s;m=We(!y?i:y,j,p.tb);h?(t&&m<c.cg&&(m=c.cg),m=new pe(Pc(o,h,m)),0===j&&(j=0),j=m.ea(j)):j=0===j?j.toFixed(m):Qe(c.xc,j,m,h);c.Lc[e]=j+""}}a.w.$b.Sb.Ci()}a.w.Pg()}
function Qi(a,b,c,d){a.a.W.Cd=c;if(0<b){b-=1;0>b&&(b=0);b>a.a.sb.nf.length-1&&(b=a.a.sb.nf.length-1);b=a.a.sb.nf[b];for(c=0;c<b.length;c++)a.a.sb.rb[c]=b[c];a.a.aa.Ea.Ac=s}else 0===b&&(d&&0<d.length?(a.a.aa.Ea.Ac=n,a.a.aa.Ea.Ib=d):(a.a.aa.Ea.Ac=s,a.a.aa.Ea.Ib=""))};function Ri(a){Ef.call(this,a,n);this.Ka=o;this.lb&&(this.Ka=document.getElementById(this.lb));this.l=[];this.h=[];this.Th="";this.fb=this.a=this.I=this.Pa=this.ve=this.ia=o;this.Ns=s;this.Ae=aa();this.zb=0;this.O=[];this.nb=new Ae;this.jo=this.ko=this.ul=n;this.Vf=s;this.Qj="";this.F=new J;this.Up=[20,23,17,18,16,22]}za(Ri,Ef);Ri.prototype.Be=function(a,b){b?(this.Vf=n,this.Qj=a,this.a.aa.Ea.Ac=n,this.a.aa.Ea.Ib=a):(this.Vf=s,this.Qj="",this.a.aa.Ea.Ac=s,this.a.aa.Ea.Ib="")};
B("TRWebchart_Shared.TRWebChartBase.prototype.setChartTitle",Ri.prototype.Be);z=Ri.prototype;z.ae=function(a){this.zb=a;this.a&&(this.a.p.qc=this.zb)};z.rl=function(a){this.ko=a;this.a&&(this.a.H.Bc=a)};z.ql=function(a){this.jo=a;this.a&&(this.a.W.Cd=a)};z.Ki=function(a){this.ul=a;this.a&&(this.a.H.kb.Dd=this.ul)};function Si(){var a=(new J).Ec();return!(!a.getContext||!a.getContext("2d"))}
function Ti(a){return!a.Ka?(a.Th="The div id '"+a.lb+"' passed in is not valid.",s):!a.l||1>a.l.length?(a.Th="You must provide a list of SeriesParam objects via 'setSeriesParams' method.",s):n}z.Nb=function(){k("The 'render' can only be called on an instance of a subclass of this 'TRWebChartBase' type")};function Df(a){if(a.ia&&0<a.ia.length)for(var b=0;b<a.ia.length;b++)a.Pa.removeChild(a.ia[b].canvas),a.ia[b].Tc&&a.Pa.removeChild(a.ia[b].Tc);a.fb&&a.Pa.removeChild(a.fb.canvas)}
function Ui(a){var b=0,c,d=0;a.O.length=0;a.nb.clear();for(var f=new Ae,d=0;d<a.l.length;d++)c=a.l[d],c.ic!==l&&c.ic!==o&&(f.xb.hasOwnProperty(c.ic)||f.setItem(c.ic,d));for(d=0;d<a.l.length;d++)if(c=a.l[d],5==c.d||9==c.d||11==c.d)for(var e=0;e<c.k.Columns.length;e++){if(c.k.Columns[e].Name==c.Q){if(c.ic!==l&&c.ic!==o){var g=parseInt(f.getItem(c.ic),10);if(d===g)a.nb.setItem(d,b),c=c.k.Columns[e].Values.length,b+=c;else for(var h=0;h<c.k.Columns[e].Values.length;h++)if(g+h>=f.length)a.nb.setItem(g+
h,b),b++;else{var i=parseInt(a.nb.getItem(g+h),10);a.nb.setItem(d+h,i)}}else a.nb.setItem(d,b),c=c.k.Columns[e].Values.length,b+=c;break}}else if(2==c.d||3==c.d||1==c.d||8==c.d)if(c.ic!==l&&c.ic!==o)if(g=parseInt(f.getItem(c.ic),10),d===g)a.nb.setItem(d,b),c=c.c.length,b+=c;else for(h=0;h<c.c.length;h++)g+h>=f.length?(a.nb.setItem(g+h,b),b++):(i=parseInt(a.nb.getItem(g+h),10),a.nb.setItem(d+h,i));else a.nb.setItem(d,b),c=c.c.length,b+=c;else c.ic!==l&&c.ic!==o?(g=parseInt(f.getItem(c.ic),10),d===
g?(a.nb.setItem(d,b),b++):(i=parseInt(a.nb.getItem(g),10),a.nb.setItem(d,i))):(a.nb.setItem(d,b),b++);d=a.a.sb.rb;for(f=0;f<b;f++)a.O.push(d[f%a.Jn])};function Vi(a,b,c){(this.de=a)||k("Incoming uiElement cannot be null");this.Se=b;a=this.Gc=c;a.ab=this.de;Jg(a);this.Mb=o;this.Mk=this.ri=this.Xe=s;this.ye=[];this.bh=s}z=Vi.prototype;z.vk=function(a){if(this.bh===s&&0<this.ye.length)for(var b=0;b<this.ye.length;b++)if(this.ye[b]&&"function"==typeof this.ye[b])this.ye[b](a)};z.handleEvent=function(a,b){a||(a=window.event);b===n?this.Gc.ze():(Jg(this.Gc),this.Xe?(this.Xe=s,this.jh(a)):this.Mk&&(this.jh(a),this.Nd()))};
z.Nd=function(){var a=s;this.Se&&"function"==typeof this.Se&&(a=this.Se());if(a&&(this.Gc.Nd(this.Mb,n),a=this.Gc.Jg(),this.bh===s&&0<this.ye.length)){var b=new Date;this.vk(new Wi(this.Mb.x,this.Mb.y,a));this.hr=b}};z.Rd=function(){if(this.de){for(var a=this.de,b=0,c=0;"BODY"!=a.tagName;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{top:b,left:c}}};
z.jh=function(a){this.Mb===o&&(this.Mb={});this.Mb.x=a.yi-this.Rd().left+(window.pageXOffset||0);this.Mb.y=a.zi-this.Rd().top+(window.pageYOffset||0)};function Wi(a,b,c){this.x=a;this.y=b;this.addition=c}B("TRWebchart_Shared.EventObject",Wi);function Xi(a,b,c){(this.de=a)||k("Incoming uiElement cannot be null");this.Se=b;a=this.Gc=c;a.ab=this.de;Jg(a);this.Mb=o;this.Mk=this.ri=this.Xe=s;this.ne=[];this.bh=s}z=Xi.prototype;z.vk=function(a){if(this.bh===s&&0<this.ne.length)for(var b=0;b<this.ne.length;b++)if(this.ne[b]&&"function"==typeof this.ne[b])this.ne[b](a)};function Yi(a,b,c,d){if(a.bh===s&&0<a.ne.length){var f=new Date;a.vk(new Wi(b,c,d));a.hr=f}}
z.handleEvent=function(a,b){a||(a=window.event);b===n?(this.Gc.ze(),Yi(this,-1,-1,o)):(Jg(this.Gc),this.Xe?(this.Xe=s,this.jh(a)):this.ri&&(this.jh(a),this.Nd()))};z.Nd=function(){var a=s;this.Se&&"function"==typeof this.Se&&(a=this.Se());a&&(this.Gc.Nd(this.Mb,s),Yi(this,this.Mb.x,this.Mb.y,this.Gc.Jg()))};z.Rd=function(){if(this.de){for(var a=this.de,b=0,c=0;a&&"BODY"!=a.tagName;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{top:b,left:c}}};
z.jh=function(a){this.Mb===o&&(this.Mb={});this.Mb.x=a.yi-this.Rd().left+(window.pageXOffset||0);this.Mb.y=a.zi-this.Rd().top+(window.pageYOffset||0)};function Zi(a,b,c){this.vd=a;this.Hm=new Xi(this.vd,b,c)}Zi.prototype.kr=function(a){var b=this.Hm;b.ne[b.ne.length]=a};Zi.prototype.Qh=function(){if(this.vd){var a=this.Hm;be(this.vd,Sd,function(b){a.Xe=n;a.handleEvent(b)},s);be(this.vd,Td,function(b){a.ri=n;a.handleEvent(b)},s);be(this.vd,"mouseout",function(b){a.ri=s;a.handleEvent(b,n)},s)}};function Ng(a,b,c,d){this.C=a;this.xa=b;this.Oe=c;this.value=d;this.Pk=s}function $i(a,b,c,d,f){this.bs=a;this.as=b;this.xa=c;this.Oe=d;this.value=f;this.Pk=s};function aj(a){this.context=a;this.vt=new fi;this.ef=new ac;this.Js=new cc;this.hi=o}function bj(a,b,c,d,f,e){var g;if("function"===typeof cj&&a.context instanceof cj)g=gi(d);else{g=a.context.f.ib;var h=a.context.data.TimeZone,d=new Date(+d);g&&h&&bc(d,h);g=Vb.get("en").zd+(g?" hh:mm:ss":"");g=(new Nb(g)).ea(d)}a.hi={x:b,y:c,Zr:g,jf:f,color:e}};function Xf(a,b){this.g=a;this.i=b};function rc(a,b,c){var d=c.i-a.i,f=c.g-a.g,a=3*(b.g-a.g)/8,e=3*(c.g-b.g)/8,c=b.g+e,e=0===f?b.i:b.i+e*d/f,g=[];g[0]=new Xf(b.g-a,0===f?b.i:b.i-a*d/f);g[1]=new Xf(c,e);return g}function tc(a,b){return new Xf(a.g+(b.g-a.g)/2,a.i+(b.i-a.i)/2)}
function sc(a,b,c,d){var f;f=Math.abs(d.g-a.g);var e=Math.abs(d.i-a.i);0!==f||0!==e?(f=Math.sqrt(f*f+e*e),0<f||(f=1),f=Math.max(1/f,0.001953125)):f=1;var g=parseInt(""+(1/f+2),10),e=[];e[0]=a;for(var g=g-1,h=1;h<g;h++){var i=f*h,j=1-i,m=j*j,p=i*i,q=m*j,m=3*i*m,j=3*p*j,i=p*i;e[e.length]=new Xf(q*a.g+m*b.g+j*c.g+i*d.g,q*a.i+m*b.i+j*c.i+i*d.i)}e[e.length]=d;return e};function U(a){a=a||{};this.Tc=this.canvas=o;this.Ka=a.Ka;this.f=this.j=o;this.data=a.data;this.d=a.d;this.O=[new C("#df4b26","#df4b26","#ffffff")];this.La=a.La||1;this.Q=a.Q;this.c=a.c;this.s=a.s;this.a=a.a;this.Z=a.Z;this.interval=a.interval;this.Ia=a.Ia;this.ef=!this.s?new ac:o;this.Aa=!this.s?new aj(this):o;this.Sf=0;this.Kd=a.Kd||"center";this.$=[];this.xd=[];this.Vq=new Pe;this.F=new J;this.Mh=new If;this.opacity=0.7;this.yd=a.yd;this.$f=a.$f;this.yd&&(this.On=this.a.sb.Xl,this.Un=this.a.sb.bm)}
function dj(a){var b=a.e(a.Q,a.data);if(isNaN(a.Z)||0>a.Z||a.Z>b.length-1)a.Z=-1}z=U.prototype;z.Li=v("f");z.ll=v("La");z.nk=x("La");z.Ec=function(){var a=this.F.Ec(),b=parseInt(this.Ka.style.width.replace("px",""),10),c=parseInt(this.Ka.style.height.replace("px",""),10);pc(a,b,c);a.style.position="absolute";a.style.top="0px";a.style.left="0px";this.canvas=this.Ka.appendChild(a)};function Qg(a){return a.O[0]}z.Ng=function(a){return this.O[a%this.O.length]};z.S=function(){k("This method cannot be called.  It must be overriden by sub-classes.")};
z.e=function(a,b){return this.F.e(a,b)};z.ub=function(){var a=this.e(this.Q,this.data),b=[-1,-1],c=this.f.q,d=o;if(!a||!a.length)return b;if(!(a[0]instanceof Date))return[0,a.length-1];var f=-1,e,g=this.data.TimeZone;if(this.f.ib===n&&g!==o){for(e=0;e<a.length;e++)if(d=this.f.R(a[e]),bc(d,g),d>=c.start){f=e;break}var h=-1;for(e=a.length-1;0<=e;e--)if(d=this.f.R(a[e]),bc(d,g),d<=c.end){h=e;break}b[0]=f;b[1]=h}else a=jc(c.start,c.end,a),b[0]=a.vl,b[1]=a.Ag;return b[0]>b[1]?[-1,-1]:b};
function ej(a,b,c){if(a.$f){for(var d=a=b;0<d;d--)if(d!=b&&isNaN(c[d])===s){a=d;break}return a}return b}z.Xh=function(a,b,c,d){return this.F.Xh(a,b,c,d)};function fj(a){var b=a.f.Df(),b=a.f.L/b*(a.s?0.6:0.5);return b/=17===a.d?a.c.length:1}function gj(a){var b=a.F.Ec(),c=parseInt(a.Ka.style.width.replace("px",""),10),d=parseInt(a.Ka.style.height.replace("px",""),10);pc(b,c,d);b.style.position="absolute";b.style.top="0px";b.style.left="0px";a.Tc=a.Ka.appendChild(b)}
function hj(a,b){var c=a.a.qf,d;switch(b){case 1:d=""+c.Rl+" "+c.m+" "+c.u;c=c.Ql;break;case 2:d=""+c.rj+" "+c.m+" "+c.u;c=c.em;break;default:d=""+c.$l+" "+c.m+" "+c.u,c=c.Zl}return[c,d]}function ij(a,b){var c=a.F.e(b+"_tooltip",a.data),d=a.F.e(b,a.data);c&&(d&&d.length!==c.length)&&k("Tooltip must be provided for every data point");return c}function jj(a,b,c,d,f){this.cs=a;this.gs=b;this.$r=c;this.fs=d;this.Ia=f};function kj(a){U.call(this,a)}kj.prototype=new U(o);
kj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b,c,d=this.j.mc(),f=this.e(this.Q,this.data),e=this.e(this.c[0],this.data),g=this.ub();if(!(-1===g[0]||-1===g[1])){var h=fj(this),i,j,m,p;a.beginPath();var q=
Qg(this).stroke;a.fillStyle=q;for(var r=g[0];r<=g[1];r++)j=f[r],i=e[r],b=this.f.va(j,this.data.TimeZone),isNaN(i)===s&&j?(m=r,p=c=this.j.A(i)):c=Number.NaN,this.$[this.$.length]=new Ng(b,c,j,i),a.rect(b-h/2,c,h,d-c);a.fill();a.closePath();isNaN(m)===s&&bj(this.Aa,b,p,f[m],e[m],q)}};function lj(a,b){this.fill=a||"#000000";this.kd=s;this.at=b}lj.prototype.contains=function(){k("This method can only be called from sub classes of 'Shape'")};function mj(a,b,c,d,f){lj.call(this,f,o);this.x=a||0;this.y=b||0;this.width=c;this.height=1>d?1:d}mj.prototype=new lj(o,o);mj.prototype.contains=function(a,b){return this.x<=a&&this.x+this.width>=a&&this.y<=b&&this.y+this.height>=b};function nj(a){a=a||{};U.call(this,a);this.labels=[];this.Rb=a.Rb;this.mi=a.mi;this.O=o;this.na=[];this.Cb=a.Cb;this.tl=a.tl;this.Mi=a.Mi;this.cb=new N}nj.prototype=new U(o);z=nj.prototype;z.$e=function(a){this.O&&(this.O.length=0);this.O=a};
z.Fc=function(a,b,c,d){var f=this.a.qf;a.beginPath();switch(c){case 0:c=b.fill.stroke;d===n&&(c=Mf(c,this.opacity));a.fillStyle=c;a.fillRect(b.x,b.y,b.width,b.height);break;case 1:a.strokeStyle=f.wh;a.lineWidth=f.Fe;a.strokeRect(b.x,b.y,b.width,b.height);break;case 2:a.strokeStyle=f.xh,a.lineWidth=f.pj,a.strokeRect(b.x,b.y,b.width,b.height)}a.closePath()};
z.xg=function(a,b,c,d){var d=hj(this,d),f=d[0],e=b.x,g=b.y;a.font=d[1];a.fillStyle=f;16===this.d?(e=b.x+b.width+2,g=b.y,a.textBaseline="top",a.textAlign="left",a.fillText(c,e,g)):(e=b.x,g=b.y,a.textBaseline="bottom",a.textAlign="left",a.fillText(c,e,g-2))};
z.vg=function(a,b,c){a.clearRect(0,0,this.Tc.width,this.Tc.height);for(var d=this.labels[0]instanceof Array?this.labels:[this.labels],f=this.na[0]instanceof Array?this.na:[this.na],e=0;e<d.length;++e)for(var g=d[e],h=f[e],i=a,j=b,m=c,p=0,q=g.length;p<q;++p)this.xg(i,h[p],g[p],h[p]===j?m:h[p].kd?2:0)};
function oj(a){gj(a);var b=a.Tc.getContext("2d"),c;if(a.tl){var d=a.Jj();c=new pe("0.00%");for(var f=0,e=d.length;f<e;++f){var g=c.ea(d[f]);a.labels.push(g)}}else{a.Ia?(c=Pc(a.Ia,n,0),d=a.Ia.ob?a.Ia.ob:""):(c=o,d="");c=c?new pe(c):o;for(f=0;f<a.c.length;f++){for(var e=[],h=a.e(a.c[f],a.data),i=0;i<h.length;i++)g=c?c.ea(h[i]):h[i],g+=d&&0<d.length?d:"",e.push(g);a.labels.push(e)}}a.vg(b,o,0)}
function pj(a,b,c,d){var f=a.a.he,e=a.f.L,a=a.j.L;b.lineWidth=f.hc;b.strokeStyle=f.rb[0].stroke;b.beginPath();d===n?(b.moveTo(0,c),b.lineTo(e,c)):(b.moveTo(c,0),b.lineTo(c,a));b.stroke();b.closePath()}z.Jj=function(){var a=this.e(this.Q,this.data),a=this.e(this.c[0],this.data).slice(0,a.length),b=this.Kj(a);return a.map(function(a){return Math.abs(a)/b})};z.Kj=function(a){for(var b=0,c=0;c<a.length;c++)b+=Math.abs(a[c]);return b};function qj(a){nj.call(this,a);this.Ig=1}qj.prototype=new nj(o);
qj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b,c,d=this.j.mc(),f=this.Rb!==o,e=this.c.length,g=this.Q,h=this.e(g,this.data),i=Math.min(this.mi,fj(this)),j=this.f.L,f=f?this.j.A(this.Rb):o;f===o&&(f=d);var m=
d=0,p=[],q=this.s?[0,h.length-1]:this.ub();if(!(-1===q[0]||-1===q[1])){this.f instanceof Uf&&h[q[0]]>h[q[0]+1]&&k("Date order is incorrect. Please use ascending order.");for(m=0;m<e;m++){for(var r=this.c[m],t=this.e(r,this.data),y=ij(this,r),u=[],w=[],d=q[0];d<=q[1];++d){var E=h[d],L=t[d];b=this.f instanceof Uf?this.f.va(E):this.f instanceof Vf?this.f.A(E):Wf(this.f,E);c=this.j.A(L);u.push(new Xf(this.s?b:b-i/2,c));y?w.push(new jj(y[d],"","","",o)):w.push(new jj(E,L,g,r,this.Ia));this.$.push(new Ng(b,
c,E,L))}if("center"===this.Kd&&this.f instanceof Vf===s){c=j/this.f.Df();for(d=0;d<u.length;d++)u[d].g=u[d].g+c/2-i/2}p.push(u);this.xd.push(w)}for(m=0;m<p.length;m++){e=this.O[m];g=[];for(d=0;d<p[m].length;d++)if(c=p[m][d].i,0===m)c=Math.abs(f-c),p[m][d].i>f?(c=1<p.length?c-this.Ig:c,g.push(new mj(p[m][d].g,f,i,c,e))):g.push(new mj(p[m][d].g,p[m][d].i,i,c,e));else{q=n;q=c<f?n:s;j=Math.abs(f-c);for(w=u=c=0;w<m;w++)p[w][d].i<f?c+=Math.abs(f-p[w][d].i):isNaN(p[w][d].i)||(u+=Math.abs(f-p[w][d].i));c=
q?f-c-j:f+u;g.push(new mj(p[m][d].g,c,i,j-this.Ig,e))}this.na.push(g)}pj(this,a,f,n);dj(this);-1===this.Z&&(this.Z=h.length);for(m=0;m<this.na.length;m++){h=this.na[m];for(d=0;d<h.length;d++)this.Fc(a,h[d],0,d>=this.Z)}}};function rj(a,b,c,d,f,e,g){lj.call(this,g,o);this.x=a;this.y=b;this.Bb=c;this.Ff=d;this.zc=f;this.ed=e}rj.prototype=new lj(o,o);rj.prototype.contains=function(a,b){var c=Math.sqrt((a-this.x)*(a-this.x)+(b-this.y)*(b-this.y)),d=Math.acos((a-this.x)/c);b<this.y&&(d=2*Math.PI-d);return c>=this.Ff&&c<=this.Bb&&d>=this.zc&&d<=this.ed};function sj(a){U.call(this,a);this.O=o;this.Ok=a.Ok;this.Xb=this.zm=this.Bm=o;this.labels=[];this.Vq=new Pe;this.cb=new N;this.Ff=this.Co=this.Bo=this.Bb=o;this.na=[];this.lg=0.15/(2*Math.PI);this.Cb=a.Cb}sj.prototype=new U(o);z=sj.prototype;z.cc=function(a,b,c){this.Bm=a;this.zm=b;this.Xb=c};z.$e=v("O");
z.Jj=function(){for(var a=this.e(this.Q,this.data),b=this.e(this.c[0],this.data),c=ij(this,this.c[0]),d=[],f=0;f<a.length;f++)d.push(b[f]),isNaN(b[f])||(c?this.xd.push(new jj(c[f],"","","",o)):this.xd.push(new jj(a[f],b[f],"","",this.Ia)));a=[];if(this.Ok===n){b=this.Kj(d);for(c=0;c<d.length;c++)a.push(Math.abs(d[c])/b)}else a=d;return a};
z.Fc=function(a,b,c){var d=this.a.qf,f=parseInt(d.qj,10),e=2==c?b.Bb-f/2:b.Bb,f=2==c?b.Ff+f/2:b.Ff,g=b.x+e*Math.cos(b.zc),h=b.y+e*Math.sin(b.zc),i=b.x+f*Math.cos(b.zc+this.lg),j=b.x+f*Math.cos(b.ed-this.lg),m=b.y+f*Math.sin(b.zc+this.lg),p=b.y+f*Math.sin(b.ed-this.lg);if(b.ed<=b.zc)a.beginPath(),a.lineWidth=1,a.moveTo(i,m),a.lineTo(g,h),a.strokeStyle=b.fill.stroke,a.stroke();else if(a.beginPath(),a.moveTo(i,m),a.lineTo(g,h),a.arc(b.x,b.y,e,b.zc,b.ed,s),a.lineTo(j,p),a.arc(b.x,b.y,f,b.ed,b.zc,n),a.closePath(),
0==c||2==c)a.fillStyle=b.fill.stroke,a.fill();switch(c){case 1:a.strokeStyle=d.wh;a.lineWidth=d.Fe;a.stroke();break;case 2:a.strokeStyle=d.xh,a.lineWidth=d.qj,a.stroke()}a.closePath()};z.xg=function(a,b,c,d){var f=hj(this,d),d=f[0],f=f[1],e=b.x+(b.Bb+13)*Math.cos((b.zc+b.ed)/2),g=b.y+(b.Bb+13)*Math.sin((b.zc+b.ed)/2);a.textAlign=(b.zc+b.ed)/2>Math.PI/2&&(b.zc+b.ed)/2<3*Math.PI/2?"right":"left";a.font=f;a.fillStyle=d;a.textBaseline="middle";a.fillText(c,e,g)};
z.S=function(){(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");this.Q||k("X column name is not specified.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b=this.Bm,c=this.zm;this.Bo=(b-this.Xb)/2;this.Co=c/2;var d=0,f=0,e=this.Jj(),g,h=0,i=new pe("0.00%");for(g=0;g<e.length;g++)isNaN(e[g])||(f=i.ea(e[g]),this.labels.push(f),h=Math.max(h,Wc(a,f)));this.Bb=Math.max(Math.min(b-
this.Xb-2*h,c)/2-20,0);this.Ff=0.2*this.Bb;for(g=0;g<e.length;g++)isNaN(e[g])||(b=2*Math.PI*e[g],f=d+b-(1==e.length?0:this.lg),c=new rj(this.Bo,this.Co,this.Bb,this.Ff,d,f,this.O[g]),this.na.push(c),d+=b);for(d=0;d<this.na.length;d++)this.Fc(a,this.na[d],0);this.Cb===n&&(gj(this),a=this.Tc.getContext("2d"),this.vg(a,o,0))};z.Kj=function(a){for(var b=0,c=0;c<a.length;c++)b+=isNaN(a[c])?0:Math.abs(a[c]);return b};
z.vg=function(a,b,c){a.clearRect(0,0,this.Tc.width,this.Tc.height);for(var d=0;d<this.labels.length;d++)this.na[d]===b?this.xg(a,this.na[d],this.labels[d],c):this.na[d].kd?this.xg(a,this.na[d],this.labels[d],2):this.xg(a,this.na[d],this.labels[d],0)};function tj(a){U.call(this,a);this.Rf=a.Rf}tj.prototype=new U(o);
tj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b,c,d=this.e(this.Q,this.data),f=this.e(this.c[0],this.data),e=this.ub();if(!(-1===e[0]||-1===e[1])){var g=Qg(this).stroke;a.fillStyle=g;var h,i,j=0;switch(this.Rf){case 0:break;
case 2:for(j=e[0];j<=e[1];j++)b=d[j],c=f[j],h=j,b=this.f.va(b,this.data.TimeZone),i=c=this.j.A(c),this.$[this.$.length]=new Ng(b,c,d[j],f[j]),a.beginPath(),a.arc(b,c,2,0,2*Math.PI,s),a.fill();break;case 3:a.beginPath();for(j=e[0];j<=e[1];j++)b=d[j],c=f[j],h=j,b=this.f.va(b,this.data.TimeZone),i=c=this.j.A(c),this.$[this.$.length]=new Ng(b,c,d[j],f[j]),a.moveTo(b-2.5,c),a.lineTo(b,c-2.5),a.lineTo(b+2.5,c),a.lineTo(b,c+2.5);a.fill();break;default:a.beginPath();for(j=e[0];j<=e[1];j++)b=d[j],c=f[j],h=
j,b=this.f.va(b,this.data.TimeZone),i=c=this.j.A(c),this.$[this.$.length]=new Ng(b,c,d[j],f[j]),a.rect(b-2.5,c-2.5,5,5);a.fill()}a.closePath();isNaN(h)===s&&bj(this.Aa,b,i,d[h],f[h],g)}};function uj(a){nj.call(this,a);this.li=30;this.Gs=o;this.Ig=1}uj.prototype=new nj({});
uj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b,c,d=this.Q,f=this.e(this.Q,this.data);this.sf=0.5*(this.j.mc()/f.length);this.sf>this.li&&(this.sf=this.li);for(var e=this.f.A(0),g=0,h=0,i=[],h=0;h<this.c.length;h++){for(var j=
this.O[h],j=[],m=[],p=this.c[h],q=this.e(p,this.data),r=ij(this,p),g=0;g<q.length;g++)b=this.f instanceof Uf?this.f.va(q[g]):this.f instanceof Vf?this.f.A(q[g]):Wf(this.f,q[g]),c=this.j.A(f[g]),c-=this.sf/2,j.push(new Xf(b,c)),r?m.push(new jj(r[g],"","","",o)):m.push(new jj(f[g],q[g],d,p,this.Ia));i.push(j);this.xd.push(m)}for(h=0;h<i.length;h++){j=this.O[h];m=[];for(g=0;g<i[h].length;g++)if(b=i[h][g].g,c=i[h][g].i,d=Math.abs(b-e),0===h)b>e?(d=1<i.length?d-this.Ig:d,m.push(new mj(e,c,d,this.sf,j))):
m.push(new mj(e-d,c,d,this.sf,j));else{p=n;p=b>e?n:s;for(r=q=b=0;r<h;r++)i[r][g].g>e?b+=Math.abs(e-i[r][g].g):q+=Math.abs(e-i[r][g].g);b=p?e+b:e-q-d;m.push(new mj(b,c,d-this.Ig,this.sf,j))}this.na.push(m)}pj(this,a,e,s);dj(this);-1===this.Z&&(this.Z=f.length);for(h=0;h<this.na.length;h++){c=this.na[h];for(g=0;g<c.length;g++)this.Fc(a,c[g],0,g>=this.Z)}};function cj(a){U.call(this,a);this.Rf=a.Rf;this.Bk=1;this.Ys=this.$s=0}cj.prototype=new U(o);
cj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");if(this.data.Columns.length){var a=this.canvas.getContext("2d");a.lineCap="butt";a.lineWidth=this.La;var b=Qg(this).stroke;a.strokeStyle=b;a.lineJoin="round";for(var c=[],d=this.e(this.Q,this.data),f=this.e(this.c[0],this.data),e=0,e=0;e<d.length;e++){var g=hg(this.f,
d[e]),h=this.j.A(f[e]);c[c.length]=new Xf(g,h);this.$[this.$.length]=new Ng(g,h,d[e],f[e])}g=qc(c,this.Bk);a.beginPath();for(e=0;e<g.length;e++)h=g[e],h===o||"undefined"===typeof h||(0===e?a.moveTo(h.g,h.i):a.lineTo(h.g,h.i));a.stroke();a.closePath();a.fillStyle=b;switch(this.Rf){case 0:break;case 2:for(e=0;e<c.length;e++)h=c[e],a.beginPath(),a.arc(h.g,h.i,3.5,0,2*Math.PI,s),a.fill();break;case 3:a.beginPath();for(e=0;e<c.length;e++)h=c[e],a.moveTo(h.g-1.75,h.i),a.lineTo(h.g,h.i-1.75),a.lineTo(h.g+
1.75,h.i),a.lineTo(h.g,h.i+1.75);a.fill();break;default:a.beginPath();for(e=0;e<c.length;e++)h=c[e],a.rect(h.g-1.75,h.i-1.75,3.5,3.5);a.fill()}a.closePath();a=c.length-1;for(e=c.length-1;0<=e;e--)if(!isNaN(f[e])){a=e;break}bj(this.Aa,c[a].g,c[a].i,d[a],f[a],b)}};function vj(a){U.call(this,a)}vj.prototype=new U(o);
vj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b=this.f.L,c=this.j.mc(),d,f,e=this.e(this.Q,this.data),g=this.e(this.c[0],this.data),h=this.ub();if(!(-1===h[0]||-1===h[1])){a.lineWidth=this.La;a.beginPath();
var i=Qg(this),j=a.createLinearGradient(0,0,0,c);j.addColorStop(0,i.Dg);j.addColorStop(1,i.Eg);a.fillStyle=j;a.globalAlpha=0.3;for(var j=[],m,p,q,r,t=0,y=ej(this,h[0],g),t=h[0];t<=h[1];t++)m=g[t],p=e[t],d=this.f.va(p,this.data.TimeZone),isNaN(m)===s&&p?(q=t,f=this.j.A(m),j[j.length]=new Xf(d,f),r=f):f=Number.NaN,this.$[this.$.length]=new Ng(d,f,p,m);var u,w,t=this.j.q.start;f=this.j.q.end;m=this.j.Rg;c=0>t&&0<f?this.j.A(0):0>t?m?0:c:m?c:0;a.beginPath();1<j.length?(u=j[1].g-j[0].g,u=j[0].g-(h[0]-y)*
u,w=this.j.A(g[y]),a.moveTo(u,c),a.lineTo(u,w),h=w):(a.moveTo(j[0].g,c),h=j[0].i,a.lineTo(j[0].g,h));for(t=0;t<j.length;t++)a.lineTo(j[t].g,h),a.lineTo(j[t].g,j[t].i),h=j[t].i;a.lineTo(b,h);a.lineTo(b,c);a.fill();a.closePath();a.beginPath();a.lineWidth=this.La;a.strokeStyle=i.stroke;a.globalAlpha=1;1<j.length?(a.moveTo(u,w),h=w):(a.moveTo(j[0].g,j[0].i),h=j[0].i);for(t=0;t<j.length;t++)a.lineTo(j[t].g,h),a.lineTo(j[t].g,j[t].i),h=j[t].i;a.lineTo(b,h);a.stroke();a.closePath();isNaN(q)===s&&bj(this.Aa,
d,r,e[q],g[q],i.stroke)}};function wj(a){U.call(this,a);this.zIndex=58}wj.prototype=new U(o);
wj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length||4>this.c.length)&&k(" Either Y column names are not specified or not enough to plot.");var a=this.canvas.getContext("2d"),b=Qg(this).stroke,c,d,f,e,g,h=this.ub();if(!(-1===h[0]||-1===h[1])){var i=fj(this)/2;a.lineWidth=1;a.strokeStyle=
b;for(var j=this.e(this.Q,this.data),m=this.e(xf,this.data),p=this.e(yf,this.data),q=this.e(zf,this.data),r=this.e(Af,this.data),t,y,u,w=h[0];w<=h[1];w++)d=m[w],t=j[w],g=r[w],c=this.f.va(j[w],this.data.TimeZone),t&&!isNaN(d)&&!isNaN(g)?(y=w,d=this.j.A(d),f=this.j.A(p[w]),e=this.j.A(q[w]),u=g=this.j.A(g),m[w]>r[w]?(a.beginPath(),a.moveTo(c,f),a.lineTo(c,d),a.lineTo(c-i,d),a.lineTo(c-i,g),a.lineTo(c,g),a.lineTo(c,e),a.lineTo(c,g),a.lineTo(c+i,g),a.lineTo(c+i,d),a.lineTo(c,d),a.fillStyle=b,a.fill()):
(a.beginPath(),a.moveTo(c,f),a.lineTo(c,g),a.lineTo(c-i,g),a.lineTo(c-i,d),a.lineTo(c,d),a.lineTo(c,e),a.lineTo(c,d),a.lineTo(c+i,d),a.lineTo(c+i,g),a.lineTo(c,g)),a.stroke(),a.closePath()):!isNaN(g)&&t?(y=w,u=g=this.j.A(g),a.moveTo(c+i,g),a.lineTo(c-i,g),a.stroke()):g=Number.NaN,this.$[this.$.length]=new Ng(c,g,t,r[w]);isNaN(y)===s&&bj(this.Aa,c,u,j[y],r[y],b)}};function xj(a){nj.call(this,a);this.zIndex=56;this.opacity=a.s?1:0.25;this.me=[]}xj.prototype=new nj(o);
xj.prototype.S=function(){if(this.Ud){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");this.Q||k("X column name is not specified.");var a=this.c?this.c.length:0;0===a&&k("Y column names are not specified.");var b=this.canvas.getContext("2d");b.globalAlpha=this.opacity;var c,d,f,e,g,h,i,j=this.j.mc(),m=this.Rb!==o,p=this.Q,q=this.e(p,this.data),
m=m?this.j.A(this.Rb):o;m===o&&(m=j);var r=j=0,t,y=this.ub();if(!(-1===y[0]||-1===y[1])){for(var u=this.Ud.Tr,w=this.Ud.wq,r=0;r<a;r++){var E=this.c[r],L=this.e(E,this.data),I=ij(this,E),G=[],ca=[];this.f instanceof Uf&&q[y[0]]>q[y[0]+1]&&k("Date order is incorrect. Please use ascending order.");for(var H=this.O[r],j=y[0];j<=y[1];g=j,++j){g=q[j];h=L[j];t=[];c=new Date(g.getTime());d=new Date(g.getTime());e=this.Ud.Ir;i=i=l;if(7===e)d.setDate(d.getDate()+1);else if(8===e){for(i=d.getDay();0!==i;)d.setDate(d.getDate()-
1),i=d.getDay();c.setTime(d.getTime()-6048E5)}else 9===e?(d.setDate(1),d.setMonth(d.getMonth()+1),c.setDate(1)):10===e?(i=d.getMonth(),i=Math.round((i-1)/3+1),e=3*i,i=3*(i-1),d.setDate(1),d.setMonth(e),c.setDate(1),c.setMonth(i)):12===e?(i=d.getMonth(),6>i?(d.setDate(1),d.setMonth(6),c.setDate(1),c.setMonth(0)):(d.setDate(1),d.setMonth(0),d.setFullYear(d.getFullYear()+1),c.setDate(1),c.setMonth(6))):11===e&&(d.setDate(1),d.setMonth(0),d.setFullYear(d.getFullYear()+1),c.setDate(1),c.setMonth(0));t.push(c);
t.push(d);c=Math.floor(this.f.va(t[0]));d=Math.floor(this.f.va(t[1]));i=d-c;t=e=this.j.A(h);i=(i-4-(i-4)%(a*u))/(a*u);if(1<=i){f=c+2+i*w;I?ca.push(new jj(I[j],"","","",o)):ca.push(new jj(g,h,p,E,this.Ia));var ja=Math.abs(m-e);i=new mj(f,Math.min(e,m),i,ja,H);G.push(i);this.me.push(new $i(c,d,e,g,h))}}this.na.push(G);this.xd.push(ca)}this.Mi&&pj(this,b,m,n);dj(this);-1===this.Z&&(this.Z=q.length);for(r=0;r<a;r++){p=this.na[r];for(j=0;j<p.length;j++)this.Fc(b,p[j],0,j>=this.Z)}this.Cb===n&&oj(this);
!isNaN(g)&&this.Aa&&bj(this.Aa,f,t,q[g],L[g],Qg(this).stroke)}}else if((!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method."),(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature."),this.Q||k("X column name is not specified."),f=this.c?this.c.length:0,0===f&&k("Y column names are not specified."),L=this.canvas.getContext("2d"),L.globalAlpha=this.opacity,u=this.j.mc(),y=this.Rb!==o,j=this.Q,m=this.e(j,
this.data),r=this.f.L,y=y?this.j.A(this.Rb):o,y===o&&(y=u),w=u=0,E=this.s?[0,m.length-1]:this.ub(),!(-1===E[0]||-1===E[1])){u=E[1]-E[0]+1;I=this.interval===this.f.interval&&u<=this.f.Df()?fj(this):0.5*this.f.L/(u*f);I=Math.min(this.mi,I);for(w=0;w<f;w++){h=this.c[w];q=this.e(h,this.data);t=ij(this,h);G=[];ca=[];H=[];this.f instanceof Uf&&m[E[0]]>m[E[0]+1]&&k("Date order is incorrect. Please use ascending order.");for(u=E[0];u<=E[1];p=u,++u)p=m[u],c=q[u],a=this.f instanceof Uf||this.f instanceof Uh?
this.f.va(p):this.f instanceof Vf?this.f.A(p):Wf(this.f,p),b=g=this.j.A(c),G.push(new Xf(this.s?a:a-I/2,g)),17===this.d&&(this.yd&&1===f)&&H.push(0<=c?this.Un:this.On),t?ca.push(new jj(t[u],"","","",o)):ca.push(new jj(p,c,j,h,this.Ia)),this.$.push(new Ng(a,g,p,c));if("center"===this.Kd&&this.f instanceof Vf===s){h=r/this.f.Df();for(u=0;u<G.length;u++)g=G[u].g+h/2-(I*f+1*(f-1))/2,G[u].g=g+w*(I+1)}h=this.O[w];for(u=0;u<G.length;u++)23===this.d?h=this.O[u]:17===this.d&&0<H.length&&(h=H[u]),g=G[u].i,
t=Math.abs(y-g),g=new mj(G[u].g,Math.min(g,y),I,t,h),G[u]=g;this.na.push(G);this.xd.push(ca)}this.Mi&&pj(this,L,y,n);dj(this);-1===this.Z&&(this.Z=m.length);for(w=0;w<f;w++){j=this.na[w];for(u=0;u<j.length;u++)this.Fc(L,j[u],0,u>=this.Z)}this.Cb===n&&oj(this);!isNaN(p)&&this.Aa&&bj(this.Aa,a,b,m[p],q[p],Qg(this).stroke)}};function yj(a){U.call(this,a);this.Rb=a.Rb}yj.prototype=new U(o);
yj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b,c,d=this.j.mc(),f=this.Rb!==o,e=f?this.j.A(this.Rb):o;e===o&&(e=d);a.beginPath();var g=Qg(this).stroke;a.fillStyle=g;var h=this.e(this.Q,this.data),i=this.e(this.c[0],
this.data),j=this.ub();if(!(-1===j[0]||-1===j[1])){for(var m=fj(this),p=[],q,r,t,y,u=0,u=j[0];u<=j[1];u++){q=i[u];r=h[u];b=this.f.va(r,this.data.TimeZone);if(isNaN(q)===s&&r){t=u;y=c=this.j.A(q);var w=f?Math.abs(e-c):d-c;a.rect(b-m/2,f?Math.min(c,e):c,m,w);p[p.length]=new Xf(b,c)}else c=Number.NaN;this.$[this.$.length]=new Ng(b,c,r,q)}a.fill();a.closePath();a.beginPath();a.lineWidth=this.La;a.strokeStyle=g;for(u=0;u<p.length;u++)0===u?a.moveTo(p[u].g,p[u].i):a.lineTo(p[u].g,p[u].i);a.stroke();a.closePath();
isNaN(t)===s&&bj(this.Aa,b,y,h[t],i[t],g)}};function Pg(a){U.call(this,a);this.$j=a.$j;this.zIndex=60}Pg.prototype=new U(o);
Pg.prototype.S=function(a){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var b=this.canvas.getContext("2d"),c=this.f.L,d,f,e=this.e(this.Q,this.data),g=this.e(this.c[0],this.data),h=this.ub(),i=Qg(this).stroke;b.strokeStyle=i;b.lineWidth=this.La;var j=[],m,p,q,r,t=
0;if(-1===h[0]||-1===h[1]){j=this.Xh(g,e,a.end,this.d);if(-1===j||j<e.length-2&&(d=g[j+1],d===l||d===o||isNaN(d)))return;p=e[j];if(p>a.end)return;h[0]=h[1]=j;m=g[j];d=this.f.va(p,this.data.TimeZone);f=this.j.A(m);this.$.push(new Ng(d,f,p,m));q=j;r=f;b.beginPath();b.moveTo(0,f);b.lineTo(c,f)}else{a=ej(this,h[0],g);a!==h[0]&&(m=g[a],p=e[a],d=this.f.va(p,this.data.TimeZone),f=this.j.A(m),this.$.push(new Ng(d,f,p,m)));for(t=a;t<=h[1];t++)m=g[t],p=e[t],d=this.f.va(p,this.data.TimeZone),!isNaN(m)&&p?(q=
t,f=this.j.A(m),j.push(new Xf(d,f)),r=f):(this.$j&&(q=t,j.push(new Xf(d,Number.NaN))),f=Number.NaN),p=new Ng(d,f,p,m),isNaN(g[t+1])&&(p.Pk=n),this.$.push(p);b.beginPath();1<j.length?(h=j[0].g-(h[0]-a)*(j[1].g-j[0].g),t=this.j.A(g[a]),b.moveTo(h,t),h=t):1===j.length&&0<=a?(t=this.j.A(g[a]),b.moveTo(j[0].g,t),h=t):(b.moveTo(j[0].g,j[0].i),h=j[0].i);for(t=p=0;t<j.length;t++)if(isNaN(j[t].i)){for(p+1<j.length&&b.lineTo(j[p+1].g,h);(isNaN(j[t].i)||j[t].g===o)&&!(t+=1,t>=j.length););t<j.length&&(b.moveTo(j[t].g,
j[t].i),h=j[t].i,p=t)}else b.lineTo(j[t].g,h),b.lineTo(j[t].g,j[t].i),h=j[t].i,p=t;1<=j.length&&!isNaN(j[j.length-1].i)&&b.lineTo(c,h)}b.stroke();b.closePath();isNaN(q)===s&&bj(this.Aa,d,r,e[q],g[q],i)};function zj(){}zj.prototype.Md=function(a,b,c,d,f,e){e||(e=[2,2]);var g=e.length,d=d-b,f=f-c,h=Math.abs(d)>Math.abs(f),i=h?f/d:d/f;a.moveTo(b,c);for(var j=Math.sqrt(d*d+f*f),m=0;0.1<=j;){var p=Math.min(j,e[m%g]),q=Math.sqrt(p*p/(1+i*i));h?(0>d&&(q=-q),b+=q,c+=i*q):(0>f&&(q=-q),b+=i*q,c+=q);a[0===m%2?"lineTo":"moveTo"](b,c);j-=p;m++}};B("TRWebchart_Shared.LineStyle",{Solid:0,Dot:1,Dash:2});function Sg(a,b,c,d){lj.call(this,d,o);this.x=a;this.y=b;this.Bb=c}Sg.prototype=new lj(o,o);Sg.prototype.contains=function(a,b){return Math.sqrt((a-this.x)*(a-this.x)+(b-this.y)*(b-this.y))<=this.Bb};function Aj(a){a=a||{};U.call(this,a);this.Yb=a.Yb||o;this.na=[];this.N=[];this.Bb=4.3;this.opacity=0.5;this.Re=-1;this.ek=o}Aj.prototype=new U(o);
Aj.prototype.Fc=function(a,b,c,d){if(0===c){var f=Lf(this.Mh,b.fill.stroke),e=d?Mf(f.kj,this.opacity):f.kj,d=d?Mf(f.hj,this.opacity):f.hj;Kg(a,b,e,d)}var e=this.a.qf,d=b.x,f=b.Bb,b=b.y,g=2*Math.PI;switch(c){case 1:a.beginPath();a.strokeStyle=e.wh;a.lineWidth=e.Fe;a.arc(d,b,f,0,g,s);a.stroke();a.closePath();break;case 2:a.beginPath(),a.strokeStyle=e.xh,a.lineWidth=e.pj,a.arc(d,b,f,0,g,s),a.stroke(),a.closePath()}};
function Bj(a){var b,c,d,f,e=a.Q,g=a.e(a.Q,a.data),h=a.c[0],i=a.e(h,a.data),j=a.f.L,m=ij(a,h),p=a.ub();if(!(-1===p[0]||-1===p[1])){for(var q=p[0];q<=p[1];q++)d=g[q],f=i[q],b=a.f instanceof Uf||a.f instanceof Uh?a.f.va(d,a.data.TimeZone):a.f instanceof Vf?a.f.A(d):Wf(a.f,d),c=!isNaN(f)?a.j.A(f):Number.NaN,a.N.push(new Xf(b,c)),m?a.xd.push(new jj(m[q],"","","",o)):a.xd.push(new jj(d,f,e,h,a.Ia)),a.$.push(new Ng(b,c,d,f));if("center"===a.Kd&&a.f instanceof Vf===s){i=j/a.f.Df();for(b=0;b<a.N.length;b++)a.N[b].g+=
i/2}i=a.e(a.c[0],a.data);a.Re=ej(a,p[0],i);p=a.N[0].g-(p[0]-a.Re)*(1<a.N.length?a.N[1].g-a.N[0].g:a.f.L);i=a.j.A(i[a.Re]);a.ek=new Xf(p,i)}}function Cj(a,b,c,d,f,e){var g;for(g=c;g<=d;g++)a.na.push(new Sg(a.N[g].g,a.N[g].i,a.Bb,f));for(g=c;g<=d;g++)a.Fc(b,a.na[g],0,e)}function Dj(a){var b=o;switch(a.Yb){case 1:b=[3,3];break;case 2:b=[10,7]}return b}
Aj.prototype.wg=function(a,b,c,d,f){a.beginPath();a.strokeStyle=f;var e=this.Z===c?n:s,f=this.Re===c||e?b[c]:this.ek;f!==l&&(f!==o&&f.g!==o&&f.i!==o)&&a.moveTo(f.g,f.i);for(c=this.Re===c||e?c+1:c;c<=d;c++)(f=b[c])&&!(f.g===o||f.i===o)&&a.lineTo(f.g,f.i);a.stroke();a.closePath()};
Aj.prototype.Md=function(a,b,c,d,f){var e=new zj,g=Dj(this);a.beginPath();a.strokeStyle=f;for(var h=this.Z===c?n:s,f=this.Re===c||h?b[c]:this.ek,h=this.Re===c||h?c+1:c;h<=d;++h)if((c=b[h])&&!(c.g===o||c.i===o))e.Md(a,f.g,f.i,c.g,c.i,g),f=c;a.stroke();a.closePath()};function Ej(a,b,c){-1===a.Z?Cj(a,b,0,a.N.length-1,c,s):(Cj(a,b,0,a.Z-1,c,s),Cj(a,b,a.Z,a.N.length-1,c,n))};function Fj(a){Aj.call(this,a);this.Gb=a.Gb;this.zIndex=60}Fj.prototype=new Aj(o);
Fj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");this.Q||k("X column name is not specified.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d");a.lineCap="butt";a.lineWidth=this.La;a.lineJoin="round";var b=Qg(this).stroke,c=Mf(b,this.opacity);Bj(this);dj(this);
var d=!this.Yb||0===this.Yb?this.wg:this.Md;-1===this.Z?d.call(this,a,this.N,0,this.N.length-1,b):(d.call(this,a,this.N,0,this.Z,b),d.call(this,a,this.N,this.Z,this.N.length-1,c));this.Gb&&Ej(this,a,Qg(this));for(var f,e,g,a=this.N.length-1;0<=a;--a)if(!isNaN(this.N[a].i)){f=a;e=this.N[a].g;g=this.N[a].i;break}!isNaN(f)&&this.Aa&&(a=this.e(this.Q,this.data),c=this.e(this.c[0],this.data),d=this.ub()[0],bj(this.Aa,e,g,a[d+f],c[d+f],b))};function Og(a){U.call(this,a);(a=a.c)&&"LevelLineScalar"===a[0]?(this.Yb=this.a.hg.Ul,this.Fk=n):this.Fk=s}Og.prototype=new U(o);
Og.prototype.S=function(a){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var b=this.canvas.getContext("2d");b.lineWidth=this.La;var c=Qg(this).stroke;b.strokeStyle=c;var d=0,f,e=this.f.L,g;if(this.Fk===n){var h=this.data.Scalars;if(h!==o){g=h[0].Value.Date;d=this.f.va(g);
if(d===l||d===o||g<this.f.ra[0])d=0;f=this.j.A(h[0].Value.Value)}}else h=this.data.LevelLines,h!==o&&(f=this.j.A(h[parseInt(this.c[0].substring(this.c[0].length-1),10)].Value));b.beginPath();1===this.Yb?(new zj).Md(b,d,f,e,f,[2,2]):(b.moveTo(d,f),b.lineTo(e,f));b.stroke();b.closePath();this.Fk&&(a&&g<=a.end)&&(a=this.data.Scalars[0].Value,bj(this.Aa,e,f,a.Date,a.Value,c))};function Gj(a){Aj.call(this,a)}Gj.prototype=new Aj(o);Gj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d");Bj(this);dj(this);Ej(this,a,Qg(this))};function Hj(a){U.call(this,a);this.zIndex=57}Hj.prototype=new U(o);
Hj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b=this.j.mc(),c,d,f=this.e(this.Q,this.data),e=this.e(this.c[0],this.data),g=this.ub();if(!(-1===g[0]||-1===g[1])){var h=Qg(this),i=a.createLinearGradient(0,
0,0,b);i.addColorStop(0,h.Dg);i.addColorStop(1,h.Eg);a.fillStyle=i;a.globalAlpha=h.Dg==h.Eg?1:0.3;for(var i=[],j,m,p,q,r=0,t=ej(this,g[0],e),y=0,u,r=g[0];r<=g[1];r++)j=e[r],m=f[r],c=this.f.va(m,this.data.TimeZone),isNaN(j)===s&&m?(p=r,q=d=this.j.A(j)):d=Number.NaN,u=i.length,isNaN(d)===s&&(y=u),i[u]=new Xf(c,d),this.$[this.$.length]=new Ng(c,d,m,j);r=this.j.q.start;d=this.j.q.end;j=this.j.Rg;b=0>r&&0<d?this.j.A(0):0>r?j?0:b:j?b:0;a.beginPath();g=i[0].g-(g[0]-t)*(1<i.length?i[1].g-i[0].g:this.f.L);
t=this.j.A(e[t]);a.moveTo(g,b);a.lineTo(g,t);for(r=0;r<i.length;r++)a.lineTo(i[r].g,i[r].i);a.lineTo(i[y].g,b);a.fill();a.closePath();a.beginPath();a.lineWidth=this.La;a.strokeStyle=h.stroke;a.globalAlpha=1;a.moveTo(g,t);for(r=0;r<i.length;r++)i[r].i!=Number.NaN&&a.lineTo(i[r].g,i[r].i);a.stroke();a.closePath();isNaN(p)===s&&this.Aa&&bj(this.Aa,c,q,f[p],e[p],h.stroke)}};function Ij(a){Aj.call(this,a);this.Gb=a.Gb}Ij.prototype=new Aj(o);
Ij.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d"),b=this.j.mc(),c=Qg(this),d=a.createLinearGradient(0,0,0,b);d.addColorStop(0,c.Dg);d.addColorStop(1,c.Eg);a.fillStyle=d;a.globalAlpha=c.Dg==c.Eg?1:0.4;Bj(this);
0>this.j.q.start===n&&(b=this.j.A(0));a.beginPath();a.moveTo(this.N[0].g,b);for(d=0;d<this.N.length;d++)a.lineTo(this.N[d].g,this.N[d].i);a.lineTo(this.N[this.N.length-1].g,b);a.fill();a.closePath();a.beginPath();a.lineWidth=this.La;a.strokeStyle=c.stroke;a.globalAlpha=1;for(d=0;d<this.N.length;d++)0===d?a.moveTo(this.N[d].g,this.N[d].i):a.lineTo(this.N[d].g,this.N[d].i);a.stroke();a.closePath();this.Gb&&Cj(this,a,0,this.N.length-1,c,s);for(var f,e,g,a=this.N.length-1;0<=a;--a)if(!isNaN(this.N[a].i)){f=
a;e=this.N[a].g;g=this.N[a].i;break}!isNaN(f)&&this.Aa&&(a=this.e(this.Q,this.data),b=this.e(this.c[0],this.data),d=this.ub()[0],bj(this.Aa,e,g,a[d+f],b[d+f],c.stroke))};function Jj(a){U.call(this,a);this.zIndex=58}Jj.prototype=new U(o);
Jj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");(!this.c||0===this.c.length||4>this.c.length)&&k(" Either Y column names are not specified or not enough to plot.");var a=this.canvas.getContext("2d");a.lineCap="butt";a.lineWidth=this.La;var b=Qg(this).stroke;a.strokeStyle=b;a.lineJoin="round";var c,d,f,e,g,h=
this.e(this.Q,this.data),i=this.e(xf,this.data),j=this.e(yf,this.data),m=this.e(zf,this.data),p=this.e(Af,this.data),q=this.ub();if(!(-1===q[0]||-1===q[1])){var r=fj(this)/2;a.beginPath();for(var t,y,u,w,E,L,I,G=q[0];G<=q[1];G++){w=i[G];E=j[G];L=m[G];t=h[G];I=p[G];c=this.f.va(t,this.data.TimeZone);if(isNaN(w)&&isNaN(I)&&isNaN(E)&&isNaN(L))g=Number.NaN;else if(y=G,d=this.j.A(w),f=this.j.A(E),e=this.j.A(L),u=g=this.j.A(I),isNaN(w)||(a.moveTo(c-r,d),a.lineTo(c,d)),!isNaN(E)&&!isNaN(L)&&(a.moveTo(c,f),
a.lineTo(c,e)),!isNaN(I))a.moveTo(c+r,g),a.lineTo(c,g);this.$[this.$.length]=new Ng(c,g,t,p[G])}a.stroke();a.closePath();isNaN(y)===s&&bj(this.Aa,c,u,h[y],p[y],b)}};function Kj(a){Aj.call(this,a);this.Gb=a.Gb;this.yl=0<a.La?a.La:o;this.Bk=1}Kj.prototype=new Aj(o);
Kj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");this.Q||k("X column name is not specified.");(!this.c||0===this.c.length)&&k("Y column names are not specified.");var a=this.canvas.getContext("2d");a.lineCap="butt";this.yl||(this.yl=this.La);a.lineWidth=this.yl;a.lineJoin="round";var b=Qg(this).stroke,c=Mf(b,
this.opacity);Bj(this);if(!(1>this.N.length)){dj(this);var d=qc(this.N,this.Bk),f=!this.Yb||0==this.Yb?n:s,e=Dj(this);if(2==d.length)f?this.wg(a,d,0,d.length-1,b):this.Md(a,d,0,d.length-1,b);else if(-1===this.Z)if(f)this.wg(a,d,0,d.length-1,b);else{var c=[],g,h=f=0,i=[],j,m;for(j=0;j<d.length;j++)if(!(d[j]===o||"undefined"===typeof d[j])){g=[d[j].g,d[j].i];m=j;break}var p=g;for(j=m+1;j<d.length;j++)d[j]===o||"undefined"===typeof d[j]||(g=[d[j].g,d[j].i],m=[g[0]-p[0],g[1]-p[1]],h+=Math.sqrt(m[0]*m[0]+
m[1]*m[1]),p=g,h>=e[f]&&(0===f%2&&c.push(i),f=(f+1)%e.length,i=[],h=0),0===f%2&&i.push(g[0],g[1]));0<i.length&&c.push(i);a.beginPath();a.strokeStyle=b;for(d=0;d<c.length;d++){e=c[d];0<e.length&&a.moveTo(e[0],e[1]);for(g=1;g<e.length/2;g++)a.lineTo(e[2*g],e[2*g+1])}a.stroke()}else{e=-1;for(g=0;g<d.length;++g)if(!(d[g]===o||"undefined"===typeof d[g])&&d[g].g>=this.N[this.Z].g){e=g;break}-1==e&&(e=d.length-1);f?(this.wg(a,d,0,e,b),e<d.length-1&&(g=this.Z,this.Z=e,this.wg(a,d,e,d.length-1,c),this.Z=g)):
(this.Md(a,d,0,e,b),this.Z<this.N.length-1&&(g=this.Z,this.Z=e,this.Md(a,d,e,d.length-1,c),this.Z=g))}this.Gb&&Ej(this,a,Qg(this));for(var q,r,t,a=this.N.length-1;0<=a;--a)if(!isNaN(this.N[a].i)){q=a;r=this.N[a].g;t=this.N[a].i;break}!isNaN(q)&&this.Aa&&(a=this.e(this.Q,this.data),d=this.e(this.c[0],this.data),c=this.ub()[0],bj(this.Aa,r,t,a[c+q],d[c+q],b))}};function Lj(a){nj.call(this,a);this.li=30;this.N=[]}Lj.prototype=new nj({});
Lj.prototype.S=function(){(!this.j||!this.f)&&k("Both xCoord and yCoord must be set before calling this method.");(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");this.Q||k("X column name is not specified.");var a=this.c?this.c.length:0;0===a&&k("Y column names are not specified.");this.f instanceof Vf||k("XCoordinate service is not numeric. Mandatory for Bar2D.");var b=this.canvas.getContext("2d"),c,d,f=this.Q,e=this.e(f,
this.data),g=0.8*this.j.mc()/(e.length*a),g=Math.min(g,this.li),h,i,j=this.Rb!==o?this.f.A(this.Rb):o;j===o&&(j=0);for(i=0;i<a;i++){var m=this.c[i],p=this.e(m,this.data),q=ij(this,m),r=[],t=[],y=[];for(h=0;h<p.length;h++)c=this.f.A(p[h]),d=this.j.A(e[h]),r.push(new Xf(c,d)),this.yd&&1===a&&t.push(0<=p[h]?this.Un:this.On),q?y.push(new jj(q[h],"","","",o)):y.push(new jj(e[h],p[h],f,m,this.Ia));if("center"===this.Kd)for(h=0;h<r.length;h++)c=r[h].i-(g*a+1*(a-1))/2,r[h].i=c+i*(g+1);for(h=0;h<r.length;++h)d=
0<t.length?t[h]:this.O[i],c=Math.abs(j-r[h].g),r[h]=new mj(Math.min(r[h].g,j)+1,r[h].i,1>c?1:c,g,d);this.na.push(r);this.xd.push(y)}pj(this,b,j,s);dj(this);-1===this.Z&&(this.Z=e.length);for(i=0;i<this.na.length;i++){a=this.na[i];for(h=0;h<a.length;h++)this.Fc(b,a[h],0,h>=this.Z)}this.Cb===n&&oj(this)};function Mj(a,b){this.Ka=a;this.a=b;this.Rp=[1,4,6,3];var c=this.Em={};c[0]=Fj;c[3]=Jj;c[4]=wj;c[1]=kj;c[5]=Hj;c[Nc]=Pg;c[2]=tj;c[12]=tj;c[6]=xj;c[9]=cj;c[Oc]=vj;c[14]=yj;c[11]=Og;c[15]=Fj;c[16]=Lj;c[19]=Ij;c[17]=xj;c[21]=Gj;c[20]=sj;c[18]=qj;c[23]=xj;c[22]=uj;c[24]=Kj;c[25]=xj}
Mj.prototype.Nh=function(a){var b=a.fl,c=a.d,d=a.s;return new (this.Em[c]||Fj)({Rb:0,a:this.a,d:c,Z:b.Dc&&b.Dc.length?parseInt(b.Dc[0],10):-1,data:b.k,Kd:a.ha||!d?"left":l,Ka:this.Ka,$j:K(b),s:d,Yb:b.Yb,La:this.nk(b),mi:d?30:Number.POSITIVE_INFINITY,Ok:n,Rf:12===c?2:1,Cb:b.Cb&&-1===[22,18].indexOf(c),Gb:b.Gb,tl:23===c||25===c,Mi:d,Q:b.Q,c:b.c,interval:b.interval,Ia:b.Ia,$f:a.$f,yd:d?a.yd:s})};
Mj.prototype.nk=function(a){var b=a.c[0],c=a.d;return 11===c?a.La:-1<this.Rp.indexOf(c)?this.a.sb.Ml:-1<b.indexOf("LevelLineScalar")?this.a.hg.hc:-1<b.indexOf("LevelLine")?this.a.he.hc:a.La};function Nj(a){this.qa=a}Nj.prototype.Kg=function(){return document.getElementById(this.qa.I.Y.Kb)};function Oj(a){this.w=a;this.Ik=o};function Pj(a,b,c){this.r=a;this.ng=b;this.ld=c;this.Ga=o;this.Mh=new If;this.r&&(this.ng&&this.ld)&&this.wa()}
function Qj(a,b,c){var d,f,e=document.getElementById(a.ng+"_price");e||k("The element is not properly initialized");e.innerHTML=b.Tl;var g=b.Nl+0;f=b.Bh;var h=a.ld.x;if(c){if(1==c.Ad.Ge.gm)e.style.color=a.ld.color,a.Ga.style.backgroundColor="white",a.Ga.style.border="1px solid "+a.ld.color;else{f=o;try{f=Jf(a.ld.color)}catch(i){f=o}if(f!==o){var j=a.ld.color;e.style.color=440>f[0]+f[1]&&"#cccccc"!==j&&"#00ffc3"!==j?"white":"black"}else e.style.color="white";a.Ga.style.backgroundColor=a.ld.color;f=
new If;d=Jf(a.ld.color);for(var m=0,p=Array(3),j=Array(3),q=0;q<d.length;q++)m=0.3*d[q],p[q]=d[q]+m,255<p[q]&&(p[q]=255),j[q]=d[q]-m,0>j[q]&&(j[q]=0);d=Kf(f,p);f=Kf(f,j);a.Ga.style.borderLeft="1px solid "+d;a.Ga.style.borderTop="1px solid "+d;a.Ga.style.borderRight="1px solid "+f;a.Ga.style.borderBottom="1px solid "+f}e.style.fontFamily=c.Ad.Ge.m;e.style.fontSize=c.Ad.Ge.o;e.style.fontWeight=c.Ad.Ge.u}e.style.left="-1px";e.style.width=g+"px";e.style.textAlign="center";0===a.ld.Ll?(h=h-g-0,e.style.paddingRight=
"2px"):(h+=1,e.style.paddingLeft="0px");e.style.top="45%";e.style.marginTop="-7px";f=b.Bh;a.Ga.style.top=f+"px";a.Ga.style.left=h+"px";a.Ga.style.height=b.Fo+1+"px";a.Ga.style.width=g-2+"px";a.Ga.style.marginLeft=1==a.ld.Ll?"-2px":"0px";a.Ga.setAttribute("title",b.nm);a.Ga.style.display="block"}Pj.prototype.vf=function(){if(this.Ga)try{this.r.removeChild(this.Ga)}catch(a){}};
Pj.prototype.wa=function(){var a;a=document.getElementById(this.ng);a===o&&(a=document.createElement("DIV"),a.id=this.ng,a.style.position="absolute",a.style.display="none",a.style.fontFamily="Arial",a.style.fontSize="1px",a.style.fontWeight="normal",a.style.overflow="hidden",a.style.zIndex=75,a.innerHTML='<div id="'+this.ng+'_price" style="position:absolute;z-index:12;margin-left:0px;"></div>',this.r.appendChild(a));this.Ga=a};function Rj(a){this.name=a;this.context=o}Rj.prototype.wa=function(a){this.context=a;this.Rm||k("You must provide 'doInit' method after sub-classing this 'ChartExtensionProviderBase'");this.Rm()};Rj.prototype.vf=function(){this.Qm&&this.Qm()};function $j(){Rj.call(this,"TRWebchart_Fin.LastDataPointMarkerProvider");this.Cg=o;this.Yd=[];this.Uq=new Pe;this.Lm=new Ve;this.F=new J}$j.prototype=new Rj(l);
$j.prototype.Rm=function(){var a;a=this.context.Wp;a.Ik||(a.Ik=new Nj(a.w));a=a.Ik;this.Cg=a;var b;if(this.Yd&&0<this.Yd.length)for(b=0;b<this.Yd.length;b++)this.Yd[b].vf();this.Yd.length=0;b=this.Cg;a=[];for(var c=o,d=0,f=0;f<b.qa.ia.length;f++)if(d=b.qa.ia[f],(c=d.Aa?d.Aa.hi:o)&&d instanceof kj===s&&d instanceof cj===s){var d=b.qa.ia[f].Sf,e=c,g=b.qa.I,h=g.$a.Te(d);0>h&&k("Failed getting y-axis index via this series index: '"+d+"'.");e.Ll=g.Og(h);c.wl=b.qa.l[d].Sa;c.Qb=b.qa.l[d].Qb;c.y=0+b.qa.Pa.offsetTop+
c.y;e=b.qa.I.$h(d);g=0;"visible"===Di(b.qa.I.Y).style.visibility&&(g=b.qa.I.Zh());c.Il=g;d=b.qa.I.$a.Te(d);e&&(c.es=e.qh,c.ag=d,c.tb=e.tb,c.V=e.V);0===d?c.x=0+b.qa.Pa.offsetLeft+b.qa.Pa.offsetWidth:1==d?c.x=0+b.qa.Pa.offsetLeft:2==d?c.x=0+b.qa.Pa.offsetLeft+b.qa.Pa.offsetWidth+b.qa.I.z[0].r.clientWidth:3==d&&(c.x=0+b.qa.Pa.offsetLeft-b.qa.I.z[1].r.clientWidth);a[a.length]=c}var c=this.Cg.qa.a,f=this.Cg.Kg(),i,d=[],e=[],g=[],h=[];if(a&&0<a.length)for(b=0;b<a.length;b++)i=a[b].jf,isNaN(i)||(i=f.id+
"_lastPointMarker_"+b,i=new Pj(f,i,a[b]),this.Yd[this.Yd.length]=i,0===parseInt(a[b].Ll,10)?1===parseInt(a[b].ag,10)?d[d.length]={yb:a[b],Ga:i}:g[g.length]={yb:a[b],Ga:i}:0===parseInt(a[b].ag,10)?e[e.length]={yb:a[b],Ga:i}:h[h.length]={yb:a[b],Ga:i});if(0<d.length){d.sort(this.Ni);lk(d,f);mk(this,d);for(b=0;b<d.length;b++)d[b].Db.Dh===n&&Qj(d[b].Ga,d[b].Db,c)}if(0<g.length){g.sort(this.Ni);lk(g,f);mk(this,g);for(b=0;b<g.length;b++)g[b].Db.Dh===n&&Qj(g[b].Ga,g[b].Db,c)}if(0<e.length){e.sort(this.Ni);
lk(e,f);mk(this,e);for(b=0;b<e.length;b++)e[b].Db.Dh===n&&Qj(e[b].Ga,e[b].Db,c)}if(0<h.length){h.sort(this.Ni);lk(h,f);mk(this,h);for(b=0;b<h.length;b++)h[b].Db.Dh===n&&Qj(h[b].Ga,h[b].Db,c)}a=this.Cg;c=0;f="";b=[];for(e=0;e<a.qa.ia.length;e++)if((d=a.qa.ia[e].Aa?a.qa.ia[e].Aa.hi:o)&&d.jf&&isNaN(d.jf)===s)c=a.qa.ia[e].Sf,f=a.qa.l[c].Sa,b[b.length]={bc:c,wl:f,ir:d.jf};if(a.qa.I&&a.qa.I.pc){c=a.qa.I.pc;for(d=0;d<b.length;d++){f="price_"+c.r.id+"_"+b[d].bc;e=parseFloat(b[d].ir);a:{if(c.Wb)for(g=0;g<
c.Wb.length;g++)if(b[d].bc===c.Wb[g].bc){h=c.Wb[g];break a}h=o}g=h?h.tb:o;h=h?!h.ei:s;g=We(b[d].wl,e,g);e=h===n?e.toFixed(g):Qe(c.xc,e,g,h);c.Lc[f]=e+""}a.qa.I.pc.Ci()}};$j.prototype.Qm=function(){for(var a=0;a<this.Yd.length;a++)this.Yd[a].vf()};
function mk(a,b){if(b&&!(1>b.length)){var c,d,f,e=0,g;for(g=0;g<b.length;g++){c=parseFloat(b[g].yb.jf);d=b[g].yb.tb;f=b[g].yb.V;var h=b[g].yb.wl,i=b[g].yb.Qb;d=We(!i?h:i,c,d);c=f===n||1E3>Math.abs(c)?(new pe(Pc(o,f,d))).ea(c):Qe(a.Uq,c,d,f);b[g].Db.Tl=c;b[g].Db.nm="["+b[g].yb.Zr+"] "+c;c=b[g].yb.es;e=Math.max(e,c)}for(g=0;g<b.length;g++)b[g].Db.Nl=e}}
function lk(a,b){var c=0,d,f,e=b.clientHeight-parseInt(a[0].yb.Il,10);if(1<a.length)for(var g=a.length-1,c=g;0<=c;c--)d=a[c].yb,c===g?(f=d.y-7,f+14+5>e&&(d=f+14+5-e,f-=d),a[c].Db=new nk(f)):(f=d.y-7,14>a[c+1].Db.Bh-f?(f=a[c+1].Db.Bh-14-2,a[c].Db=new nk(f)):a[c].Db=new nk(d.y-7));else f=a[0].yb.y-7,f+14+5>e&&(f-=f+14+5-e),a[0].Db=new nk(f)}$j.prototype.Ni=function(a,b){return a.yb.y<b.yb.y?-1:a.yb.y>b.yb.y?1:0};function nk(a){this.Bh=a;this.Fo=14;this.Nl=0;this.nm=this.Tl="";this.Dh=n};function ok(a){U.call(this,a);this.a=a.a;this.U=a.U;this.Pb=a.Pb;this.Od=o}ok.prototype=new U(o);
ok.prototype.S=function(){if(this.U||this.Pb){(!this.canvas||!this.canvas.getContext)&&k("Invalid canvas object.  The current browser may not support the canvas feature.");if(this.a.eb.Yc===n)if(0==this.a.eb.Ee){var a=this.canvas.getContext("2d"),b=this.canvas.clientHeight,c=this.canvas.clientWidth,d=a.createLinearGradient(0,0,0,b);d.addColorStop(0,"#f5f5f5");d.addColorStop(1,"#ffffff");var f=a.createLinearGradient(0,0,0,b);f.addColorStop(0,"#ffffff");f.addColorStop(1,"#f5f5f5");for(var e=this.U.length-
1,g=n,h=0;h<this.U.length;h++)g===n?(g=s,a.fillStyle=d):(g=n,a.fillStyle=f),0===h?a.fillRect(0,0,this.U[h],b):a.fillRect(this.U[h-1],0,this.U[h]-this.U[h-1],b);a.fillStyle=g===n?d:f;a.fillRect(this.U[e],0,c-this.U[e],b)}else a=this.canvas.getContext("2d"),b=this.canvas.clientHeight,c=this.canvas.clientWidth,d=a.createLinearGradient(0,0,0,b),d.addColorStop(0,"#c5e8eb"),d.addColorStop(1,"#ffffff"),a.fillStyle=d,a.fillRect(0,0,c,b);else if(0==this.a.eb.Ee){a=this.canvas.getContext("2d");b=this.canvas.clientHeight;
c=this.canvas.clientWidth;f=this.U.length-1;e=s;for(d=0;d<this.U.length;d++)e===n?(e=s,a.fillStyle=this.a.eb.mf):(e=n,a.fillStyle=this.a.eb.dg),0===d?a.fillRect(0,0,this.U[d],b):a.fillRect(this.U[d-1],0,this.U[d]-this.U[d-1],b);a.fillStyle=e===n?this.a.eb.mf:this.a.eb.dg;a.fillRect(this.U[f],0,c-this.U[f],b)}else a=this.canvas.getContext("2d"),b=this.canvas.clientHeight,c=this.canvas.clientWidth,a.fillStyle=this.a.eb.mf,a.fillRect(0,0,c,b);a=this.canvas.getContext("2d");a.lineWidth=this.a.Bd.vh;a.strokeStyle=
this.a.Bd.uh;b=this.canvas.height;c=this.canvas.width;a.beginPath();d=[1,1];f=new zj;for(e=0;e<this.Pb.length;e++)8<parseInt(this.Pb[e],10)&&(this.a.eb.Yc===n||this.a.eb.Yc===s&&1===this.a.Bd.gg?f.Md(a,0,this.Pb[e],c,this.Pb[e],d):(a.moveTo(0,this.Pb[e]),a.lineTo(c,this.Pb[e])));if(this.Od===o)if(3>this.U.length||3>this.Pb.length)e=0;else{var g=this.Pb[1]-this.Pb[0],g=Math.abs(g),e=this.U[this.U.length-2]-this.U[this.U.length-3],g=(0>=e?1:e)/(0>=g?1:g),i=h=0;1.8<g&&(i=Math.round(g),h=e/i);e=this.Od=
{Xc:h,am:i}}else e=this.Od;g=e;this.a.Bd.yh===s&&(g.Xc=0);for(var j,i=this.a.aa.ge.pf,e=0;e<this.U.length;e++)if(this.a.eb.Yc===n||this.a.eb.Yc===s&&1===this.a.Bd.gg)f.Md(a,this.U[e],0,this.U[e],b,d);else if(a.moveTo(this.U[e],0),a.lineTo(this.U[e],b),a.stroke(),0<g.Xc){if(0===e&&this.U[e]>g.Xc){h=this.U[e]-g.Xc;for(j=1;j<g.am;j++)0<h&&(a.moveTo(h,0),a.lineTo(h,b),a.stroke()),h-=g.Xc}if(e<this.U.length-1){if(j=(this.U[e+1]-this.U[e])/g.am,j<g.Xc&&(j=g.Xc),j>0.7*g.Xc)for(h=this.U[e]+j;h<this.U[e+1]&&
this.U[e+1]-h>i/2;)a.moveTo(h,0),a.lineTo(h,b),a.stroke(),h+=j}else if(j=g.Xc,j>0.7*g.Xc)for(h=this.U[e]+j;h<=c-i+1;)a.moveTo(h,0),a.lineTo(h,b),a.stroke(),h+=j}a.closePath()}};B("TRWebchart_Shared.ChartSchemeType",{Light:0,Dark:1});function pk(a,b){Ri.call(this,a);this.a=new ze;1===b&&(this.a=new Ba);this.Ka&&(this.I=new Ji(this.Ka,this.a));this.I&&(this.Pa=this.I.Kg());this.Tj=o;this.Pa&&(this.ve=new Mj(this.Pa,this.a));this.ym=o;this.Kd="left";this.D=o;this.la=Vb.get("en").zd;this.Ub=new Nb(this.la);this.Qa=[];this.Wp=new Oj(this);this.a.Ad.Ge.vj===n&&this.Bj(new $j);this.$b=o;this.xe=this.lb+"_marqueeGrp";this.P=this.je=o;this.Jn=15;this.Wa=this.ha=this.s=this.V=s;this.pb=0;this.qb=1;this.te=0;this.nc=s;this.jc=this.kc=this.je=
o}pk.prototype=new Ri("");z=pk.prototype;z.lh=function(a){this.l=a;qk(this).lh(this.l)};z.Tf=function(a){this.D=a;qk(this).Tf(this.D)};
function Ki(a){Ui(a);var b=a.I;a.ia=[];a.fb=a.ym||new ok({Ka:a.Pa,a:a.a});a.fb.a=a.a;a.l&&0<a.l.length&&9===a.l[0].d?(a.a.eb.Yc=s,a.a.eb.Ee=1,a.a.Bd.yh=s):a.a.eb.Yc===n&&(a.a.eb.Ee=0);a.fb.Ec();for(var c=0,d=0,f=0,e=0,g,h=a.wm?a.wm():o,i=0,j=s,m=0,p=a.l.length;m<p;m++){var j=s,q=a.l[m],r=a.ve.Nh({d:q.d,fl:q,s:a.s,ha:a.ha});r.Ec();var t=parseInt(a.nb.getItem(m),10),y=a.O.slice(t,a.O.length),t=q.c;if(!(-1<a.Up.indexOf(r.d))){var u;Ec(q)?(g=b.ad,u=g.Ej,g={Gd:c<u?c:c%u,Gj:Of(g,c,u)},u=g.Gd,c++):yc(q)?
Hc(Fc(q.k.MessageId))?u=m:(u=b.ad,y=u.fk+1,u=d>=u.Ej&&d<y?d:d%y+u.Ej,d++):K(q)?(g=b.ad,j=g.a.sb.rb.length,g={Gd:f>=g.fk&&f<j?f:f%j+g.fk,Gj:Of(g,f,j)},u=g.Gd,f++,j=n):wc(q)&&(g=b.ad,j=g.a.sb.rb.length,g={Gd:e>=g.Tm&&e<j?e:e%j+g.Tm,Gj:Of(g,e,j)},u=g.Gd,e++,j=n);y=b.ad.Ng(u,g?g.Gj:0);q.ao(u)}q&&t&&(t=t[0],-1<t.indexOf("LevelLineScalar")?y=a.a.hg.Ua:-1<t.indexOf("LevelLine")?(t=parseInt(t.substring(t.length-1),10),y=b.a.he.rb.length,y=t<y?b.a.he.rb[t]:b.a.he.rb[t%y]):-1<t.indexOf(Gf)&&(y=a.a.sb.yj));
y instanceof Array?(r.$e(y),q.$e(y)):(r.O=[y],q.$e([y]));r.zIndex!==l&&(r.canvas.style.zIndex=r.zIndex);r.Sf=m;if(j&&h&&q.d===ve.Histogram&&0!==q.interval){q=h;t={};j=l;for(j in q)t[j]=q[j];q=t;q.wq=i;++i;r.Ud=q}a.ia.push(r)}}
z.oh=function(){var a=this.I;Ki(this);for(var b=0,c=this.l.length;b<c;b++){var d=this.ia[b],f=this.l[b];if(this.nc){var e=Ei(a.Y);d.cc(e[0],e[1],a.Xb)}20!==d.d&&(d.Li(a.J.b),e=a.sk(b),d.j=e);if(this.P&&this.P.n.ba.sd&&Ec(f)){var e=new Date(this.P.n.ba.sd),f=e=new Date(bc(e,f.k.TimeZone)),e=l,g=this.P.n.Ma[0].ia,h=l;g[b]instanceof Og===s&&(h=g[b].f.ra,0===h.length&&k("There are no dates."),e&&h[0]?h[0]<e&&(e=h[0]):e=e=h[0]);0==f-e&&(d.$f=s)}else d.$f=n}this.nc?(a=this.ym,a.U=o,a.Pb=o):(a=a.rk(),b=
this.fb,c=a[1],b.U=a[0],b.Pb=c)};z.Nb=function(){Ti(this)===s&&k("Cannot proceed due to the following reason(s): "+this.Th);Si()||k("The browser does not support canvas.");this.I.dd(Oi(this),l);Df(this);this.oh();this.fb.S();for(var a=new Date,b=0;b<this.ia.length;b++)this.ia[b].S();this.Ae((new Date).getTime()-a.getTime());this.Pg()};z.sn=aa();function qk(a){a.Tj||(a.Tj=new Mi(a));return a.Tj}z.vf=function(){for(var a=0;a<this.Qa.length;a++)this.Qa[a].vf()};
z.Bj=function(a){for(var b=s,c=0;c<this.Qa.length;c++)if(this.Qa[c].name==a.name){b=n;break}b===s&&(this.Qa[this.Qa.length]=a)};z.Pg=function(){if(this.Qa&&0<this.Qa.length)for(var a=0;a<this.Qa.length;a++)this.Qa[a].wa&&"function"==typeof this.Qa[a].wa&&this.Qa[a].wa(this)};function Oi(a){return{la:a.la,Kd:a.Kd,D:a.D,fd:2===a.a.p.qc,s:a.s,ha:a.ha,kc:a.kc,te:a.te,O:a.O,l:a.l,V:a.V,Vc:a.Vc,pb:a.pb,qb:a.qb,jc:a.jc,Wa:a.Wa,zb:a.zb}}
z.Mg=function(){for(var a=[],b=0;b<this.l.length;++b){var c=this.l[b];a.push({Cn:c.Sa,color:c.O[0]})}return a};B("TRWebchart_Fin.TRFinancialChart.prototype.getLegendColors",pk.prototype.Mg);pk.prototype.wm=function(){if(!this.l||!this.l.length)return o;var a=0,b=[P.Daily,P.Weekly,P.Monthly,P.Quarterly,P.HalfYearly,P.Yearly],c=b.indexOf(P.Yearly),d;this.l.forEach(function(f){if((K(f)||wc(f))&&f.d===ve.Histogram)d=b.indexOf(f.interval),-1!==d&&(++a,d<c&&(c=d))});return 0===a?o:{Tr:a,Ir:b[c]}};function rk(){this.et=this.ct=this.n=this.nt=o;this.Cq=s;this.wt=new fi;this.la=Vb.get("en").zd;this.Ub=new Nb(this.la);this.ef=new ac}z=rk.prototype;z.jk=function(){if(this.n){var a=this.n.jk();this.Cq=a.Bq;return a}return o};z.Wh=function(){return this.n?this.n.Wh():o};z.ik=function(){return this.n?this.n.ik():o};z.El=function(){return this.n?this.n.El():o};z.qk=function(){return this.n?this.n.qk():o};
function vf(a,b,c){a.n||k("The key participant 'this.compositeChartLayout' is not present.");a=a.n;a.Rk&&a.Rk(b,c)};var Je;function Ie(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=zb(arguments,1),f;f=c;for(var e=0,g=0;g<d.length;g++)0<=tb(f,d[g])||(f.push(d[g]),e++);f=e==d.length;a.className=c.join(" ");return f};var sk=!Za||rb();!$a&&!Za||Za&&rb()||$a&&pb("1.9.1");Za&&pb("9");var tk={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function uk(a,b,c){return vk(document,arguments)}
function vk(a,b){var c=b[0],d=b[1];if(!sk&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Fa(d.name),'"');if(d.type){c.push(' type="',Fa(d.type),'"');var f={};ad(f,d);d=f;delete d.type}c.push(">");c=c.join("")}var e=a.createElement(c);d&&(ma(d)?e.className=d:ia(d)?Ie.apply(o,[e].concat(d)):Xc(d,function(a,b){"style"==b?e.style.cssText=a:"class"==b?e.className=a:"for"==b?e.htmlFor=a:b in tk?e.setAttribute(tk[b],a):0==b.lastIndexOf("aria-",0)?e.setAttribute(b,a):e[b]=a}));if(2<b.length){d=
function(b){b&&e.appendChild(ma(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++){var g=b[c];if(la(g)&&!(oa(g)&&0<g.nodeType)){var f=ub,h;a:{if((h=g)&&"number"==typeof h.length){if(oa(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if(na(h)){h="function"==typeof h.item;break a}}h=s}if(h)if(ia(g))g=xb(g);else{h=[];for(var i=0,j=g.length;i<j;i++)h[i]=g[i];g=h}f(g,d)}else d(g)}}return e}function Ke(a){this.zf=a||A.document||document}
function Me(a,b){var c;c=a.zf;var d=b&&"*"!=b?b.toUpperCase():"";c=c.querySelectorAll&&(c.querySelector&&(!ab||"CSS1Compat"==document.compatMode||pb("528")))&&d?c.querySelectorAll(d+""):c.getElementsByTagName(d||"*");return c}z=Ke.prototype;z.Fm=function(a,b,c){return vk(this.zf,arguments)};z.createElement=function(a){return this.zf.createElement(a)};z.createTextNode=function(a){return this.zf.createTextNode(a)};z.appendChild=function(a,b){a.appendChild(b)};
z.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function wk(a,b){ma(b)?xk(a,l,b):Xc(b,va(xk,a))}function xk(a,b,c){a.style[Na[c]||(Na[c]=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}))]=b}
function Le(a){Za?a.cssText=".chartDropDown .etk-dropdownlistitem {line-height: 17px; height: 17px; white-space: nowrap; padding: 0px 0px 0px 3px; font-family: Helvetica, Arial; font-size: 11px; }":a[ab?"innerText":"innerHTML"]=".chartDropDown .etk-dropdownlistitem {line-height: 17px; height: 17px; white-space: nowrap; padding: 0px 0px 0px 3px; font-family: Helvetica, Arial; font-size: 11px; }"};function yk(a){this.sc=a;this.Ao=s};var zk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Ak(){}za(Ak,nd);z=Ak.prototype;z.Im=n;z.Xk=o;z.addEventListener=function(a,b,c,d){be(this,a,b,c,d)};z.removeEventListener=function(a,b,c,d){de(this,a,b,c,d)};
z.dispatchEvent=function(a){var b=a.type||a,c=Zd;if(b in c){if(ma(a))a=new Vd(a,this);else if(a instanceof Vd)a.target=a.target||this;else{var d=a,a=new Vd(b,this);ad(a,d)}var d=1,f,c=c[b],b=n in c,e;if(b){f=[];for(e=this;e;e=e.Xk)f.push(e);e=c[n];e.yc=e.Eb;for(var g=f.length-1;!a.Nf&&0<=g&&e.yc;g--)a.currentTarget=f[g],d&=ge(e,f[g],a.type,n,a)&&a.Di!=s}if(s in c)if(e=c[s],e.yc=e.Eb,b)for(g=0;!a.Nf&&g<f.length&&e.yc;g++)a.currentTarget=f[g],d&=ge(e,f[g],a.type,s,a)&&a.Di!=s;else for(f=this;!a.Nf&&
f&&e.yc;f=f.Xk)a.currentTarget=f,d&=ge(e,f,a.type,s,a)&&a.Di!=s;a=Boolean(d)}else a=n;return a};z.cd=function(){Ak.ud.cd.call(this);var a,b=0,c=a==o;a=!!a;if(this==o)Xc($d,function(d){for(var f=d.length-1;0<=f;f--){var e=d[f];if(c||a==e.capture)ee(e.key),b++}});else{var d=pa(this);if($d[d])for(var d=$d[d],f=d.length-1;0<=f;f--){var e=d[f];if(c||a==e.capture)ee(e.key),b++}}this.Xk=o};var Bk=A.window;function Ck(){}Ck.prototype.vm=o;function Dk(a){var b;if(!(b=a.vm))b={},Ek(a)&&(b[0]=n,b[1]=n),b=a.vm=b;return b};var Fk;function Gk(){}za(Gk,Ck);function Hk(a){return(a=Ek(a))?new ActiveXObject(a):new XMLHttpRequest}Gk.prototype.yk=o;
function Ek(a){if(!a.yk&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.yk=d}catch(f){}}k(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.yk}Fk=new Gk;function Ik(a){this.headers=new id;this.bj=a||o}za(Ik,Ak);Ik.prototype.Zb=Id("goog.net.XhrIo");var Jk=/^https?:?$/i;z=Ik.prototype;z.ie=s;z.Ja=o;z.aj=o;z.Tg="";z.zn="";z.Sg=0;z.ue="";z.bk=s;z.ai=s;z.Ak=s;z.Ve=s;z.nh=0;z.ff=o;z.Zn="";z.Wr=s;
z.send=function(a,b,c,d){this.Ja&&k(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Tg=a;this.ue="";this.Sg=0;this.zn=b;this.bk=s;this.ie=n;this.Ja=this.bj?Hk(this.bj):Hk(Fk);this.aj=this.bj?Dk(this.bj):Dk(Fk);this.Ja.onreadystatechange=ua(this.Rn,this);try{Ad(this.Zb,Kk(this,"Opening Xhr")),this.Ak=n,this.Ja.open(b,a,n),this.Ak=s}catch(f){Ad(this.Zb,Kk(this,"Error opening Xhr: "+f.message));Lk(this,f);return}var a=c||"",e=this.headers.clone();d&&cd(d,
function(a,b){e.set(b,a)});if(d="POST"==b)d=!(":Content-Type"in e.nd);d&&e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");cd(e,function(a,b){this.Ja.setRequestHeader(b,a)},this);this.Zn&&(this.Ja.responseType=this.Zn);"withCredentials"in this.Ja&&(this.Ja.withCredentials=this.Wr);try{this.ff&&(Bk.clearTimeout(this.ff),this.ff=o),0<this.nh&&(Ad(this.Zb,Kk(this,"Will abort after "+this.nh+"ms if incomplete")),this.ff=Bk.setTimeout(ua(this.Sr,this),this.nh)),Ad(this.Zb,Kk(this,
"Sending request")),this.ai=n,this.Ja.send(a),this.ai=s}catch(g){Ad(this.Zb,Kk(this,"Send error: "+g.message)),Lk(this,g)}};z.Sr=function(){"undefined"!=typeof da&&this.Ja&&(this.ue="Timed out after "+this.nh+"ms, aborting",this.Sg=8,Ad(this.Zb,Kk(this,this.ue)),this.dispatchEvent("timeout"),this.abort(8))};function Lk(a,b){a.ie=s;a.Ja&&(a.Ve=n,a.Ja.abort(),a.Ve=s);a.ue=b;a.Sg=5;Mk(a);Nk(a)}function Mk(a){a.bk||(a.bk=n,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
z.abort=function(a){this.Ja&&this.ie&&(Ad(this.Zb,Kk(this,"Aborting")),this.ie=s,this.Ve=n,this.Ja.abort(),this.Ve=s,this.Sg=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nk(this))};z.cd=function(){this.Ja&&(this.ie&&(this.ie=s,this.Ve=n,this.Ja.abort(),this.Ve=s),Nk(this,n));Ik.ud.cd.call(this)};z.Rn=function(){!this.Ak&&!this.ai&&!this.Ve?this.br():Ok(this)};z.br=function(){Ok(this)};
function Ok(a){if(a.ie&&"undefined"!=typeof da)if(a.aj[1]&&4==Pk(a)&&2==Qk(a))Ad(a.Zb,Kk(a,"Local request error detected and ignored"));else if(a.ai&&4==Pk(a))Bk.setTimeout(ua(a.Rn,a),0);else if(a.dispatchEvent("readystatechange"),4==Pk(a)){Ad(a.Zb,Kk(a,"Request complete"));a.ie=s;if(Rk(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Sg=6;var b;try{b=2<Pk(a)?a.Ja.statusText:""}catch(c){Ad(a.Zb,"Can not get status: "+c.message),b=""}a.ue=b+" ["+Qk(a)+"]";Mk(a)}Nk(a)}}
function Nk(a,b){if(a.Ja){var c=a.Ja,d=a.aj[0]?fa:o;a.Ja=o;a.aj=o;a.ff&&(Bk.clearTimeout(a.ff),a.ff=o);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){a.Zb.log(vd,"Problem encountered resetting onreadystatechange: "+f.message,l)}}}
function Rk(a){var b=Qk(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:c=n;break a;default:c=s}if(!c){if(b=0===b)a=ma(a.Tg)?a.Tg.match(zk)[1]||o:a.Tg.Ps(),b=!(a?Jk.test(a):self.location?Jk.test(self.location.protocol):1);c=b}return c}function Pk(a){return a.Ja?a.Ja.readyState:0}function Qk(a){try{return 2<Pk(a)?a.Ja.status:-1}catch(b){return a.Zb.log(wd,"Can not get status: "+b.message,l),-1}}function Kk(a,b){return b+" ["+a.zn+" "+a.Tg+" "+Qk(a)+"]"};B("TRWebchart_Shared.FundamentalIntervalOption",{None:0,Annual:1,Interim:2,TTM:3});B("TRWebchart_Fin.Method",{GetTimeSeries:0,GetTimeSeriesMultiple:1,GetYieldSeries:2,GetYieldSeriesMultiple:3,CalculateTimeSeries:4,CalculateTimeSeriesMultiple:5,GetSnapshotData:6,GetSupportedChartCategories:7,GetAllAnalysisDetails:8,GetSupportedEconomicCategories:9});
function Sk(a){this.t=a.t||a.ricList;this.interval=a.interval;this.h=a.h||a.analysisInfoList;this.da=a.da||a.fundamentalList;this.sa=a.sa||a.economicList;this.Ze=a.Ze||a.resultTagList;this.bd=a.bd!==l?a.bd:a.currency;this.ob=a.ob!==l?a.ob:a.unit;this.be=a.be!==l?a.be:a.snsId;this.Sc=a.Sc||a.startDate;this.Hc=a.Hc||a.endDate;this.Ue=a.Ue||a.hostName;this.Da=a.Da||a.fidListHash;this.Hd=a.Hd||31;this.De=a.De;this.kf=a.kf;this.Cl="1";this.lr="true"}B("TRWebchart_Fin.DataRequestParam",Sk);
function Tk(a){this.X=a;a=this.Mn={};a[1]=this.sq;a[3]=this.tq;a[5]=this.$m;a[6]=this.rq}B("TRWebchart_Fin.DataRequester",Tk);z=Tk.prototype;z.$g=function(a){a=a&&a.tk!==l?a.tk():"Unknown error";window.console.log("Error has occurred from TAService request: "+a)};
function Uk(a,b){var c="",d="";if(a.X){var f=a.X.Ze;if(f){var e=f.RequestKeys,g=f.Responses;if(e&&g&&e.length&&g.length&&e.length===g.length)for(var h=0,i=e.length;h<i;++h)if(e[h]===b){c=g[h].Tag||"";d=f.TransactIDs[h]||"";break}}}d||(d=new Date,d=d.getFullYear()+"_"+(d.getMonth()+1)+"_"+d.getDate()+"_"+d.getHours()+"_"+d.getMinutes()+"_"+d.getSeconds()+"_"+d.getMilliseconds());return{Yf:c,Zf:d+"_ajax"}}
function Vk(a){(a=[l,[2,1],[2,1],[2,5],[2,10],[2,30],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1]][a.X.interval])||k("Interval not supported");return{interval:a[0],si:a[1]}}z.sq=function(){return[].concat.apply([],this.X.t.map(this.hk.bind(this)))};
z.tq=function(){for(var a=[],b=0;b<this.X.t.length;b++){var c=Uk(this,this.X.t[b]),d=this.X.Da[this.X.t[b]]||[""],f={__type:"YieldRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",RIC:this.X.t[b],YieldType:d[0],ColumnMask:"All",Date:o},e="",e=d[0]?"FID|"+this.X.t[b]+"|"+d[0]:this.X.t[b];a.push({AnalysisName:"",AnalysisParams:[],MessageId:e,RequestInfos:[f],TransactionId:c.Zf,Tag:c.Yf})}return a};
z.hk=function(a){for(var b=[],c=this.X.Da[a]||[""],d=Vk(this),f=0,e=c.length;f<e;++f){var g=c[f],h=g?"FID|"+a+"|"+g:a,i=Uk(this,h);b.push({AnalysisName:"",AnalysisParams:[],RequestInfos:[{__type:"TSRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",RIC:a,Interval:d.interval,Field:g,TradePeriod:this.X.Cl,Currency:this.X.bd,ColumnMask:this.X.Hd,Unit:this.X.ob,TimeZone:"",IntervalMultiplier:d.si,RemoveGaps:!!this.X.lr,TransactionId:i.Zf,Tag:i.Yf}],MessageId:h,TransactionId:i.Zf,
Tag:i.Yf})}return b};z.$m=function(){for(var a=[],b=this.X.t[0],a=a.concat(this.hk(b)),c=this.X.h,d=0;c&&d<c.length;d++){var f=this.Zm(b,c[d],d);f&&a.push(f)}c=1;for(d=this.X.t.length;c<d;c++)b=this.X.t[c],b=this.hk(b),a=a.concat(b);return a};
z.Zm=function(a,b,c){var d=this.X.Da[a]||[""],f=Vk(this),e=[],g={__type:"TSRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",Interval:f.interval,RIC:a,Field:d[0],TradePeriod:this.X.Cl,IntervalMultiplier:f.si,Currency:this.X.bd,Unit:this.X.ob,TimeZone:""};e.push(g);if(-1<[11,13].indexOf(b.analysisType))return o;var h=g,g=b.analysisType,h=12==g?1:17==g?3:19==g||18==g?2:16==g?b.analysisRICList.length:20==g?3:0;if(0<h){g=b.analysisRICList;if(16===b.analysisType||20===b.analysisType||
18===b.analysisType||19===b.analysisType||17===b.analysisType)g=b.analysisRICList,e=[];if(g&&g.length>=h-1)for(var i=0;i<g.length;i++)h={__type:"TSRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",Interval:f.interval,RIC:g[i],Field:d[0],TradePeriod:this.X.Cl,IntervalMultiplier:f.si,Currency:this.X.bd,Unit:this.X.ob,TimeZone:""},e.push(h),17===b.analysisType&&(3===g.length&&1===i)&&e.push(h)}for(var d=hc[b.analysisType],g=b.analysisParamList,h=b.analysisType,i=gc.AnalysisParamStringType,
j=gc.AnalysisParamIntType,f=[],m=0;m<g.length;m++)f[f.length]=isNaN(g[m].value)?{__type:i,Name:g[m].name,Value:g[m].value}:g[m].__type?{__type:g[m].__type,Name:g[m].name,Value:g[m].value}:{__type:j,Name:g[m].name,Value:g[m].value};c="AnalysisType:"+h+":"+c;g=Uk(this,c);e={AnalysisName:d,RequestInfos:e,AnalysisParams:f,AnalysisOptions:b.AnalysisOptions,MessageId:c,TransactionId:g.Zf,Tag:g.Yf};if(14==b.analysisType||15==b.analysisType){c=[];b=b.FundamentalFormula;for(d=0;d<b.length;d++)c.push({__type:"FundamentalRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",
RIC:a,Interval:["Annual","Interim"].indexOf(b[d].Interval)+1,Formula:{Name:b[d].Name,ID:b[d].ID},Unit:this.X.ob,TimeZone:"",MessageId:"Fundamental|"+a+"|"+b[d].ID,StartDate:this.X.Sc?"/Date("+this.X.Sc.getTime()+")/":l,EndDate:this.X.Hc?"/Date("+this.X.Hc.getTime()+")/":l});e.RequestInfos=e.RequestInfos.concat(c)}return e};Tk.prototype.getCalculateAnalysisMessageForRIC=Tk.prototype.Zm;
Tk.prototype.rq=function(){var a;a=this.X;for(var b=[],c=this.X.t,d=a.da,f=0,e=c.length;f<e;f++)for(var g=c[f],h=d.map(function(a){return a.ce.be}),i=d.map(function(a){return a.ce.pt}),j=d.map(function(a){return a.ce.Tn}),m=d.map(function(a){return a.ce.er}),p=0,q=h.length;p<q;p++){var r=h[p],t=m[p],y="Fundamental|"+g+"|"+r,u=Uk(this,y);b.push({AnalysisName:"",RequestInfos:[{__type:"FundamentalRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",RIC:g,Interval:"Unknown"===
j[p]?["Annual","Interim"].indexOf(t)+1:0,Formula:{Name:i[p],ID:r},Currency:a.bd,Unit:a.ob,TimeZone:"",UUID:Wk,StartDate:a.Sc?"/Date("+a.Sc.getTime()+")/":l,EndDate:a.Hc?"/Date("+a.Hc.getTime()+")/":l}],AnalysisParams:[],UUID:Wk,MessageId:y,TransactionId:u.Zf,Tag:u.Yf})}a=b;c=this.X;b=[];e=c.sa;d=e.map(function(a){return a.EconomicRic});f=e.map(function(a){return a.EconomicFieldId});e.map(function(a){return a.EconomicFieldName});e=e.map(function(a){return a.CountryName});g=0;for(h=d.length;g<h;g++)i=
d[g],m=f[g],p=e[g],j=Vk(this),m="Economic|"+i+"|"+m+"|"+p,p=Uk(this,m),b.push({AnalysisName:"",RequestInfos:[{__type:"EconomicsRequest:http://www.thomsonreuters.com/ns/2012/01/01/webservices/TAService_1/",RIC:i,Currency:c.bd,Unit:c.ob,TimeZone:"",Field:"",Interval:j.interval,IntervalMultiplier:j.si,StartDate:c.Sc?"/Date("+c.Sc.getTime()+")/":l,EndDate:c.Hc?"/Date("+c.Hc.getTime()+")/":l}],AnalysisParams:[],MessageId:m,UUID:Wk,TransactionId:p.Zf,Tag:p.Yf});if(b&&0<b.length){a||(a=[]);for(c=0;c<b.length;c++)a.push(b[c])}return this.$m().concat(a)};
Tk.prototype.Yn=function(a,b,c,d){var f=Xk+"/json/",e;switch(b){case 1:case 3:case 5:case 6:f=Xk+"/json2/CalculateAllData";e={messages:a};break;case 8:f+="GetAllAnalysisDetails";break;case 7:f=Yk+"/json/GetSupportedChartCategories";break;case 9:f=Yk+"/json/GetSupportedEconomicCategories";break;default:k("The method is not implemented")}var f=f+(this.X&&this.X.Ue?"?srv="+this.X.Ue:""),g=this,h=new Ik;be(h,"complete",function(){if(Rk(h)){var a=function(a){return new Date(a.getTime()+6E4*a.getTimezoneOffset())},
b;try{b=h.Ja?h.Ja.responseText:""}catch(f){Ad(h.Zb,"Can not get responseText: "+f.message),b=""}b=function(b){try{var c=b.replace(RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)\\)\\\\/\\"',"g"),"$1"+a+"(new Date($2))");return c?eval("("+c+")"):{}}catch(d){k("Received invalid JSON")}}(b);c(b)}else Qk(h)&&(d?d:g.$g)(ma(h.ue)?h.ue:String(h.ue))});h.nh=Math.max(0,6E4);h.send(f,"POST",window.JSON.stringify(e),{"Content-Type":"text/json",reutersuuid:Wk})};Tk.prototype.requestData=Tk.prototype.Yn;var Xk="/TA/TAService.svc";
Tk.getTAServicePath=function(){return Xk};Tk.setTAServicePath=function(a){Xk=a};var Yk="/ChartTemplSvc/ChartTemplSvc.svc";Tk.getChartServicePath=function(){return Yk};Tk.setChartServicePath=function(a){Yk=a};var Wk="PADACT-002";Tk.getUUID=function(){return Wk};Tk.setUUID=function(a){Wk=a};function Zk(a,b,c){Ef.call(this,a,n);this.Nk=this.lb+"_dateMarker";this.scheme=b;this.la=Vb.get("en").zd;this.Ub=new Nb(this.la);this.cb=new N;this.Jl=c;this.ef=new ac;this.F=new J}Zk.prototype=new Ef("",s);
Zk.prototype.Fl=function(a){this.scheme=a;var a=this.scheme.fg,b=document.getElementById(this.Nk);b.style.backgroundColor=a.Ba;b.style.border=a.fj;b.style.color=a.Ca;b.style.background=Za?"green":"-webkit-gradient(linear, left top, left bottom, from("+a.Ba.Hb+"), color-stop(0.35, "+a.Ba.fc+"), to("+a.Ba.gc+"))"};
Zk.prototype.Nb=function(){(this.ab=document.getElementById(this.lb))||k("The incoming id '"+this.lb+"' cannot be resolved into a valid DOM object.");var a=this.scheme.fg,a="<div id='"+this.Nk+"' style=\"position:absolute;text-align:center;margin:0px;font-weight:"+a.u+";color:"+a.Ca+";font-family:"+a.m+";font-size:"+a.o+";display:inline-block;border-radius: 2px;border:"+a.fj+";height:"+this.ab.clientHeight+"px;width:"+this.ab.clientWidth+"px;background:-webkit-gradient(linear, left top, left bottom, from("+
a.Ba.Hb+"), color-stop(0.4, "+a.Ba.fc+"), to("+a.Ba.gc+'));white-space:nowrap;" >';this.ab.innerHTML=a+"&nbsp;&nbsp;</div>"};Zk.prototype.Lk=function(a){var b=this.scheme.fg;return this.cb.pe("font-family:"+b.m+";font-size:"+b.o+";font-weight:"+b.u+";",a)};
function $k(a,b,c,d,f){var e=document.getElementById(a.Nk);e.style.visibility="visible";if(b===o)e.style.visibility="collapse";else if(e!==o){for(var g="",h=Math.abs(b.x-c[0].C),i=!f||10>h?0:o,j=1;j<c.length;++j)Math.abs(b.x-c[j].C)<h&&(h=Math.abs(b.x-c[j].C),i=j);i===o||f&&10<Math.abs(b.x-c[i].C)?e.style.visibility="collapse":(b=c[i].Oe,h=c[i].Al,b&&(f?(g=b/30,1>g?g=b+" Day":12>g?g=(0===g%1?g:g.toFixed(2))+" Month":(g/=12,g=(0===g%1?g:g.toFixed(2))+" Year")):(f=b,d?(f=new Date(b.valueOf()),bc(f,
h),g=a.Ub.ea(f),d=f.getHours(),b=f.getMinutes(),f=f.getSeconds(),g=g+" "+(9>=d?"0"+d:d)+":"+(9>=b?"0"+b:b)+(":"+(10>f?"0"+f:f))):g=a.Ub.ea(f))),e.innerHTML=g,g=a.Lk(g),c=c[i].C,0<c-g/2?(i=parseInt(e.style.um,10),i=!isNaN(i)?i:0,e.style.left=c+g/2+i>a.Jl?a.Jl-g-i+"px":c-g/2+"px"):e.style.left="0px",e.style.width=g+"px")}};function al(){this.Fg=this.Bn=this.og=this.Jh=0;this.Ws=l};function bl(a,b){this.r=a;this.xo=b;this.r.style.position="static";this.ba=o;this.pi=80;this.Um=38;this.Kb="";this.Kh=o;this.Zp="";this.ii=[];this.Ma=[];this.Oj=this.Mf=this.pg=this.Je=o;this.Vf=this.mn=s;this.Ke="";this.Yp=new yk(this);this.Mc=new Ba;this.F=new J;this.af=s;this.jr=this.Or=0;this.lo=this.ot=o;this.P=new rk;this.P.n=this;this.Vi=s;this.Vj=o;this.Mr=n;this.Xg=this.Zd=o;this.Yr=1;this.ft=this.Ks=this.qt=this.Me=this.Vk=this.$q=this.dr=this.Zq=this.Sk=this.Tk=this.Rk=this.Uk=this.cr=
this.Yq=this.ar=o;this.io=n;this.zb=0;this.Fq=this.Rq=s;this.je=o;this.kc=new Ae;this.jc=new Ae;this.$c={};this.cb=new N}bl.prototype.sl=v("af");bl.prototype.ae=v("zb");B("TRWebchart_Fin.CompositeChartLayout.prototype.setMarqueeDisplayMode",bl.prototype.ae);z=bl.prototype;z.jl=v("io");z.Wh=x("kc");z.ik=x("jc");z.qk=function(){return this.ba.t};z.Hi=function(a){this.fh=a=parseInt(a,10);this.Mc=new Ba};function wf(a,b){a.ba&&(a.Vi=n,a.ba.Tb=b,a.$c.CustomRange=b,a.Me=o,a.Rq=n,cl(a,a.ba,b))}
z.dd=function(a,b){this.Vi=s;this.Me||(this.Me=[this.r.clientWidth,this.r.clientHeight]);this.af===n&&9===a.Fa[0].d&&(this.af=s);cl(this,a,b)};
function cl(a,b,c){if(b){a.Vj=c;a.mn=s;for(var d=0,f=[],d=0;d<a.Ma.length;d++)f.push(a.Ma[d].$b),a.Ma[d].vf(),delete a.Ma[d];a.ii.length=0;a.Ma.length=0;a.Kh&&a.Kh.parentElement&&a.r.removeChild(a.Kh);if(a.Vi===s||a.ba===o)a.ba=b;a.Me||(a.Me=[a.r.clientWidth,a.r.clientHeight]);b=a.Me[0];b<a.pi&&(b=a.pi);d=a.Me[1];d-=a.af?a.Or+a.jr:0;d<a.pi&&(d=a.pi);for(var e=d-a.Um,g=0,h=0,i=0,g=0;g<a.ba.mg.length;g++)i=a.ba.mg[g],isNaN(i)===n&&k("The weight array must all contain numbers."),i=parseInt(i,10),h+=
i;for(var j=[],g=0;g<a.ba.mg.length;g++)i=a.ba.mg[g]*e/h,1>i&&(i=1),j[j.length]=Math.round(i);b-=2;d-=2;""===a.Kb&&(a.Kb="CompositeChart_"+a.F.Vh());e=document.createDocumentFragment();e.appendChild(document.createElement("div"));e.firstChild.innerHTML='<div id="'+a.Kb+'"  style="border:1px solid '+a.Mc.aa.G+";border-radius:2px;background-color:"+a.Mc.aa.lf+";position:relative;visibility:hidden;padding:0px;margin:0px;font-size:1px;width:"+b+"px;height:"+d+"px;overflow:hidden;"+a.Zp+'" ></div>';a.lo?
a.r.insertBefore(e.firstChild.firstChild,a.lo):a.r.appendChild(e.firstChild.firstChild);e=document.getElementById(a.Kb);a.Kh=e;for(var m,g=j.length-1,p=h=0,d=p=0;d<j.length;d++){m=i=a.Kb+"_"+d;p=document.createElement("DIV");p.setAttribute("id",m);p.style.overflow="hidden";p.style.position="absolute";m=p;a.ii[a.ii.length]=m;e.appendChild(m);m.style.left="0px";m.style.width=b+"px";p=parseInt(j[d],10);p=d===g?p+a.Um:p;i=new pk(i,a.fh);0<f.length&&d<f.length&&(i.$b=f[d]);i.qe=a.qe;i.je=a.je;i.kc=a.kc;
i.jc=a.jc;i.P=a.P;i.Wa=a.Wa;m.style.height=p+"px";m.style.top=h+"px";0<d&&(m.style.borderTop=i.a.jg.hc+" solid "+i.a.jg.Ua);h+=p;h-=1;i.lh(a.ba.Fa[d]);i.h=a.ba.h;m=i.l[0].c[0];9===a.ba.Fa[d][0].d&&(a.mn=n);i.Tf(c);a.ba.Jb&&d<a.ba.Jb.length&&i.I&&i.I.Uf(a.ba.Jb[d]);p=qk(i);if(a.Vf===s||!a.Ke||0>=a.Ke.length)a.Ke=o,!a.af&&a.io&&(a.Ke="&nbsp;");d<g?Qi(p,d,s,a.Ke):Qi(p,d,n,a.Ke);i.ae(a.zb);p=n;m===Gf&&(p=s);i.Ki(p);m=s;for(p=0;p<i.l.length;p++)if(K(i.l[p])||wc(i.l[p])){m=n;break}i.a&&(i.a.H.kb.Oa=m?1:
0);a.Ma[a.Ma.length]=i}}}z.Be=function(a,b){this.Ke=a;this.Vf=b};
z.Qe=function(a){var b,c,d,f,e,g,h;if(this.Ma&&!(1>this.Ma.length)&&this.ba){this.Je||(this.Je=new al);var i=this.Je,j=this.ba;i.vc=this.Ma;i.ba=j;var j=!!a,m=0,p,a=i.vc.length-1,q=o;g=o;if(!j){m=[];for(p=g=p=0;p<i.ba.Fa.length;p++)for(g=0;g<i.ba.Fa[p].length;g++)m[m.length]=i.ba.Fa[p][g];g=m}for(m=a;0<=m;m--)p=qk(i.vc[m]),m===a?(Ni(p,o,g),q=p.Zi):Ni(p,q,o);g=9E12;p=0;var r=o;b=0;h=[];var t;for(t=m=0;t<i.vc.length;t++)r=b=qk(i.vc[t]),e=r.I,c=Bi(e.Y),d=Ci(e.Y,0),f=Ci(e.Y,2),b=document.getElementById(e.Y.Kb),
e=document.getElementById(e.Y.le),d=d.clientWidth+f.clientWidth,f=c.offsetTop,"visible"==e.style.visibility&&0==r.I.a.p.Oa&&(f=e.offsetTop),r={Sp:c.offsetLeft,Tp:f,tm:c.clientWidth,Hs:c.clientHeight,mr:d,xq:b.clientWidth},h[h.length]=r,0===t&&(m=r.Tp),b=parseInt(r.tm,10),b<g&&(g=b),b=parseInt(r.Sp,10),b>p&&(p=b);for(t=0;t<h.length;t++)r=h[t],b=parseInt(r.tm,10),c=parseInt(r.mr,10),r=parseInt(r.xq,10),p+b+c>r&&(r=p+b+c-r,b-=r,b<g&&(g=b));h=p;i.Jh=h;i.og=g;i.Fg=m;for(m=0;m<i.vc.length;m++)p=qk(i.vc[m]),
p.tg(h,g);if(!j&&1<q.b.L-i.og){j=p=qk(i.vc[a]);j.I.J.b.gf(i.og);j.I.J.Vb(s);j.I.J.Af();j=j.I.b;for(m=0;m<i.vc.length;m++)m!==a&&(p=qk(i.vc[m]),p.Li(j))}j=o;for(m=0;m<i.vc.length;m++)p=qk(i.vc[m]),0===m?(Pi(p,o),j=p.Od):Pi(p,j);p=qk(i.vc[a]);i.Bn=p.Zh();this.pg={Jh:this.Je.Jh,og:this.Je.og,Il:this.Je.Bn,Fg:this.Je.Fg};document.getElementById(this.Kb).style.visibility="visible";this.Mc.fg.jm===n&&(this.Mr===n?(i=this.Kb+"_moveDateMarker",a=Di(this.Ma[this.Ma.length-1].I.Y),this.Xg?document.getElementById(i)||
(a.appendChild(this.Xg),this.Zd.Jl=a.clientWidth,this.Zd.Fl(this.Mc)):(j=document.createElement("div"),j.setAttribute("id",i),j.style.margin="0px",j.style.height="16px",j.style.um="2px",j.style.position="absolute",j.style.top=this.Yr+"px",j.style.left="0px",j.style.visibility="hidden",j.style.zIndex=60,this.Xg=j,a.appendChild(j),this.Zd=new Zk(i,this.Mc,a.clientWidth),this.Zd.Nb())):this.Xg&&(this.Xg.style.visibility="hidden"));if(this.Mc.Ad.gj.rm===n||this.Mc.Ad.gj.sm===n){i=this.Mc;a=document.getElementById(this.Kb);
if(!(j=this.Mf))j=uk("span",{}),wk(j,{position:"absolute","z-index":100});this.Mf=j;j=parseInt(this.pg.Fg,10);wk(this.Mf,{left:this.pg.Jh+"px",top:j+"px",height:a.clientHeight-parseInt(this.pg.Il,10)-j+"px",width:"100%"});a.appendChild(this.Mf);0===i.aa.eg&&!this.Wj&&(this.Wj=new Mg(this));if(this.Mf&&!this.xn){this.Oj=new Zi(this.Mf,ba(n),this.Wj);this.Oj.Qh();if(0===i.aa.eg){var y=this;this.Oj.kr(function(a){var b=y.Yp,c=0,d,f;if(a.x<=-1||a.y<=-1){for(c=0;c<b.sc.Ma.length;c++)(f=b.sc.Ma[c].$b)&&
f.ph(o);b.sc.Zd&&$k(b.sc.Zd,o)}else{var e=a.addition,g,h;if(e!==o&&e.length>0){h=e.length;var i;i=s;for(d=0;d<e.length;++d){c=Math.abs(a.x-e[d].C);if(c<10){i=n;break}}for(c=0;c<h;c++)if(e[c].bf>=0&&e[c].bf<b.sc.Ma.length){d=b.sc.Ma[e[c].bf].I;f=b.sc.Ma[e[c].bf].$b;a:{g=b.sc.Ma[e[c].bf].l;for(var j=0;j<g.length;j++)if(g[j].Sa===e[c].dh){g=g[j].k?g[j].k.TimeZone:o;break a}g=o}e[c].Al=g;if(f){e[c].d!==9||Math.abs(a.x-e[c].C)<10?f.ph(e[c].dh,e[c].bc,e[c].value,e[c].Qb,e[c].d===9?n:s):i&&f.ph(e[c].dh,
e[c].bc,NaN,e[c].Qb,e[c].d===9?n:s);if(d&&c===h-1&&b.sc.Zd)if(b.sc.Fq===s){f=d.J.b.ib;d=d.Gk;if(g===o&&f===n&&b.Ao===s){b.Ao=n;window.console.log("Warning! cannot obtain the timeZone object.")}e=e.filter(function(a){return!a.Ud});$k(b.sc.Zd,a,e,f,d)}else $k(b.sc.Zd,o)}}}}})}this.xn=n}}this.Vi=s}};z.Ii=v("Wa");B("TRWebchart_Fin.CompositeChartLayout.prototype.setExpandDatesEnabled",bl.prototype.Ii);bl.prototype.El=function(){this.Vk&&this.Vk()};
bl.prototype.jk=function(){if(this.ba){var a=s;this.ba.Tb&&(a=n);return{dt:this.ba.Ai,Cs:this.Vj,Bq:a,interval:this.ba.interval}}return o};bl.prototype.xn=s;bl.prototype.Wj=o;function dl(a,b,c,d){this.lb=a;this.r=o;this.hn=b;this.kn=c;this.jn=d;this.Ya=[];this.Uh=2;this.Qf=this.Mj=s}B("TRWebchart_Shared.ChartResizer",dl);
dl.prototype.wa=function(){(this.r=document.getElementById(this.lb))||k("The container id being passed in is not valid: "+this.lb);for(var a=0;4>a;a++){var b=this.Ya,c=this.Ya.length,d=this.lb+"_"+a,f=document.createElement("DIV");f.id=d;f.style.fontSize="1px";f.style.border="0px";f.style.backgroundColor="rgb(160, 160, 160)";f.style.width="2px";f.style.display="none";f.style.position="absolute";f.style.zIndex=140;document.body.appendChild(f);b[c]=f}if(this.r){var e=this;be(document.body,Ud,function(a){e.Qf===
n&&(el(e,s),window.getSelection().removeAllRanges(),e.jn&&e.jn(a));e.Qf=s},s);be(document.body,Td,function(a){var b=e.Rd(),c;c=a.yi-b.left+window.pageXOffset;var a=a.zi-b.top+window.pageYOffset,b=e.r.clientWidth,d=e.r.clientHeight;if(e.Qf===n){b=e.Rd();c+=1;50>c&&(c=50);a+=1;50>a&&(a=50);fl(e,b,c,a);for(b=0;b<e.Ya.length;b++)e.Ya[b].style.display="block";window.getSelection().removeAllRanges();b={};b.width=c;b.height=a;e.kn&&e.kn(b)}else c>=b-50&&a>=d-50&&c<=b&&a<=d?el(e,n):el(e,s)},s);be(this.r,
Sd,function(a){e.Mj===n&&-1===a.target.parentElement.className.indexOf("etk-control")?(e.Qf=n,e.hn&&e.hn(a)):e.Qf=s},s);be(this.r,"mouseout",function(){e.Qf===s&&el(e,s)},s)}};dl.prototype.initialize=dl.prototype.wa;
function fl(a,b,c,d){a.Ya[0].style.top=b.top+"px";a.Ya[0].style.left=b.left+"px";a.Ya[0].style.height=d+"px";a.Ya[0].style.width=a.Uh+"px";a.Ya[1].style.top=b.top+"px";a.Ya[1].style.left=b.left+"px";a.Ya[1].style.height=a.Uh+"px";a.Ya[1].style.width=c+"px";a.Ya[2].style.top=b.top+"px";a.Ya[2].style.left=b.left+c+"px";a.Ya[2].style.height=d+"px";a.Ya[2].style.width=a.Uh+"px";a.Ya[3].style.top=b.top+d+"px";a.Ya[3].style.left=b.left+"px";a.Ya[3].style.height=a.Uh+"px";a.Ya[3].style.width=c+"px"}
function el(a,b){var c=0,d="none";b===n?(d="block",fl(a,a.Rd(),a.r.clientWidth,a.r.clientHeight),a.Mj=n):a.Mj=s;for(c=0;c<a.Ya.length;c++)a.Ya[c].style.display=d}dl.prototype.Rd=function(){if(this.r){for(var a=this.r,b=0,c=0;a&&"BODY"!=a.tagName;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{top:b,left:c}}};function gl(){this.fa=o}B("TRWebchart_Fin.IntervalAndDateRangeValidator",gl);
function jl(a){a.fa===o&&(a.fa={},a.fa[1]=[3,2,4,5],a.fa[2]=[3,2,4,5],a.fa[3]=[3,4,5,6],a.fa[4]=[3,4,5,6],a.fa[5]=[6,3,5,4],a.fa[6]=[6,3,5,4],a.fa[7]=[6,3,5,4],a.fa[8]=[6,5,4],a.fa[9]=[6,5,4],a.fa[10]=[6,4,5,7],a.fa[11]=[6,5,7],a.fa[12]=[7,6,5],a.fa[13]=[7,5,6],a.fa[14]=[7,6,8],a.fa[16]=[7,6,8],a.fa[17]=[7,6,8],a.fa[18]=[7,6,8],a.fa[0]=[7,6,8],a.fa[19]=[7,8,9],a.fa[20]=[7,8,9],a.fa[21]=[7,8,9],a.fa[22]=[7,8,9],a.fa[23]=[7,8,9],a.fa[24]=[7,8,9],a.fa[25]=[9,8],a.fa[26]=[9,8],a.fa[27]=[9,8,10],a.fa[28]=
[9,8,10,11],a.fa[29]=[9,8,10,11],a.fa[30]=[9,10,11],a.fa[31]=[9,10,11],a.fa[32]=[7,8]);return a.fa}gl.prototype.Wn=function(a,b){var c=jl(this)[a];if(c)for(var d=0;d<c.length;d++)if(c[d]===b)return n;return s};gl.prototype.rangeIntervalCompatible=gl.prototype.Wn;gl.prototype.bn=function(a){var b=jl(this),c,d,f;for(c in b){f=b[c];for(d=0;d<f.length;d++)if(f[d]===a)return parseInt(c,10)}return 0};gl.prototype.getDefaultCompatiblePredefinedRange=gl.prototype.bn;
gl.prototype.an=function(a){return(a=jl(this)[a])?a[0]:7};gl.prototype.getDefaultCompatibleIntervalCode=gl.prototype.an;gl.prototype.mq=function(a){a=Math.floor((a.end-a.start)/864E5);return 2>=a?3:4>=a?4:8>=a?5:20>=a?6:1825>=a?7:5475>=a?8:9};gl.prototype.getDefaultCompatibleIntervalCodeByDateRange=gl.prototype.mq;function kl(){this.F=new J}function ll(a,b,c){var d=o,d=a.F.e("Date",c[0].k);d===o&&k("Cannot find date column from the slider chart.");return a.F.Fd(b,d)}kl.prototype.Sd=function(a){var b=o,b=this.F.e("Date",a[0].k),a=new Date((!b||1>b.length?new Date:b[b.length-1]).valueOf());a.setHours(23,59,59,999);return a};var ml={"SMA-1":{ya:1,oa:0,za:n,ca:"SMA"},"maOut1-2":{ya:2,oa:0,za:n,ca:"maOut1"},"maOut2-2":{ya:2,oa:0,za:n,ca:"maOut2"},"maOut1-3":{ya:3,oa:0,za:n,ca:"maOut1"},"maOut2-3":{ya:3,oa:0,za:n,ca:"maOut2"},"maOut3-3":{ya:3,oa:0,za:n,ca:"maOut3"},"UPPER-4":{ya:4,oa:0,za:n,ca:"UPPER"},"MIDDLE-4":{ya:4,oa:0,za:n,ca:"MIDDLE"},"LOWER-4":{ya:4,oa:0,za:n,ca:"LOWER"},"RSI-5":{ya:5,oa:0,za:s,ca:"RSI"},"percentK-6":{ya:6,oa:0,za:n,ca:"percentK"},"percentD-6":{ya:6,oa:0,za:n,ca:"percentD"},"percentK-7":{ya:7,oa:0,
za:n,ca:"percentK"},"percentD-7":{ya:7,oa:0,za:n,ca:"percentD"},"MACD-8":{ya:8,oa:0,za:n,ca:"MACD"},"MACDSignal-8":{ya:8,oa:0,za:n,ca:"MACDSignal"},"MACDForest-8":{ya:8,oa:6,za:n,ca:"MACDForest"},"VolCToC-9":{ya:9,oa:0,za:s,ca:"VolCToC"},"correlation-12":{ya:12,oa:0,za:s,ca:"Correlation"},"Ratio-14":{ya:14,oa:0,za:s,ca:"P/E Ratio"},"Ratio-15":{ya:15,oa:0,za:s,ca:"P/B Ratio"},"CrackSp-16":{ya:16,oa:0,za:s,ca:"Crack Spread"},"BtfySp-17":{ya:17,oa:0,za:s,ca:"Butterfly Spread"},"Ratio-18":{ya:18,oa:0,
za:s,ca:"Ratio"},"Spread-19":{ya:19,oa:0,za:s,ca:"Spread"},"CrushSp-20":{ya:20,oa:0,za:s,ca:"Crush Spread"}};function V(a){this.onDataReady=o;this.$d=[];this.scheme=a;this.ma=[];this.We=[];this.Kf=[];this.Fj=[];this.Fa=[];this.Ss=s;this.Vl=0;this.Nr=this.scheme?!!this.scheme.hg.km:s;this.af=s;this.Sh=this.Pi=o;this.Ae=aa();this.Tb=this.Jb=this.Wc=o;this.F=new J;this.Td=s;this.Ue=o;this.Pc=[];this.d=0;this.interval=7;this.Uc=0;this.zg={};this.Hg={};this.Da={};this.t=[];this.Xn=100;this.sd=o;this.Ls=s;this.eh=[];this.ds="primaryYAsis";this.Hd=31;this.De=o;this.kf="";this.xt={};if(Object.prototype.__defineGetter__&&
Object.prototype.__defineSetter__&&(this.hasOwnProperty("chartType")||(this.__defineGetter__("chartType",x("d")),this.__defineSetter__("chartType",v("d"))),this.hasOwnProperty("fidListHash")||(this.__defineGetter__("fidListHash",x("Da")),this.__defineSetter__("fidListHash",v("Da"))),this.hasOwnProperty("hasDataComeBack")||(this.__defineGetter__("hasDataComeBack",x("Td")),this.__defineSetter__("hasDataComeBack",v("Td"))),this.hasOwnProperty("interval")||(this.__defineGetter__("interval",x("interval")),
this.__defineSetter__("interval",v("interval"))),this.hasOwnProperty("priceChartTypes")||(this.__defineGetter__("priceChartTypes",x("Pc")),this.__defineSetter__("priceChartTypes",v("Pc"))),this.hasOwnProperty("ricList")||(this.__defineGetter__("ricList",x("t")),this.__defineSetter__("ricList",v("t"))),this.hasOwnProperty("timePeriod")||(this.__defineGetter__("timePeriod",x("Uc")),this.__defineSetter__("timePeriod",v("Uc"))),this.hasOwnProperty("requestFailureSubscribers")||(this.__defineGetter__("requestFailureSubscribers",
x("$d")),this.__defineSetter__("requestFailureSubscribers",v("$d"))),!this.hasOwnProperty("yAxisOptionsList")))this.__defineGetter__("yAxisOptionsList",x("Wc")),this.__defineSetter__("yAxisOptionsList",v("Wc"))}B("TRWebchart_Fin.DataGatherer",V);z=V.prototype;z.gl=function(a,b,c,d,f,e,g){this.t=a;this.d=b;this.interval=c;this.Uc=d;this.bd=e;this.ob=g;this.al=s;this.h=o;this.da=[];this.sa=[];this.Fa.length=0;this.ma.length=0;this.We.length=0;this.Kf.length=0;this.Fj.length=0;this.Ze=f;this.Qc=o};
z.Uf=v("Wc");z.pl=function(a){a&&(this.eh=a)};z.ol=function(a){a&&(this.Pc=a)};z.Gi=function(a){a||k("Invalid analysisInfoList");this.h=a;this.Wd()&&nl(this)};z.Ji=v("Da");V.prototype.setFidListHash=V.prototype.Ji;V.prototype.ml=v("Vl");
V.prototype.Ld=function(){this.Pi=new Date;this.Qc=o;this.Td=s;var a;if(a=this.Nr)if(a=this.Wd()){a:{if(!(this.h===o||0>=this.h.length))for(a=0;a<this.h.length;a++)if(10===this.h[a].analysisType){a=n;break a}a=s}a=!a}if(a)a=new ec(10,[]),this.h===o&&(this.h=[]),this.h[this.h.length]=a;else if(this.Wd()===s&&!(this.h===o||0>=this.h.length)){a=s;for(var b=0,c=0;c<this.h.length;c++)if(10===this.h[c].analysisType){a=n;b=c;break}a===n&&(delete this.h[c],this.h.splice(b,1))}this.Wd()===n&&nl(this);a=new kl;
if(this.Fa.length&&this.Fa[0].length&&!this.Fa[0][0].k.Status){var b=this.interval,c=!!this.Tb,d=this.Uc,f=this.Fa[0];b||(b=7);var e=a.Sd(f),g=new Date(e);if(c===n)switch(b){case 1:case 2:g=ll(a,2,f);break;case 3:case 4:g=ll(a,10,f);break;case 5:case 6:g=ll(a,90,f);break;case 8:g.setFullYear(e.getFullYear()-10);break;case 9:g.setFullYear(e.getFullYear()-30);break;case 10:case 11:g.setFullYear(e.getFullYear()-50);break;default:g.setFullYear(e.getFullYear()-5)}else switch(d){case 1:case 2:g=ll(a,2,
f);break;case 3:case 4:case 5:case 6:case 7:case 8:case 10:g=ll(a,10,f);break;case 11:case 12:case 13:case 14:g=ll(a,90,f);break;case 16:case 17:case 18:g=ll(a,180,f);break;case 0:case 32:g.setFullYear(e.getFullYear()-2);break;case 19:case 20:case 21:case 22:g.setFullYear(e.getFullYear()-5);break;case 23:case 24:g.setFullYear(e.getFullYear()-10);break;case 25:case 26:g.setFullYear(e.getFullYear()-20);break;default:g.setFullYear(e.getFullYear()-30)}g.setHours(0,0,0,0);a=new dc(g,e);this.Sc=a.start;
this.Hc=a.end}a=new Tk(new Sk({t:this.t,interval:this.interval,h:this.h,da:this.da,sa:this.sa,Ze:this.Ze,bd:this.bd,ob:this.ob,Sc:this.Sc,Hc:this.Hc,Ue:this.Ue,Da:this.Da,Hd:this.Hd,De:this.De,kf:this.kf}));var h=this,b=o,b=9==this.d?3:this.da&&0<this.da.length||this.sa&&0<this.sa.length?6:this.h!==o&&0<this.h.length?5:1;(c=a.Mn[b])||k("The message is not implemented");c=c.call(a);a.Yn(c,b,function(a){function b(a){var c=Y.Da[a];if(c)for(var d=0,f=c.length;d<f;++d)for(var e=0,g=M.length;e<g;++e){if(M[e].MessageId===
(""!==c[d]?"FID|"+a+"|"+c[d]:a)){Y.Qc.push(M[e]);break}}else for(d=0;d<M.length;d++)if(M[d].MessageId==a){Y.Qc.push(M[d]);break}}var c=a;h.Sh=new Date;var d=h.Sh.getTime()-h.Pi.getTime();h.Pi=new Date;var f=o,e="",g=o,y=o,u=s;h.Qc=[];h.ma.length=0;h.We.length=0;var w=h.Kf.length=0,E,L=ol(h),I,G=h.Pc.length;if(G<L)for(w=G;w<L;++w)h.Pc.push(h.d);if(h.sa.length)for(w=0;w<h.sa.length;++w)h.zg[h.sa[w].EconomicRic]||(h.zg[h.sa[w].EconomicRic]=Nc);if(h.da.length)for(w=0;w<h.da.length;++w)h.Hg[h.da[w].ce.be]||
(h.Hg[h.da[w].ce.be]=Nc);for(var ca=c,H,ja=0;ja<ca.length;ja++)if(H=ca[ja].TimeZone)H.DaylightSavingStart&&H.DaylightSavingStart instanceof Date===s&&(H.DaylightSavingStart=pl(H.DaylightSavingStart)),H.DaylightSavingEnd&&H.DaylightSavingEnd instanceof Date===s&&(H.DaylightSavingEnd=pl(H.DaylightSavingEnd));var M=c,Y=h;b(h.t[0]);var Z;if(h.h)for(var Jb=0;Jb<h.h.length;Jb++)for(var je=0;je<M.length;je++)if((Z=M[je].MessageId)&&-1<Z.indexOf("AnalysisType:")){var hl=Fc(Z);if(Jb===Gc(Z)&&hl===parseInt(h.h[Jb].analysisType,
10)){h.Qc.push(M[je]);break}}if(h.da.length)for(var Yf=0;Yf<h.da.length;++Yf)for(var Zf=0;Zf<h.t.length;++Zf)for(var ke=0;ke<M.length;++ke)if(Z=M[ke].MessageId,-1<Z.indexOf("Fundamental")){var il=!Z?o:-1<Z.indexOf("Fundamental")?Z.split("|")[1]||o:o;if(h.da[Yf].ce.be===Sc(Z)&&il===h.t[Zf]){h.Qc.push(M[ke]);break}}for(var le=0;le<M.length;++le)Z=M[le].MessageId,!ql(h,Z)&&(-1===Z.indexOf("AnalysisType:")&&-1===Z.indexOf("Fundamental"))&&h.Qc.push(M[le]);for(var $f=1;$f<h.t.length;$f++)b(h.t[$f]);var ag=
o,dd=c=h.Qc,bg=s;h.Td=n;for(var me=new Ae,zi=dd.filter(function(a){return!!a.MessageId&&-1!==a.MessageId.indexOf("AnalysisType:")}),cg=zi.filter(function(a){return!!a.Status}),ed=0;ed<dd.length;ed++)if(dd[ed].Status){var Sj=dd[ed].Status.ErrorCode;me.xb.hasOwnProperty(Sj)||me.setItem(Sj,dd[ed].MessageId);bg=n}else if(1>cg.length){bg=s;break}if(cg.length){var Bd=cg[0].MessageId,Gl=Fc(Bd),Tj=Gc(Bd),ef;h.h=h.h.filter(function(a,b){return!(Gl===+a.analysisType&&Tj===b)});zi.forEach(function(a){Bd=a.MessageId;
ef=Bd.split(":");Gc(Bd)>Tj&&(a.MessageId=ef[0]+":"+ef[1]+":"+(parseInt(ef[2],10)-1))})}if(bg){for(var Xb="",ff=me.keys(),Cd=0;Cd<ff.length;Cd++)Xb+=me.getItem(ff[Cd])+": ",Xb+=$b(ff[Cd])+"\n",Cd!==ff.length-1&&(Xb+=":\n");h.$g(Xb)}for(var Dd=0,Ed=[],Hl=h.eh&&L===h.eh.length,w=0;w<c.length;w++)if(g=c[w].MessageId,ql(h,g)){var S=[];switch(h.Pc[Dd]){case 3:S[S.length]="Open";S[S.length]="High";S[S.length]="Low";S[S.length]="Close";break;case 4:S[S.length]="Open";S[S.length]="High";S[S.length]="Low";
S[S.length]="Close";break;case 1:S[S.length]="Volume";break;case 9:S[S.length]="Value";break;default:S[S.length]="Close"}var ag=S,Uj=zc(g);I=Bc(g);for(var Vj,Wj=-1,gf=0;gf<h.t.length;gf++)if((Uj?Ac(g):I?Cc(g):g)==h.t[gf]){Wj=gf;break}Vj=Wj;var nb,Xj=Qc(g,h.Wc);nb=Xj!==l?Xj.dc:l;nb=nb!==l?nb.toString():l;u===s?(u=n,e=nb!==l?nb:"primaryYAsis"):(e=nb!==l?nb:"yaxis"+Vj+(Uj?g.split("|")[2]:""),nb===l&&4===Ed.length&&(e=Ed[Dd%4]));Dd++;4>Ed.length&&Ed.push(e);var Yj=h.Pc[Dd-1];9===h.d?f=new Q(g,c[w],Yj,
"DaysToMaturity",ag,e,0,s):(f=new Q(g,c[w],Yj,"Date",ag,e,0,s),f.setInterval(h.interval));Hl&&f.co(h.eh[Dd-1]);h.ma[h.ma.length]=f;if(0===w&&h.h)for(var Zj=s,fh=0;fh<h.h.length;fh++){var Eb=h.h[fh].analysisType,hf=Hc(Eb);hf&&11!==Eb&&(Zj=n);11===Eb&&(f=new Q(h.ma[0].Sa,h.ma[0].k,1,"Date",["Volume"],o,0,s),f.setInterval(h.interval),Zj?h.Kf.push(f):h.We.push(f))}}else if(-1<g.indexOf("Fundamental")){var Il=g.split("|"),e=Sc(g)||o,f=new Q(Il[1],c[w],h.Hg[e],"Date",["Value"],e,0,s);c[w].Status===o&&f.setInterval(rl(h,
c[w]));h.ma.push(f)}else if(-1<g.indexOf("Economic")){var ak=Tc(g)||"",e=o,f=new Q(ak,c[w],h.zg[ak],"Date",["Value"],e,0,s);c[w].Status===o&&f.setInterval(rl(h,c[w]));h.ma.push(f)}else{Eb=Fc(g);hf=Hc(Eb);1<c[w].Columns.length&&c[w].Columns.sort(sl(h,Eb));for(var Ic=!hf?h.ma:0===h.We.length?h.We:h.Kf,gh=1;gh<c[w].Columns.length;gh++){var y=c[w].Columns[gh].Name,wa=ml[y+"-"+Eb];if(wa!=l){var jf=h,db=y,Yb=wa,Kl=g;if("MACDSignal"===db)Yb.ca="MACD Signal";else if("percentK"===db)Yb.ca="%K";else if("percentD"===
db)Yb.ca="%D";else if(-1!==["Ratio","CrackSp","BtfySp","Spread"].indexOf(db)){var Jc=l;if(jf.h===o||0>=jf.h.length)Jc=o;else var bk=Kl.split(":"),Jc=isNaN(bk[2])?o:jf.h[bk[2]].description;Jc&&(Jc!==o&&""!==Jc)&&(Yb.ca=Jc)}else if("VolCToC"===db)Yb.ca="Volatility";else if("maOut1"===db||"SMA"===db||"maOut2"===db||"maOut3"===db){var ck=tl(jf,Yb.ya,db);ck!==o&&(Yb.ca="SMA"+ck)}if(hf)if(e="yaxisAnalysis",8===Eb)switch(h.Vl){case 0:"MACDForest"!=y&&(f=new Q(wa.ca,c[w],wa.oa,"Date",[y],e,0,s),f.setInterval(h.interval),
Ic.push(f));break;case 1:"MACDForest"==y&&(f=new Q(wa.ca,c[w],wa.oa,"Date",[y],e,0,s),f.setInterval(h.interval),Ic.push(f));break;case 2:f=new Q(wa.ca,c[w],wa.oa,"Date",[y],e,0,s);f.setInterval(h.interval);Ic.push(f);break;default:k("MACDDisplayType is wrong.")}else f=new Q(wa.ca,c[w],wa.oa,"Date",[y],e,0,s),f.setInterval(h.interval),Ic.push(f);else e=wa.za===s?o:"primaryYAsis",f=new Q(wa.ca,c[w],wa.oa,"Date",[y],e,0,s),f.$n(wa.za?h.t[0]:o),f.setInterval(h.interval),Ic.push(f)}else k("Analysis Column name is not specified in AnalysisKeyMappingHash.")}if(c[w].LevelLines!==
o)for(var e="yaxisAnalysis",ih=0;ih<c[w].LevelLines.length;ih++)f=new Q("",c[w],11,"Date",["LevelLine"+ih],e,0,s),Ic.push(f)}for(var kf,w=0;w<c.length;w++)if(kf=c[w].Scalars,kf!==o)for(E=0;E<kf.length;E++)"PreviousDayClose"==kf[E].Name&&(e=Ed[0],f=new Q("",c[w],11,"Date",["LevelLineScalar"],e,0,s),h.ma.push(f));if(!h.Wd()){var dk=h.ma.filter(function(a){return wc(a)},h);if(!(1>dk.length)){var lf=dk.map(function(a){return(a=this.F.e("Date",a.k))&&0<a.length?a[a.length-1]:l},h),lf=lf.filter(function(a){return!!a});
if(!(1>lf.length)){var Ll=Math.max.apply(Math,lf),ek=h.ma[0].k,Fd=h.F.e("Date",ek),Kc=Fd&&0<Fd.length?Fd[Fd.length-1]:l;if(Kc){for(var fk=0;Kc<Ll;){var ka=new Date(Kc.getTime());switch(h.interval){case 7:ka.setTime(ka.getTime()+864E5);break;case 8:ka.setTime(ka.getTime()+6048E5);break;case 9:ka.setDate(1);ka.setMonth(ka.getMonth()+2);ka.setDate(0);break;case 10:ka.setDate(1);ka.setMonth(ka.getMonth()+4);ka.setDate(0);break;case 11:ka.setFullYear(ka.getFullYear()+1);break;default:ka=o}Kc=ka;if(Kc!==
o)Fd.push(Kc),++fk;else break}for(var jh=ek.Columns||[],mf=0,Ml=jh.length;mf<Ml;++mf)if("DATE"!==jh[mf].Name.toUpperCase())for(var Nl=jh[mf].Values,gk=0;gk<fk;++gk)Nl.push(NaN)}}}}var kh;if(h.h!==o)for(var nf=0;nf<h.h.length;nf++)if(13===h.h[nf].analysisType){kh=Uc(h.h[nf].analysisParamList);if(0>kh){h.sd=o;ul(h);break}for(var Ol=h,xa=h,Pl=kh,of=xa.mk().start,Qa=0;Qa<xa.ma.length;Qa++)if(Ec(xa.ma[Qa])&&(xa.ma[Qa].jd=n,xa.ma[Qa].Xn=Pl,0<xa.ma[Qa].k.Columns.length)){var pf=xa.F.e(Af,xa.ma[Qa].k),hk=
xa.F.e("Date",xa.ma[Qa].k);pf||(pf=xa.F.e(Bf,xa.ma[Qa].k));var Lc=0;for(hk&&(Lc=kc(of,hk,n));Lc<pf.length;)if(isNaN(pf[Lc]))Lc++;else break;of.getTime()<xa.ma[Qa].k.Columns[0].Values[Lc].getTime()&&(of=xa.ma[Qa].k.Columns[0].Values[Lc])}Ol.sd=of;for(var qf=0;qf<h.ma.length;qf++){var mh=h.ma[qf];if(mh.jd&&mh.jd===n){var Ra=mh,nh=h.sd,oh=h.t;(!nh||nh===o)&&k("start date of rebasing cannot be null");var ph=Ra.Xn;"undefined"===typeof ph&&(ph=100);oh&&0<oh.length&&oh[0]===Ra.k.MessageId?0===Ra.d||5===
Ra.d||(Ra.d=5):Ra.d=0;if(Ra.k.Columns&&0<Ra.k.Columns.length){var ik=Ra,Ql=nh,Rl=ph,rf=new J,ob=ik.k,eb=[],ga=[],Sa=0,jk=rf.e("Date",ob);(ga=rf.e(Af,ob))||(ga=rf.e(Bf,ob));Sa=kc(Ql,jk,n);Sa===o&&K(ik)&&(Sa=jk.length-1);if(100===Rl){for(var Ca=0;Ca<ga.length;Ca++)isNaN(ga[Ca])?eb.push(Number.NaN):0>ga[Ca]&&0>ga[Sa]?eb.push((100*(ga[Sa]/ga[Ca])).toFixed(3)):eb.push((100*(ga[Ca]/ga[Sa])).toFixed(3));eb[Sa]=100}else{for(Ca=0;Ca<ga.length;Ca++)isNaN(ga[Ca])?eb.push(Number.NaN):0>ga[Ca]&&0>ga[Sa]?eb.push((100*
(ga[Sa]/ga[Ca]-1)).toFixed(3)):eb.push((100*(ga[Ca]/ga[Sa]-1)).toFixed(3));eb[Sa]=0}if(rf.e(Cf,ob)!==o)for(var Sl=Cf,sf=0,Tl=ob.Columns.length;sf<Tl;sf++)ob.Columns[sf].Name.toUpperCase()===Sl.toUpperCase()&&(ob.Columns[sf].Values=eb);else ob.Columns.push({Name:Cf,Values:eb});Ra.k.Columns=ob.Columns;Ra.c[0]=Cf}h.ma[qf].dc=h.ds}}break}else h.sd=o,ul(h);else h.sd=o,ul(h);h.al=n;try{h.ho()}catch(kk){window.console.log(kk.stack),window.console.log("Error has occurred from rendering chart in showChart method: "+
kk)}h.Sh=new Date;h.Ae("Load data:"+d+"  Rendering:"+(h.Sh.getTime()-h.Pi.getTime()))},function(a){h.$g(a)})};V.prototype.doDataRequest=V.prototype.Ld;V.prototype.Fd=function(a){return this.F.Fd(a,this.Bf())};V.prototype.Bf=function(){for(var a=o,b=this.Qc[0].Columns,c=0;c<b.length;c++)if("date"===b[c].Name.toLowerCase()){a=b[c].Values;break}return a};V.prototype.Sd=function(){var a=this.Bf();if(!a||1>a.length)return o;a=new Date(a[a.length-1].valueOf());a.setHours(23,59,59,999);return a};
V.prototype.mk=function(){var a=this.Sd()||new Date,b;if(9===this.interval)b=a.getFullYear(),a=a.getMonth(),a=new Date(b,a+1,1);else if(8===this.interval)for(b=a.getDay();0!==b;)a.setDate(a.getDate()+1),b=a.getDay();else 10===this.interval?(b=a.getFullYear(),a=a.getMonth(),a=3*Math.round((a-1)/3+1)+1,a=new Date(b,a,(new Date(b,a,0)).getDate())):11===this.interval&&(b=a.getFullYear(),a=new Date(b+1,1,1));a.setHours(23,59,59,999);b=new Date(a);b.setHours(0,0,0,0);switch(this.Uc){case 1:b=this.Fd(1);
a=this.Sd();break;case 2:b=this.Fd(2);a=this.Sd();break;case 3:b=this.Fd(3);a=this.Sd();break;case 4:b=this.Fd(4);a=this.Sd();break;case 5:b=this.Fd(5);a=this.Sd();break;case 6:b=this.Fd(6);a=this.Sd();break;case 7:b.setDate(a.getDate()-7);b.setHours(0,0,0,0);break;case 8:b.setDate(a.getDate()-8);b.setHours(0,0,0,0);break;case 9:b.setDate(a.getDate()-9);b.setHours(0,0,0,0);break;case 10:b.setDate(a.getDate()-10);b.setHours(0,0,0,0);break;case 11:b.setDate(a.getDate()-15);b.setHours(0,0,0,0);break;
case 12:b.setDate(a.getDate()-20);b.setHours(0,0,0,0);break;case 13:b.setMonth(a.getMonth()-1);break;case 14:b.setMonth(a.getMonth()-2);break;case 16:b.setMonth(a.getMonth()-3);break;case 17:b.setMonth(a.getMonth()-4);break;case 18:b.setMonth(a.getMonth()-5);break;case 0:b.setMonth(a.getMonth()-6);break;case 32:b.setMonth(0);b.setDate(1);break;case 19:b.setFullYear(a.getFullYear()-1);break;case 20:b.setFullYear(a.getFullYear()-2);break;case 21:b.setFullYear(a.getFullYear()-3);break;case 22:b.setFullYear(a.getFullYear()-
4);break;case 23:b.setFullYear(a.getFullYear()-5);break;case 24:b.setFullYear(a.getFullYear()-6);break;case 25:b.setFullYear(a.getFullYear()-10);break;case 26:b.setFullYear(a.getFullYear()-15);break;case 27:b.setFullYear(a.getFullYear()-20);break;case 28:b.setFullYear(a.getFullYear()-25);break;case 29:b.setFullYear(a.getFullYear()-30);break;case 30:b.setFullYear(a.getFullYear()-40);break;case 31:b.setFullYear(a.getFullYear()-50);break;default:b.setFullYear(a.getFullYear()-1)}this.Sc=b;this.Hc=a;return new dc(b,
a)};V.prototype.getDisplayRange=V.prototype.mk;function nl(a){a.h===o||0>=a.h.length||(a.h=a.h.filter(function(a){return-1<[12].indexOf(a.analysisType)===s}))}function ql(a,b){for(var c=0;c<a.t.length;c++){var d=a.t[c];if(b===d)return n;if(zc(b)){if(Ac(b)===d)return n}else if(Bc(b)&&Cc(b)===d)return n}return s}V.prototype.Wd=function(){return-1<[1,2,3,4,5,6].indexOf(this.interval)};V.prototype.Ri=function(a){for(var b=s,c=0;c<this.$d.length;c++)if(this.$d[c]===a){b=n;break}b||this.$d.push(a)};
V.prototype.$g=function(a){this.Td=n;var b="",b=a?a.tk?a.tk():a.toString():"Unknown error.",a="";if(this.Ze){var c=this.Ze.TransactIDs;c&&c.length&&(a=c.join("|"))}a||(a=new Date,a=a.getFullYear()+"_"+(a.getMonth()+1)+"_"+a.getDate()+"_"+a.getHours()+"_"+a.getMinutes()+"_"+a.getSeconds());this.$d&&!this.$d.length&&alert(b);for(var d=0;d<this.$d.length;d++)c=this.$d[d],"function"==typeof c&&c({transactId:a,errMsg:b});window.console.log("Error has occurred from TAService request: "+b+". transactId: "+
a)};V.prototype.onFailed=V.prototype.$g;function ul(a){if(!a.Wc&&a.Wc!==o&&0!==a.Wc.length)for(var b=0;b<a.ma.length;b++)Ec(a.ma[b])&&"primaryYAsis"!==a.ma[b].dc&&(a.ma[b].dc=o)}function pl(a){if(!a)return o;a=a.replace("/Date(","").replace(")","");return new Date(parseInt(a,10))}
V.prototype.ho=function(){if(this.al===n&&this.onDataReady!==o&&"function"==typeof this.onDataReady){this.Fa.length=0;this.Jb=this.Wc?[]:o;0<this.ma.length&&(this.Fa[this.Fa.length]=this.ma,this.Jb&&(this.Jb[this.Jb.length]=this.Wc));0<this.We.length&&(this.Fa[this.Fa.length]=this.We,this.Jb&&(this.Jb[this.Jb.length]=o));0<this.Kf.length&&(this.Fa[this.Fa.length]=this.Kf,this.Jb&&(this.Jb[this.Jb.length]=o));this.h&&0<this.h.length&&(this.Fj=this.h);var a=1==this.Fa.length?[1]:[4,1];3===this.Fa.length&&
(a=[4,1,1]);a=new Qf(this.Fa,a,this.Jb,[],this.Fj);a.interval=this.interval;a.da=this.da;a.sa=this.sa;a.sd=this.sd;a.t=this.t;a.De=this.De;a.kf=this.kf;var b=o;this.Tb?(b=this.Tb,a.Ai=o,a.Tb=this.Tb):(9!==this.d&&(b=this.mk()),a.Ai=this.Uc,a.Tb=o);this.onDataReady(a,b);this.Tb=o;this.al=s}};V.prototype.showChart=V.prototype.ho;
function tl(a,b,c){for(var d=o,f=o,e=0;e<a.h.length;e++)if(a.h[e].analysisType==b){f=a.h[e];break}if(a=f)switch(a=a.analysisParamList,b){case 1:"SMA"===c&&(d=a[1].value);break;case 2:"maOut1"===c?d=a[1].value:"maOut2"===c&&(d=a[2].value);break;case 3:"maOut1"===c?d=a[1].value:"maOut2"===c?d=a[2].value:"maOut3"===c&&(d=a[3].value)}return d}
function sl(a,b){return function(c,d){var f=0,e=c.Name,g=d.Name,h=ml[e+"-"+b],i=ml[g+"-"+b],h=h?h.ya:o,i=i?i.ya:o;if(h&&i&&h===i)switch(h){case 2:case 3:f=tl(a,h,e)>tl(a,i,g)?1:-1;break;case 6:case 7:f=e>g?-1:1;break;case 8:f=e>g?1:-1}else f="Date"===e?-1:"Date"===g?1:f;return f}}V.prototype.kl=v("Ue");
function rl(a,b){var c=0,d=uc(Bf,"Interval",b);if(d)d=d.toUpperCase(),"DAILY"===d?c=P.Daily:"WEEKLY"===d?c=P.Weekly:"MONTHLY"===d?c=P.Monthly:"QUARTERLY"===d?c=P.Quarterly:"HALFYEAR"===d?c=P.HalfYearly:"YEARLY"===d&&(c=P.Yearly);else{d=a.F.e("Date",b);if(2>d.length)return c;c=Math.abs((d[1].getTime()-d[0].getTime())/864E5);c=2>c?P.Daily:8>c?P.Weekly:32>c?P.Monthly:94>c?P.Quarterly:187>c?P.HalfYearly:P.Yearly}return c}
function vl(a){var b=a.Xd()?1:ol(a),c=a.da.length,d=a.sa.length,a=a.h===o||0>=a.h.length?0:a.h.filter(function(a){return Mc(a.analysisType)},a).length;return 4-(b+c+d+a)}function ol(a){var b=0;if(Vc(a.Da)){var a=a.Da,c;for(c in a)a.hasOwnProperty(c)&&(b+=a[c].length)}else b=a.t.length;return b}V.prototype.Xd=function(){var a=s;if(this.h&&this.h.length){var b=vb(this.h,function(a){return a.analysisType===fc.Rebase});-1!==b&&(a=this.F.Xd(this.h[b]))}return a};
function wl(a){var b=4,c=ol(a),d=a.da.length,f=a.sa.length,e;e=a.h&&a.h.length?a.h.filter(function(a){return Mc(a.analysisType)}).length:0;if(Vc(a.Da)){if(b<=c){c={};d=[];f=0;for(e=a.t.length;f<e;++f){for(var g=a.t[f],h=a.Da[g],i=0,j=h.length;i<j;++i)if(0<b)d.push(g),c[g]=c[g]?c[g].concat(h[i]):[h[i]],--b;else break;if(!(0<b))break}a.t=Ab(d);a.Da=c;a.da=[];a.sa=[];a.h&&a.h.length&&(a.h=a.h.filter(function(a){return!Mc(a.analysisType)}));return}}else if(b<=c){a.t=a.t.slice(0,b);a.da=[];a.sa=[];a.h&&
a.h.length&&(a.h=a.h.filter(function(a){return!Mc(a.analysisType)}));return}b-=c;if(0<b){if(b<=d){a.da=a.da.slice(0,b);a.sa=[];a.h&&a.h.length&&(a.h=a.h.filter(function(a){return!Mc(a.analysisType)}));return}b-=d}if(0<b){if(b<=f){a.sa=a.sa.slice(0,b);a.h&&a.h.length&&(a.h=a.h.filter(function(a){return!Mc(a.analysisType)}));return}b-=f}0<b&&(b<=e?a.h&&a.h.length&&(b=a.h.filter(function(a){return Mc(a.analysisType)}).slice(0,b),a.h=a.h.filter(function(a){return!Mc(a.analysisType)}).concat(b)):b-=e)}
;function W(a,b){Ri.call(this,a);this.Ka||k("The id '"+this.lb+"' is not valid.");this.xo=new Ae;this.ba=this.tt=o;this.n=new bl(this.Ka,this.xo);this.qe=[];this.n.qe=this.qe;var c=this;this.n.ar=function(a){c.Vn(a)};this.n.Yq=function(a,b){var e=c.ua();e.interval=b;e.Tb=a;var g=c.n.$c;g.CustomRange=a;g.Interval=b;xl(c,e);e.Ld();c.Rc(n)};this.n.cr=function(a){yl(c,a);a=c.ua();xl(c,a);a.Ld();c.Rc(n)};this.n.Uk=function(a){if(a&&a.length){var b=c.ua(),e;e=a.map(function(a){return zc(a)?Ac(a):a});if(Vc(b.Da)){for(var a=
a.map(function(a){if(zc(a))return a.split("|")[2]}),g=0,h=e.length;g<h;++g){var i=e[g],j=a[g]||"";b.Da[i]=b.Da[i].filter(function(a){return a!==j})}e=e.filter(function(a){return 0===b.Da[a].length})}b.t=b.t.filter(function(a){return-1===e.indexOf(a)});c.ba&&(c.ba.t=b.t)}};this.n.Rk=function(a,b){var e=c.ua();e.h=e.h.filter(11===a?function(b){return a!==+b.analysisType}:function(c,e){return!(a===+c.analysisType&&b===e)})};this.n.Tk=function(a){var b=c.ua();b.da=b.da.filter(function(b){return-1===a.indexOf(b.ce.be)})};
this.n.Sk=function(a){var b=c.ua();b.sa=b.sa.filter(function(b){return-1===a.indexOf(b.EconomicRic)})};this.n.Zq=function(a){var b=c.ua(),e=c.n.$c;c.Dk.Wn(b.Uc,a)===s&&(b.Uc=c.Dk.bn(a),e.TimePeriod=b.Uc,e.CustomRange=o);e.Interval=a;xl(c,b);b.Ld();c.Rc(n)};this.n.dr=function(a){var b=c.ua();b.Gi(a);xl(c,b);b.Ld();c.Rc(n)};this.n.$q=function(a){var b=c.ua(),e=a.Ds,g=n,h=n,i=s,j=s;b.Uf(o);if(e){var m=b.h?b.h.filter(function(a){return!Hc(+a.analysisType)}):[];if(e.Sn.length){var p=m.filter(function(a){return!Mc(a.analysisType)}),
m=e.Sn.filter(function(a){return!Mc(a.analysisType)});if(m.length){var p=m,q=vb(m,function(a){return a.analysisType===fc.Rebase}),m=(j=-1!==q)?c.F.Xd(m[q]):s;j?m||(j=h=s,b.Xd()&&wl(b)):b.Xd()&&wl(b)}m=b.h?b.h.filter(function(a){return!Hc(+a.analysisType)}):[];m=m.filter(function(a){return Mc(a.analysisType)});q=e.Sn.filter(function(a){return Mc(a.analysisType)});q.length&&(!(0>=vl(b))?Rc(m,q,ba(s)):alert("Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one"));
m=p.concat(m)}p=b.h?b.h.filter(function(a){return Hc(+a.analysisType)}):[];e.Qi.length&&((i=0<e.Qi.filter(function(a){return a.analysisType===fc.Correlation}).length)?b.Xd()?p=p.concat(e.Qi):!b.Xd()&&!(0>=vl(b))?p=p.concat(e.Qi):(g=s,alert("Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one")):p=p.concat(e.Qi));2<p.length&&(p=p.slice(0,2),alert("The maximum number of subcharts is 2"),i&&(g=s));b.h=m.concat(p)}i&&g&&yl(c,a.t);j&&h&&yl(c,a.t);if(!i&&!j&&
a.t&&a.t.length)if(b.Xd())yl(c,a.t);else if(e=vl(b),0>=e)alert("Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one");else{if(e<a.t.length){var r="";a.t.slice(e,a.t.length).forEach(function(a){r+=a;r+=","});g=r.length-1;h=r;0<=g&&g<r.length&&(h=r.substr(0,g)+r.substr(g+1,r.length-g-1));r=h;alert("Symbol "+r+" not added. Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one");a.t=a.t.slice(0,e)}yl(c,a.t)}if(a.da&&
a.da.length){var t=a.da;if(t&&t.length){var y=t[0].Wq,e=t[0].Xq;y?(e=vb(b.da,function(a){return a.fieldName===t[0].fieldName}),-1!==e?alert("The indicator selected is already plotted on the chart"):(e=vb(b.da,function(a){return a.fieldName===y}),delete t[0].Wq,b.da[e]=t[0])):e?(e=vb(b.da,function(a){return a.fieldName===t[0].fieldName}),delete t[0].Xq,b.da[e]=t[0]):(e=vb(b.da,function(a){return a.fieldName===t[0].fieldName}),-1!==e?b.da[e]=t[0]:0>=vl(b)?alert("Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one"):
(Rc(b.da,t,function(a,b){return a.fieldName===b.fieldName}),b.Wc=o))}}if(a.sa&&a.sa.length){var u=a.sa;if(u&&u.length){var w=u[0].oldEconomicRic;w?-1!==vb(b.sa,function(a){return a.EconomicRic===u[0].EconomicRic})?alert("The indicator selected is already plotted on the chart"):(a=vb(b.sa,function(a){return a.EconomicRic===w}),delete u[0].oldEconomicRic,b.sa[a]=u[0]):!(0>=vl(b))?0===Rc(b.sa,u,function(a,b){return a.EconomicRic===b.EconomicRic})?alert("The indicator selected is already plotted on the chart"):
b.Wc=o:alert("Maximum number of entries (4) reached. Please delete an existing entry in order to add a new one")}}xl(c,b);b.Ld();c.Rc(n)};this.n.Vk=function(){var a=c.ua();xl(c,a);a.Ld();c.Rc(n)};this.D=o;this.Wa=s;this.Qa=[];(this.fh=b)&&this.n.Hi(this.fh);this.gb=o;this.useDataGatherer=n;this.Ph=o;this.Pj=s;this.Dk=new gl;this.Jm=Ce()+"/loading_new.gif";window.yq&&(this.Jm=window.yq);this.F=new J;this.divObj=this.Ka;this.dataGatherer=this.ua()}za(W,Ri);B("TRWebchart_Fin.TRCompositeChart",W);
W.prototype.Qe=function(){this.Nb()};W.prototype.drawChart=W.prototype.Qe;
W.prototype.Nb=function(){this.Pj=s;var a=new Date,b=0,c=this;this.useDataGatherer&&!this.gb.Td?(this.Ph=new Date,window.setTimeout(function(){c.Rc(n)},100),b=this.gb.Pc.length?this.gb.Pc:[this.gb.d],1!==this.n.zb&&-1===b.indexOf(3)&&-1===b.indexOf(9)&&-1===b.indexOf(4)?(this.gb.Hd=1,this.gb.h&&this.gb.h.filter(function(a){return 11===a.analysisType}).length&&(this.gb.Hd|=16)):this.gb.Hd=31,this.gb.Ld()):(this.Ph&&(b=(new Date).getTime()-this.Ph.getTime()),this.n.dd(this.ba,this.D),this.n.Qe(s),this.Pj=
n,this.Pg(),a=(new Date).getTime()-a.getTime(),this.Ae(a+b+" [data: "+b+", render: "+a+"]"))};W.prototype.render=W.prototype.Nb;W.prototype.Tf=function(a){this.D=a;this.ua().Tb=a};W.prototype.setDisplayRange=W.prototype.Tf;W.prototype.Ii=function(a){this.Wa=a;this.n.Ii(this.Wa)};W.prototype.setExpandDatesEnabled=W.prototype.Ii;W.prototype.sl=function(a){this.n.sl(a);this.ua().af=a};W.prototype.setSliderVisible=W.prototype.sl;W.prototype.ae=function(a){this.n.ae(a)};
W.prototype.setMarqueeDisplayMode=W.prototype.ae;W.prototype.jl=function(a){this.n.jl(a)};W.prototype.setDisplayRangeVisible=W.prototype.jl;W.prototype.Hi=function(a){this.fh=a;this.n.Hi(a)};W.prototype.setChartSchemeType=W.prototype.Hi;W.prototype.Be=function(a){this.n.Be(a,a&&0<a.length)};W.prototype.setChartTitle=W.prototype.Be;W.prototype.bo=function(a){(this.ba=a)||k("Incoming 'compositeChartParam' cannot be null.")};W.prototype.setCompositeChartParam=W.prototype.bo;
W.prototype.gn=function(a,b){for(var c=a.Fa[0],d=[],f=s,e=new J,g=0;g<c.length;g++)if(K(c[g]))f=n;else{var h=e.e("Date",c[g].k);h!==o&&0<h.length&&d.push(h[0])}if(f===n&&0<d.length){c=d[0];for(f=1;f<d.length;f++)d[f]<c&&(c=d[f]);b.start<c&&b.end>c&&(b.start=c)}return b};W.prototype.getNewDisplayRange=W.prototype.gn;W.prototype.ua=function(){if(!this.gb){this.gb=new V(this.n.Mc);var a=this;this.gb.onDataReady=function(b,c){a.gb.Td=n;a.Rc(s);a.bo(b);c=a.gn(b,c);a.Tf(c);a.Nb()};this.gb.Ri(function(){a.Rc(s)})}return this.gb};
W.prototype.getDataGatherer=W.prototype.ua;W.prototype.gl=function(a,b,c,d,f,e,g){for(var h={},i=[],j=0,m=a.length;j<m;++j){var p=a[j];h[p]===l&&(i.push(p),h[p]=n)}h=this.n.$c;a=this.ua();(j=h.Interval)&&(c=j);(j=h.TimePeriod)&&(d=j);if(j=h.CustomRange)a.Tb=j;if((j=h.PriceSeriesTypes)&&0<j.length)j[0]=b,a.Pc=j;if((j=h.EconomicSeriesTypes)&&Vc(j))a.zg=j;if((h=h.FundamentalSeriesTypes)&&Vc(h))a.Hg=h;a.gl(i,b,c,d,f,e,g);this.n.prefix=i.join("_");this.n.Is=c};W.prototype.setChartParams=W.prototype.gl;
W.prototype.Hr=function(a){this.ua().De=a};W.prototype.setYieldDate=W.prototype.Hr;W.prototype.Uf=function(a){this.ua().Uf(a)};W.prototype.setYAxisOptionList=W.prototype.Uf;W.prototype.Gi=function(a){this.ua().Gi(a)};W.prototype.setAnalysisInfo=W.prototype.Gi;W.prototype.Ji=function(a){this.ua().Ji(a)};W.prototype.setFidListHash=W.prototype.Ji;W.prototype.ml=function(a){this.ua().ml(a)};W.prototype.setMACDDisplayType=W.prototype.ml;W.prototype.pl=function(a){this.ua().pl(a)};
W.prototype.setRicDisplayNames=W.prototype.pl;W.prototype.ol=function(a){this.ua().ol(a)};W.prototype.setRicChartTypes=W.prototype.ol;W.prototype.Ri=function(a){this.ua().Ri(a)};W.prototype.subscribeDataFailedEvent=W.prototype.Ri;W.prototype.qq=function(){return this.ua().Qc};W.prototype.getRawData=W.prototype.qq;W.prototype.zr=function(a){this.ua().Qc=a};W.prototype.setRawData=W.prototype.zr;
W.prototype.Bj=function(a){for(var b=s,c=0;c<this.Qa.length;c++)if(this.Qa[c].name===a.name){b=n;break}b===s&&(this.Qa[this.Qa.length]=a)};W.prototype.addExtentionProvider=W.prototype.Bj;W.prototype.bl=function(){try{var a=new Date;wf(this.n,this.D);this.n.Qe(s);this.Ae((new Date).getTime()-a.getTime())}catch(b){window.console.log("Error has occurred from resizing chart : "+b)}};W.prototype.resizeChart=W.prototype.bl;W.prototype.Aq=function(){this.gb.Td=s;this.ba=o};W.prototype.invalidateData=W.prototype.Aq;
W.prototype.Vn=function(a){this.Ph=new Date;var b=this.ua(),c=this.Dk.an(a);b.interval=c;b.Uc=a;var d=this.n.$c;d.Interval=c;d.TimePeriod=a;d.CustomRange=o;xl(this,b);b.Ld();this.Rc(n)};W.prototype.predefinedRangeChangeHandler=W.prototype.Vn;function xl(a,b){var c=a.n.$c,d=c.Interval;d&&(b.interval=d);if(d=c.TimePeriod)b.Uc=d;d=c.CustomRange;b.Tb=d?d:o;if((d=c.PriceSeriesTypes)&&0<d.length)b.Pc=d;if((d=c.EconomicSeriesTypes)&&Vc(d))b.zg=d;if((c=c.FundamentalSeriesTypes)&&Vc(c))b.Hg=c}
W.prototype.Rc=function(a){var b="html5ChartLoadingSpinnerImg_"+this.lb,c=document.getElementById(b);if(!c){if(!a)return;c=uk("img",{id:b,src:this.Jm});wk(c,{display:"none",position:"absolute","z-index":200});document.body.appendChild(c)}this.gb.Td||!a?c.style.display="none":(a=ic(this.lb),b=(this.Ka.clientHeight-17)/2,c.style.left=a[0]+(this.Ka.clientWidth-17)/2-15+"px",c.style.top=a[1]+b-25+"px",c.style.display="block")};W.prototype.showHideSpinner=W.prototype.Rc;
W.prototype.Pg=function(){if(this.Qa&&0<this.Qa.length)for(var a=0;a<this.Qa.length;a++)this.Qa[a].wa&&"function"===typeof this.Qa[a].wa&&this.Qa[a].wa(this)};W.prototype.kl=function(a){this.ua().kl(a)};W.prototype.setHostName=W.prototype.kl;W.prototype.tr=function(a){a!==l&&a!==o&&(this.qe.push(a),Ab(this.qe))};W.prototype.setHideMarqueeCategory=W.prototype.tr;
W.prototype.Mg=function(){var a=new Nf(o,this.n.Mc),b=this.ua(),c=b.t,d=b.eh,b=b.Da,f=[],e="",g;if(d&&0<d.length)for(var h=0;h<d.length;++h)e=d[h],g=a.Ng(h,0),f.push(new Hf(e,g.stroke));else for(h=0;h<c.length;++h)if(b)for(var d=b[c[h]]||[""],i=0;i<d.length;++i)e=c[h]+(""===d[i]?"":" "+d[i]),g=a.Ng(h+i,0),f.push(new Hf(e,g.stroke));return f};W.prototype.getLegendColors=W.prototype.Mg;W.prototype.nl=v("Ae");W.prototype.setReportSpeedFunction=W.prototype.nl;
function yl(a,b){if(b&&b.length){var c=a.ua();c.t=c.t.concat(b);Ab(c.t);if(Vc(c.Da))for(var d=0,f=b.length;d<f;++d){var e=b[d];c.Da[e]?-1===c.Da[e].indexOf("")&&c.Da[e].push(""):c.Da[e]=[""]}}}W.prototype.nq=x("Pj");W.prototype.getIsChartDrawn=W.prototype.nq;B("TRWebchart_Bus.SeriesData",v("Columns"));function zl(a){Ig.call(this,a);this.Ed=[];this.cb=new N}zl.prototype=new Ig(o);z=zl.prototype;z.ze=function(){this.Va.getContext("2d").clearRect(0,0,this.Va.width,this.Va.height)};z.Nd=function(a){var b=this.Va.getContext("2d");this.Ed=[];for(var c=this.Id.ia,d=0;d<c.length;++d)c[d].Gb&&c[d].Gb===s||this.ak(b,c[d],a)};
z.ak=function(a,b,c){var d=b.na,f,e=n,g,h;if(d[0]instanceof Array){for(g=0;g<d.length;g++)for(h=0;h<d[g].length;h++)if(f=d[g][h],f.contains(c.x,c.y)){this.ug(a,b,f,c,h,g);e=s;break}if(e)for(g=0;g<d.length;g++)for(h=0;h<d[g].length;h++)f=d[g][h],f.kd&&Al(a,b,f)}else{for(h=0;h<d.length;h++)if(f=d[h],f.contains(c.x,c.y)){this.ug(a,b,f,c,h,0);e=s;break}if(e)for(h=0;h<d.length;h++)f=d[h],f.kd&&Al(a,b,f)}};
z.ug=function(a,b,c,d,f,e){if(c.kd)this.ze(),c.kd=s;else{c.kd=n;var d=b.na,g;if(d[0]instanceof Array)for(g=0;g<d.length;g++)for(var h=0;h<d[g].length;h++)d[g][h]!==c&&(d[g][h].kd=s);else for(g=0;g<d.length;g++)d[g]!==c&&(d[g].kd=s);Al(a,b,c);this.Ed[this.Ed.length]=new Lg(b.e(b.Q,b.data)[f],b.e(b.c[e],b.data)[f],f,b.Q,b.c[e])}};function Al(a,b,c){b.Fc(a,c,2);b.Cb&&b.Cb===n&&(a=b.Tc.getContext("2d"),b.vg(a,c,2))}z.Jg=x("Ed");function Bl(a){Ig.call(this,a);this.Ed=o;this.la=Vb.get("en").zd;this.Ub=new Nb(this.la);this.cb=new N;this.F=new J}Bl.prototype=new Ig(o);z=Bl.prototype;z.il=function(a){this.la=a;this.Ub=new Nb(this.la)};z.ze=function(){this.Va.getContext("2d").clearRect(0,0,this.Va.width,this.Va.height)};z.Nd=function(a){var b=this.Va.getContext("2d");b.clearRect(0,0,this.Va.width,this.Va.height);for(var c=this.Id.ia,d=0;d<c.length;d++)c[d].Gb&&c[d].Gb===s||this.ak(b,c[d],a)};
z.ak=function(a,b,c){var d=b.na,f=b.xd,e,g,h;if(d[0]instanceof Array)for(g=0;g<d.length;g++)for(h=0;h<d[g].length;h++){if(e=d[g][h],e.contains(c.x,c.y)){this.ug(a,b,e,f[g][h],c,h);break}}else for(g=0;g<d.length;g++)if(e=d[g],e.contains(c.x,c.y)){this.ug(a,b,e,f[g],c,g);break}};
z.ug=function(a,b,c,d,f){var e;if(c.kd===n)this.ze();else{b.Fc(a,c,1);b.Cb===n&&(e=b.Tc.getContext("2d"),b.vg(e,c,1));a.beginPath();var g=this.Id.a.om;a.shadowOffsetX=g.nj;a.shadowOffsetY=g.nj;a.shadowBlur=g.hm;a.shadowColor=g.im;a.fillStyle=g.Ba;a.font=""+g.o+" "+g.m+" "+g.u;var c=b="",h=d.cs,i=d.$r;e=d.gs;var j=d.fs,m=this.cb.Jd(a.font),p=e||j?2*m:m,i=""!==i?i+": ":"",q=(d=d.Ia)?Pc(d,n,0):"",q=""!==q?new pe(q):o,d=d?d.ob:"",b=h instanceof Date?b+(i+this.Ub.ea(h)):isNaN(h)?b+(i+h):b+i+(q?q.ea(+h):
h),c=c+(""!==j?j+": ":"")+(q?q.ea(+e):e),c=c+d,d=Math.max(Wc(a,b),Wc(a,c))+20+8,h=d+f.x>this.Va.width?f.x-d:f.x,h=0<=h?h:0,f=f.y+p+20<=this.Va.height?f.y+20:f.y-10-p,f=0<=f?f:0;a.fillRect(h,f,d,p);a.shadowColor="transparent";a.fillStyle=g.mm;a.textAlign="left";a.textBaseline="middle";f+=7.5;g=h+14;a.fillText(b,g,f);(e||j)&&a.fillText(c,g,f+m)}};z.Jg=ba(o);B("TRWebchart_Shared.NumberLabelFormat",function(a,b,c){this.Mm=a;this.uq=b;this.ob=c});function Cl(a,b,c){this.vd=a;this.Cm=new Vi(this.vd,b,c)}Cl.prototype.Qh=function(){if(this.vd){var a=this.Cm;be(this.vd,Sd,function(b){a.Xe=n;a.handleEvent(b)},s);be(this.vd,Ud,function(b){a.Mk=n;a.handleEvent(b)},s)}};function Dl(a,b,c){wi.call(this,a,b,c);this.Xb=0;this.padding=30}Dl.prototype=new wi(o,o,[]);
Dl.prototype.wa=function(){var a="";this.gd=this.r.id+"_LegendInnerWrapper";for(var b=0,c=this.a.Wl,d="font-family:"+c.m+";font-size:"+c.o+";",f=this.cb.Jd(d),e=this.Wb.length*f,g,h=0,b=0;b<this.Wb.length;b++)h<this.Wb[b].text.length&&(g=this.Wb[b].text,h=this.Wb[b].text.length);this.Xb=this.cb.pe(d,g)+8+this.padding;a+='<div id="'+this.gd+'" style="position:relative;display:block;width:'+this.Xb+"px;height:"+e+'px;background:transparent;padding:3px;padding-bottom:1px;border-radius:3px;">';for(b=
0;b<this.Wb.length;b++)e=this.Wb[b],d=this.gd+"_span"+b,a+="<div onclick=\"document.getElementById('"+d+"').style.border='"+c.fm+"'\" onmouseover=\"document.getElementById('"+d+"').style.border='"+c.Fe+"'\" onmouseout=\"document.getElementById('"+d+"').style.border='0px solid transparent'\" ><span id='"+d+"' style=\"vertical-align:middle; display:inline-block;height:9px;width:9px;font-size:1px;background-color:"+e.color+';">',a+='</span><div style="margin-left:5px;display:inline-block;vertical-align:middle;height:'+
f+"px;font-family:"+c.m+";color:"+c.Yl+";font-size:"+c.o+";font-weight:"+c.u+'; ">'+e.text,a+="</div></div><br />";this.r.innerHTML=a+"</div>"};function El(a,b,c){this.ac=a;this.D=this.l=o;this.Ub=c;this.Xr=this.sh=o;this.ci=n;this.z=[];this.$a=this.J=o;this.a=b;this.ad=new Nf(this.$a,this.a);this.Ab=30;this.Y=o;this.ac&&(this.Y=new yi(this.ac,this.a,s));this.nc=s;this.pb=this.Xb=this.md=0;this.qb=1;this.pc=o;this.cb=new N}z=El.prototype;z.td=function(a){this.a=a;this.ad.a=a;this.Y.a=a};
z.dd=function(a,b){this.l=a;this.D=b.D;this.fe=b.fe;this.pb=b.pb;this.ka=b.te;this.la=b.la;this.qb=b.qb;this.O=b.O;this.V=b.V===l?s:b.V;this.Ta=b.Ta===l?s:b.Ta;this.fd=b.fd===l?s:b.fd;this.Vc=b.Vc;this.ha=b.ha===l?s:b.ha;this.el=b.el;this.we=b.we;this.wa();this.Sj();var c=this.pk(),d=c[0];d<this.Ab&&(d=this.Ab);c=c[1];c<this.Ab&&(c=this.Ab);var d=d-2,c=c-2,f=this.Y,e=this.a,g=document.getElementById(f.Kb);g.style.border="1px solid "+e.aa.G;g.style.um="3em";g.style.backgroundColor=e.aa.lf;for(var g=
e.H.G,h=0;4>h;h++){var i=Ci(f,h);0===h||2==h?i.style.borderLeft="1px solid "+g:i.style.borderRight="1px solid "+g}h=Di(f);g=e.W;h.style.background=g.Ba;h.style.borderTop="1px solid "+g.G;h.style.borderLeft="1px solid "+g.G;h.style.borderRight="1px solid "+g.G;h=document.getElementById(f.$i);h.style.borderLeft="1px solid "+g.G;h.style.borderRight="1px solid "+g.G;h.style.color=g.He.Ua;h=document.getElementById(f.Hh);h.style.background=e.W.Ba;h.style.border="1px solid "+g.G;e=e.aa.Ea;f=document.getElementById(f.Lh);
f.style.background=e.kg;f.style.border="1px solid "+e.G;i=0;if(this.nc===n)i=d,20>i&&(i=20),Fl(this,i),this.Y.dd(d,c,this.md,0,[0,0,0,0],0),d=document.getElementById(this.Y.le),d.style.left=d.clientWidth-this.Xb+"px",d.style.width=this.Xb+"px";else{g=0;f=[0,1,2,3];this.ci===n&&(f=[1,0,3,2]);this.$a=new $h(f);this.hl();for(var j=o,m=0,h=0,e=f=s,g=0;g<this.l.length;g++){i=this.l[g];j=i.dc;if(2===i.d||9===i.d)f=n,e=i.Cb;j=this.$a.Cj(g,j);j!==o&&1<j.length&&(m=j[0],j[1]===s&&h++,Dg(this.z[m],i),this.z[m].di=
this.Ek(m),Dg(this.J,i))}this.ad.$a=this.$a;i=d-33*h;20>i&&(i=20);this.J.cc(i,18);this.J.Vb(n);g=this.J.Qd();h=0;this.Vc&&0<this.Vc.length&&(h=this.cb.Jd("font-family:"+this.a.aa.Ea.m+";font-size:"+this.a.aa.Ea.o+";"),this.Y.a.W.He.Ib=this.Vc);Fl(this,i);f=f&&e?16:5;e=Ai(this.Y,c,g,this.md,h);i=0;0<this.md&&1==this.a.p.Oa&&(i=this.md+f);i=this.Bi(e,i,this.fd||!this.pc?n:s);this.Y.dd(d,c,this.md,g+2,i,h);this.fd===s&&(this.pc&&this.pc instanceof xi&&0<this.we.length)&&(this.pc.Dj(),this.md=document.getElementById(this.Y.le).offsetHeight,
i=this.md+f,this.Bi(e,i,n));this.J.b.gf(Bi(this.Y).clientWidth);this.J.Vb(s);this.J.Af()}};
function Fl(a,b){var c=document.getElementById(a.Y.le);if(a.fd===n||0===a.we.length)a.md=10,a.Xb=0,c.innerHTML="";else if(2!==a.a.p.qc&&(c.style.width=b+"px",c.style.height="15px",a.pc=a.nc===n?new Dl(c,a.a,a.we):new xi(c,a.a,a.we),a.pc.wa(),c=a.pc,c.gd?(c=document.getElementById(c.gd),c.style.display="inline",c.style.display="block",c={width:c.scrollWidth,height:c.scrollHeight}):c=o,a.md=c.height,a.pc instanceof Dl))a.Xb=a.pc.Xb}z.Gl=function(){0==this.qb&&k("Y Axis cannot use date time type. ")};
z.pk=function(){var a=[this.ac.clientWidth,this.ac.clientHeight],b=a[0];b<this.Ab&&(b=this.Ab);a=a[1];a<this.Ab&&(a=this.Ab);return[b,a]};z.Sj=function(){Fg(this.J);for(var a=0;a<this.z.length;a++)Fg(this.z[a])};z.Og=function(a){return 0===a||2===a?1:0};z.Ek=function(a){return 0===a||1===a};
z.Bi=function(a,b,c){for(var d=[],f=0,e=0,g=this.J.b,h=g.q,f=0;f<this.z.length;f++)this.z[f].v&&0<this.z[f].v.length?(this.z[f].D=h,this.z[f].location=this.Og(f),b&&(this.z[f].Ic=b),this.z[f].f=g,this.z[f].cc(35,a),this.z[f].Vb(this.fe===o?[]:[this.fe[f]],this.md),e=this.z[f].pa,d[f]=e,c&&this.z[f].Rh()):d[f]=0;return d};z.$h=function(a){var b=this.$a.Te(a);0>b&&k("Failed getting y-axis index via this series index: '"+a+"'.");return this.z[b]};
z.sk=function(a){this.$a||k("layout.doLayout method must be called first!");var b=this.$a.Te(a);0>b&&k("Failed getting y-axis index via this series index: '"+a+"'.");this.z[b]||k("Failed getting y-axis object via this index: '"+b+"'.");this.z[b].b||k("This y-axis ["+b+"] does not have a valid coordService.  You must call method on it to generate labels first.");return this.z[b].b};z.rk=function(){var a=Bg(this.z[0]);0===a.length&&(a=Bg(this.z[1]));return[Ag(this.J),a]};z.Kg=function(){return Bi(this.Y)};
z.wa=function(){5==this.l[0].d?this.nc=n:(this.nc=s,this.Gl());var a;2==this.pb?this.J=new ei(Di(this.Y),this.ka):0==this.pb?(a={qg:Di(this.Y),D:this.D,s:n,ka:this.ka,la:this.la,ha:this.ha,Wa:s},this.J=new Xh(a)):(a={qg:Di(this.Y),D:this.D,s:n,ka:this.ka,V:this.V,Ta:this.Ta,Ia:this.Xr,Gf:this.l[0].Ia},this.J=new Wg(a));a=o;for(var b=0;4>b;b++)a=Ci(this.Y,b),this.z[b]=2==this.qb?new Ii(a):new Cg(a,this.D,n,this.V,this.Ta,this.sh?this.sh[b]:o)};
z.hl=function(){this.J&&this.J.td(this.a);if(this.z&&0<this.z.length)for(var a=0;a<this.z.length;a++)this.z[a].td(this.a)};function Jl(a,b){this.ve=new Mj(a,b);this.iq=[15,16,17,18,19,20,21,15,22,23,24,25]}Jl.prototype.Nh=function(a){a.d=this.iq[a.fl.d]||15;a.s=n;return this.ve.Nh(a)};Jl.prototype.td=function(a){this.ve.a=a};function X(a,b){Ri.call(this,a);this.a=new xe;b!==o&&1===b&&(this.a=new Ea);this.la=Vb.get("en").zd;this.Ub=new Nb(this.la);this.Ka&&(this.I=new El(this.Ka,this.a,this.Ub));this.I&&(this.Pa=this.I.Kg());this.pb=0;this.qb=1;this.te=0;this.fe=this.jb=o;this.nc=s;this.Pa&&(this.ve=new Jl(this.Pa,this.a));this.qi=this.rg=o;this.lb&&this.sn();this.Jn=15;this.ha=this.Ta=this.V=s;this.sh=o;this.yd=this.tn=s;this.onClick=o}za(X,Ri);B("TRWebchart_Bus.TRBusinessChart",X);X.prototype.Ar=v("ha");
X.prototype.setSeasonalityEnabled=X.prototype.Ar;X.prototype.wr=v("jb");X.prototype.setLegends=X.prototype.wr;X.prototype.Cr=v("Vc");X.prototype.setXAxisTitle=X.prototype.Cr;X.prototype.ur=function(a){this.tn=a;this.I.ci=!this.tn};X.prototype.setInnerRightAsFirstYAxis=X.prototype.ur;X.prototype.Br=v("yd");X.prototype.setUseNegPosColors=X.prototype.Br;X.prototype.Fr=v("fe");X.prototype.setYAxisTitles=X.prototype.Fr;X.prototype.lh=v("l");X.prototype.setSeriesParams=X.prototype.lh;
X.prototype.Mg=function(){var a=[],b=this.O;if(this.jb.length!==b.length)for(var b=this.a.sb.rb,c=0;c<this.jb.length;++c)a.push(new Hf(this.jb[c],b[this.l[c].Gd].stroke));else for(c=0;c<this.jb.length;++c)a.push(new Hf(this.jb[c],b[c].stroke));return a};X.prototype.getLegendColors=X.prototype.Mg;X.prototype.Er=function(a){this.sh=a;this.I.sh=a};X.prototype.setYAxisNumberFormats=X.prototype.Er;X.prototype.Jr=v("V");X.prototype.showActualNumberInLabel=X.prototype.Jr;
X.prototype.Lr=function(a){this.V=(this.Ta=a)?n:this.V};X.prototype.showIntegerNumberOnly=X.prototype.Lr;
X.prototype.oh=function(){this.fb?this.fb.a=this.a:this.fb=new ok({Ka:this.Pa,a:this.a});this.fb.Ec();this.nc=5===this.l[0].d;this.ia=[];for(var a,b=a=0,b=0;b<this.l.length;b++){var c=this.l[b],d=this.ve.Nh({fl:c,ha:this.ha,yd:this.yd});d.Ec();a=parseInt(this.nb.getItem(b),10);a=this.O.slice(a,this.O.length);20==d.d||23==d.d||17==d.d||18==d.d||16==d.d||22==d.d||25==d.d?d.$e(a):d.O=[a[0]];20!=d.d&&(d.Li(this.I.J.b),a=this.I.sk(b),d.j=a);d.ll(c.La?c.La:2);0===b&&(2!=this.l[b].d&&3!=this.l[b].d)&&(d.canvas.style.zIndex=
60);d.Sf=b;this.ia[this.ia.length]=d}this.nc===s?(d=this.I.rk(),b=this.fb,c=d[1],b.U=d[0],b.Pb=c):(b=Ei(this.I.Y),d.cc(b[0],b[1],this.I.Xb),d=this.fb,d.U=o,d.Pb=o)};X.prototype.td=function(a){this.a=1==a?new Ea:new xe;this.a.H.kb.Dd=this.ul;this.a.H.Bc=this.ko;this.a.W.Cd=this.jo;this.a.p.qc=this.zb;this.a.aa.Ea.Ac=this.Vf;this.a.aa.Ea.Ib=this.Qj;this.I.td(this.a);this.ve.td(this.a)};X.prototype.setChartScheme=X.prototype.td;
X.prototype.fo=function(a){0!=a&&(30!=a&&45!=a&&60!=a&&90!=a&&270!=a&&300!=a&&315!=a&&330!=a)&&k("It's not allowed degree");this.te=a};X.prototype.setRotateDegree=X.prototype.fo;X.prototype.Dr=v("pb");X.prototype.setXAxisType=X.prototype.Dr;X.prototype.Gr=v("qb");X.prototype.setYAxisType=X.prototype.Gr;X.prototype.il=function(a){this.la=a;this.rg.il(a)};X.prototype.setDateFormat=X.prototype.il;X.prototype.Qe=function(){this.Nb()};X.prototype.drawChart=X.prototype.Qe;
X.prototype.Nb=function(){Ti(this)===s&&k("Cannot proceed due to the following reason(s): "+this.Th);Si()||k("The browser does not support canvas.");Ui(this);var a=[];if(!(this.jb===o||0===this.jb.length)){var b=0,c=0,b=0,d,f,e=0,g;if(0<this.jb.length)for(c=0;c<this.l.length;c++){d=this.l[c];var b=parseInt(this.nb.getItem(c),10),h=this.O.slice(b,this.O.length);if(5==d.d||9==d.d){for(b=0;b<d.k.Columns.length;b++)if(d.k.Columns[b].Name==d.Q){f=d.k.Columns[b].Values.length;break}for(b=0;b<f;b++)this.jb[e]!==
l&&(a.push(new Fi(this.jb[e],h[b].stroke,s)),e++)}else if(2==d.d||3==d.d||1==d.d||8==d.d){f=d.c.length;for(b=0;b<f;b++)if(this.jb[e]!==l&&(a.push(new Fi(this.jb[e],h[b].stroke,s)),e++),d.Dc&&!isNaN(d.Dc[0])&&-1!=d.Dc[0])this.jb[e]&&(g=Mf(h[b].stroke,0.5),a.push(new Fi(this.jb[e],g,s))),e++}else if(this.jb[e]!==l&&(a.push(new Fi(this.jb[e],h[0].stroke,0!=d.Yb?n:s)),e++),4!=d.d&&d.Dc&&!isNaN(d.Dc[0])&&-1!=d.Dc[0])this.jb[e]&&(g=Mf(h[0].stroke,0.5),a.push(new Fi(this.jb[e],g,0!=d.Yb?n:s))),e++}}this.a.p.qc=
this.zb;this.I.dd(this.l,{D:this.D,fe:this.fe,pb:this.pb,te:this.te,la:this.la,qb:this.qb,O:this.O,V:this.V,Ta:this.Ta,fd:2===this.a.p.qc,Vc:this.Vc,ha:this.ha,we:a});Df(this);this.rg&&this.rg.ze();this.qi&&this.qi.ze();this.oh();this.fb.S();a=new Date;for(c=0;c<this.ia.length;c++)this.ia[c].S();this.Ae((new Date).getTime()-a.getTime())};X.prototype.render=X.prototype.Nb;
X.prototype.sn=function(){var a;if(this.Pa){this.rg=new Bl(this);a=new Zi(this.Pa,ba(n),this.rg);a.Qh();this.qi=new zl(this);a=new Cl(this.Pa,ba(n),this.qi);a.Qh();var b=this;a=a.Cm;a.ye[a.ye.length]=function(a){if(b.onClick)b.onClick(a)}}};X.prototype.bl=function(){this.Nb()};X.prototype.resizeChart=X.prototype.bl;X.prototype.Be=function(a,b){X.ud.Be.call(this,a,b)};X.prototype.setChartTitle=X.prototype.Be;X.prototype.Ki=function(a){X.ud.Ki.call(this,a)};X.prototype.setShowYAxisTitle=X.prototype.Ki;
X.prototype.rl=function(a){X.ud.rl.call(this,a)};X.prototype.setShowYAxis=X.prototype.rl;X.prototype.ql=function(a){X.ud.ql.call(this,a)};X.prototype.setShowXAxis=X.prototype.ql;X.prototype.ae=function(a){X.ud.ae.call(this,a)};X.prototype.setMarqueeDisplayMode=X.prototype.ae;X.prototype.nl=v("Ae");X.prototype.setReportSpeedFunction=X.prototype.nl;

//Start ------ slick.core.js

/***
 * Contains core SlickGrid classes.
 * @module Core
 * @namespace Slick
 */

(function ($) {
  // register namespace
  $.extend(true, window, {
    "Slick": {
      "Event": Event,
      "EventData": EventData,
      "EventHandler": EventHandler,
      "Range": Range,
      "NonDataRow": NonDataItem,
      "Group": Group,
      "GroupTotals": GroupTotals,
      "EditorLock": EditorLock,

      /***
       * A global singleton editor lock.
       * @class GlobalEditorLock
       * @static
       * @constructor
       */
      "GlobalEditorLock": new EditorLock()
    }
  });

  /***
   * An event object for passing data to event handlers and letting them control propagation.
   * <p>This is pretty much identical to how W3C and jQuery implement events.</p>
   * @class EventData
   * @constructor
   */
  function EventData() {
    var isPropagationStopped = false;
    var isImmediatePropagationStopped = false;

    /***
     * Stops event from propagating up the DOM tree.
     * @method stopPropagation
     */
    this.stopPropagation = function () {
      isPropagationStopped = true;
    };

    /***
     * Returns whether stopPropagation was called on this event object.
     * @method isPropagationStopped
     * @return {Boolean}
     */
    this.isPropagationStopped = function () {
      return isPropagationStopped;
    };

    /***
     * Prevents the rest of the handlers from being executed.
     * @method stopImmediatePropagation
     */
    this.stopImmediatePropagation = function () {
      isImmediatePropagationStopped = true;
    };

    /***
     * Returns whether stopImmediatePropagation was called on this event object.\
     * @method isImmediatePropagationStopped
     * @return {Boolean}
     */
    this.isImmediatePropagationStopped = function () {
      return isImmediatePropagationStopped;
    }
  }

  /***
   * A simple publisher-subscriber implementation.
   * @class Event
   * @constructor
   */
  function Event() {
    var handlers = [];

    /***
     * Adds an event handler to be called when the event is fired.
     * <p>Event handler will receive two arguments - an <code>EventData</code> and the <code>data</code>
     * object the event was fired with.<p>
     * @method subscribe
     * @param fn {Function} Event handler.
     */
    this.subscribe = function (fn) {
      handlers.push(fn);
    };

    /***
     * Removes an event handler added with <code>subscribe(fn)</code>.
     * @method unsubscribe
     * @param fn {Function} Event handler to be removed.
     */
    this.unsubscribe = function (fn) {
      for (var i = handlers.length - 1; i >= 0; i--) {
        if (handlers[i] === fn) {
          handlers.splice(i, 1);
        }
      }
    };

    /***
     * Fires an event notifying all subscribers.
     * @method notify
     * @param args {Object} Additional data object to be passed to all handlers.
     * @param e {EventData}
     *      Optional.
     *      An <code>EventData</code> object to be passed to all handlers.
     *      For DOM events, an existing W3C/jQuery event object can be passed in.
     * @param scope {Object}
     *      Optional.
     *      The scope ("this") within which the handler will be executed.
     *      If not specified, the scope will be set to the <code>Event</code> instance.
     */
    this.notify = function (args, e, scope) {
      e = e || new EventData();
      scope = scope || this;

      var returnValue;
      for (var i = 0; i < handlers.length && !(e.isPropagationStopped() || e.isImmediatePropagationStopped()); i++) {
        returnValue = handlers[i].call(scope, e, args);
      }

      return returnValue;
    };
  }

  function EventHandler() {
    var handlers = [];

    this.subscribe = function (event, handler) {
      handlers.push({
        event: event,
        handler: handler
      });
      event.subscribe(handler);

      return this;  // allow chaining
    };

    this.unsubscribe = function (event, handler) {
      var i = handlers.length;
      while (i--) {
        if (handlers[i].event === event &&
            handlers[i].handler === handler) {
          handlers.splice(i, 1);
          event.unsubscribe(handler);
          return;
        }
      }

      return this;  // allow chaining
    };

    this.unsubscribeAll = function () {
      var i = handlers.length;
      while (i--) {
        handlers[i].event.unsubscribe(handlers[i].handler);
      }
      handlers = [];

      return this;  // allow chaining
    }
  }

  /***
   * A structure containing a range of cells.
   * @class Range
   * @constructor
   * @param fromRow {Integer} Starting row.
   * @param fromCell {Integer} Starting cell.
   * @param toRow {Integer} Optional. Ending row. Defaults to <code>fromRow</code>.
   * @param toCell {Integer} Optional. Ending cell. Defaults to <code>fromCell</code>.
   */
  function Range(fromRow, fromCell, toRow, toCell) {
    if (toRow === undefined && toCell === undefined) {
      toRow = fromRow;
      toCell = fromCell;
    }

    /***
     * @property fromRow
     * @type {Integer}
     */
    this.fromRow = Math.min(fromRow, toRow);

    /***
     * @property fromCell
     * @type {Integer}
     */
    this.fromCell = Math.min(fromCell, toCell);

    /***
     * @property toRow
     * @type {Integer}
     */
    this.toRow = Math.max(fromRow, toRow);

    /***
     * @property toCell
     * @type {Integer}
     */
    this.toCell = Math.max(fromCell, toCell);

    /***
     * Returns whether a range represents a single row.
     * @method isSingleRow
     * @return {Boolean}
     */
    this.isSingleRow = function () {
      return this.fromRow == this.toRow;
    };

    /***
     * Returns whether a range represents a single cell.
     * @method isSingleCell
     * @return {Boolean}
     */
    this.isSingleCell = function () {
      return this.fromRow == this.toRow && this.fromCell == this.toCell;
    };

    /***
     * Returns whether a range contains a given cell.
     * @method contains
     * @param row {Integer}
     * @param cell {Integer}
     * @return {Boolean}
     */
    this.contains = function (row, cell) {
      return row >= this.fromRow && row <= this.toRow &&
          cell >= this.fromCell && cell <= this.toCell;
    };

    /***
     * Returns a readable representation of a range.
     * @method toString
     * @return {String}
     */
    this.toString = function () {
      if (this.isSingleCell()) {
        return "(" + this.fromRow + ":" + this.fromCell + ")";
      }
      else {
        return "(" + this.fromRow + ":" + this.fromCell + " - " + this.toRow + ":" + this.toCell + ")";
      }
    }
  }


  /***
   * A base class that all special / non-data rows (like Group and GroupTotals) derive from.
   * @class NonDataItem
   * @constructor
   */
  function NonDataItem() {
    this.__nonDataRow = true;
  }


  /***
   * Information about a group of rows.
   * @class Group
   * @extends Slick.NonDataItem
   * @constructor
   */
  function Group() {
    this.__group = true;

    /**
     * Grouping level, starting with 0.
     * @property level
     * @type {Number}
     */
    this.level = 0;

    /***
     * Number of rows in the group.
     * @property count
     * @type {Integer}
     */
    this.count = 0;

    /***
     * Grouping value.
     * @property value
     * @type {Object}
     */
    this.value = null;

    /***
     * Formatted display value of the group.
     * @property title
     * @type {String}
     */
    this.title = null;

    /***
     * Whether a group is collapsed.
     * @property collapsed
     * @type {Boolean}
     */
    this.collapsed = false;

    /***
     * GroupTotals, if any.
     * @property totals
     * @type {GroupTotals}
     */
    this.totals = null;

    /**
     * Rows that are part of the group.
     * @property rows
     * @type {Array}
     */
    this.rows = [];

    /**
     * Sub-groups that are part of the group.
     * @property groups
     * @type {Array}
     */
    this.groups = null;

    /**
     * A unique key used to identify the group.  This key can be used in calls to DataView
     * collapseGroup() or expandGroup().
     * @property groupingKey
     * @type {Object}
     */
    this.groupingKey = null;
  }

  Group.prototype = new NonDataItem();

  /***
   * Compares two Group instances.
   * @method equals
   * @return {Boolean}
   * @param group {Group} Group instance to compare to.
   */
  Group.prototype.equals = function (group) {
    return this.value === group.value &&
        this.count === group.count &&
        this.collapsed === group.collapsed;
  };

  /***
   * Information about group totals.
   * An instance of GroupTotals will be created for each totals row and passed to the aggregators
   * so that they can store arbitrary data in it.  That data can later be accessed by group totals
   * formatters during the display.
   * @class GroupTotals
   * @extends Slick.NonDataItem
   * @constructor
   */
  function GroupTotals() {
    this.__groupTotals = true;

    /***
     * Parent Group.
     * @param group
     * @type {Group}
     */
    this.group = null;
  }

  GroupTotals.prototype = new NonDataItem();

  /***
   * A locking helper to track the active edit controller and ensure that only a single controller
   * can be active at a time.  This prevents a whole class of state and validation synchronization
   * issues.  An edit controller (such as SlickGrid) can query if an active edit is in progress
   * and attempt a commit or cancel before proceeding.
   * @class EditorLock
   * @constructor
   */
  function EditorLock() {
    var activeEditController = null;

    /***
     * Returns true if a specified edit controller is active (has the edit lock).
     * If the parameter is not specified, returns true if any edit controller is active.
     * @method isActive
     * @param editController {EditController}
     * @return {Boolean}
     */
    this.isActive = function (editController) {
      return (editController ? activeEditController === editController : activeEditController !== null);
    };

    /***
     * Sets the specified edit controller as the active edit controller (acquire edit lock).
     * If another edit controller is already active, and exception will be thrown.
     * @method activate
     * @param editController {EditController} edit controller acquiring the lock
     */
    this.activate = function (editController) {
      if (editController === activeEditController) { // already activated?
        return;
      }
      if (activeEditController !== null) {
        throw "SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";
      }
      if (!editController.commitCurrentEdit) {
        throw "SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";
      }
      if (!editController.cancelCurrentEdit) {
        throw "SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";
      }
      activeEditController = editController;
    };

    /***
     * Unsets the specified edit controller as the active edit controller (release edit lock).
     * If the specified edit controller is not the active one, an exception will be thrown.
     * @method deactivate
     * @param editController {EditController} edit controller releasing the lock
     */
    this.deactivate = function (editController) {
      if (activeEditController !== editController) {
        throw "SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";
      }
      activeEditController = null;
    };

    /***
     * Attempts to commit the current edit by calling "commitCurrentEdit" method on the active edit
     * controller and returns whether the commit attempt was successful (commit may fail due to validation
     * errors, etc.).  Edit controller's "commitCurrentEdit" must return true if the commit has succeeded
     * and false otherwise.  If no edit controller is active, returns true.
     * @method commitCurrentEdit
     * @return {Boolean}
     */
    this.commitCurrentEdit = function () {
      return (activeEditController ? activeEditController.commitCurrentEdit() : true);
    };

    /***
     * Attempts to cancel the current edit by calling "cancelCurrentEdit" method on the active edit
     * controller and returns whether the edit was successfully cancelled.  If no edit controller is
     * active, returns true.
     * @method cancelCurrentEdit
     * @return {Boolean}
     */
    this.cancelCurrentEdit = function cancelCurrentEdit() {
      return (activeEditController ? activeEditController.cancelCurrentEdit() : true);
    };
  }
})(jQuery);

//End ------ slick.core.js

//Start ------ slick.grid.js
/**
 * @license
 * (c) 2009-2012 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.1
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */

// make sure required JavaScript modules are loaded
if (typeof jQuery === "undefined") {
  throw "SlickGrid requires jquery module to be loaded";
}
if (!jQuery.fn.drag) {
  throw "SlickGrid requires jquery.event.drag module to be loaded";
}
if (typeof Slick === "undefined") {
  throw "slick.core.js not loaded";
}


(function ($) {
  // Slick.Grid
  $.extend(true, window, {
    Slick: {
      Grid: SlickGrid
    }
  });

  // shared across all grids on the page
  var scrollbarDimensions;
  var maxSupportedCssHeight;  // browser's breaking point

  //////////////////////////////////////////////////////////////////////////////////////////////
  // SlickGrid class implementation (available as Slick.Grid)

  /**
   * Creates a new instance of the grid.
   * @class SlickGrid
   * @constructor
   * @param {Node}              container   Container node to create the grid in.
   * @param {Array,Object}      data        An array of objects for databinding.
   * @param {Array}             columns     An array of column definitions.
   * @param {Object}            options     Grid options.
   **/
  function SlickGrid(container, data, columns, options) {
    // settings
    var defaults = {
      explicitInitialization: false,
      rowHeight: 25,
      defaultColumnWidth: 80,
      enableAddRow: false,
      leaveSpaceForNewRows: false,
      editable: false,
      autoEdit: true,
      enableCellNavigation: true,
      enableColumnReorder: true,
      asyncEditorLoading: false,
      asyncEditorLoadDelay: 100,
      forceFitColumns: false,
      enableAsyncPostRender: false,
      asyncPostRenderDelay: 50,
      autoHeight: false,
      editorLock: Slick.GlobalEditorLock,
      showHeaderRow: false,
      headerRowHeight: 25,
      showTopPanel: false,
      topPanelHeight: 25,
      formatterFactory: null,
      editorFactory: null,
      cellFlashingCssClass: "flashing",
      selectedCellCssClass: "selected",
      multiSelect: true,
      enableTextSelectionOnCells: false,
      dataItemColumnValueExtractor: null,
      fullWidthRows: false,
      multiColumnSort: false,
      defaultFormatter: defaultFormatter,
      forceSyncScrolling: false
    };

    var columnDefaults = {
      name: "",
      resizable: true,
      sortable: false,
      minWidth: 30,
      rerenderOnResize: false,
      headerCssClass: null,
      defaultSortAsc: true,
      focusable: true,
      selectable: true
    };

    // scroller
    var th;   // virtual height
    var h;    // real scrollable height
    var ph;   // page height
    var n;    // number of pages
    var cj;   // "jumpiness" coefficient

    var page = 0;       // current page
    var offset = 0;     // current page offset
    var vScrollDir = 1;

    // private
    var initialized = false;
    var $container;
    var uid = "slickgrid_" + Math.round(1000000 * Math.random());
    var self = this;
    var $focusSink, $focusSink2;
    var $headerScroller;
    var $headers;
    var $headerRow, $headerRowScroller, $headerRowSpacer;
    var $topPanelScroller;
    var $topPanel;
    var $viewport;
    var $canvas;
    var $style;
    var $boundAncestors;
    var stylesheet, columnCssRulesL, columnCssRulesR;
    var viewportH, viewportW;
    var canvasWidth;
    var viewportHasHScroll, viewportHasVScroll;
    var headerColumnWidthDiff = 0, headerColumnHeightDiff = 0, // border+padding
        cellWidthDiff = 0, cellHeightDiff = 0;
    var absoluteColumnMinWidth;
    var numberOfRows = 0;

    var tabbingDirection = 1;
    var activePosX;
    var activeRow, activeCell;
    var activeCellNode = null;
    var currentEditor = null;
    var serializedEditorValue;
    var editController;

    var rowsCache = {};
    var renderedRows = 0;
    var numVisibleRows;
    var prevScrollTop = 0;
    var scrollTop = 0;
    var lastRenderedScrollTop = 0;
    var lastRenderedScrollLeft = 0;
    var prevScrollLeft = 0;
    var scrollLeft = 0;

    var selectionModel;
    var selectedRows = [];

    var plugins = [];
    var cellCssClasses = {};

    var columnsById = {};
    var sortColumns = [];
    var columnPosLeft = [];
    var columnPosRight = [];


    // async call handles
    var h_editorLoader = null;
    var h_render = null;
    var h_postrender = null;
    var postProcessedRows = {};
    var postProcessToRow = null;
    var postProcessFromRow = null;

    // perf counters
    var counter_rows_rendered = 0;
    var counter_rows_removed = 0;


    //////////////////////////////////////////////////////////////////////////////////////////////
    // Initialization

    function init() {
      $container = $(container);
      if ($container.length < 1) {
        throw new Error("SlickGrid requires a valid container, " + container + " does not exist in the DOM.");
      }

      // calculate these only once and share between grid instances
      maxSupportedCssHeight = maxSupportedCssHeight || getMaxSupportedCssHeight();
      scrollbarDimensions = scrollbarDimensions || measureScrollbar();

      options = $.extend({}, defaults, options);
      validateAndEnforceOptions();
      columnDefaults.width = options.defaultColumnWidth;

      columnsById = {};
      for (var i = 0; i < columns.length; i++) {
        var m = columns[i] = $.extend({}, columnDefaults, columns[i]);
        columnsById[m.id] = i;
        if (m.minWidth && m.width < m.minWidth) {
          m.width = m.minWidth;
        }
        if (m.maxWidth && m.width > m.maxWidth) {
          m.width = m.maxWidth;
        }
      }

      // validate loaded JavaScript modules against requested options
      if (options.enableColumnReorder && !$.fn.sortable) {
        throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");
      }

      editController = {
        "commitCurrentEdit": commitCurrentEdit,
        "cancelCurrentEdit": cancelCurrentEdit
      };

      $container
          .empty()
          .css("overflow", "hidden")
          .css("outline", 0)
          .addClass(uid)
          .addClass("ui-widget");

      // set up a positioning container if needed
      if (!/relative|absolute|fixed/.test($container.css("position"))) {
        $container.css("position", "relative");
      }

      $focusSink = $("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);

      $headerScroller = $("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);
      $headers = $("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);
      $headers.width(getHeadersWidth());

      $headerRowScroller = $("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);
      $headerRow = $("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);
      $headerRowSpacer = $("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>")
          .css("width", getCanvasWidth() + scrollbarDimensions.width + "px")
          .appendTo($headerRowScroller);

      $topPanelScroller = $("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);
      $topPanel = $("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);

      if (!options.showTopPanel) {
        $topPanelScroller.hide();
      }

      if (!options.showHeaderRow) {
        $headerRowScroller.hide();
      }

      $viewport = $("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container);
      $viewport.css("overflow-y", options.autoHeight ? "hidden" : "auto");

      $canvas = $("<div class='grid-canvas' />").appendTo($viewport);

      $focusSink2 = $focusSink.clone().appendTo($container);

      if (!options.explicitInitialization) {
        finishInitialization();
      }
    }

    function finishInitialization() {
      if (!initialized) {
        initialized = true;

        viewportW = parseFloat($.css($container[0], "width", true));

        // header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)
        // calculate the diff so we can set consistent sizes
        measureCellPaddingAndBorder();

        // for usability reasons, all text selection in SlickGrid is disabled
        // with the exception of input and textarea elements (selection must
        // be enabled there so that editors work as expected); note that
        // selection in grid cells (grid body) is already unavailable in
        // all browsers except IE
        disableSelection($headers); // disable all text selection in header (including input and textarea)

        if (!options.enableTextSelectionOnCells) {
          // disable text selection in grid cells except in input and textarea elements
          // (this is IE-specific, because selectstart event will only fire in IE)
          $viewport.bind("selectstart.ui", function (event) {
            return $(event.target).is("input,textarea");
          });
        }

        updateColumnCaches();
        createColumnHeaders();
        setupColumnSort();
        createCssRules();
        resizeCanvas();
        bindAncestorScrollEvents();

        $container
            .bind("resize.slickgrid", resizeCanvas);
        $viewport
            .bind("scroll", handleScroll);
        $headerScroller
            .bind("contextmenu", handleHeaderContextMenu)
            .bind("click", handleHeaderClick)
            .delegate(".slick-header-column", "mouseenter", handleHeaderMouseEnter)
            .delegate(".slick-header-column", "mouseleave", handleHeaderMouseLeave);
        $headerRowScroller
            .bind("scroll", handleHeaderRowScroll);
        $focusSink.add($focusSink2)
            .bind("keydown", handleKeyDown);
        $canvas
            .bind("keydown", handleKeyDown)
            .bind("click", handleClick)
            .bind("dblclick", handleDblClick)
            .bind("contextmenu", handleContextMenu)
            .bind("draginit", handleDragInit)
            .bind("dragstart", {distance: 3}, handleDragStart)
            .bind("drag", handleDrag)
            .bind("dragend", handleDragEnd)
            .delegate(".slick-cell", "mouseenter", handleMouseEnter)
            .delegate(".slick-cell", "mouseleave", handleMouseLeave);
      }
    }

    function registerPlugin(plugin) {
      plugins.unshift(plugin);
      plugin.init(self);
    }

    function unregisterPlugin(plugin) {
      for (var i = plugins.length; i >= 0; i--) {
        if (plugins[i] === plugin) {
          if (plugins[i].destroy) {
            plugins[i].destroy();
          }
          plugins.splice(i, 1);
          break;
        }
      }
    }

    function setSelectionModel(model) {
      if (selectionModel) {
        selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);
        if (selectionModel.destroy) {
          selectionModel.destroy();
        }
      }

      selectionModel = model;
      if (selectionModel) {
        selectionModel.init(self);
        selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);
      }
    }

    function getSelectionModel() {
      return selectionModel;
    }

    function getCanvasNode() {
      return $canvas[0];
    }

    function measureScrollbar() {
      var $c = $("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");
      var dim = {
        width: $c.width() - $c[0].clientWidth,
        height: $c.height() - $c[0].clientHeight
      };
      $c.remove();
      return dim;
    }

    function getHeadersWidth() {
      var headersWidth = 0;
      for (var i = 0, ii = columns.length; i < ii; i++) {
        var width = columns[i].width;
        headersWidth += width;
      }
      headersWidth += scrollbarDimensions.width;
      return Math.max(headersWidth, viewportW) + 1000;
    }

    function getCanvasWidth() {
      var availableWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;
      var rowWidth = 0;
      var i = columns.length;
      while (i--) {
        rowWidth += columns[i].width;
      }
      return options.fullWidthRows ? Math.max(rowWidth, availableWidth) : rowWidth;
    }

    function updateCanvasWidth(forceColumnWidthsUpdate) {
      var oldCanvasWidth = canvasWidth;
      canvasWidth = getCanvasWidth();

      if (canvasWidth != oldCanvasWidth) {
        $canvas.width(canvasWidth);
        $headerRow.width(canvasWidth);
        $headers.width(getHeadersWidth());
        viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);
      }

      $headerRowSpacer.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));

      if (canvasWidth != oldCanvasWidth || forceColumnWidthsUpdate) {
        applyColumnWidths();
      }
    }

    function disableSelection($target) {
      if ($target && $target.jquery) {
        $target
            .attr("unselectable", "on")
            .css("MozUserSelect", "none")
            .bind("selectstart.ui", function () {
              return false;
            }); // from jquery:ui.core.js 1.7.2
      }
    }

    function getMaxSupportedCssHeight() {
      var supportedHeight = 1000000;
      // FF reports the height back but still renders blank after ~6M px
      var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;
      var div = $("<div style='display:none' />").appendTo(document.body);

      while (true) {
        var test = supportedHeight * 2;
        div.css("height", test);
        if (test > testUpTo || div.height() !== test) {
          break;
        } else {
          supportedHeight = test;
        }
      }

      div.remove();
      return supportedHeight;
    }

    // TODO:  this is static.  need to handle page mutation.
    function bindAncestorScrollEvents() {
      var elem = $canvas[0];
      while ((elem = elem.parentNode) != document.body && elem != null) {
        // bind to scroll containers only
        if (elem == $viewport[0] || elem.scrollWidth != elem.clientWidth || elem.scrollHeight != elem.clientHeight) {
          var $elem = $(elem);
          if (!$boundAncestors) {
            $boundAncestors = $elem;
          } else {
            $boundAncestors = $boundAncestors.add($elem);
          }
          $elem.bind("scroll." + uid, handleActiveCellPositionChange);
        }
      }
    }

    function unbindAncestorScrollEvents() {
      if (!$boundAncestors) {
        return;
      }
      $boundAncestors.unbind("scroll." + uid);
      $boundAncestors = null;
    }

    function updateColumnHeader(columnId, title, toolTip) {
      if (!initialized) { return; }
      var idx = getColumnIndex(columnId);
      if (idx == null) {
        return;
      }

      var columnDef = columns[idx];
      var $header = $headers.children().eq(idx);
      if ($header) {
        if (title !== undefined) {
          columns[idx].name = title;
        }
        if (toolTip !== undefined) {
          columns[idx].toolTip = toolTip;
        }

        trigger(self.onBeforeHeaderCellDestroy, {
          "node": $header[0],
          "column": columnDef
        });

        $header
            .attr("title", toolTip || "")
            .children().eq(0).html(title);

        trigger(self.onHeaderCellRendered, {
          "node": $header[0],
          "column": columnDef
        });
      }
    }

    function getHeaderRow() {
      return $headerRow[0];
    }

    function getHeaderRowColumn(columnId) {
      var idx = getColumnIndex(columnId);
      var $header = $headerRow.children().eq(idx);
      return $header && $header[0];
    }

    function createColumnHeaders() {
      function onMouseEnter() {
        $(this).addClass("ui-state-hover");
      }

      function onMouseLeave() {
        $(this).removeClass("ui-state-hover");
      }

      $headers.find(".slick-header-column")
        .each(function() {
          var columnDef = $(this).data("column");
          if (columnDef) {
            trigger(self.onBeforeHeaderCellDestroy, {
              "node": this,
              "column": columnDef
            });
          }
        });
      $headers.empty();
      $headers.width(getHeadersWidth());

      $headerRow.find(".slick-headerrow-column")
        .each(function() {
          var columnDef = $(this).data("column");
          if (columnDef) {
            trigger(self.onBeforeHeaderRowCellDestroy, {
              "node": this,
              "column": columnDef
            });
          }
        });
      $headerRow.empty();

      for (var i = 0; i < columns.length; i++) {
        var m = columns[i];

        var header = $("<div class='ui-state-default slick-header-column' id='" + uid + m.id + "' />")
            .html("<span class='slick-column-name'>" + m.name + "</span>")
            .width(m.width - headerColumnWidthDiff)
            .attr("title", m.toolTip || "")
            .data("column", m)
            .addClass(m.headerCssClass || "")
            .appendTo($headers);

        if (options.enableColumnReorder || m.sortable) {
          header
            .on('mouseenter', onMouseEnter)
            .on('mouseleave', onMouseLeave);
        }

        if (m.sortable) {
          header.addClass("slick-header-sortable");
          header.append("<span class='slick-sort-indicator' />");
        }

        trigger(self.onHeaderCellRendered, {
          "node": header[0],
          "column": m
        });

        if (options.showHeaderRow) {
          var headerRowCell = $("<div class='ui-state-default slick-headerrow-column l" + i + " r" + i + "'></div>")
              .data("column", m)
              .appendTo($headerRow);

          trigger(self.onHeaderRowCellRendered, {
            "node": headerRowCell[0],
            "column": m
          });
        }
      }

      setSortColumns(sortColumns);
      setupColumnResize();
      if (options.enableColumnReorder) {
        setupColumnReorder();
      }
    }

    function setupColumnSort() {
      $headers.click(function (e) {
        // temporary workaround for a bug in jQuery 1.7.1 (http://bugs.jquery.com/ticket/11328)
        e.metaKey = e.metaKey || e.ctrlKey;

        if ($(e.target).hasClass("slick-resizable-handle")) {
          return;
        }

        var $col = $(e.target).closest(".slick-header-column");
        if (!$col.length) {
          return;
        }

        var column = $col.data("column");
        if (column.sortable) {
          if (!getEditorLock().commitCurrentEdit()) {
            return;
          }

          var sortOpts = null;
          var i = 0;
          for (; i < sortColumns.length; i++) {
              if (sortColumns[i].columnId == column.id) {
              sortOpts = sortColumns[i];
              sortOpts.sortAsc = !sortOpts.sortAsc;
              break;
            }
          }

          if (e.metaKey && options.multiColumnSort) {
            if (sortOpts) {
              sortColumns.splice(i, 1);
            }
          }
          else {
            if ((!e.shiftKey && !e.metaKey) || !options.multiColumnSort) {
              sortColumns = [];
            }

            if (!sortOpts) {
              sortOpts = { columnId: column.id, sortAsc: column.defaultSortAsc };
              sortColumns.push(sortOpts);
            } else if (sortColumns.length == 0) {
              sortColumns.push(sortOpts);
            }
          }

          setSortColumns(sortColumns);

          if (!options.multiColumnSort) {
            trigger(self.onSort, {
              multiColumnSort: false,
              sortCol: column,
              sortAsc: sortOpts.sortAsc}, e);
          } else {
            trigger(self.onSort, {
              multiColumnSort: true,
              sortCols: $.map(sortColumns, function(col) {
                return {sortCol: columns[getColumnIndex(col.columnId)], sortAsc: col.sortAsc };
              })}, e);
          }
        }
      });
    }

    function setupColumnReorder() {
      $headers.filter(":ui-sortable").sortable("destroy");
      $headers.sortable({
        containment: "parent",
        distance: 3,
        axis: "x",
        cursor: "default",
        tolerance: "intersection",
        helper: "clone",
        placeholder: "slick-sortable-placeholder ui-state-default slick-header-column",
        forcePlaceholderSize: true,
        start: function (e, ui) {
          $(ui.helper).addClass("slick-header-column-active");
        },
        beforeStop: function (e, ui) {
          $(ui.helper).removeClass("slick-header-column-active");
        },
        stop: function (e) {
          if (!getEditorLock().commitCurrentEdit()) {
            $(this).sortable("cancel");
            return;
          }

          var reorderedIds = $headers.sortable("toArray");
          var reorderedColumns = [];
          for (var i = 0; i < reorderedIds.length; i++) {
            reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid, ""))]);
          }
          setColumns(reorderedColumns);

          trigger(self.onColumnsReordered, {});
          e.stopPropagation();
          setupColumnResize();
        }
      });
    }

    function setupColumnResize() {
      var $col, j, c, pageX, columnElements, minPageX, maxPageX, firstResizable, lastResizable;
      columnElements = $headers.children();
      columnElements.find(".slick-resizable-handle").remove();
      columnElements.each(function (i, e) {
        if (columns[i].resizable) {
          if (firstResizable === undefined) {
            firstResizable = i;
          }
          lastResizable = i;
        }
      });
      if (firstResizable === undefined) {
        return;
      }
      columnElements.each(function (i, e) {
        if (i < firstResizable || (options.forceFitColumns && i >= lastResizable)) {
          return;
        }
        $col = $(e);
        $("<div class='slick-resizable-handle' />")
            .appendTo(e)
            .bind("dragstart", function (e, dd) {
              if (!getEditorLock().commitCurrentEdit()) {
                return false;
              }
              pageX = e.pageX;
              $(this).parent().addClass("slick-header-column-active");
              var shrinkLeewayOnRight = null, stretchLeewayOnRight = null;
              // lock each column's width option to current width
              columnElements.each(function (i, e) {
                columns[i].previousWidth = $(e).outerWidth();
              });
              if (options.forceFitColumns) {
                shrinkLeewayOnRight = 0;
                stretchLeewayOnRight = 0;
                // colums on right affect maxPageX/minPageX
                for (j = i + 1; j < columnElements.length; j++) {
                  c = columns[j];
                  if (c.resizable) {
                    if (stretchLeewayOnRight !== null) {
                      if (c.maxWidth) {
                        stretchLeewayOnRight += c.maxWidth - c.previousWidth;
                      } else {
                        stretchLeewayOnRight = null;
                      }
                    }
                    shrinkLeewayOnRight += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);
                  }
                }
              }
              var shrinkLeewayOnLeft = 0, stretchLeewayOnLeft = 0;
              for (j = 0; j <= i; j++) {
                // columns on left only affect minPageX
                c = columns[j];
                if (c.resizable) {
                  if (stretchLeewayOnLeft !== null) {
                    if (c.maxWidth) {
                      stretchLeewayOnLeft += c.maxWidth - c.previousWidth;
                    } else {
                      stretchLeewayOnLeft = null;
                    }
                  }
                  shrinkLeewayOnLeft += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);
                }
              }
              if (shrinkLeewayOnRight === null) {
                shrinkLeewayOnRight = 100000;
              }
              if (shrinkLeewayOnLeft === null) {
                shrinkLeewayOnLeft = 100000;
              }
              if (stretchLeewayOnRight === null) {
                stretchLeewayOnRight = 100000;
              }
              if (stretchLeewayOnLeft === null) {
                stretchLeewayOnLeft = 100000;
              }
              maxPageX = pageX + Math.min(shrinkLeewayOnRight, stretchLeewayOnLeft);
              minPageX = pageX - Math.min(shrinkLeewayOnLeft, stretchLeewayOnRight);
            })
            .bind("drag", function (e, dd) {
              var actualMinWidth, d = Math.min(maxPageX, Math.max(minPageX, e.pageX)) - pageX, x;
              if (d < 0) { // shrink column
                x = d;
                for (j = i; j >= 0; j--) {
                  c = columns[j];
                  if (c.resizable) {
                    actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);
                    if (x && c.previousWidth + x < actualMinWidth) {
                      x += c.previousWidth - actualMinWidth;
                      c.width = actualMinWidth;
                    } else {
                      c.width = c.previousWidth + x;
                      x = 0;
                    }
                  }
                }

                if (options.forceFitColumns) {
                  x = -d;
                  for (j = i + 1; j < columnElements.length; j++) {
                    c = columns[j];
                    if (c.resizable) {
                      if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {
                        x -= c.maxWidth - c.previousWidth;
                        c.width = c.maxWidth;
                      } else {
                        c.width = c.previousWidth + x;
                        x = 0;
                      }
                    }
                  }
                }
              } else { // stretch column
                x = d;
                for (j = i; j >= 0; j--) {
                  c = columns[j];
                  if (c.resizable) {
                    if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {
                      x -= c.maxWidth - c.previousWidth;
                      c.width = c.maxWidth;
                    } else {
                      c.width = c.previousWidth + x;
                      x = 0;
                    }
                  }
                }

                if (options.forceFitColumns) {
                  x = -d;
                  for (j = i + 1; j < columnElements.length; j++) {
                    c = columns[j];
                    if (c.resizable) {
                      actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);
                      if (x && c.previousWidth + x < actualMinWidth) {
                        x += c.previousWidth - actualMinWidth;
                        c.width = actualMinWidth;
                      } else {
                        c.width = c.previousWidth + x;
                        x = 0;
                      }
                    }
                  }
                }
              }
              applyColumnHeaderWidths();
              if (options.syncColumnCellResize) {
                applyColumnWidths();
              }
            })
            .bind("dragend", function (e, dd) {
              var newWidth;
              $(this).parent().removeClass("slick-header-column-active");
              for (j = 0; j < columnElements.length; j++) {
                c = columns[j];
                newWidth = $(columnElements[j]).outerWidth();

                if (c.previousWidth !== newWidth && c.rerenderOnResize) {
                  invalidateAllRows();
                }
              }
              updateCanvasWidth(true);
              render();
              trigger(self.onColumnsResized, {});
            });
      });
    }

    function getVBoxDelta($el) {
      var p = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"];
      var delta = 0;
      $.each(p, function (n, val) {
        delta += parseFloat($el.css(val)) || 0;
      });
      return delta;
    }

    function measureCellPaddingAndBorder() {
      var el;
      var h = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"];
      var v = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"];

      el = $("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);
      headerColumnWidthDiff = headerColumnHeightDiff = 0;
      $.each(h, function (n, val) {
        headerColumnWidthDiff += parseFloat(el.css(val)) || 0;
      });
      $.each(v, function (n, val) {
        headerColumnHeightDiff += parseFloat(el.css(val)) || 0;
      });
      el.remove();

      var r = $("<div class='slick-row' />").appendTo($canvas);
      el = $("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);
      cellWidthDiff = cellHeightDiff = 0;
      $.each(h, function (n, val) {
        cellWidthDiff += parseFloat(el.css(val)) || 0;
      });
      $.each(v, function (n, val) {
        cellHeightDiff += parseFloat(el.css(val)) || 0;
      });
      r.remove();

      absoluteColumnMinWidth = Math.max(headerColumnWidthDiff, cellWidthDiff);
    }

    function createCssRules() {
      $style = $("<style type='text/css' rel='stylesheet' />").appendTo($("head"));
      var rowHeight = (options.rowHeight - cellHeightDiff);
      var rules = [
        "." + uid + " .slick-header-column { left: 1000px; }",
        "." + uid + " .slick-top-panel { height:" + options.topPanelHeight + "px; }",
        "." + uid + " .slick-headerrow-columns { height:" + options.headerRowHeight + "px; }",
        "." + uid + " .slick-cell { height:" + rowHeight + "px; }",
        "." + uid + " .slick-row { height:" + options.rowHeight + "px; }"
      ];

      for (var i = 0; i < columns.length; i++) {
        rules.push("." + uid + " .l" + i + " { }");
        rules.push("." + uid + " .r" + i + " { }");
      }

      if ($style[0].styleSheet) { // IE
        $style[0].styleSheet.cssText = rules.join(" ");
      } else {
        $style[0].appendChild(document.createTextNode(rules.join(" ")));
      }
    }

    function getColumnCssRules(idx) {
      if (!stylesheet) {
        var sheets = document.styleSheets;
        for (var i = 0; i < sheets.length; i++) {
          if ((sheets[i].ownerNode || sheets[i].owningElement) == $style[0]) {
            stylesheet = sheets[i];
            break;
          }
        }

        if (!stylesheet) {
          throw new Error("Cannot find stylesheet.");
        }

        // find and cache column CSS rules
        columnCssRulesL = [];
        columnCssRulesR = [];
        var cssRules = (stylesheet.cssRules || stylesheet.rules);
        var matches, columnIdx;
        for (var i = 0; i < cssRules.length; i++) {
          var selector = cssRules[i].selectorText;
          if (matches = /\.l\d+/.exec(selector)) {
            columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);
            columnCssRulesL[columnIdx] = cssRules[i];
          } else if (matches = /\.r\d+/.exec(selector)) {
            columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);
            columnCssRulesR[columnIdx] = cssRules[i];
          }
        }
      }

      return {
        "left": columnCssRulesL[idx],
        "right": columnCssRulesR[idx]
      };
    }

    function removeCssRules() {
      $style.remove();
      stylesheet = null;
    }

    function destroy() {
      getEditorLock().cancelCurrentEdit();

      trigger(self.onBeforeDestroy, {});

      var i = plugins.length;
      while(i--) {
        unregisterPlugin(plugins[i]);
      }

      if (options.enableColumnReorder) {
          $headers.filter(":ui-sortable").sortable("destroy");
      }

      unbindAncestorScrollEvents();
      $container.unbind(".slickgrid");
      removeCssRules();

      $canvas.unbind("draginit dragstart dragend drag");
      $container.empty().removeClass(uid);
    }


    //////////////////////////////////////////////////////////////////////////////////////////////
    // General

    function trigger(evt, args, e) {
      e = e || new Slick.EventData();
      args = args || {};
      args.grid = self;
      return evt.notify(args, e, self);
    }

    function getEditorLock() {
      return options.editorLock;
    }

    function getEditController() {
      return editController;
    }

    function getColumnIndex(id) {
      return columnsById[id];
    }

    function autosizeColumns() {
      var i, c,
          widths = [],
          shrinkLeeway = 0,
          total = 0,
          prevTotal,
          availWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;

      for (i = 0; i < columns.length; i++) {
        c = columns[i];
        widths.push(c.width);
        total += c.width;
        if (c.resizable) {
          shrinkLeeway += c.width - Math.max(c.minWidth, absoluteColumnMinWidth);
        }
      }

      // shrink
      prevTotal = total;
      while (total > availWidth && shrinkLeeway) {
        var shrinkProportion = (total - availWidth) / shrinkLeeway;
        for (i = 0; i < columns.length && total > availWidth; i++) {
          c = columns[i];
          var width = widths[i];
          if (!c.resizable || width <= c.minWidth || width <= absoluteColumnMinWidth) {
            continue;
          }
          var absMinWidth = Math.max(c.minWidth, absoluteColumnMinWidth);
          var shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;
          shrinkSize = Math.min(shrinkSize, width - absMinWidth);
          total -= shrinkSize;
          shrinkLeeway -= shrinkSize;
          widths[i] -= shrinkSize;
        }
        if (prevTotal == total) {  // avoid infinite loop
          break;
        }
        prevTotal = total;
      }

      // grow
      prevTotal = total;
      while (total < availWidth) {
        var growProportion = availWidth / total;
        for (i = 0; i < columns.length && total < availWidth; i++) {
          c = columns[i];
          if (!c.resizable || c.maxWidth <= c.width) {
            continue;
          }
          var growSize = Math.min(Math.floor(growProportion * c.width) - c.width, (c.maxWidth - c.width) || 1000000) || 1;
          total += growSize;
          widths[i] += growSize;
        }
        if (prevTotal == total) {  // avoid infinite loop
          break;
        }
        prevTotal = total;
      }

      var reRender = false;
      for (i = 0; i < columns.length; i++) {
        if (columns[i].rerenderOnResize && columns[i].width != widths[i]) {
          reRender = true;
        }
        columns[i].width = widths[i];
      }

      applyColumnHeaderWidths();
      updateCanvasWidth(true);
      if (reRender) {
        invalidateAllRows();
        render();
      }
    }

    function applyColumnHeaderWidths() {
      if (!initialized) { return; }
      var h;
      for (var i = 0, headers = $headers.children(), ii = headers.length; i < ii; i++) {
        h = $(headers[i]);
        if (h.width() !== columns[i].width - headerColumnWidthDiff) {
          h.width(columns[i].width - headerColumnWidthDiff);
        }
      }

      updateColumnCaches();
    }

    function applyColumnWidths() {
      var x = 0, w, rule;
      for (var i = 0; i < columns.length; i++) {
        w = columns[i].width;

        rule = getColumnCssRules(i);
        rule.left.style.left = x + "px";
        rule.right.style.right = (canvasWidth - x - w) + "px";

        x += columns[i].width;
      }
    }

    function setSortColumn(columnId, ascending) {
      setSortColumns([{ columnId: columnId, sortAsc: ascending}]);
    }

    function setSortColumns(cols) {
      sortColumns = cols;

      var headerColumnEls = $headers.children();
      headerColumnEls
          .removeClass("slick-header-column-sorted")
          .find(".slick-sort-indicator")
              .removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");

      $.each(sortColumns, function(i, col) {
        if (col.sortAsc == null) {
          col.sortAsc = true;
        }
        var columnIndex = getColumnIndex(col.columnId);
        if (columnIndex != null) {
          headerColumnEls.eq(columnIndex)
              .addClass("slick-header-column-sorted")
              .find(".slick-sort-indicator")
                  .addClass(col.sortAsc ? "slick-sort-indicator-asc" : "slick-sort-indicator-desc");
        }
      });
    }

    function getSortColumns() {
      return sortColumns;
    }

    function handleSelectedRangesChanged(e, ranges) {
      selectedRows = [];
      var hash = {};
      for (var i = 0; i < ranges.length; i++) {
        for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {
          if (!hash[j]) {  // prevent duplicates
            selectedRows.push(j);
            hash[j] = {};
          }
          for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++) {
            if (canCellBeSelected(j, k)) {
              hash[j][columns[k].id] = options.selectedCellCssClass;
            }
          }
        }
      }

      setCellCssStyles(options.selectedCellCssClass, hash);

      trigger(self.onSelectedRowsChanged, {rows: getSelectedRows()}, e);
    }

    function getColumns() {
      return columns;
    }

    function updateColumnCaches() {
      // Pre-calculate cell boundaries.
      columnPosLeft = [];
      columnPosRight = [];
      var x = 0;
      for (var i = 0, ii = columns.length; i < ii; i++) {
        columnPosLeft[i] = x;
        columnPosRight[i] = x + columns[i].width;
        x += columns[i].width;
      }
    }

    function setColumns(columnDefinitions) {
      columns = columnDefinitions;

      columnsById = {};
      for (var i = 0; i < columns.length; i++) {
        var m = columns[i] = $.extend({}, columnDefaults, columns[i]);
        columnsById[m.id] = i;
        if (m.minWidth && m.width < m.minWidth) {
          m.width = m.minWidth;
        }
        if (m.maxWidth && m.width > m.maxWidth) {
          m.width = m.maxWidth;
        }
      }

      updateColumnCaches();

      if (initialized) {
        invalidateAllRows();
        createColumnHeaders();
        removeCssRules();
        createCssRules();
        resizeCanvas();
        applyColumnWidths();
        handleScroll();
      }
    }

    function getOptions() {
      return options;
    }

    function setOptions(args) {
      if (!getEditorLock().commitCurrentEdit()) {
        return;
      }

      makeActiveCellNormal();

      if (options.enableAddRow !== args.enableAddRow) {
        invalidateRow(getDataLength());
      }

      options = $.extend(options, args);
      validateAndEnforceOptions();

      $viewport.css("overflow-y", options.autoHeight ? "hidden" : "auto");
      render();
    }

    function validateAndEnforceOptions() {
      if (options.autoHeight) {
        options.leaveSpaceForNewRows = false;
      }
    }

    function setData(newData, scrollToTop) {
      data = newData;
      invalidateAllRows();
      updateRowCount();
      if (scrollToTop) {
        scrollTo(0);
      }
    }

    function getData() {
      return data;
    }

    function getDataLength() {
      if (data.getLength) {
        return data.getLength();
      } else {
        return data.length;
      }
    }

    function getDataItem(i) {
      if (data.getItem) {
        return data.getItem(i);
      } else {
        return data[i];
      }
    }

    function getViewIndexByID(i) {
        var dLength = getDataLength();
        for (var j = 0; j < dLength; j++) {
            if (data.getItem(j).id == i)
                return j;
        }
    }

    function getIndexByTestID(i) {
        var items = data.getItems();
        for (var j = 0; j < items.length; j++) {
            if (items[j].testID  == i) 
                return j;
        }
    }

    function getTopPanel() {
      return $topPanel[0];
    }

    function setTopPanelVisibility(visible) {
      if (options.showTopPanel != visible) {
        options.showTopPanel = visible;
        if (visible) {
          $topPanelScroller.slideDown("fast", resizeCanvas);
        } else {
          $topPanelScroller.slideUp("fast", resizeCanvas);
        }
      }
    }

    function setHeaderRowVisibility(visible) {
      if (options.showHeaderRow != visible) {
        options.showHeaderRow = visible;
        if (visible) {
          $headerRowScroller.slideDown("fast", resizeCanvas);
        } else {
          $headerRowScroller.slideUp("fast", resizeCanvas);
        }
      }
    }

    //////////////////////////////////////////////////////////////////////////////////////////////
    // Rendering / Scrolling

    function getRowTop(row) {
      return options.rowHeight * row - offset;
    }

    function getTestStatus(d) {
        if (d.id == undefined || d.display == undefined)
            return "";
        for (var key in testStatus) {
            for (var i = 0; i < testStatus[key].length; i++) {
                var listedID = testStatus[key][i];
                if (listedID == d.id) {
                        return "<img src='images/" + key  + ".png' />";
                }
            }
        }
        return "";
    }

    function getRowFromPosition(y) {
      return Math.floor((y + offset) / options.rowHeight);
    }

    function scrollTo(y) {
      y = Math.max(y, 0);
      y = Math.min(y, th - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0));

      var oldOffset = offset;

      page = Math.min(n - 1, Math.floor(y / ph));
      offset = Math.round(page * cj);
      var newScrollTop = y - offset;

      if (offset != oldOffset) {
        var range = getVisibleRange(newScrollTop);
        cleanupRows(range);
        updateRowPositions();
      }

      if (prevScrollTop != newScrollTop) {
        vScrollDir = (prevScrollTop + oldOffset < newScrollTop + offset) ? 1 : -1;
        $viewport[0].scrollTop = (lastRenderedScrollTop = scrollTop = prevScrollTop = newScrollTop);

        trigger(self.onViewportChanged, {});
      }
    }

    function defaultFormatter(row, cell, value, columnDef, dataContext) {
      if (value == null) {
        return "";
      } else {
        return (value + "").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
      }
    }

    function getFormatter(row, column) {
      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);

      // look up by id, then index
      var columnOverrides = rowMetadata &&
          rowMetadata.columns &&
          (rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);

      return (columnOverrides && columnOverrides.formatter) ||
          (rowMetadata && rowMetadata.formatter) ||
          column.formatter ||
          (options.formatterFactory && options.formatterFactory.getFormatter(column)) ||
          options.defaultFormatter;
    }

    function getEditor(row, cell) {
      var column = columns[cell];
      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
      var columnMetadata = rowMetadata && rowMetadata.columns;

      if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined) {
        return columnMetadata[column.id].editor;
      }
      if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined) {
        return columnMetadata[cell].editor;
      }

      return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));
    }

    function getDataItemValueForColumn(item, columnDef) {
      if (options.dataItemColumnValueExtractor) {
        return options.dataItemColumnValueExtractor(item, columnDef);
      }
      return item[columnDef.field];
    }

    function appendRowHtml(stringArray, row, range) {
      var d = getDataItem(row);
      var dataLoading = row < getDataLength() && !d;
      var rowCss = "slick-row" +
          (dataLoading ? " loading" : "") +
          (row === activeRow ? " active" : "") +
          (row % 2 == 1 ? " odd" : " even");

      var metadata = data.getItemMetadata && data.getItemMetadata(row);

      if (metadata && metadata.cssClasses) {
        rowCss += " " + metadata.cssClasses;
      }

      stringArray.push("<div class='ui-widget-content " + rowCss + "' style='top:" + getRowTop(row) + "px'>");

      var colspan, m;
      for (var i = 0, ii = columns.length; i < ii; i++) {
        m = columns[i];
        colspan = 1;
        if (metadata && metadata.columns) {
          var columnData = metadata.columns[m.id] || metadata.columns[i];
          colspan = (columnData && columnData.colspan) || 1;
          if (colspan === "*") {
            colspan = ii - i;
          }
        }

        // Do not render cells outside of the viewport.
        if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {
          if (columnPosLeft[i] > range.rightPx) {
            // All columns to the right are outside the range.
            break;
          }

          appendCellHtml(stringArray, row, i, colspan);
        }

        if (colspan > 1) {
          i += (colspan - 1);
        }
      }

      stringArray.push("</div>");
    }

    function appendCellHtml(stringArray, row, cell, colspan) {
      var m = columns[cell];
      var d = getDataItem(row);
      var cellCss = "slick-cell l" + cell + " r" + Math.min(columns.length - 1, cell + colspan - 1) +
          (m.cssClass ? " " + m.cssClass : "");
      if (row === activeRow && cell === activeCell) {
        cellCss += (" active");
      }

      // TODO:  merge them together in the setter
      for (var key in cellCssClasses) {
        if (cellCssClasses[key][row] && cellCssClasses[key][row][m.id]) {
          cellCss += (" " + cellCssClasses[key][row][m.id]);
        }
      }

      stringArray.push("<div class='" + cellCss + "'>");

      // if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)
      if (d) {
        var value = getDataItemValueForColumn(d, m);
        stringArray.push(getFormatter(row, m)(row, cell, value, m, d));
        if (cell == 0)
            stringArray.push(getTestStatus(d));
      }

      stringArray.push("</div>");

      rowsCache[row].cellRenderQueue.push(cell);
      rowsCache[row].cellColSpans[cell] = colspan;
    }


    function cleanupRows(rangeToKeep) {
      for (var i in rowsCache) {
        if (((i = parseInt(i, 10)) !== activeRow) && (i < rangeToKeep.top || i > rangeToKeep.bottom)) {
          removeRowFromCache(i);
        }
      }
    }

    function invalidate() {
      updateRowCount();
      invalidateAllRows();
      render();
    }

    function invalidateAllRows() {
      if (currentEditor) {
        makeActiveCellNormal();
      }
      for (var row in rowsCache) {
        removeRowFromCache(row);
      }
    }

    function removeRowFromCache(row) {
      var cacheEntry = rowsCache[row];
      if (!cacheEntry) {
        return;
      }
      $canvas[0].removeChild(cacheEntry.rowNode);
      delete rowsCache[row];
      delete postProcessedRows[row];
      renderedRows--;
      counter_rows_removed++;
    }

    function invalidateRows(rows) {
      var i, rl;
      if (!rows || !rows.length) {
        return;
      }
      vScrollDir = 0;
      for (i = 0, rl = rows.length; i < rl; i++) {
        if (currentEditor && activeRow === rows[i]) {
          makeActiveCellNormal();
        }
        if (rowsCache[rows[i]]) {
          removeRowFromCache(rows[i]);
        }
      }
    }

    function invalidateRow(row) {
      invalidateRows([row]);
    }

    function updateCell(row, cell) {
      var cellNode = getCellNode(row, cell);
      if (!cellNode) {
        return;
      }

      var m = columns[cell], d = getDataItem(row);
      if (currentEditor && activeRow === row && activeCell === cell) {
        currentEditor.loadValue(d);
      } else {
        cellNode.innerHTML = d ? getFormatter(row, m)(row, cell, getDataItemValueForColumn(d, m), m, d) : "";
        invalidatePostProcessingResults(row);
      }
    }

    function updateRow(row) {
      var cacheEntry = rowsCache[row];
      if (!cacheEntry) {
        return;
      }

      ensureCellNodesInRowsCache(row);

      for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {
        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {
          continue;
        }

        columnIdx = columnIdx | 0;
        var m = columns[columnIdx],
            d = getDataItem(row),
            node = cacheEntry.cellNodesByColumnIdx[columnIdx];

        if (row === activeRow && columnIdx === activeCell && currentEditor) {
          currentEditor.loadValue(d);
        } else if (d) {
          node.innerHTML = getFormatter(row, m)(row, columnIdx, getDataItemValueForColumn(d, m), m, d);
        } else {
          node.innerHTML = "";
        }
      }

      invalidatePostProcessingResults(row);
    }

    function getViewportHeight() {
      return parseFloat($.css($container[0], "height", true)) -
          parseFloat($.css($container[0], "paddingTop", true)) -
          parseFloat($.css($container[0], "paddingBottom", true)) -
          parseFloat($.css($headerScroller[0], "height")) - getVBoxDelta($headerScroller) -
          (options.showTopPanel ? options.topPanelHeight + getVBoxDelta($topPanelScroller) : 0) -
          (options.showHeaderRow ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0);
    }

    function resizeCanvas() {
      if (!initialized) { return; }
      if (options.autoHeight) {
        viewportH = options.rowHeight * (getDataLength() + (options.enableAddRow ? 1 : 0));
      } else {
        viewportH = getViewportHeight();
      }

      numVisibleRows = Math.ceil(viewportH / options.rowHeight);
      viewportW = parseFloat($.css($container[0], "width", true));
      if (!options.autoHeight) {
        $viewport.height(viewportH);
      }

      if (options.forceFitColumns) {
        autosizeColumns();
      }

      updateRowCount();
      handleScroll();
      render();
    }

    function getDataLengthIncludingAddNew() {
        return getDataLength() + (options.enableAddRow ? 1 : 0);
    }

    function updateRowCount() {
        if (!initialized) { return; }

        var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();
        var numberOfRows = dataLengthIncludingAddNew +
            (options.leaveSpaceForNewRows ? numVisibleRows - 1 : 0);

        var oldViewportHasVScroll = viewportHasVScroll;
        // with autoHeight, we do not need to accommodate the vertical scroll bar
        viewportHasVScroll = !options.autoHeight && (numberOfRows * options.rowHeight > viewportH);

        makeActiveCellNormal();

        // remove the rows that are now outside of the data range
        // this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows
        var l = dataLengthIncludingAddNew - 1;
        for (var i in rowsCache) {
            if (i >= l) {
                removeRowFromCache(i);
            }
        }

        if (activeCellNode && activeRow > l) {
            resetActiveCell();
        }

        var oldH = h;
        th = Math.max(options.rowHeight * numberOfRows, viewportH - scrollbarDimensions.height);
        if (th < maxSupportedCssHeight) {
            // just one page
            h = ph = th;
            n = 1;
            cj = 0;
        } else {
            // break into pages
            h = maxSupportedCssHeight;
            ph = h / 100;
            n = Math.floor(th / ph);
            cj = (th - h) / (n - 1);
        }

        if (h !== oldH) {
            $canvas.css("height", h);
            scrollTop = $viewport[0].scrollTop;
        }

        var oldScrollTopInRange = (scrollTop + offset <= th - viewportH);

        if (th == 0 || scrollTop == 0) {
            page = offset = 0;
        } else if (oldScrollTopInRange) {
            // maintain virtual position
            scrollTo(scrollTop + offset);
        } else {
            // scroll to bottom
            scrollTo(th - viewportH);
        }

        if (h != oldH && options.autoHeight) {
            resizeCanvas();
        }

        if (options.forceFitColumns && oldViewportHasVScroll != viewportHasVScroll) {
            autosizeColumns();
        }
        updateCanvasWidth(false);
    }

    function getVisibleRange(viewportTop, viewportLeft) {
      if (viewportTop == null) {
        viewportTop = scrollTop;
      }
      if (viewportLeft == null) {
        viewportLeft = scrollLeft;
      }

      return {
        top: getRowFromPosition(viewportTop),
        bottom: getRowFromPosition(viewportTop + viewportH) + 1,
        leftPx: viewportLeft,
        rightPx: viewportLeft + viewportW
      };
    }

    function getRenderedRange(viewportTop, viewportLeft) {
      var range = getVisibleRange(viewportTop, viewportLeft);
      var buffer = Math.round(viewportH / options.rowHeight);
      var minBuffer = 3;

      if (vScrollDir == -1) {
        range.top -= buffer;
        range.bottom += minBuffer;
      } else if (vScrollDir == 1) {
        range.top -= minBuffer;
        range.bottom += buffer;
      } else {
        range.top -= minBuffer;
        range.bottom += minBuffer;
      }

      range.top = Math.max(0, range.top);
      range.bottom = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, range.bottom);

      range.leftPx -= viewportW;
      range.rightPx += viewportW;

      range.leftPx = Math.max(0, range.leftPx);
      range.rightPx = Math.min(canvasWidth, range.rightPx);

      return range;
    }

    function ensureCellNodesInRowsCache(row) {
      var cacheEntry = rowsCache[row];
      if (cacheEntry) {
        if (cacheEntry.cellRenderQueue.length) {
          var lastChild = cacheEntry.rowNode.lastChild;
          while (cacheEntry.cellRenderQueue.length) {
            var columnIdx = cacheEntry.cellRenderQueue.pop();
            cacheEntry.cellNodesByColumnIdx[columnIdx] = lastChild;
            lastChild = lastChild.previousSibling;
          }
        }
      }
    }

    function cleanUpCells(range, row) {
      var totalCellsRemoved = 0;
      var cacheEntry = rowsCache[row];

      // Remove cells outside the range.
      var cellsToRemove = [];
      for (var i in cacheEntry.cellNodesByColumnIdx) {
        // I really hate it when people mess with Array.prototype.
        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)) {
          continue;
        }

        // This is a string, so it needs to be cast back to a number.
        i = i | 0;

        var colspan = cacheEntry.cellColSpans[i];
        if (columnPosLeft[i] > range.rightPx ||
          columnPosRight[Math.min(columns.length - 1, i + colspan - 1)] < range.leftPx) {
          if (!(row == activeRow && i == activeCell)) {
            cellsToRemove.push(i);
          }
        }
      }

      var cellToRemove;
      while ((cellToRemove = cellsToRemove.pop()) != null) {
        cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);
        delete cacheEntry.cellColSpans[cellToRemove];
        delete cacheEntry.cellNodesByColumnIdx[cellToRemove];
        if (postProcessedRows[row]) {
          delete postProcessedRows[row][cellToRemove];
        }
        totalCellsRemoved++;
      }
    }

    function cleanUpAndRenderCells(range) {
      var cacheEntry;
      var stringArray = [];
      var processedRows = [];
      var cellsAdded;
      var totalCellsAdded = 0;
      var colspan;

      for (var row = range.top; row <= range.bottom; row++) {
        cacheEntry = rowsCache[row];
        if (!cacheEntry) {
          continue;
        }

        // cellRenderQueue populated in renderRows() needs to be cleared first
        ensureCellNodesInRowsCache(row);

        cleanUpCells(range, row);

        // Render missing cells.
        cellsAdded = 0;

        var metadata = data.getItemMetadata && data.getItemMetadata(row);
        metadata = metadata && metadata.columns;

        // TODO:  shorten this loop (index? heuristics? binary search?)
        for (var i = 0, ii = columns.length; i < ii; i++) {
          // Cells to the right are outside the range.
          if (columnPosLeft[i] > range.rightPx) {
            break;
          }

          // Already rendered.
          if ((colspan = cacheEntry.cellColSpans[i]) != null) {
            i += (colspan > 1 ? colspan - 1 : 0);
            continue;
          }

          colspan = 1;
          if (metadata) {
            var columnData = metadata[columns[i].id] || metadata[i];
            colspan = (columnData && columnData.colspan) || 1;
            if (colspan === "*") {
              colspan = ii - i;
            }
          }

          if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {
            appendCellHtml(stringArray, row, i, colspan);
            cellsAdded++;
          }

          i += (colspan > 1 ? colspan - 1 : 0);
        }

        if (cellsAdded) {
          totalCellsAdded += cellsAdded;
          processedRows.push(row);
        }
      }

      if (!stringArray.length) {
        return;
      }

      var x = document.createElement("div");
      x.innerHTML = stringArray.join("");

      var processedRow;
      var node;
      while ((processedRow = processedRows.pop()) != null) {
        cacheEntry = rowsCache[processedRow];
        var columnIdx;
        while ((columnIdx = cacheEntry.cellRenderQueue.pop()) != null) {
          node = x.lastChild;
          cacheEntry.rowNode.appendChild(node);
          cacheEntry.cellNodesByColumnIdx[columnIdx] = node;
        }
      }
    }

    function renderRows(range) {
      var parentNode = $canvas[0],
          stringArray = [],
          rows = [],
          needToReselectCell = false;

      for (var i = range.top; i <= range.bottom; i++) {
        if (rowsCache[i]) {
          continue;
        }
        renderedRows++;
        rows.push(i);

        // Create an entry right away so that appendRowHtml() can
        // start populatating it.
        rowsCache[i] = {
          "rowNode": null,

          // ColSpans of rendered cells (by column idx).
          // Can also be used for checking whether a cell has been rendered.
          "cellColSpans": [],

          // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().
          "cellNodesByColumnIdx": [],

          // Column indices of cell nodes that have been rendered, but not yet indexed in
          // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the
          // end of the row.
          "cellRenderQueue": []
        };

        appendRowHtml(stringArray, i, range);
        if (activeCellNode && activeRow === i) {
          needToReselectCell = true;
        }
        counter_rows_rendered++;
      }

      if (!rows.length) { return; }

      var x = document.createElement("div");
      x.innerHTML = stringArray.join("");

      for (var i = 0, ii = rows.length; i < ii; i++) {
        rowsCache[rows[i]].rowNode = parentNode.appendChild(x.firstChild);
      }

      if (needToReselectCell) {
        activeCellNode = getCellNode(activeRow, activeCell);
      }
    }

    function startPostProcessing() {
      if (!options.enableAsyncPostRender) {
        return;
      }
      clearTimeout(h_postrender);
      h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);
    }

    function invalidatePostProcessingResults(row) {
      delete postProcessedRows[row];
      postProcessFromRow = Math.min(postProcessFromRow, row);
      postProcessToRow = Math.max(postProcessToRow, row);
      startPostProcessing();
    }

    function updateRowPositions() {
      for (var row in rowsCache) {
        rowsCache[row].rowNode.style.top = getRowTop(row) + "px";
      }
    }

    function render() {
      if (!initialized) { return; }
      var visible = getVisibleRange();
      var rendered = getRenderedRange();

      // remove rows no longer in the viewport
      cleanupRows(rendered);

      // add new rows & missing cells in existing rows
      if (lastRenderedScrollLeft != scrollLeft) {
        cleanUpAndRenderCells(rendered);
      }

      // render missing rows
      renderRows(rendered);

      postProcessFromRow = visible.top;
      postProcessToRow = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, visible.bottom);
      startPostProcessing();

      lastRenderedScrollTop = scrollTop;
      lastRenderedScrollLeft = scrollLeft;
      h_render = null;
    }

    function handleHeaderRowScroll() {
      var scrollLeft = $headerRowScroller[0].scrollLeft;
      if (scrollLeft != $viewport[0].scrollLeft) {
        $viewport[0].scrollLeft = scrollLeft;
      }
    }

    function handleScroll() {
      scrollTop = $viewport[0].scrollTop;
      scrollLeft = $viewport[0].scrollLeft;
      var vScrollDist = Math.abs(scrollTop - prevScrollTop);
      var hScrollDist = Math.abs(scrollLeft - prevScrollLeft);

      if (hScrollDist) {
        prevScrollLeft = scrollLeft;
        $headerScroller[0].scrollLeft = scrollLeft;
        $topPanelScroller[0].scrollLeft = scrollLeft;
        $headerRowScroller[0].scrollLeft = scrollLeft;
      }

      if (vScrollDist) {
        vScrollDir = prevScrollTop < scrollTop ? 1 : -1;
        prevScrollTop = scrollTop;

        // switch virtual pages if needed
        if (vScrollDist < viewportH) {
          scrollTo(scrollTop + offset);
        } else {
          var oldOffset = offset;
          if (h == viewportH) {
            page = 0;
          } else {
            page = Math.min(n - 1, Math.floor(scrollTop * ((th - viewportH) / (h - viewportH)) * (1 / ph)));
          }
          offset = Math.round(page * cj);
          if (oldOffset != offset) {
            invalidateAllRows();
          }
        }
      }

      if (hScrollDist || vScrollDist) {
        if (h_render) {
          clearTimeout(h_render);
        }

        if (Math.abs(lastRenderedScrollTop - scrollTop) > 20 ||
            Math.abs(lastRenderedScrollLeft - scrollLeft) > 20) {
          if (options.forceSyncScrolling || (
              Math.abs(lastRenderedScrollTop - scrollTop) < viewportH &&
              Math.abs(lastRenderedScrollLeft - scrollLeft) < viewportW)) {
            render();
          } else {
            h_render = setTimeout(render, 50);
          }

          trigger(self.onViewportChanged, {});
        }
      }

      trigger(self.onScroll, {scrollLeft: scrollLeft, scrollTop: scrollTop});
    }

    function asyncPostProcessRows() {
      while (postProcessFromRow <= postProcessToRow) {
        var row = (vScrollDir >= 0) ? postProcessFromRow++ : postProcessToRow--;
        var cacheEntry = rowsCache[row];
        if (!cacheEntry || row >= getDataLength()) {
          continue;
        }

        if (!postProcessedRows[row]) {
          postProcessedRows[row] = {};
        }

        ensureCellNodesInRowsCache(row);
        for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {
          if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {
            continue;
          }

          columnIdx = columnIdx | 0;

          var m = columns[columnIdx];
          if (m.asyncPostRender && !postProcessedRows[row][columnIdx]) {
            var node = cacheEntry.cellNodesByColumnIdx[columnIdx];
            if (node) {
              m.asyncPostRender(node, row, getDataItem(row), m);
            }
            postProcessedRows[row][columnIdx] = true;
          }
        }

        h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);
        return;
      }
    }

    function updateCellCssStylesOnRenderedRows(addedHash, removedHash) {
      var node, columnId, addedRowHash, removedRowHash;
      for (var row in rowsCache) {
        removedRowHash = removedHash && removedHash[row];
        addedRowHash = addedHash && addedHash[row];

        if (removedRowHash) {
          for (columnId in removedRowHash) {
            if (!addedRowHash || removedRowHash[columnId] != addedRowHash[columnId]) {
              node = getCellNode(row, getColumnIndex(columnId));
              if (node) {
                $(node).removeClass(removedRowHash[columnId]);
              }
            }
          }
        }

        if (addedRowHash) {
          for (columnId in addedRowHash) {
            if (!removedRowHash || removedRowHash[columnId] != addedRowHash[columnId]) {
              node = getCellNode(row, getColumnIndex(columnId));
              if (node) {
                $(node).addClass(addedRowHash[columnId]);
              }
            }
          }
        }
      }
    }

    function addCellCssStyles(key, hash) {
      if (cellCssClasses[key]) {
        throw "addCellCssStyles: cell CSS hash with key '" + key + "' already exists.";
      }

      cellCssClasses[key] = hash;
      updateCellCssStylesOnRenderedRows(hash, null);

      trigger(self.onCellCssStylesChanged, { "key": key, "hash": hash });
    }

    function removeCellCssStyles(key) {
      if (!cellCssClasses[key]) {
        return;
      }

      updateCellCssStylesOnRenderedRows(null, cellCssClasses[key]);
      delete cellCssClasses[key];

      trigger(self.onCellCssStylesChanged, { "key": key, "hash": null });
    }

    function setCellCssStyles(key, hash) {
      var prevHash = cellCssClasses[key];

      cellCssClasses[key] = hash;
      updateCellCssStylesOnRenderedRows(hash, prevHash);

      trigger(self.onCellCssStylesChanged, { "key": key, "hash": hash });
    }

    function getCellCssStyles(key) {
      return cellCssClasses[key];
    }

    function flashCell(row, cell, speed) {
      speed = speed || 100;
      if (rowsCache[row]) {
        var $cell = $(getCellNode(row, cell));

        function toggleCellClass(times) {
          if (!times) {
            return;
          }
          setTimeout(function () {
                $cell.queue(function () {
                  $cell.toggleClass(options.cellFlashingCssClass).dequeue();
                  toggleCellClass(times - 1);
                });
              },
              speed);
        }

        toggleCellClass(4);
      }
    }

    //////////////////////////////////////////////////////////////////////////////////////////////
    // Interactivity

    function handleDragInit(e, dd) {
      var cell = getCellFromEvent(e);
      if (!cell || !cellExists(cell.row, cell.cell)) {
        return false;
      }

      var retval = trigger(self.onDragInit, dd, e);
      if (e.isImmediatePropagationStopped()) {
        return retval;
      }

      // if nobody claims to be handling drag'n'drop by stopping immediate propagation,
      // cancel out of it
      return false;
    }

    function handleDragStart(e, dd) {
      var cell = getCellFromEvent(e);
      if (!cell || !cellExists(cell.row, cell.cell)) {
        return false;
      }

      var retval = trigger(self.onDragStart, dd, e);
      if (e.isImmediatePropagationStopped()) {
        return retval;
      }

      return false;
    }

    function handleDrag(e, dd) {
      return trigger(self.onDrag, dd, e);
    }

    function handleDragEnd(e, dd) {
      trigger(self.onDragEnd, dd, e);
    }

    function handleKeyDown(e) {
      trigger(self.onKeyDown, {row: activeRow, cell: activeCell}, e);
      var handled = e.isImmediatePropagationStopped();

      if (!handled) {
        if (!e.shiftKey && !e.altKey && !e.ctrlKey) {
          if (e.which == 27) {
            if (!getEditorLock().isActive()) {
              return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)
            }
            cancelEditAndSetFocus();
          } else if (e.which == 37) {
            handled = navigateLeft();
          } else if (e.which == 39) {
            handled = navigateRight();
          } else if (e.which == 38) {
            handled = navigateUp();
          } else if (e.which == 40) {
            handled = navigateDown();
          } else if (e.which == 9) {
            handled = navigateNext();
          } else if (e.which == 13) {
            if (options.editable) {
              if (currentEditor) {
                // adding new row
                if (activeRow === getDataLength()) {
                  navigateDown();
                } else {
                  commitEditAndSetFocus();
                }
              } else {
                if (getEditorLock().commitCurrentEdit()) {
                  makeActiveCellEditable();
                }
              }
            }
            handled = true;
          }
        } else if (e.which == 9 && e.shiftKey && !e.ctrlKey && !e.altKey) {
          handled = navigatePrev();
        }
      }

      if (handled) {
        // the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it
        e.stopPropagation();
        e.preventDefault();
        try {
          e.originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)
        }
        // ignore exceptions - setting the original event's keycode throws access denied exception for "Ctrl"
        // (hitting control key only, nothing else), "Shift" (maybe others)
        catch (error) {
        }
      }
    }

    function handleClick(e) {
      if (!currentEditor) {
          // if this click resulted in some cell child node getting focus,
          // don't steal it back - keyboard events will still bubble up
          // IE9+ seems to default DIVs to tabIndex=0 instead of -1, so check for cell clicks directly.
          if (e.target != document.activeElement || $(e.target).hasClass("slick-cell")) {
              var selection = getTextSelection(); //store text-selection and restore it after
              setFocus();
              if (options.enableTextSelectionOnCells) {
                  setTextSelection(selection);
              }
          }
      }

      var cell = getCellFromEvent(e);
      if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {
        return;
      }

      trigger(self.onClick, {row: cell.row, cell: cell.cell}, e);
      if (e.isImmediatePropagationStopped()) {
        return;
      }

      if ((activeCell != cell.cell || activeRow != cell.row) && canCellBeActive(cell.row, cell.cell)) {
        if (!getEditorLock().isActive() || getEditorLock().commitCurrentEdit()) {
          scrollRowIntoView(cell.row, false);
          setActiveCellInternal(getCellNode(cell.row, cell.cell), (cell.row === getDataLength()) || options.autoEdit);
        }
      }
    }

    function handleContextMenu(e) {
      var $cell = $(e.target).closest(".slick-cell", $canvas);
      if ($cell.length === 0) {
        return;
      }

      // are we editing this cell?
      if (activeCellNode === $cell[0] && currentEditor !== null) {
        return;
      }

      trigger(self.onContextMenu, {}, e);
    }

    function handleDblClick(e) {
      var cell = getCellFromEvent(e);
      if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {
        return;
      }

      trigger(self.onDblClick, {row: cell.row, cell: cell.cell}, e);
      if (e.isImmediatePropagationStopped()) {
        return;
      }

      if (options.editable) {
        gotoCell(cell.row, cell.cell, true);
      }
    }

    function handleHeaderMouseEnter(e) {
      trigger(self.onHeaderMouseEnter, {
        "column": $(this).data("column")
      }, e);
    }

    function handleHeaderMouseLeave(e) {
      trigger(self.onHeaderMouseLeave, {
        "column": $(this).data("column")
      }, e);
    }

    function handleHeaderContextMenu(e) {
      var $header = $(e.target).closest(".slick-header-column", ".slick-header-columns");
      var column = $header && $header.data("column");
      trigger(self.onHeaderContextMenu, {column: column}, e);
    }

    function handleHeaderClick(e) {
      var $header = $(e.target).closest(".slick-header-column", ".slick-header-columns");
      var column = $header && $header.data("column");
      if (column) {
        trigger(self.onHeaderClick, {column: column}, e);
      }
    }

    function handleMouseEnter(e) {
      trigger(self.onMouseEnter, {}, e);
    }

    function handleMouseLeave(e) {
      trigger(self.onMouseLeave, {}, e);
    }

    function cellExists(row, cell) {
      return !(row < 0 || row >= getDataLength() || cell < 0 || cell >= columns.length);
    }

    function getCellFromPoint(x, y) {
      var row = getRowFromPosition(y);
      var cell = 0;

      var w = 0;
      for (var i = 0; i < columns.length && w < x; i++) {
        w += columns[i].width;
        cell++;
      }

      if (cell < 0) {
        cell = 0;
      }

      return {row: row, cell: cell - 1};
    }

    function getCellFromNode(cellNode) {
      // read column number from .l<columnNumber> CSS class
      var cls = /l\d+/.exec(cellNode.className);
      if (!cls) {
        throw "getCellFromNode: cannot get cell - " + cellNode.className;
      }
      return parseInt(cls[0].substr(1, cls[0].length - 1), 10);
    }

    function getRowFromNode(rowNode) {
      for (var row in rowsCache) {
        if (rowsCache[row].rowNode === rowNode) {
          return row | 0;
        }
      }

      return null;
    }

    function getCellFromEvent(e) {
      var $cell = $(e.target).closest(".slick-cell", $canvas);
      if (!$cell.length) {
        return null;
      }

      var row = getRowFromNode($cell[0].parentNode);
      var cell = getCellFromNode($cell[0]);

      if (row == null || cell == null) {
        return null;
      } else {
        return {
          "row": row,
          "cell": cell
        };
      }
    }

    function getCellNodeBox(row, cell) {
      if (!cellExists(row, cell)) {
        return null;
      }

      var y1 = getRowTop(row);
      var y2 = y1 + options.rowHeight - 1;
      var x1 = 0;
      for (var i = 0; i < cell; i++) {
        x1 += columns[i].width;
      }
      var x2 = x1 + columns[cell].width;

      return {
        top: y1,
        left: x1,
        bottom: y2,
        right: x2
      };
    }

    //////////////////////////////////////////////////////////////////////////////////////////////
    // Cell switching

    function resetActiveCell() {
      setActiveCellInternal(null, false);
    }

    function setFocus() {
      if (tabbingDirection == -1) {
        $focusSink[0].focus();
      } else {
        $focusSink2[0].focus();
      }
    }

    //This get/set methods are used for keeping text-selection. These don't consider IE because they don't loose text-selection.
    function getTextSelection() {
        var textSelection = null;
        if (window.getSelection) {
            var selection = window.getSelection();
            if (selection.rangeCount > 0) {
                textSelection = selection.getRangeAt(0);
            }
        }
        return textSelection;
    }

    function setTextSelection(selection) {
        if (window.getSelection && selection) {
            var target = window.getSelection();
            target.removeAllRanges();
            target.addRange(selection);
        }
    }

    function scrollCellIntoView(row, cell, doPaging) {
      scrollRowIntoView(row, doPaging);

      var colspan = getColspan(row, cell);
      var left = columnPosLeft[cell],
        right = columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)],
        scrollRight = scrollLeft + viewportW;

      if (left < scrollLeft) {
        $viewport.scrollLeft(left);
        handleScroll();
        render();
      } else if (right > scrollRight) {
        $viewport.scrollLeft(Math.min(left, right - $viewport[0].clientWidth));
        handleScroll();
        render();
      }
    }

    function setActiveCellInternal(newCell, editMode) {
      if (activeCellNode !== null) {
        makeActiveCellNormal();
        $(activeCellNode).removeClass("active");
        if (rowsCache[activeRow]) {
          $(rowsCache[activeRow].rowNode).removeClass("active");
        }
      }

      var activeCellChanged = (activeCellNode !== newCell);
      activeCellNode = newCell;

      if (activeCellNode != null) {
        activeRow = getRowFromNode(activeCellNode.parentNode);
        activeCell = activePosX = getCellFromNode(activeCellNode);

        $(activeCellNode).addClass("active");
        $(rowsCache[activeRow].rowNode).addClass("active");

        if (options.editable && editMode && isCellPotentiallyEditable(activeRow, activeCell)) {
          clearTimeout(h_editorLoader);

          if (options.asyncEditorLoading) {
            h_editorLoader = setTimeout(function () {
              makeActiveCellEditable();
            }, options.asyncEditorLoadDelay);
          } else {
            makeActiveCellEditable();
          }
        }
      } else {
        activeRow = activeCell = null;
      }

      if (activeCellChanged) {
        trigger(self.onActiveCellChanged, getActiveCell());
      }
    }

    function clearTextSelection() {
      if (document.selection && document.selection.empty) {
        document.selection.empty();
      } else if (window.getSelection) {
        var sel = window.getSelection();
        if (sel && sel.removeAllRanges) {
          sel.removeAllRanges();
        }
      }
    }

    function isCellPotentiallyEditable(row, cell) {
      // is the data for this row loaded?
      if (row < getDataLength() && !getDataItem(row)) {
        return false;
      }

      // are we in the Add New row?  can we create new from this cell?
      if (columns[cell].cannotTriggerInsert && row >= getDataLength()) {
        return false;
      }

      // does this cell have an editor?
      if (!getEditor(row, cell)) {
        return false;
      }

      return true;
    }

    function makeActiveCellNormal() {
      if (!currentEditor) {
        return;
      }
      trigger(self.onBeforeCellEditorDestroy, {editor: currentEditor});
      currentEditor.destroy();
      currentEditor = null;

      if (activeCellNode) {
        var d = getDataItem(activeRow);
        $(activeCellNode).removeClass("editable invalid");
        if (d) {
          var column = columns[activeCell];
          var formatter = getFormatter(activeRow, column);
          activeCellNode.innerHTML = formatter(activeRow, activeCell, getDataItemValueForColumn(d, column), column, getDataItem(activeRow));
          invalidatePostProcessingResults(activeRow);
        }
      }

      // if there previously was text selected on a page (such as selected text in the edit cell just removed),
      // IE can't set focus to anything else correctly
      if (navigator.userAgent.toLowerCase().match(/msie/)) {
        clearTextSelection();
      }

      getEditorLock().deactivate(editController);
    }

    function makeActiveCellEditable(editor) {
      if (!activeCellNode) {
        return;
      }
      if (!options.editable) {
        throw "Grid : makeActiveCellEditable : should never get called when options.editable is false";
      }

      // cancel pending async call if there is one
      clearTimeout(h_editorLoader);

      if (!isCellPotentiallyEditable(activeRow, activeCell)) {
        return;
      }

      var columnDef = columns[activeCell];
      var item = getDataItem(activeRow);

      if (trigger(self.onBeforeEditCell, {row: activeRow, cell: activeCell, item: item, column: columnDef}) === false) {
        setFocus();
        return;
      }

      getEditorLock().activate(editController);
      $(activeCellNode).addClass("editable");

      // don't clear the cell if a custom editor is passed through
      if (!editor) {
        activeCellNode.innerHTML = "";
      }

      currentEditor = new (editor || getEditor(activeRow, activeCell))({
        grid: self,
        gridPosition: absBox($container[0]),
        position: absBox(activeCellNode),
        container: activeCellNode,
        column: columnDef,
        item: item || {},
        commitChanges: commitEditAndSetFocus,
        cancelChanges: cancelEditAndSetFocus
      });

      if (item) {
        currentEditor.loadValue(item);
      }

      serializedEditorValue = currentEditor.serializeValue();

      if (currentEditor.position) {
        handleActiveCellPositionChange();
      }
    }

    function commitEditAndSetFocus() {
      // if the commit fails, it would do so due to a validation error
      // if so, do not steal the focus from the editor
      if (getEditorLock().commitCurrentEdit()) {
        setFocus();
        if (options.autoEdit) {
          navigateDown();
        }
      }
    }

    function cancelEditAndSetFocus() {
      if (getEditorLock().cancelCurrentEdit()) {
        setFocus();
      }
    }

    function absBox(elem) {
      var box = {
        top: elem.offsetTop,
        left: elem.offsetLeft,
        bottom: 0,
        right: 0,
        width: $(elem).outerWidth(),
        height: $(elem).outerHeight(),
        visible: true};
      box.bottom = box.top + box.height;
      box.right = box.left + box.width;

      // walk up the tree
      var offsetParent = elem.offsetParent;
      while ((elem = elem.parentNode) != document.body) {
        if (box.visible && elem.scrollHeight != elem.offsetHeight && $(elem).css("overflowY") != "visible") {
          box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;
        }

        if (box.visible && elem.scrollWidth != elem.offsetWidth && $(elem).css("overflowX") != "visible") {
          box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;
        }

        box.left -= elem.scrollLeft;
        box.top -= elem.scrollTop;

        if (elem === offsetParent) {
          box.left += elem.offsetLeft;
          box.top += elem.offsetTop;
          offsetParent = elem.offsetParent;
        }

        box.bottom = box.top + box.height;
        box.right = box.left + box.width;
      }

      return box;
    }

    function getActiveCellPosition() {
      return absBox(activeCellNode);
    }

    function getGridPosition() {
      return absBox($container[0])
    }

    function handleActiveCellPositionChange() {
      if (!activeCellNode) {
        return;
      }

      trigger(self.onActiveCellPositionChanged, {});

      if (currentEditor) {
        var cellBox = getActiveCellPosition();
        if (currentEditor.show && currentEditor.hide) {
          if (!cellBox.visible) {
            currentEditor.hide();
          } else {
            currentEditor.show();
          }
        }

        if (currentEditor.position) {
          currentEditor.position(cellBox);
        }
      }
    }

    function getCellEditor() {
      return currentEditor;
    }

    function getActiveCell() {
      if (!activeCellNode) {
        return null;
      } else {
        return {row: activeRow, cell: activeCell};
      }
    }

    function getActiveCellNode() {
      return activeCellNode;
    }

    function scrollRowIntoView(row, doPaging) {
      var rowAtTop = row * options.rowHeight;
      var rowAtBottom = (row + 1) * options.rowHeight - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0);

      // need to page down?
      if ((row + 1) * options.rowHeight > scrollTop + viewportH + offset) {
        scrollTo(doPaging ? rowAtTop : rowAtBottom);
        render();
      }
      // or page up?
      else if (row * options.rowHeight < scrollTop + offset) {
        scrollTo(doPaging ? rowAtBottom : rowAtTop);
        render();
      }
    }

    function scrollRowToTop(row) {
      scrollTo(row * options.rowHeight);
      render();
    }

    function getColspan(row, cell) {
      var metadata = data.getItemMetadata && data.getItemMetadata(row);
      if (!metadata || !metadata.columns) {
        return 1;
      }

      var columnData = metadata.columns[columns[cell].id] || metadata.columns[cell];
      var colspan = (columnData && columnData.colspan);
      if (colspan === "*") {
        colspan = columns.length - cell;
      } else {
        colspan = colspan || 1;
      }

      return colspan;
    }

    function findFirstFocusableCell(row) {
      var cell = 0;
      while (cell < columns.length) {
        if (canCellBeActive(row, cell)) {
          return cell;
        }
        cell += getColspan(row, cell);
      }
      return null;
    }

    function findLastFocusableCell(row) {
      var cell = 0;
      var lastFocusableCell = null;
      while (cell < columns.length) {
        if (canCellBeActive(row, cell)) {
          lastFocusableCell = cell;
        }
        cell += getColspan(row, cell);
      }
      return lastFocusableCell;
    }

    function gotoRight(row, cell, posX) {
      if (cell >= columns.length) {
        return null;
      }

      do {
        cell += getColspan(row, cell);
      }
      while (cell < columns.length && !canCellBeActive(row, cell));

      if (cell < columns.length) {
        return {
          "row": row,
          "cell": cell,
          "posX": cell
        };
      }
      return null;
    }

    function gotoLeft(row, cell, posX) {
      if (cell <= 0) {
        return null;
      }

      var firstFocusableCell = findFirstFocusableCell(row);
      if (firstFocusableCell === null || firstFocusableCell >= cell) {
        return null;
      }

      var prev = {
        "row": row,
        "cell": firstFocusableCell,
        "posX": firstFocusableCell
      };
      var pos;
      while (true) {
        pos = gotoRight(prev.row, prev.cell, prev.posX);
        if (!pos) {
          return null;
        }
        if (pos.cell >= cell) {
          return prev;
        }
        prev = pos;
      }
    }

    function gotoDown(row, cell, posX) {
      var prevCell;
      while (true) {
        if (++row >= getDataLength() + (options.enableAddRow ? 1 : 0)) {
          return null;
        }

        prevCell = cell = 0;
        while (cell <= posX) {
          prevCell = cell;
          cell += getColspan(row, cell);
        }

        if (canCellBeActive(row, prevCell)) {
          return {
            "row": row,
            "cell": prevCell,
            "posX": posX
          };
        }
      }
    }

    function gotoUp(row, cell, posX) {
      var prevCell;
      while (true) {
        if (--row < 0) {
          return null;
        }

        prevCell = cell = 0;
        while (cell <= posX) {
          prevCell = cell;
          cell += getColspan(row, cell);
        }

        if (canCellBeActive(row, prevCell)) {
          return {
            "row": row,
            "cell": prevCell,
            "posX": posX
          };
        }
      }
    }

    function gotoNext(row, cell, posX) {
      if (row == null && cell == null) {
        row = cell = posX = 0;
        if (canCellBeActive(row, cell)) {
          return {
            "row": row,
            "cell": cell,
            "posX": cell
          };
        }
      }

      var pos = gotoRight(row, cell, posX);
      if (pos) {
        return pos;
      }

      var firstFocusableCell = null;
      while (++row < getDataLength() + (options.enableAddRow ? 1 : 0)) {
        firstFocusableCell = findFirstFocusableCell(row);
        if (firstFocusableCell !== null) {
          return {
            "row": row,
            "cell": firstFocusableCell,
            "posX": firstFocusableCell
          };
        }
      }
      return null;
    }

    function gotoPrev(row, cell, posX) {
      if (row == null && cell == null) {
        row = getDataLength() + (options.enableAddRow ? 1 : 0) - 1;
        cell = posX = columns.length - 1;
        if (canCellBeActive(row, cell)) {
          return {
            "row": row,
            "cell": cell,
            "posX": cell
          };
        }
      }

      var pos;
      var lastSelectableCell;
      while (!pos) {
        pos = gotoLeft(row, cell, posX);
        if (pos) {
          break;
        }
        if (--row < 0) {
          return null;
        }

        cell = 0;
        lastSelectableCell = findLastFocusableCell(row);
        if (lastSelectableCell !== null) {
          pos = {
            "row": row,
            "cell": lastSelectableCell,
            "posX": lastSelectableCell
          };
        }
      }
      return pos;
    }

    function navigateRight() {
      return navigate("right");
    }

    function navigateLeft() {
      return navigate("left");
    }

    function navigateDown() {
      return navigate("down");
    }

    function navigateUp() {
      return navigate("up");
    }

    function navigateNext() {
      return navigate("next");
    }

    function navigatePrev() {
      return navigate("prev");
    }

    /**
     * @param {string} dir Navigation direction.
     * @return {boolean} Whether navigation resulted in a change of active cell.
     */
    function navigate(dir) {
      if (!options.enableCellNavigation) {
        return false;
      }

      if (!activeCellNode && dir != "prev" && dir != "next") {
        return false;
      }

      if (!getEditorLock().commitCurrentEdit()) {
        return true;
      }
      setFocus();

      var tabbingDirections = {
        "up": -1,
        "down": 1,
        "left": -1,
        "right": 1,
        "prev": -1,
        "next": 1
      };
      tabbingDirection = tabbingDirections[dir];

      var stepFunctions = {
        "up": gotoUp,
        "down": gotoDown,
        "left": gotoLeft,
        "right": gotoRight,
        "prev": gotoPrev,
        "next": gotoNext
      };
      var stepFn = stepFunctions[dir];
      var pos = stepFn(activeRow, activeCell, activePosX);
      if (pos) {
        var isAddNewRow = (pos.row == getDataLength());
        scrollCellIntoView(pos.row, pos.cell, !isAddNewRow);
        setActiveCellInternal(getCellNode(pos.row, pos.cell), isAddNewRow || options.autoEdit);
        activePosX = pos.posX;
        return true;
      } else {
        setActiveCellInternal(getCellNode(activeRow, activeCell), (activeRow == getDataLength()) || options.autoEdit);
        return false;
      }
    }

    function getCellNode(row, cell) {
      if (rowsCache[row]) {
        ensureCellNodesInRowsCache(row);
        return rowsCache[row].cellNodesByColumnIdx[cell];
      }
      return null;
    }

    function setActiveCell(row, cell) {
      if (!initialized) { return; }
      if (row > getDataLength() || row < 0 || cell >= columns.length || cell < 0) {
        return;
      }

      if (!options.enableCellNavigation) {
        return;
      }

      scrollCellIntoView(row, cell, false);
      setActiveCellInternal(getCellNode(row, cell), false);
    }

    function canCellBeActive(row, cell) {
      if (!options.enableCellNavigation || row >= getDataLength() + (options.enableAddRow ? 1 : 0) ||
          row < 0 || cell >= columns.length || cell < 0) {
        return false;
      }

      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
      if (rowMetadata && typeof rowMetadata.focusable === "boolean") {
        return rowMetadata.focusable;
      }

      var columnMetadata = rowMetadata && rowMetadata.columns;
      if (columnMetadata && columnMetadata[columns[cell].id] && typeof columnMetadata[columns[cell].id].focusable === "boolean") {
        return columnMetadata[columns[cell].id].focusable;
      }
      if (columnMetadata && columnMetadata[cell] && typeof columnMetadata[cell].focusable === "boolean") {
        return columnMetadata[cell].focusable;
      }

      return columns[cell].focusable;
    }

    function canCellBeSelected(row, cell) {
      if (row >= getDataLength() || row < 0 || cell >= columns.length || cell < 0) {
        return false;
      }

      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
      if (rowMetadata && typeof rowMetadata.selectable === "boolean") {
        return rowMetadata.selectable;
      }

      var columnMetadata = rowMetadata && rowMetadata.columns && (rowMetadata.columns[columns[cell].id] || rowMetadata.columns[cell]);
      if (columnMetadata && typeof columnMetadata.selectable === "boolean") {
        return columnMetadata.selectable;
      }

      return columns[cell].selectable;
    }

    function gotoCell(row, cell, forceEdit) {
      if (!initialized) { return; }
      if (!canCellBeActive(row, cell)) {
        return;
      }

      if (!getEditorLock().commitCurrentEdit()) {
        return;
      }

      scrollCellIntoView(row, cell, false);

      var newCell = getCellNode(row, cell);

      // if selecting the 'add new' row, start editing right away
      setActiveCellInternal(newCell, forceEdit || (row === getDataLength()) || options.autoEdit);

      // if no editor was created, set the focus back on the grid
      if (!currentEditor) {
        setFocus();
      }
    }


    //////////////////////////////////////////////////////////////////////////////////////////////
    // IEditor implementation for the editor lock

    function commitCurrentEdit() {
      var item = getDataItem(activeRow);
      var column = columns[activeCell];

      if (currentEditor) {
        if (currentEditor.isValueChanged()) {
          var validationResults = currentEditor.validate();

          if (validationResults.valid) {
            if (activeRow < getDataLength()) {
              var editCommand = {
                row: activeRow,
                cell: activeCell,
                editor: currentEditor,
                serializedValue: currentEditor.serializeValue(),
                prevSerializedValue: serializedEditorValue,
                execute: function () {
                  this.editor.applyValue(item, this.serializedValue);
                  updateRow(this.row);
                },
                undo: function () {
                  this.editor.applyValue(item, this.prevSerializedValue);
                  updateRow(this.row);
                }
              };

              if (options.editCommandHandler) {
                makeActiveCellNormal();
                options.editCommandHandler(item, column, editCommand);
              } else {
                editCommand.execute();
                makeActiveCellNormal();
              }

              trigger(self.onCellChange, {
                row: activeRow,
                cell: activeCell,
                item: item
              });
            } else {
              var newItem = {};
              currentEditor.applyValue(newItem, currentEditor.serializeValue());
              makeActiveCellNormal();
              trigger(self.onAddNewRow, {item: newItem, column: column});
            }

            // check whether the lock has been re-acquired by event handlers
            return !getEditorLock().isActive();
          } else {
            // TODO: remove and put in onValidationError handlers in examples
            $(activeCellNode).addClass("invalid");
            $(activeCellNode).stop(true, true).effect("highlight", {color: "red"}, 300);

            trigger(self.onValidationError, {
              editor: currentEditor,
              cellNode: activeCellNode,
              validationResults: validationResults,
              row: activeRow,
              cell: activeCell,
              column: column
            });

            currentEditor.focus();
            return false;
          }
        }

        makeActiveCellNormal();
      }
      return true;
    }

    function cancelCurrentEdit() {
      makeActiveCellNormal();
      return true;
    }

    function rowsToRanges(rows) {
      var ranges = [];
      var lastCell = columns.length - 1;
      for (var i = 0; i < rows.length; i++) {
        ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));
      }
      return ranges;
    }

    function getSelectedRows() {
      if (!selectionModel) {
        throw "Selection model is not set";
      }
      return selectedRows;
    }

    function setSelectedRows(rows) {
      if (!selectionModel) {
        throw "Selection model is not set";
      }
      selectionModel.setSelectedRanges(rowsToRanges(rows));
    }


    //////////////////////////////////////////////////////////////////////////////////////////////
    // Debug

    this.debug = function () {
      var s = "";

      s += ("\n" + "counter_rows_rendered:  " + counter_rows_rendered);
      s += ("\n" + "counter_rows_removed:  " + counter_rows_removed);
      s += ("\n" + "renderedRows:  " + renderedRows);
      s += ("\n" + "numVisibleRows:  " + numVisibleRows);
      s += ("\n" + "maxSupportedCssHeight:  " + maxSupportedCssHeight);
      s += ("\n" + "n(umber of pages):  " + n);
      s += ("\n" + "(current) page:  " + page);
      s += ("\n" + "page height (ph):  " + ph);
      s += ("\n" + "vScrollDir:  " + vScrollDir);

      alert(s);
    };

    // a debug helper to be able to access private members
    this.eval = function (expr) {
      return eval(expr);
    };

    //////////////////////////////////////////////////////////////////////////////////////////////
    // Public API

    $.extend(this, {
      "slickGridVersion": "2.1",

      // Events
      "onScroll": new Slick.Event(),
      "onSort": new Slick.Event(),
      "onHeaderMouseEnter": new Slick.Event(),
      "onHeaderMouseLeave": new Slick.Event(),
      "onHeaderContextMenu": new Slick.Event(),
      "onHeaderClick": new Slick.Event(),
      "onHeaderCellRendered": new Slick.Event(),
      "onBeforeHeaderCellDestroy": new Slick.Event(),
      "onHeaderRowCellRendered": new Slick.Event(),
      "onBeforeHeaderRowCellDestroy": new Slick.Event(),
      "onMouseEnter": new Slick.Event(),
      "onMouseLeave": new Slick.Event(),
      "onClick": new Slick.Event(),
      "onDblClick": new Slick.Event(),
      "onContextMenu": new Slick.Event(),
      "onKeyDown": new Slick.Event(),
      "onAddNewRow": new Slick.Event(),
      "onValidationError": new Slick.Event(),
      "onViewportChanged": new Slick.Event(),
      "onColumnsReordered": new Slick.Event(),
      "onColumnsResized": new Slick.Event(),
      "onCellChange": new Slick.Event(),
      "onBeforeEditCell": new Slick.Event(),
      "onBeforeCellEditorDestroy": new Slick.Event(),
      "onBeforeDestroy": new Slick.Event(),
      "onActiveCellChanged": new Slick.Event(),
      "onActiveCellPositionChanged": new Slick.Event(),
      "onDragInit": new Slick.Event(),
      "onDragStart": new Slick.Event(),
      "onDrag": new Slick.Event(),
      "onDragEnd": new Slick.Event(),
      "onSelectedRowsChanged": new Slick.Event(),
      "onCellCssStylesChanged": new Slick.Event(),

      // Methods
      "registerPlugin": registerPlugin,
      "unregisterPlugin": unregisterPlugin,
      "getColumns": getColumns,
      "setColumns": setColumns,
      "getColumnIndex": getColumnIndex,
      "updateColumnHeader": updateColumnHeader,
      "setSortColumn": setSortColumn,
      "setSortColumns": setSortColumns,
      "getSortColumns": getSortColumns,
      "autosizeColumns": autosizeColumns,
      "getOptions": getOptions,
      "setOptions": setOptions,
      "getData": getData,
      "getDataLength": getDataLength,
      "getDataItem": getDataItem,   
      "getViewIndexByID": getViewIndexByID,
      "getIndexByTestID": getIndexByTestID,
      "setData": setData,
      "getSelectionModel": getSelectionModel,
      "setSelectionModel": setSelectionModel,
      "getSelectedRows": getSelectedRows,
      "setSelectedRows": setSelectedRows,

      "render": render,
      "invalidate": invalidate,
      "invalidateRow": invalidateRow,
      "invalidateRows": invalidateRows,
      "invalidateAllRows": invalidateAllRows,
      "updateCell": updateCell,
      "updateRow": updateRow,
      "getViewport": getVisibleRange,
      "getRenderedRange": getRenderedRange,
      "resizeCanvas": resizeCanvas,
      "updateRowCount": updateRowCount,
      "scrollRowIntoView": scrollRowIntoView,
      "scrollRowToTop": scrollRowToTop,
      "scrollCellIntoView": scrollCellIntoView,
      "getCanvasNode": getCanvasNode,
      "focus": setFocus,

      "getCellFromPoint": getCellFromPoint,
      "getCellFromEvent": getCellFromEvent,
      "getActiveCell": getActiveCell,
      "setActiveCell": setActiveCell,
      "getActiveCellNode": getActiveCellNode,
      "getActiveCellPosition": getActiveCellPosition,
      "resetActiveCell": resetActiveCell,
      "editActiveCell": makeActiveCellEditable,
      "getCellEditor": getCellEditor,
      "getCellNode": getCellNode,
      "getCellNodeBox": getCellNodeBox,
      "canCellBeSelected": canCellBeSelected,
      "canCellBeActive": canCellBeActive,
      "navigatePrev": navigatePrev,
      "navigateNext": navigateNext,
      "navigateUp": navigateUp,
      "navigateDown": navigateDown,
      "navigateLeft": navigateLeft,
      "navigateRight": navigateRight,
      "gotoCell": gotoCell,
      "getTopPanel": getTopPanel,
      "setTopPanelVisibility": setTopPanelVisibility,
      "setHeaderRowVisibility": setHeaderRowVisibility,
      "getHeaderRow": getHeaderRow,
      "getHeaderRowColumn": getHeaderRowColumn,
      "getGridPosition": getGridPosition,
      "flashCell": flashCell,
      "addCellCssStyles": addCellCssStyles,
      "setCellCssStyles": setCellCssStyles,
      "removeCellCssStyles": removeCellCssStyles,
      "getCellCssStyles": getCellCssStyles,

      "init": finishInitialization,
      "destroy": destroy,

      // IEditor implementation
      "getEditorLock": getEditorLock,
      "getEditController": getEditController
    });

    init();
  }
}(jQuery));

//End ------ slick.grid.js

//Start ------ slick.dataview.js

(function ($) {
  $.extend(true, window, {
    Slick: {
      Data: {
        DataView: DataView,
        Aggregators: {
          Avg: AvgAggregator,
          Min: MinAggregator,
          Max: MaxAggregator,
          Sum: SumAggregator
        }
      }
    }
  });


  /***
   * A sample Model implementation.
   * Provides a filtered view of the underlying data.
   *
   * Relies on the data item having an "id" property uniquely identifying it.
   */
  function DataView(options) {
    var self = this;

    var defaults = {
      groupItemMetadataProvider: null,
      inlineFilters: false
    };


    // private
    var idProperty = "id";  // property holding a unique row id
    var items = [];         // data by index
    var rows = [];          // data by row
    var idxById = {};       // indexes by id
    var rowsById = null;    // rows by id; lazy-calculated
    var filter = null;      // filter function
    var updated = null;     // updated item ids
    var suspend = false;    // suspends the recalculation
    var sortAsc = true;
    var fastSortField;
    var sortComparer;
    var refreshHints = {};
    var prevRefreshHints = {};
    var filterArgs;
    var filteredItems = [];
    var compiledFilter;
    var compiledFilterWithCaching;
    var filterCache = [];

    // grouping
    var groupingInfoDefaults = {
      getter: null,
      formatter: null,
      comparer: function(a, b) { return a.value - b.value; },
      predefinedValues: [],
      aggregators: [],
      aggregateEmpty: false,
      aggregateCollapsed: false,
      aggregateChildGroups: false,
      collapsed: false,
      displayTotalsRow: true
    };
    var groupingInfos = [];
    var groups = [];
    var toggledGroupsByLevel = [];
    var groupingDelimiter = ':|:';

    var pagesize = 0;
    var pagenum = 0;
    var totalRows = 0;

    // events
    var onRowCountChanged = new Slick.Event();
    var onRowsChanged = new Slick.Event();
    var onPagingInfoChanged = new Slick.Event();

    options = $.extend(true, {}, defaults, options);


    function beginUpdate() {
      suspend = true;
    }

    function endUpdate() {
      suspend = false;
      refresh();
    }

    function setRefreshHints(hints) {
      refreshHints = hints;
    }

    function setFilterArgs(args) {
      filterArgs = args;
    }

    function updateIdxById(startingIndex) {
      startingIndex = startingIndex || 0;
      var id;
      for (var i = startingIndex, l = items.length; i < l; i++) {
        id = items[i][idProperty];
        if (id === undefined) {
          throw "Each data element must implement a unique 'id' property";
        }
        idxById[id] = i;
      }
    }

    function ensureIdUniqueness() {
      var id;
      for (var i = 0, l = items.length; i < l; i++) {
        id = items[i][idProperty];
        if (id === undefined || idxById[id] !== i) {
          throw "Each data element must implement a unique 'id' property";
        }
      }
    }

    function getItems() {
      return items;
    }

    function setItems(data, objectIdProperty) {
      if (objectIdProperty !== undefined) {
        idProperty = objectIdProperty;
      }
      items = filteredItems = data;
      idxById = {};
      updateIdxById();
      ensureIdUniqueness();
      refresh();
    }

    function setPagingOptions(args) {
      if (args.pageSize != undefined) {
        pagesize = args.pageSize;
        pagenum = pagesize ? Math.min(pagenum, Math.max(0, Math.ceil(totalRows / pagesize) - 1)) : 0;
      }

      if (args.pageNum != undefined) {
        pagenum = Math.min(args.pageNum, Math.max(0, Math.ceil(totalRows / pagesize) - 1));
      }

      onPagingInfoChanged.notify(getPagingInfo(), null, self);

      refresh();
    }

    function getPagingInfo() {
      var totalPages = pagesize ? Math.max(1, Math.ceil(totalRows / pagesize)) : 1;
      return {pageSize: pagesize, pageNum: pagenum, totalRows: totalRows, totalPages: totalPages};
    }

    function sort(comparer, ascending) {
      sortAsc = ascending;
      sortComparer = comparer;
      fastSortField = null;
      if (ascending === false) {
        items.reverse();
      }
      items.sort(comparer);
      if (ascending === false) {
        items.reverse();
      }
      idxById = {};
      updateIdxById();
      refresh();
    }

    /***
     * Provides a workaround for the extremely slow sorting in IE.
     * Does a [lexicographic] sort on a give column by temporarily overriding Object.prototype.toString
     * to return the value of that field and then doing a native Array.sort().
     */
    function fastSort(field, ascending) {
      sortAsc = ascending;
      fastSortField = field;
      sortComparer = null;
      var oldToString = Object.prototype.toString;
      Object.prototype.toString = (typeof field == "function") ? field : function () {
        return this[field]
      };
      // an extra reversal for descending sort keeps the sort stable
      // (assuming a stable native sort implementation, which isn't true in some cases)
      if (ascending === false) {
        items.reverse();
      }
      items.sort();
      Object.prototype.toString = oldToString;
      if (ascending === false) {
        items.reverse();
      }
      idxById = {};
      updateIdxById();
      refresh();
    }

    function reSort() {
      if (sortComparer) {
        sort(sortComparer, sortAsc);
      } else if (fastSortField) {
        fastSort(fastSortField, sortAsc);
      }
    }

    function setFilter(filterFn) {
      filter = filterFn;
      if (options.inlineFilters) {
        compiledFilter = compileFilter();
        compiledFilterWithCaching = compileFilterWithCaching();
      }
      refresh();
    }

    function getGrouping() {
      return groupingInfos;
    }

    function setGrouping(groupingInfo) {
      if (!options.groupItemMetadataProvider) {
        options.groupItemMetadataProvider = new Slick.Data.GroupItemMetadataProvider();
      }

      groups = [];
      toggledGroupsByLevel = [];
      groupingInfo = groupingInfo || [];
      groupingInfos = (groupingInfo instanceof Array) ? groupingInfo : [groupingInfo];

      for (var i = 0; i < groupingInfos.length; i++) {
        var gi = groupingInfos[i] = $.extend(true, {}, groupingInfoDefaults, groupingInfos[i]);
        gi.getterIsAFn = typeof gi.getter === "function";

        // pre-compile accumulator loops
        gi.compiledAccumulators = [];
        var idx = gi.aggregators.length;
        while (idx--) {
          gi.compiledAccumulators[idx] = compileAccumulatorLoop(gi.aggregators[idx]);
        }

        toggledGroupsByLevel[i] = {};
      }

      refresh();
    }

    /**
     * @deprecated Please use {@link setGrouping}.
     */
    function groupBy(valueGetter, valueFormatter, sortComparer) {
      if (valueGetter == null) {
        setGrouping([]);
        return;
      }

      setGrouping({
        getter: valueGetter,
        formatter: valueFormatter,
        comparer: sortComparer
      });
    }

    /**
     * @deprecated Please use {@link setGrouping}.
     */
    function setAggregators(groupAggregators, includeCollapsed) {
      if (!groupingInfos.length) {
        throw new Error("At least one grouping must be specified before calling setAggregators().");
      }

      groupingInfos[0].aggregators = groupAggregators;
      groupingInfos[0].aggregateCollapsed = includeCollapsed;

      setGrouping(groupingInfos);
    }

    function getItemByIdx(i) {
      return items[i];
    }

    function getIdxById(id) {
      return idxById[id];
    }

    function ensureRowsByIdCache() {
      if (!rowsById) {
        rowsById = {};
        for (var i = 0, l = rows.length; i < l; i++) {
          rowsById[rows[i][idProperty]] = i;
        }
      }
    }

    function getRowById(id) {
      ensureRowsByIdCache();
      return rowsById[id];
    }

    function getItemById(id) {
      return items[idxById[id]];
    }

    function mapIdsToRows(idArray) {
      var rows = [];
      ensureRowsByIdCache();
      for (var i = 0; i < idArray.length; i++) {
        var row = rowsById[idArray[i]];
        if (row != null) {
          rows[rows.length] = row;
        }
      }
      return rows;
    }

    function mapRowsToIds(rowArray) {
      var ids = [];
      for (var i = 0; i < rowArray.length; i++) {
        if (rowArray[i] < rows.length) {
          ids[ids.length] = rows[rowArray[i]][idProperty];
        }
      }
      return ids;
    }

    function updateItem(id, item) {
      if (idxById[id] === undefined || id !== item[idProperty]) {
        throw "Invalid or non-matching id";
      }
      items[idxById[id]] = item;
      if (!updated) {
        updated = {};
      }
      updated[id] = true;
      refresh();
    }

    function insertItem(insertBefore, item) {
      items.splice(insertBefore, 0, item);
      updateIdxById(insertBefore);
      refresh();
    }

    function addItem(item) {
      items.push(item);
      updateIdxById(items.length - 1);
      refresh();
    }

    function deleteItem(id) {
      var idx = idxById[id];
      if (idx === undefined) {
        throw "Invalid id";
      }
      delete idxById[id];
      items.splice(idx, 1);
      updateIdxById(idx);
      refresh();
    }

    function getLength() {
      return rows.length;
    }

    function getItem(i) {
      return rows[i];
    }

    function getItemMetadata(i) {
      var item = rows[i];
      if (item === undefined) {
        return null;
      }

      // overrides for grouping rows
      if (item.__group) {
        return options.groupItemMetadataProvider.getGroupRowMetadata(item);
      }

      // overrides for totals rows
      if (item.__groupTotals) {
        return options.groupItemMetadataProvider.getTotalsRowMetadata(item);
      }

      return null;
    }

    function expandCollapseAllGroups(level, collapse) {
      if (level == null) {
        for (var i = 0; i < groupingInfos.length; i++) {
          toggledGroupsByLevel[i] = {};
          groupingInfos[i].collapsed = collapse;
        }
      } else {
        toggledGroupsByLevel[level] = {};
        groupingInfos[level].collapsed = collapse;
      }
      refresh();
    }

    /**
     * @param level {Number} Optional level to collapse.  If not specified, applies to all levels.
     */
    function collapseAllGroups(level) {
      expandCollapseAllGroups(level, true);
    }

    /**
     * @param level {Number} Optional level to expand.  If not specified, applies to all levels.
     */
    function expandAllGroups(level) {
      expandCollapseAllGroups(level, false);
    }

    function expandCollapseGroup(level, groupingKey, collapse) {
      toggledGroupsByLevel[level][groupingKey] = groupingInfos[level].collapsed ^ collapse;
      refresh();
    }

    /**
     * @param varArgs Either a Slick.Group's "groupingKey" property, or a
     *     variable argument list of grouping values denoting a unique path to the row.  For
     *     example, calling collapseGroup('high', '10%') will collapse the '10%' subgroup of
     *     the 'high' setGrouping.
     */
    function collapseGroup(varArgs) {
      var args = Array.prototype.slice.call(arguments);
      var arg0 = args[0];
      if (args.length == 1 && arg0.indexOf(groupingDelimiter) != -1) {
        expandCollapseGroup(arg0.split(groupingDelimiter).length - 1, arg0, true);
      } else {
        expandCollapseGroup(args.length - 1, args.join(groupingDelimiter), true);
      }
    }

    /**
     * @param varArgs Either a Slick.Group's "groupingKey" property, or a
     *     variable argument list of grouping values denoting a unique path to the row.  For
     *     example, calling expandGroup('high', '10%') will expand the '10%' subgroup of
     *     the 'high' setGrouping.
     */
    function expandGroup(varArgs) {
      var args = Array.prototype.slice.call(arguments);
      var arg0 = args[0];
      if (args.length == 1 && arg0.indexOf(groupingDelimiter) != -1) {
        expandCollapseGroup(arg0.split(groupingDelimiter).length - 1, arg0, false);
      } else {
        expandCollapseGroup(args.length - 1, args.join(groupingDelimiter), false);
      }
    }

    function getGroups() {
      return groups;
    }

    function extractGroups(rows, parentGroup) {
      var group;
      var val;
      var groups = [];
      var groupsByVal = [];
      var r;
      var level = parentGroup ? parentGroup.level + 1 : 0;
      var gi = groupingInfos[level];

      for (var i = 0, l = gi.predefinedValues.length; i < l; i++) {
        val = gi.predefinedValues[i];
        group = groupsByVal[val];
        if (!group) {
          group = new Slick.Group();
          group.value = val;
          group.level = level;
          group.groupingKey = (parentGroup ? parentGroup.groupingKey + groupingDelimiter : '') + val;
          groups[groups.length] = group;
          groupsByVal[val] = group;
        }
      }

      for (var i = 0, l = rows.length; i < l; i++) {
        r = rows[i];
        val = gi.getterIsAFn ? gi.getter(r) : r[gi.getter];
        group = groupsByVal[val];
        if (!group) {
          group = new Slick.Group();
          group.value = val;
          group.level = level;
          group.groupingKey = (parentGroup ? parentGroup.groupingKey + groupingDelimiter : '') + val;
          groups[groups.length] = group;
          groupsByVal[val] = group;
        }

        group.rows[group.count++] = r;
      }

      if (level < groupingInfos.length - 1) {
        for (var i = 0; i < groups.length; i++) {
          group = groups[i];
          group.groups = extractGroups(group.rows, group);
        }
      }      

      groups.sort(groupingInfos[level].comparer);

      return groups;
    }

    // TODO:  lazy totals calculation
    function calculateGroupTotals(group) {
      // TODO:  try moving iterating over groups into compiled accumulator
      var gi = groupingInfos[group.level];
      var isLeafLevel = (group.level == groupingInfos.length);
      var totals = new Slick.GroupTotals();
      var agg, idx = gi.aggregators.length;
      while (idx--) {
        agg = gi.aggregators[idx];
        agg.init();
        gi.compiledAccumulators[idx].call(agg,
            (!isLeafLevel && gi.aggregateChildGroups) ? group.groups : group.rows);
        agg.storeResult(totals);
      }
      totals.group = group;
      group.totals = totals;
    }

    function calculateTotals(groups, level) {
      level = level || 0;
      var gi = groupingInfos[level];
      var idx = groups.length, g;
      while (idx--) {
        g = groups[idx];

        if (g.collapsed && !gi.aggregateCollapsed) {
          continue;
        }

        // Do a depth-first aggregation so that parent setGrouping aggregators can access subgroup totals.
        if (g.groups) {
          calculateTotals(g.groups, level + 1);
        }

        if (gi.aggregators.length && (
            gi.aggregateEmpty || g.rows.length || (g.groups && g.groups.length))) {
          calculateGroupTotals(g);
        }
      }
    }

    function finalizeGroups(groups, level) {
      level = level || 0;
      var gi = groupingInfos[level];
      var groupCollapsed = gi.collapsed;
      var toggledGroups = toggledGroupsByLevel[level];
      var idx = groups.length, g;
      while (idx--) {
        g = groups[idx];
        g.collapsed = groupCollapsed ^ toggledGroups[g.groupingKey];
        g.title = gi.formatter ? gi.formatter(g) : g.value;

        if (g.groups) {
          finalizeGroups(g.groups, level + 1);
          // Let the non-leaf setGrouping rows get garbage-collected.
          // They may have been used by aggregates that go over all of the descendants,
          // but at this point they are no longer needed.
          g.rows = [];
        }
      }
    }

    function flattenGroupedRows(groups, level) {
      level = level || 0;
      var gi = groupingInfos[level];
      var groupedRows = [], rows, gl = 0, g;
      for (var i = 0, l = groups.length; i < l; i++) {
        g = groups[i];
        groupedRows[gl++] = g;

        if (!g.collapsed) {
          rows = g.groups ? flattenGroupedRows(g.groups, level + 1) : g.rows;
          for (var j = 0, jj = rows.length; j < jj; j++) {
            groupedRows[gl++] = rows[j];
          }
        }

        if (g.totals && gi.displayTotalsRow && (!g.collapsed || gi.aggregateCollapsed)) {
          groupedRows[gl++] = g.totals;
        }
      }
      return groupedRows;
    }

    function getFunctionInfo(fn) {
      var fnRegex = /^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;
      var matches = fn.toString().match(fnRegex);
      return {
        params: matches[1].split(","),
        body: matches[2]
      };
    }

    function compileAccumulatorLoop(aggregator) {
      var accumulatorInfo = getFunctionInfo(aggregator.accumulate);
      var fn = new Function(
          "_items",
          "for (var " + accumulatorInfo.params[0] + ", _i=0, _il=_items.length; _i<_il; _i++) {" +
              accumulatorInfo.params[0] + " = _items[_i]; " +
              accumulatorInfo.body +
          "}"
      );
      fn.displayName = fn.name = "compiledAccumulatorLoop";
      return fn;
    }

    function compileFilter() {
      var filterInfo = getFunctionInfo(filter);

      var filterBody = filterInfo.body
          .replace(/return false[;}]/gi, "{ continue _coreloop; }")
          .replace(/return true[;}]/gi, "{ _retval[_idx++] = $item$; continue _coreloop; }")
          .replace(/return ([^;}]+?);/gi,
          "{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }");

      // This preserves the function template code after JS compression,
      // so that replace() commands still work as expected.
      var tpl = [
        //"function(_items, _args) { ",
        "var _retval = [], _idx = 0; ",
        "var $item$, $args$ = _args; ",
        "_coreloop: ",
        "for (var _i = 0, _il = _items.length; _i < _il; _i++) { ",
        "$item$ = _items[_i]; ",
        "$filter$; ",
        "} ",
        "return _retval; "
        //"}"
      ].join("");
      tpl = tpl.replace(/\$filter\$/gi, filterBody);
      tpl = tpl.replace(/\$item\$/gi, filterInfo.params[0]);
      tpl = tpl.replace(/\$args\$/gi, filterInfo.params[1]);

      var fn = new Function("_items,_args", tpl);
      fn.displayName = fn.name = "compiledFilter";
      return fn;
    }

    function compileFilterWithCaching() {
      var filterInfo = getFunctionInfo(filter);

      var filterBody = filterInfo.body
          .replace(/return false[;}]/gi, "{ continue _coreloop; }")
          .replace(/return true[;}]/gi, "{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }")
          .replace(/return ([^;}]+?);/gi,
          "{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }");

      // This preserves the function template code after JS compression,
      // so that replace() commands still work as expected.
      var tpl = [
        //"function(_items, _args, _cache) { ",
        "var _retval = [], _idx = 0; ",
        "var $item$, $args$ = _args; ",
        "_coreloop: ",
        "for (var _i = 0, _il = _items.length; _i < _il; _i++) { ",
        "$item$ = _items[_i]; ",
        "if (_cache[_i]) { ",
        "_retval[_idx++] = $item$; ",
        "continue _coreloop; ",
        "} ",
        "$filter$; ",
        "} ",
        "return _retval; "
        //"}"
      ].join("");
      tpl = tpl.replace(/\$filter\$/gi, filterBody);
      tpl = tpl.replace(/\$item\$/gi, filterInfo.params[0]);
      tpl = tpl.replace(/\$args\$/gi, filterInfo.params[1]);

      var fn = new Function("_items,_args,_cache", tpl);
      fn.displayName = fn.name = "compiledFilterWithCaching";
      return fn;
    }

    function uncompiledFilter(items, args) {
      var retval = [], idx = 0;

      for (var i = 0, ii = items.length; i < ii; i++) {
        if (filter(items[i], args)) {
          retval[idx++] = items[i];
        }
      }

      return retval;
    }

    function uncompiledFilterWithCaching(items, args, cache) {
      var retval = [], idx = 0, item;

      for (var i = 0, ii = items.length; i < ii; i++) {
        item = items[i];
        if (cache[i]) {
          retval[idx++] = item;
        } else if (filter(item, args)) {
          retval[idx++] = item;
          cache[i] = true;
        }
      }

      return retval;
    }

    function getFilteredAndPagedItems(items) {
      if (filter) {
        var batchFilter = options.inlineFilters ? compiledFilter : uncompiledFilter;
        var batchFilterWithCaching = options.inlineFilters ? compiledFilterWithCaching : uncompiledFilterWithCaching;

        if (refreshHints.isFilterNarrowing) {
          filteredItems = batchFilter(filteredItems, filterArgs);
        } else if (refreshHints.isFilterExpanding) {
          filteredItems = batchFilterWithCaching(items, filterArgs, filterCache);
        } else if (!refreshHints.isFilterUnchanged) {
          filteredItems = batchFilter(items, filterArgs);
        }
      } else {
        // special case:  if not filtering and not paging, the resulting
        // rows collection needs to be a copy so that changes due to sort
        // can be caught
        filteredItems = pagesize ? items : items.concat();
      }

      // get the current page
      var paged;
      if (pagesize) {
        if (filteredItems.length < pagenum * pagesize) {
          pagenum = Math.floor(filteredItems.length / pagesize);
        }
        paged = filteredItems.slice(pagesize * pagenum, pagesize * pagenum + pagesize);
      } else {
        paged = filteredItems;
      }

      return {totalRows: filteredItems.length, rows: paged};
    }

    function getRowDiffs(rows, newRows) {
      var item, r, eitherIsNonData, diff = [];
      var from = 0, to = newRows.length;

      if (refreshHints && refreshHints.ignoreDiffsBefore) {
        from = Math.max(0,
            Math.min(newRows.length, refreshHints.ignoreDiffsBefore));
      }

      if (refreshHints && refreshHints.ignoreDiffsAfter) {
        to = Math.min(newRows.length,
            Math.max(0, refreshHints.ignoreDiffsAfter));
      }

      for (var i = from, rl = rows.length; i < to; i++) {
        if (i >= rl) {
          diff[diff.length] = i;
        } else {
          item = newRows[i];
          r = rows[i];

          if ((groupingInfos.length && (eitherIsNonData = (item.__nonDataRow) || (r.__nonDataRow)) &&
              item.__group !== r.__group ||
              item.__group && !item.equals(r))
              || (eitherIsNonData &&
              // no good way to compare totals since they are arbitrary DTOs
              // deep object comparison is pretty expensive
              // always considering them 'dirty' seems easier for the time being
              (item.__groupTotals || r.__groupTotals))
              || item[idProperty] != r[idProperty]
              || (updated && updated[item[idProperty]])
              ) {
            diff[diff.length] = i;
          }
        }
      }
      return diff;
    }

    function recalc(_items) {
      rowsById = null;

      if (refreshHints.isFilterNarrowing != prevRefreshHints.isFilterNarrowing ||
          refreshHints.isFilterExpanding != prevRefreshHints.isFilterExpanding) {
        filterCache = [];
      }

      var filteredItems = getFilteredAndPagedItems(_items);
      totalRows = filteredItems.totalRows;
      var newRows = filteredItems.rows;

      groups = [];
      if (groupingInfos.length) {
        groups = extractGroups(newRows);
        if (groups.length) {
          calculateTotals(groups);
          finalizeGroups(groups);
          newRows = flattenGroupedRows(groups);
        }
      }

      var diff = getRowDiffs(rows, newRows);

      rows = newRows;

      return diff;
    }

    function refresh() {
      if (suspend) {
        return;
      }

      var countBefore = rows.length;
      var totalRowsBefore = totalRows;

      var diff = recalc(items, filter); // pass as direct refs to avoid closure perf hit

      // if the current page is no longer valid, go to last page and recalc
      // we suffer a performance penalty here, but the main loop (recalc) remains highly optimized
      if (pagesize && totalRows < pagenum * pagesize) {
        pagenum = Math.max(0, Math.ceil(totalRows / pagesize) - 1);
        diff = recalc(items, filter);
      }

      updated = null;
      prevRefreshHints = refreshHints;
      refreshHints = {};

      if (totalRowsBefore != totalRows) {
        onPagingInfoChanged.notify(getPagingInfo(), null, self);
      }
      if (countBefore != rows.length) {
        onRowCountChanged.notify({previous: countBefore, current: rows.length}, null, self);
      }
      if (diff.length > 0) {
        onRowsChanged.notify({rows: diff}, null, self);
      }
    }

    function syncGridSelection(grid, preserveHidden) {
      var self = this;
      var selectedRowIds = self.mapRowsToIds(grid.getSelectedRows());;
      var inHandler;

      function update() {
        if (selectedRowIds.length > 0) {
          inHandler = true;
          var selectedRows = self.mapIdsToRows(selectedRowIds);
          if (!preserveHidden) {
            selectedRowIds = self.mapRowsToIds(selectedRows);
          }
          grid.setSelectedRows(selectedRows);
          inHandler = false;
        }
      }

      grid.onSelectedRowsChanged.subscribe(function(e, args) {
        if (inHandler) { return; }
        selectedRowIds = self.mapRowsToIds(grid.getSelectedRows());
      });

      this.onRowsChanged.subscribe(update);

      this.onRowCountChanged.subscribe(update);
    }

    function syncGridCellCssStyles(grid, key) {
      var hashById;
      var inHandler;

      // since this method can be called after the cell styles have been set,
      // get the existing ones right away
      storeCellCssStyles(grid.getCellCssStyles(key));

      function storeCellCssStyles(hash) {
        hashById = {};
        for (var row in hash) {
          var id = rows[row][idProperty];
          hashById[id] = hash[row];
        }
      }

      function update() {
        if (hashById) {
          inHandler = true;
          ensureRowsByIdCache();
          var newHash = {};
          for (var id in hashById) {
            var row = rowsById[id];
            if (row != undefined) {
              newHash[row] = hashById[id];
            }
          }
          grid.setCellCssStyles(key, newHash);
          inHandler = false;
        }
      }

      grid.onCellCssStylesChanged.subscribe(function(e, args) {
        if (inHandler) { return; }
        if (key != args.key) { return; }
        if (args.hash) {
          storeCellCssStyles(args.hash);
        }
      });

      this.onRowsChanged.subscribe(update);

      this.onRowCountChanged.subscribe(update);
    }

    return {
      // methods
      "beginUpdate": beginUpdate,
      "endUpdate": endUpdate,
      "setPagingOptions": setPagingOptions,
      "getPagingInfo": getPagingInfo,
      "getItems": getItems,
      "setItems": setItems,
      "setFilter": setFilter,
      "sort": sort,
      "fastSort": fastSort,
      "reSort": reSort,
      "setGrouping": setGrouping,
      "getGrouping": getGrouping,
      "groupBy": groupBy,
      "setAggregators": setAggregators,
      "collapseAllGroups": collapseAllGroups,
      "expandAllGroups": expandAllGroups,
      "collapseGroup": collapseGroup,
      "expandGroup": expandGroup,
      "getGroups": getGroups,
      "getIdxById": getIdxById,
      "getRowById": getRowById,
      "getItemById": getItemById,
      "getItemByIdx": getItemByIdx,
      "mapRowsToIds": mapRowsToIds,
      "mapIdsToRows": mapIdsToRows,
      "setRefreshHints": setRefreshHints,
      "setFilterArgs": setFilterArgs,
      "refresh": refresh,
      "updateItem": updateItem,
      "insertItem": insertItem,
      "addItem": addItem,
      "deleteItem": deleteItem,
      "syncGridSelection": syncGridSelection,
      "syncGridCellCssStyles": syncGridCellCssStyles,

      // data provider methods
      "getLength": getLength,
      "getItem": getItem,
      "getItemMetadata": getItemMetadata,

      // events
      "onRowCountChanged": onRowCountChanged,
      "onRowsChanged": onRowsChanged,
      "onPagingInfoChanged": onPagingInfoChanged
    };
  }

  function AvgAggregator(field) {
    this.field_ = field;

    this.init = function () {
      this.count_ = 0;
      this.nonNullCount_ = 0;
      this.sum_ = 0;
    };

    this.accumulate = function (item) {
      var val = item[this.field_];
      this.count_++;
      if (val != null && val !== "" && val !== NaN) {
        this.nonNullCount_++;
        this.sum_ += parseFloat(val);
      }
    };

    this.storeResult = function (groupTotals) {
      if (!groupTotals.avg) {
        groupTotals.avg = {};
      }
      if (this.nonNullCount_ != 0) {
        groupTotals.avg[this.field_] = this.sum_ / this.nonNullCount_;
      }
    };
  }

  function MinAggregator(field) {
    this.field_ = field;

    this.init = function () {
      this.min_ = null;
    };

    this.accumulate = function (item) {
      var val = item[this.field_];
      if (val != null && val !== "" && val !== NaN) {
        if (this.min_ == null || val < this.min_) {
          this.min_ = val;
        }
      }
    };

    this.storeResult = function (groupTotals) {
      if (!groupTotals.min) {
        groupTotals.min = {};
      }
      groupTotals.min[this.field_] = this.min_;
    }
  }

  function MaxAggregator(field) {
    this.field_ = field;

    this.init = function () {
      this.max_ = null;
    };

    this.accumulate = function (item) {
      var val = item[this.field_];
      if (val != null && val !== "" && val !== NaN) {
        if (this.max_ == null || val > this.max_) {
          this.max_ = val;
        }
      }
    };

    this.storeResult = function (groupTotals) {
      if (!groupTotals.max) {
        groupTotals.max = {};
      }
      groupTotals.max[this.field_] = this.max_;
    }
  }

  function SumAggregator(field) {
    this.field_ = field;

    this.init = function () {
      this.sum_ = null;
    };

    this.accumulate = function (item) {
      var val = item[this.field_];
      if (val != null && val !== "" && val !== NaN) {
        this.sum_ += parseFloat(val);
      }
    };

    this.storeResult = function (groupTotals) {
      if (!groupTotals.sum) {
        groupTotals.sum = {};
      }
      groupTotals.sum[this.field_] = this.sum_;
    }
  }

  // TODO:  add more built-in aggregators
  // TODO:  merge common aggregators in one to prevent needles iterating

})(jQuery);

//End ------ slick.dataview.js

//Start ------ slick.autotooltips.js

(function ($) {
    // Register namespace
    $.extend(true, window, {
        "Slick": {
            "AutoTooltips": AutoTooltips
        }
    });

    /**
    * AutoTooltips plugin to show/hide tooltips when columns are too narrow to fit content.
    * @constructor
    * @param {boolean} [options.enableForCells=true]        - Enable tooltip for grid cells
    * @param {boolean} [options.enableForHeaderCells=false] - Enable tooltip for header cells
    * @param {number}  [options.maxToolTipLength=null]      - The maximum length for a tooltip
    */
    function AutoTooltips(options) {
        var _grid;
        var _self = this;
        var _defaults = {
            enableForCells: true,
            enableForHeaderCells: false,
            maxToolTipLength: null
        };

        /**
        * Initialize plugin.
        */
        function init(grid) {
            options = $.extend(true, {}, _defaults, options);
            _grid = grid;
            if (options.enableForCells) _grid.onMouseEnter.subscribe(handleMouseEnter);
            if (options.enableForHeaderCells) _grid.onHeaderMouseEnter.subscribe(handleHeaderMouseEnter);
        }

        /**
        * Destroy plugin.
        */
        function destroy() {
            if (options.enableForCells) _grid.onMouseEnter.unsubscribe(handleMouseEnter);
            if (options.enableForHeaderCells) _grid.onHeaderMouseEnter.unsubscribe(handleHeaderMouseEnter);
        }

        /**
        * Handle mouse entering grid cell to add/remove tooltip.
        * @param {jQuery.Event} e - The event
        */
        function handleMouseEnter(e) {
            var cell = _grid.getCellFromEvent(e);
            if (cell) {
                var $node = $(_grid.getCellNode(cell.row, cell.cell));
                var text;
                if ($node.innerWidth() < $node[0].scrollWidth) {
                    text = $.trim($node.text());
                    if (options.maxToolTipLength && text.length > options.maxToolTipLength) {
                        text = text.substr(0, options.maxToolTipLength - 3) + "...";
                    }
                } else {
                    text = "";
                }
                $node.attr("title", text);
            }
        }

        /**
        * Handle mouse entering header cell to add/remove tooltip.
        * @param {jQuery.Event} e     - The event
        * @param {object} args.column - The column definition
        */
        function handleHeaderMouseEnter(e, args) {
            var column = args.column,
          $node = $(e.target).closest(".slick-header-column");
            if (!column.toolTip) {
                $node.attr("title", ($node.innerWidth() < $node[0].scrollWidth) ? column.name : "");
            }
        }

        // Public API
        $.extend(this, {
            "init": init,
            "destroy": destroy
        });
    }
})(jQuery);

//End ------ slick.autotooltips.js

//Start ------ slick.rowselectionmodel.js
(function ($) {
  // register namespace
  $.extend(true, window, {
    "Slick": {
      "RowSelectionModel": RowSelectionModel
    }
  });

  function RowSelectionModel(options) {
    var _grid;
    var _ranges = [];
    var _self = this;
    var _handler = new Slick.EventHandler();
    var _inHandler;
    var _options;
    var _defaults = {
      selectActiveRow: true
    };

    function init(grid) {
      _options = $.extend(true, {}, _defaults, options);
      _grid = grid;
      _handler.subscribe(_grid.onActiveCellChanged,
          wrapHandler(handleActiveCellChange));
      _handler.subscribe(_grid.onKeyDown,
          wrapHandler(handleKeyDown));
      _handler.subscribe(_grid.onClick,
          wrapHandler(handleClick));
    }

    function destroy() {
      _handler.unsubscribeAll();
    }

    function wrapHandler(handler) {
      return function () {
        if (!_inHandler) {
          _inHandler = true;
          handler.apply(this, arguments);
          _inHandler = false;
        }
      };
    }

    function rangesToRows(ranges) {
      var rows = [];
      for (var i = 0; i < ranges.length; i++) {
        for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {
          rows.push(j);
        }
      }
      return rows;
    }

    function rowsToRanges(rows) {
      var ranges = [];
      var lastCell = _grid.getColumns().length - 1;
      for (var i = 0; i < rows.length; i++) {
        ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));
      }
      return ranges;
    }

    function getRowsRange(from, to) {
      var i, rows = [];
      for (i = from; i <= to; i++) {
        rows.push(i);
      }
      for (i = to; i < from; i++) {
        rows.push(i);
      }
      return rows;
    }

    function getSelectedRows() {
      return rangesToRows(_ranges);
    }

    function setSelectedRows(rows) {
      setSelectedRanges(rowsToRanges(rows));
    }

    function setSelectedRanges(ranges) {
      _ranges = ranges;
      _self.onSelectedRangesChanged.notify(_ranges);
    }

    function getSelectedRanges() {
      return _ranges;
    }

    function handleActiveCellChange(e, data) {
      if (_options.selectActiveRow && data.row != null) {
        setSelectedRanges([new Slick.Range(data.row, 0, data.row, _grid.getColumns().length - 1)]);
      }
    }

    function handleKeyDown(e) {
      var activeRow = _grid.getActiveCell();
      if (activeRow && e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey && (e.which == 38 || e.which == 40)) {
        var selectedRows = getSelectedRows();
        selectedRows.sort(function (x, y) {
          return x - y
        });

        if (!selectedRows.length) {
          selectedRows = [activeRow.row];
        }

        var top = selectedRows[0];
        var bottom = selectedRows[selectedRows.length - 1];
        var active;

        if (e.which == 40) {
          active = activeRow.row < bottom || top == bottom ? ++bottom : ++top;
        } else {
          active = activeRow.row < bottom ? --bottom : --top;
        }

        if (active >= 0 && active < _grid.getDataLength()) {
          _grid.scrollRowIntoView(active);
          _ranges = rowsToRanges(getRowsRange(top, bottom));
          setSelectedRanges(_ranges);
        }

        e.preventDefault();
        e.stopPropagation();
      }
    }

    function handleClick(e) {
      var cell = _grid.getCellFromEvent(e);
      if (!cell || !_grid.canCellBeActive(cell.row, cell.cell)) {
        return false;
      }

      var selection = rangesToRows(_ranges);
      var idx = $.inArray(cell.row, selection);

      if (!e.ctrlKey && !e.shiftKey && !e.metaKey) {
        return false;
      }
      else if (_grid.getOptions().multiSelect) {
        if (idx === -1 && (e.ctrlKey || e.metaKey)) {
          selection.push(cell.row);
          _grid.setActiveCell(cell.row, cell.cell);
        } else if (idx !== -1 && (e.ctrlKey || e.metaKey)) {
          selection = $.grep(selection, function (o, i) {
            return (o !== cell.row);
          });
          _grid.setActiveCell(cell.row, cell.cell);
        } else if (selection.length && e.shiftKey) {
          var last = selection.pop();
          var from = Math.min(cell.row, last);
          var to = Math.max(cell.row, last);
          selection = [];
          for (var i = from; i <= to; i++) {
            if (i !== last) {
              selection.push(i);
            }
          }
          selection.push(last);
          _grid.setActiveCell(cell.row, cell.cell);
        }
      }

      _ranges = rowsToRanges(selection);
      setSelectedRanges(_ranges);
      e.stopImmediatePropagation();

      return true;
    }

    $.extend(this, {
      "getSelectedRows": getSelectedRows,
      "setSelectedRows": setSelectedRows,

      "getSelectedRanges": getSelectedRanges,
      "setSelectedRanges": setSelectedRanges,

      "init": init,
      "destroy": destroy,

      "onSelectedRangesChanged": new Slick.Event()
    });
  }
})(jQuery);
//End ------ slick.rowselectionmodel.js

//Start ------ slick.groupitemmetadataprovider.js
(function ($) {
    $.extend(true, window, {
        Slick: {
            Data: {
                GroupItemMetadataProvider: GroupItemMetadataProvider
            }
        }
    });

    /***
     * Provides item metadata for group (Slick.Group) and totals (Slick.Totals) rows produced by the DataView.
     * This metadata overrides the default behavior and formatting of those rows so that they appear and function
     * correctly when processed by the grid.
     *
     * This class also acts as a grid plugin providing event handlers to expand & collapse groups.
     * If "grid.registerPlugin(...)" is not called, expand & collapse will not work.
     *
     * @class GroupItemMetadataProvider
     * @module Data
     * @namespace Slick.Data
     * @constructor
     * @param options
     */
    function GroupItemMetadataProvider(options) {
        var _grid;
        var _defaults = {
            groupCssClass: "slick-group",
            groupTitleCssClass: "slick-group-title",
            totalsCssClass: "slick-group-totals",
            groupFocusable: false,
            totalsFocusable: false,
            toggleCssClass: "slick-group-toggle",
            toggleExpandedCssClass: "expanded",
            toggleCollapsedCssClass: "collapsed",
            enableExpandCollapse: true,
            groupFormatter: defaultGroupCellFormatter,
            totalsFormatter: defaultTotalsCellFormatter
        };

        options = $.extend(true, {}, _defaults, options);


        function defaultGroupCellFormatter(row, cell, value, columnDef, item) {
            if (!options.enableExpandCollapse) {
                return item.title;
            }

            var indentation = item.level * 15 + "px";

            return "<span class='" + options.toggleCssClass + " " +
                (item.collapsed ? options.toggleCollapsedCssClass : options.toggleExpandedCssClass) +
                "' style='margin-left:" + indentation + "'>" +
                "</span>" +
                "<span class='" + options.groupTitleCssClass + "' level='" + item.level + "'>" +
                  item.title +
                "</span>";
        }

        function defaultTotalsCellFormatter(row, cell, value, columnDef, item) {
            return (columnDef.groupTotalsFormatter && columnDef.groupTotalsFormatter(item, columnDef)) || "";
        }


        function init(grid) {
            _grid = grid;
            _grid.onClick.subscribe(handleGridClick);
            _grid.onKeyDown.subscribe(handleGridKeyDown);

        }

        function destroy() {
            if (_grid) {
                _grid.onClick.unsubscribe(handleGridClick);
                _grid.onKeyDown.unsubscribe(handleGridKeyDown);
            }
        }

        function handleGridClick(e, args) {
            var item = this.getDataItem(args.row);
            if (item && item instanceof Slick.Group && $(e.target).hasClass(options.toggleCssClass)) {
                var range = _grid.getRenderedRange();
                statRawDataGrid.getDataView().setRefreshHints({
                    ignoreDiffsBefore: range.top,
                    ignoreDiffsAfter: range.bottom
                });

                if (item.collapsed) {
                    this.getData().expandGroup(item.groupingKey);
                } else {
                    this.getData().collapseGroup(item.groupingKey);
                }

                e.stopImmediatePropagation();
                e.preventDefault();
            }
        }

        // TODO:  add -/+ handling
        function handleGridKeyDown(e, args) {
            if (options.enableExpandCollapse && (e.which == $.ui.keyCode.SPACE)) {
                var activeCell = this.getActiveCell();
                if (activeCell) {
                    var item = this.getDataItem(activeCell.row);
                    if (item && item instanceof Slick.Group) {
                        var range = _grid.getRenderedRange();
                        dataView.setRefreshHints({
                            ignoreDiffsBefore: range.top,
                            ignoreDiffsAfter: range.bottom
                        });

                        if (item.collapsed) {
                            this.getData().expandGroup(item.groupingKey);
                        } else {
                            this.getData().collapseGroup(item.groupingKey);
                        }

                        e.stopImmediatePropagation();
                        e.preventDefault();
                    }
                }
            }
        }

        function getGroupRowMetadata(item) {
            return {
                selectable: false,
                focusable: options.groupFocusable,
                cssClasses: options.groupCssClass,
                columns: {
                    0: {
                        colspan: "*",
                        formatter: options.groupFormatter,
                        editor: null
                    }
                }
            };
        }

        function getTotalsRowMetadata(item) {
            return {
                selectable: false,
                focusable: options.totalsFocusable,
                cssClasses: options.totalsCssClass,
                formatter: options.totalsFormatter,
                editor: null
            };
        }


        return {
            "init": init,
            "destroy": destroy,
            "getGroupRowMetadata": getGroupRowMetadata,
            "getTotalsRowMetadata": getTotalsRowMetadata
        };
    }
})(jQuery);

//End ------ slick.groupitemmetadataprovider.js

//Start ------ jquery.layout-latest.js
/**
 * @preserve
 * jquery.layout 1.4.3
 * $Date: 2014-08-30 08:00:00 (Sat, 30 Aug 2014) $
 * $Rev: 1.0403 $
 *
 * Copyright (c) 2014 Kevin Dalman (http://jquery-dev.com)
 * Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)
 *
 * Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 * and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
 *
 * SEE: http://layout.jquery-dev.com/LICENSE.txt
 *
 * Changelog: http://layout.jquery-dev.com/changelog.cfm
 *
 * Docs: http://layout.jquery-dev.com/documentation.html
 * Tips: http://layout.jquery-dev.com/tips.html
 * Help: http://groups.google.com/group/jquery-ui-layout
 */

/* JavaDoc Info: http://code.google.com/closure/compiler/docs/js-for-compiler.html
 * {!Object}	non-nullable type (never NULL)
 * {?string}	nullable type (sometimes NULL) - default for {Object}
 * {number=}	optional parameter
 * {*}			ALL types
 */
/*	TODO for jQ 2.0 
 *	change .andSelf() to .addBack()
 *	check $.fn.disableSelection - this is in jQuery UI 1.9.x
 */

// NOTE: For best readability, view with a fixed-width font and tabs equal to 4-chars

;(function ($) {

// alias Math methods - used a lot!
var	min		= Math.min
,	max		= Math.max
,	round	= Math.floor

,	isStr	=  function (v) { return $.type(v) === "string"; }

	/**
	 * @param {!Object}			Instance
	 * @param {Array.<string>}	a_fn
	 */
,	runPluginCallbacks = function (Instance, a_fn) {
		if ($.isArray(a_fn))
			for (var i=0, c=a_fn.length; i<c; i++) {
				var fn = a_fn[i];
				try {
					if (isStr(fn)) // 'name' of a function
						fn = eval(fn);
					if ($.isFunction(fn))
						g(fn)( Instance );
				} catch (ex) {}
			}
		function g (f) { return f; }; // compiler hack
	}
;

/*
 *	GENERIC $.layout METHODS - used by all layouts
 */
$.layout = {

	version:	"1.4.3"
,	revision:	1.0403 // eg: 1.4.1 final = 1.0401 - major(n+).minor(nn)+patch(nn+)

	// $.layout.browser REPLACES $.browser
,	browser:	{} // set below

	// *PREDEFINED* EFFECTS & DEFAULTS 
	// MUST list effect here - OR MUST set an fxSettings option (can be an empty hash: {})
,	effects: {

	//	Pane Open/Close Animations
		slide: {
			all:	{ duration:  "fast"	} // eg: duration: 1000, easing: "easeOutBounce"
		,	north:	{ direction: "up"	}
		,	south:	{ direction: "down"	}
		,	east:	{ direction: "right"}
		,	west:	{ direction: "left"	}
		}
	,	drop: {
			all:	{ duration:  "slow"	}
		,	north:	{ direction: "up"	}
		,	south:	{ direction: "down"	}
		,	east:	{ direction: "right"}
		,	west:	{ direction: "left"	}
		}
	,	scale: {
			all:	{ duration:	"fast"	}
		}
	//	these are not recommended, but can be used
	,	blind:		{}
	,	clip:		{}
	,	explode:	{}
	,	fade:		{}
	,	fold:		{}
	,	puff:		{}

	//	Pane Resize Animations
	,	size: {
			all:	{ easing:	"swing"	}
		}
	}

	// INTERNAL CONFIG DATA - DO NOT CHANGE THIS!
,	config: {
		optionRootKeys:	"effects,panes,north,south,west,east,center".split(",")
	,	allPanes:		"north,south,west,east,center".split(",")
	,	borderPanes:	"north,south,west,east".split(",")
	,	oppositeEdge: {
			north:	"south"
		,	south:	"north"
		,	east: 	"west"
		,	west: 	"east"
		}
	//	offscreen data
	,	offscreenCSS:	{ left: "-99999px", right: "auto" } // used by hide/close if useOffscreenClose=true
	,	offscreenReset:	"offscreenReset" // key used for data
	//	CSS used in multiple places
	,	hidden:		{ visibility: "hidden" }
	,	visible:	{ visibility: "visible" }
	//	layout element settings
	,	resizers: {
			cssReq: {
				position: 	"absolute"
			,	padding: 	0
			,	margin: 	0
			,	fontSize:	"1px"
			,	textAlign:	"left"	// to counter-act "center" alignment!
			,	overflow: 	"hidden" // prevent toggler-button from overflowing
			//	SEE $.layout.defaults.zIndexes.resizer_normal
			}
		,	cssDemo: { // DEMO CSS - applied if: options.PANE.applyDemoStyles=true
				background: "#DDD"
			,	border:		"none"
			}
		}
	,	togglers: {
			cssReq: {
				position: 	"absolute"
			,	display: 	"block"
			,	padding: 	0
			,	margin: 	0
			,	overflow:	"hidden"
			,	textAlign:	"center"
			,	fontSize:	"1px"
			,	cursor: 	"pointer"
			,	zIndex: 	1
			}
		,	cssDemo: { // DEMO CSS - applied if: options.PANE.applyDemoStyles=true
				background: "#AAA"
			}
		}
	,	content: {
			cssReq: {
				position:	"relative" /* contain floated or positioned elements */
			}
		,	cssDemo: { // DEMO CSS - applied if: options.PANE.applyDemoStyles=true
				overflow:	"auto"
			,	padding:	"10px"
			}
		,	cssDemoPane: { // DEMO CSS - REMOVE scrolling from 'pane' when it has a content-div
				overflow:	"hidden"
			,	padding:	0
			}
		}
	,	panes: { // defaults for ALL panes - overridden by 'per-pane settings' below
			cssReq: {
				position: 	"absolute"
			,	margin:		0
			//	$.layout.defaults.zIndexes.pane_normal
			}
		,	cssDemo: { // DEMO CSS - applied if: options.PANE.applyDemoStyles=true
				padding:	"10px"
			,	background:	"#FFF"
			,	border:		"1px solid #BBB"
			,	overflow:	"auto"
			}
		}
	,	north: {
			side:			"top"
		,	sizeType:		"Height"
		,	dir:			"horz"
		,	cssReq: {
				top: 		0
			,	bottom: 	"auto"
			,	left: 		0
			,	right: 		0
			,	width: 		"auto"
			//	height: 	DYNAMIC
			}
		}
	,	south: {
			side:			"bottom"
		,	sizeType:		"Height"
		,	dir:			"horz"
		,	cssReq: {
				top: 		"auto"
			,	bottom: 	0
			,	left: 		0
			,	right: 		0
			,	width: 		"auto"
			//	height: 	DYNAMIC
			}
		}
	,	east: {
			side:			"right"
		,	sizeType:		"Width"
		,	dir:			"vert"
		,	cssReq: {
				left: 		"auto"
			,	right: 		0
			,	top: 		"auto" // DYNAMIC
			,	bottom: 	"auto" // DYNAMIC
			,	height: 	"auto"
			//	width: 		DYNAMIC
			}
		}
	,	west: {
			side:			"left"
		,	sizeType:		"Width"
		,	dir:			"vert"
		,	cssReq: {
				left: 		0
			,	right: 		"auto"
			,	top: 		"auto" // DYNAMIC
			,	bottom: 	"auto" // DYNAMIC
			,	height: 	"auto"
			//	width: 		DYNAMIC
			}
		}
	,	center: {
			dir:			"center"
		,	cssReq: {
				left: 		"auto" // DYNAMIC
			,	right: 		"auto" // DYNAMIC
			,	top: 		"auto" // DYNAMIC
			,	bottom: 	"auto" // DYNAMIC
			,	height: 	"auto"
			,	width: 		"auto"
			}
		}
	}

	// CALLBACK FUNCTION NAMESPACE - used to store reusable callback functions
,	callbacks: {}

,	getParentPaneElem: function (el) {
		// must pass either a container or pane element
		var $el = $(el)
		,	layout = $el.data("layout") || $el.data("parentLayout");
		if (layout) {
			var $cont = layout.container;
			// see if this container is directly-nested inside an outer-pane
			if ($cont.data("layoutPane")) return $cont;
			var $pane = $cont.closest("."+ $.layout.defaults.panes.paneClass);
			// if a pane was found, return it
			if ($pane.data("layoutPane")) return $pane;
		}
		return null;
	}

,	getParentPaneInstance: function (el) {
		// must pass either a container or pane element
		var $pane = $.layout.getParentPaneElem(el);
		return $pane ? $pane.data("layoutPane") : null;
	}

,	getParentLayoutInstance: function (el) {
		// must pass either a container or pane element
		var $pane = $.layout.getParentPaneElem(el);
		return $pane ? $pane.data("parentLayout") : null;
	}

,	getEventObject: function (evt) {
		return typeof evt === "object" && evt.stopPropagation ? evt : null;
	}
,	parsePaneName: function (evt_or_pane) {
		var evt = $.layout.getEventObject( evt_or_pane )
		,	pane = evt_or_pane;
		if (evt) {
			// ALWAYS stop propagation of events triggered in Layout!
			evt.stopPropagation();
			pane = $(this).data("layoutEdge");
		}
		if (pane && !/^(west|east|north|south|center)$/.test(pane)) {
			$.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+ pane +'"');
			pane = "error";
		}
		return pane;
	}


	// LAYOUT-PLUGIN REGISTRATION
	// more plugins can added beyond this default list
,	plugins: {
		draggable:		!!$.fn.draggable // resizing
	,	effects: {
			core:		!!$.effects		// animimations (specific effects tested by initOptions)
		,	slide:		$.effects && ($.effects.slide || ($.effects.effect && $.effects.effect.slide)) // default effect
		}
	}

//	arrays of plugin or other methods to be triggered for events in *each layout* - will be passed 'Instance'
,	onCreate:	[]	// runs when layout is just starting to be created - right after options are set
,	onLoad:		[]	// runs after layout container and global events init, but before initPanes is called
,	onReady:	[]	// runs after initialization *completes* - ie, after initPanes completes successfully
,	onDestroy:	[]	// runs after layout is destroyed
,	onUnload:	[]	// runs after layout is destroyed OR when page unloads
,	afterOpen:	[]	// runs after setAsOpen() completes
,	afterClose:	[]	// runs after setAsClosed() completes

	/*
	 *	GENERIC UTILITY METHODS
	 */

	// calculate and return the scrollbar width, as an integer
,	scrollbarWidth:		function () { return window.scrollbarWidth  || $.layout.getScrollbarSize('width'); }
,	scrollbarHeight:	function () { return window.scrollbarHeight || $.layout.getScrollbarSize('height'); }
,	getScrollbarSize:	function (dim) {
		var $c	= $('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body")
		,	d	= { width: $c.outerWidth - $c[0].clientWidth, height: 100 - $c[0].clientHeight };
		$c.remove();
		window.scrollbarWidth	= d.width;
		window.scrollbarHeight	= d.height;
		return dim.match(/^(width|height)$/) ? d[dim] : d;
	}


,	disableTextSelection: function () {
		var $d	= $(document)
		,	s	= 'textSelectionDisabled'
		,	x	= 'textSelectionInitialized'
		;
		if ($.fn.disableSelection) {
			if (!$d.data(x)) // document hasn't been initialized yet
				$d.on('mouseup', $.layout.enableTextSelection ).data(x, true);
			if (!$d.data(s))
				$d.disableSelection().data(s, true);
		}
	}
,	enableTextSelection: function () {
		var $d	= $(document)
		,	s	= 'textSelectionDisabled';
		if ($.fn.enableSelection && $d.data(s))
			$d.enableSelection().data(s, false);
	}


	/**
	 * Returns hash container 'display' and 'visibility'
	 *
	 * @see	$.swap() - swaps CSS, runs callback, resets CSS
	 * @param  {!Object}		$E				jQuery element
	 * @param  {boolean=}	[force=false]	Run even if display != none
	 * @return {!Object}						Returns current style props, if applicable
	 */
,	showInvisibly: function ($E, force) {
		if ($E && $E.length && (force || $E.css("display") === "none")) { // only if not *already hidden*
			var s = $E[0].style
				// save ONLY the 'style' props because that is what we must restore
			,	CSS = { display: s.display || '', visibility: s.visibility || '' };
			// show element 'invisibly' so can be measured
			$E.css({ display: "block", visibility: "hidden" });
			return CSS;
		}
		return {};
	}

	/**
	 * Returns data for setting size of an element (container or a pane).
	 *
	 * @see  _create(), onWindowResize() for container, plus others for pane
	 * @return JSON  Returns a hash of all dimensions: top, bottom, left, right, outerWidth, innerHeight, etc
	 */
,	getElementDimensions: function ($E, inset) {
		var
		//	dimensions hash - start with current data IF passed
			d	= { css: {}, inset: {} }
		,	x	= d.css			// CSS hash
		,	i	= { bottom: 0 }	// TEMP insets (bottom = complier hack)
		,	N	= $.layout.cssNum
		,	R	= Math.round
		,	off = $E.offset()
		,	b, p, ei			// TEMP border, padding
		;
		d.offsetLeft = off.left;
		d.offsetTop  = off.top;

		if (!inset) inset = {}; // simplify logic below

		$.each("Left,Right,Top,Bottom".split(","), function (idx, e) { // e = edge
			b = x["border" + e] = $.layout.borderWidth($E, e);
			p = x["padding"+ e] = $.layout.cssNum($E, "padding"+e);
			ei = e.toLowerCase();
			d.inset[ei] = inset[ei] >= 0 ? inset[ei] : p; // any missing insetX value = paddingX
			i[ei] = d.inset[ei] + b; // total offset of content from outer side
		});

		x.width		= R($E.width());
		x.height	= R($E.height());
		x.top		= N($E,"top",true);
		x.bottom	= N($E,"bottom",true);
		x.left		= N($E,"left",true);
		x.right		= N($E,"right",true);

		d.outerWidth	= R($E.outerWidth());
		d.outerHeight	= R($E.outerHeight());
		// calc the TRUE inner-dimensions, even in quirks-mode!
		d.innerWidth	= max(0, d.outerWidth  - i.left - i.right);
		d.innerHeight	= max(0, d.outerHeight - i.top  - i.bottom);
		// layoutWidth/Height is used in calcs for manual resizing
		// layoutW/H only differs from innerW/H when in quirks-mode - then is like outerW/H
		d.layoutWidth	= R($E.innerWidth());
		d.layoutHeight	= R($E.innerHeight());

		//if ($E.prop('tagName') === 'BODY') { debugData( d, $E.prop('tagName') ); } // DEBUG

		//d.visible	= $E.is(":visible");// && x.width > 0 && x.height > 0;

		return d;
	}

,	getElementStyles: function ($E, list) {
		var
			CSS	= {}
		,	style	= $E[0].style
		,	props	= list.split(",")
		,	sides	= "Top,Bottom,Left,Right".split(",")
		,	attrs	= "Color,Style,Width".split(",")
		,	p, s, a, i, j, k
		;
		for (i=0; i < props.length; i++) {
			p = props[i];
			if (p.match(/(border|padding|margin)$/))
				for (j=0; j < 4; j++) {
					s = sides[j];
					if (p === "border")
						for (k=0; k < 3; k++) {
							a = attrs[k];
							CSS[p+s+a] = style[p+s+a];
						}
					else
						CSS[p+s] = style[p+s];
				}
			else
				CSS[p] = style[p];
		};
		return CSS
	}

	/**
	 * Return the innerWidth for the current browser/doctype
	 *
	 * @see  initPanes(), sizeMidPanes(), initHandles(), sizeHandles()
	 * @param  {Array.<Object>}	$E  Must pass a jQuery object - first element is processed
	 * @param  {number=}			outerWidth (optional) Can pass a width, allowing calculations BEFORE element is resized
	 * @return {number}			Returns the innerWidth of the elem by subtracting padding and borders
	 */
,	cssWidth: function ($E, outerWidth) {
		// a 'calculated' outerHeight can be passed so borders and/or padding are removed if needed
		if (outerWidth <= 0) return 0;

		var lb	= $.layout.browser
		,	bs	= !lb.boxModel ? "border-box" : lb.boxSizing ? $E.css("boxSizing") : "content-box"
		,	b	= $.layout.borderWidth
		,	n	= $.layout.cssNum
		,	W	= outerWidth
		;
		// strip border and/or padding from outerWidth to get CSS Width
		if (bs !== "border-box")
			W -= (b($E, "Left") + b($E, "Right"));
		if (bs === "content-box")
			W -= (n($E, "paddingLeft") + n($E, "paddingRight"));
		return max(0,W);
	}

	/**
	 * Return the innerHeight for the current browser/doctype
	 *
	 * @see  initPanes(), sizeMidPanes(), initHandles(), sizeHandles()
	 * @param  {Array.<Object>}	$E  Must pass a jQuery object - first element is processed
	 * @param  {number=}			outerHeight  (optional) Can pass a width, allowing calculations BEFORE element is resized
	 * @return {number}			Returns the innerHeight of the elem by subtracting padding and borders
	 */
,	cssHeight: function ($E, outerHeight) {
		// a 'calculated' outerHeight can be passed so borders and/or padding are removed if needed
		if (outerHeight <= 0) return 0;

		var lb	= $.layout.browser
		,	bs	= !lb.boxModel ? "border-box" : lb.boxSizing ? $E.css("boxSizing") : "content-box"
		,	b	= $.layout.borderWidth
		,	n	= $.layout.cssNum
		,	H	= outerHeight
		;
		// strip border and/or padding from outerHeight to get CSS Height
		if (bs !== "border-box")
			H -= (b($E, "Top") + b($E, "Bottom"));
		if (bs === "content-box")
			H -= (n($E, "paddingTop") + n($E, "paddingBottom"));
		return max(0,H);
	}

	/**
	 * Returns the 'current CSS numeric value' for a CSS property - 0 if property does not exist
	 *
	 * @see  Called by many methods
	 * @param {Array.<Object>}	$E					Must pass a jQuery object - first element is processed
	 * @param {string}			prop				The name of the CSS property, eg: top, width, etc.
	 * @param {boolean=}			[allowAuto=false]	true = return 'auto' if that is value; false = return 0
	 * @return {(string|number)}						Usually used to get an integer value for position (top, left) or size (height, width)
	 */
,	cssNum: function ($E, prop, allowAuto) {
		if (!$E.jquery) $E = $($E);
		var CSS = $.layout.showInvisibly($E)
		,	p	= $.css($E[0], prop, true)
		,	v	= allowAuto && p=="auto" ? p : Math.round(parseFloat(p) || 0);
		$E.css( CSS ); // RESET
		return v;
	}

,	borderWidth: function (el, side) {
		if (el.jquery) el = el[0];
		var b = "border"+ side.substr(0,1).toUpperCase() + side.substr(1); // left => Left
		return $.css(el, b+"Style", true) === "none" ? 0 : Math.round(parseFloat($.css(el, b+"Width", true)) || 0);
	}

	/**
	 * Mouse-tracking utility - FUTURE REFERENCE
	 *
	 * init: if (!window.mouse) {
	 *			window.mouse = { x: 0, y: 0 };
	 *			$(document).mousemove( $.layout.trackMouse );
	 *		}
	 *
	 * @param {Object}		evt
	 *
,	trackMouse: function (evt) {
		window.mouse = { x: evt.clientX, y: evt.clientY };
	}
	*/

	/**
	 * SUBROUTINE for preventPrematureSlideClose option
	 *
	 * @param {Object}		evt
	 * @param {Object=}		el
	 */
,	isMouseOverElem: function (evt, el) {
		var
			$E	= $(el || this)
		,	d	= $E.offset()
		,	T	= d.top
		,	L	= d.left
		,	R	= L + $E.outerWidth()
		,	B	= T + $E.outerHeight()
		,	x	= evt.pageX	// evt.clientX ?
		,	y	= evt.pageY	// evt.clientY ?
		;
		// if X & Y are < 0, probably means is over an open SELECT
		return ($.layout.browser.msie && x < 0 && y < 0) || ((x >= L && x <= R) && (y >= T && y <= B));
	}

	/**
	 * Message/Logging Utility
	 *
	 * @example $.layout.msg("My message");				// log text
	 * @example $.layout.msg("My message", true);		// alert text
	 * @example $.layout.msg({ foo: "bar" }, "Title");	// log hash-data, with custom title
	 * @example $.layout.msg({ foo: "bar" }, true, "Title", { sort: false }); -OR-
	 * @example $.layout.msg({ foo: "bar" }, "Title", { sort: false, display: true }); // alert hash-data
	 *
	 * @param {(Object|string)}			info			String message OR Hash/Array
	 * @param {(Boolean|string|Object)=}	[popup=false]	True means alert-box - can be skipped
	 * @param {(Object|string)=}			[debugTitle=""]	Title for Hash data - can be skipped
	 * @param {Object=}					[debugOpts]		Extra options for debug output
	 */
,	msg: function (info, popup, debugTitle, debugOpts) {
		if ($.isPlainObject(info) && window.debugData) {
			if (typeof popup === "string") {
				debugOpts	= debugTitle;
				debugTitle	= popup;
			}
			else if (typeof debugTitle === "object") {
				debugOpts	= debugTitle;
				debugTitle	= null;
			}
			var t = debugTitle || "log( <object> )"
			,	o = $.extend({ sort: false, returnHTML: false, display: false }, debugOpts);
			if (popup === true || o.display)
				debugData( info, t, o );
			else if (window.console)
				console.log(debugData( info, t, o ));
		}
		else if (popup)
			alert(info);
		else if (window.console)
			console.log(info);
		else {
			var id	= "#layoutLogger"
			,	$l = $(id);
			if (!$l.length)
				$l = createLog();
			$l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+ info.replace(/\</g,"&lt;").replace(/\>/g,"&gt;") +'</li>');
		}

		function createLog () {
			var pos = $.support.fixedPosition ? 'fixed' : 'absolute'
			,	$e = $('<div id="layoutLogger" style="position: '+ pos +'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">'
				+	'<div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;">'
				+	'<span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div>'
				+	'<ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul>'
				+ '</div>'
				).appendTo("body");
			$e.css('left', $(window).width() - $e.outerWidth() - 5)
			if ($.ui.draggable) $e.draggable({ handle: ':first-child' });
			return $e;
		};
	}

};


/*
 *	$.layout.browser REPLACES removed $.browser, with extra data
 *	Parsing code here adapted from jQuery 1.8 $.browse
 */
(function(){
	var u = navigator.userAgent.toLowerCase()
	,	m = /(chrome)[ \/]([\w.]+)/.exec( u )
		||	/(webkit)[ \/]([\w.]+)/.exec( u )
		||	/(opera)(?:.*version|)[ \/]([\w.]+)/.exec( u )
		||	/(msie) ([\w.]+)/.exec( u )
		||	u.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( u )
		||	[]
	,	b = m[1] || ""
	,	v = m[2] || 0
	,	ie = b === "msie"
	,	cm = document.compatMode
	,	$s = $.support
	,	bs = $s.boxSizing !== undefined ? $s.boxSizing : $s.boxSizingReliable
	,	bm = !ie || !cm || cm === "CSS1Compat" || $s.boxModel || false
	,	lb = $.layout.browser = {
			version:	v
		,	safari:		b === "webkit"	// webkit (NOT chrome) = safari
		,	webkit:		b === "chrome"	// chrome = webkit
		,	msie:		ie
		,	isIE6:		ie && v == 6
			// ONLY IE reverts to old box-model - Note that compatMode was deprecated as of IE8
		,	boxModel:	bm
		,	boxSizing:	!!(typeof bs === "function" ? bs() : bs)
		};
	;
	if (b) lb[b] = true; // set CURRENT browser
	/*	OLD versions of jQuery only set $.support.boxModel after page is loaded
	 *	so if this is IE, use support.boxModel to test for quirks-mode (ONLY IE changes boxModel) */
	if (!bm && !cm) $(function(){ lb.boxModel = $s.boxModel; });
})();


// DEFAULT OPTIONS
$.layout.defaults = {
/*
 *	LAYOUT & LAYOUT-CONTAINER OPTIONS
 *	- none of these options are applicable to individual panes
 */
	name:						""			// Not required, but useful for buttons and used for the state-cookie
,	containerClass:				"ui-layout-container" // layout-container element
,	inset:						null		// custom container-inset values (override padding)
,	scrollToBookmarkOnLoad:		true		// after creating a layout, scroll to bookmark in URL (.../page.htm#myBookmark)
,	resizeWithWindow:			true		// bind thisLayout.resizeAll() to the window.resize event
,	resizeWithWindowDelay:		200			// delay calling resizeAll because makes window resizing very jerky
,	resizeWithWindowMaxDelay:	0			// 0 = none - force resize every XX ms while window is being resized
,	maskPanesEarly:				false		// true = create pane-masks on resizer.mouseDown instead of waiting for resizer.dragstart
,	onresizeall_start:			null		// CALLBACK when resizeAll() STARTS	- NOT pane-specific
,	onresizeall_end:			null		// CALLBACK when resizeAll() ENDS	- NOT pane-specific
,	onload_start:				null		// CALLBACK when Layout inits - after options initialized, but before elements
,	onload_end:					null		// CALLBACK when Layout inits - after EVERYTHING has been initialized
,	onunload_start:				null		// CALLBACK when Layout is destroyed OR onWindowUnload
,	onunload_end:				null		// CALLBACK when Layout is destroyed OR onWindowUnload
,	initPanes:					true		// false = DO NOT initialize the panes onLoad - will init later
,	showErrorMessages:			true		// enables fatal error messages to warn developers of common errors
,	showDebugMessages:			false		// display console-and-alert debug msgs - IF this Layout version _has_ debugging code!
//	Changing this zIndex value will cause other zIndex values to automatically change
,	zIndex:						null		// the PANE zIndex - resizers and masks will be +1
//	DO NOT CHANGE the zIndex values below unless you clearly understand their relationships
,	zIndexes: {								// set _default_ z-index values here...
		pane_normal:			0			// normal z-index for panes
	,	content_mask:			1			// applied to overlays used to mask content INSIDE panes during resizing
	,	resizer_normal:			2			// normal z-index for resizer-bars
	,	pane_sliding:			100			// applied to *BOTH* the pane and its resizer when a pane is 'slid open'
	,	pane_animate:			1000		// applied to the pane when being animated - not applied to the resizer
	,	resizer_drag:			10000		// applied to the CLONED resizer-bar when being 'dragged'
	}
,	errors: {
		pane:					"pane"		// description of "layout pane element" - used only in error messages
	,	selector:				"selector"	// description of "jQuery-selector" - used only in error messages
	,	addButtonError:			"Error Adding Button\nInvalid "
	,	containerMissing:		"UI Layout Initialization Error\nThe specified layout-container does not exist."
	,	centerPaneMissing:		"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element."
	,	noContainerHeight:		"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!"
	,	callbackError:			"UI Layout Callback Error\nThe EVENT callback is not a valid function."
	}
/*
 *	PANE DEFAULT SETTINGS
 *	- settings under the 'panes' key become the default settings for *all panes*
 *	- ALL pane-options can also be set specifically for each panes, which will override these 'default values'
 */
,	panes: { // default options for 'all panes' - will be overridden by 'per-pane settings'
		applyDemoStyles: 		false		// NOTE: renamed from applyDefaultStyles for clarity
	,	closable:				true		// pane can open & close
	,	resizable:				true		// when open, pane can be resized 
	,	slidable:				true		// when closed, pane can 'slide open' over other panes - closes on mouse-out
	,	initClosed:				false		// true = init pane as 'closed'
	,	initHidden: 			false 		// true = init pane as 'hidden' - no resizer-bar/spacing
	//	SELECTORS
	//,	paneSelector:			""			// MUST be pane-specific - jQuery selector for pane
	,	contentSelector:		".ui-layout-content" // INNER div/element to auto-size so only it scrolls, not the entire pane!
	,	contentIgnoreSelector:	".ui-layout-ignore"	// element(s) to 'ignore' when measuring 'content'
	,	findNestedContent:		false		// true = $P.find(contentSelector), false = $P.children(contentSelector)
	//	GENERIC ROOT-CLASSES - for auto-generated classNames
	,	paneClass:				"ui-layout-pane"	// Layout Pane
	,	resizerClass:			"ui-layout-resizer"	// Resizer Bar
	,	togglerClass:			"ui-layout-toggler"	// Toggler Button
	,	buttonClass:			"ui-layout-button"	// CUSTOM Buttons	- eg: '[ui-layout-button]-toggle/-open/-close/-pin'
	//	ELEMENT SIZE & SPACING
	//,	size:					100			// MUST be pane-specific -initial size of pane
	,	minSize:				0			// when manually resizing a pane
	,	maxSize:				0			// ditto, 0 = no limit
	,	spacing_open:			5			// space between pane and adjacent panes - when pane is 'open'
	,	spacing_closed:			5			// ditto - when pane is 'closed'
	,	togglerLength_open:		40			// Length = WIDTH of toggler button on north/south sides - HEIGHT on east/west sides
	,	togglerLength_closed: 	40			// 100% OR -1 means 'full height/width of resizer bar' - 0 means 'hidden'
	,	togglerAlign_open:		"center"	// top/left, bottom/right, center, OR...
	,	togglerAlign_closed:	"center"	// 1 => nn = offset from top/left, -1 => -nn == offset from bottom/right
	,	togglerContent_open:	'<div class="ui-icon"></div>'			// text or HTML to put INSIDE the toggler
	,	togglerContent_closed:	'<div class="ui-icon"></div>'			// ditto
	//	RESIZING OPTIONS
	,	resizerDblClickToggle:	true		// 
	,	autoResize:				true		// IF size is 'auto' or a percentage, then recalc 'pixel size' whenever the layout resizes
	,	autoReopen:				true		// IF a pane was auto-closed due to noRoom, reopen it when there is room? False = leave it closed
	,	resizerDragOpacity:		1			// option for ui.draggable
	//,	resizerCursor:			""			// MUST be pane-specific - cursor when over resizer-bar
	,	maskContents:			false		// true = add DIV-mask over-or-inside this pane so can 'drag' over IFRAMES
	,	maskObjects:			false		// true = add IFRAME-mask over-or-inside this pane to cover objects/applets - content-mask will overlay this mask
	,	maskZindex:				null		// will override zIndexes.content_mask if specified - not applicable to iframe-panes
	,	resizingGrid:			false		// grid size that the resizers will snap-to during resizing, eg: [20,20]
	,	livePaneResizing:		false		// true = LIVE Resizing as resizer is dragged
	,	liveContentResizing:	false		// true = re-measure header/footer heights as resizer is dragged
	,	liveResizingTolerance:	1			// how many px change before pane resizes, to control performance
	//	SLIDING OPTIONS
	,	sliderCursor:			"pointer"	// cursor when resizer-bar will trigger 'sliding'
	,	slideTrigger_open:		"click"		// click, dblclick, mouseenter
	,	slideTrigger_close:		"mouseleave"// click, mouseleave
	,	slideDelay_open:		300			// applies only for mouseenter event - 0 = instant open
	,	slideDelay_close:		300			// applies only for mouseleave event (300ms is the minimum!)
	,	hideTogglerOnSlide:		false		// when pane is slid-open, should the toggler show?
	,	preventQuickSlideClose:	$.layout.browser.webkit // Chrome triggers slideClosed as it is opening
	,	preventPrematureSlideClose: false	// handle incorrect mouseleave trigger, like when over a SELECT-list in IE
	//	PANE-SPECIFIC TIPS & MESSAGES
	,	tips: {
			Open:				"Open"		// eg: "Open Pane"
		,	Close:				"Close"
		,	Resize:				"Resize"
		,	Slide:				"Slide Open"
		,	Pin:				"Pin"
		,	Unpin:				"Un-Pin"
		,	noRoomToOpen:		"Not enough room to show this panel."	// alert if user tries to open a pane that cannot
		,	minSizeWarning:		"Panel has reached its minimum size"	// displays in browser statusbar
		,	maxSizeWarning:		"Panel has reached its maximum size"	// ditto
		}
	//	HOT-KEYS & MISC
	,	showOverflowOnHover:	false		// will bind allowOverflow() utility to pane.onMouseOver
	,	enableCursorHotkey:		true		// enabled 'cursor' hotkeys
	//,	customHotkey:			""			// MUST be pane-specific - EITHER a charCode OR a character
	,	customHotkeyModifier:	"SHIFT"		// either 'SHIFT', 'CTRL' or 'CTRL+SHIFT' - NOT 'ALT'
	//	PANE ANIMATION
	//	NOTE: fxSss_open, fxSss_close & fxSss_size options (eg: fxName_open) are auto-generated if not passed
	,	fxName:					"slide" 	// ('none' or blank), slide, drop, scale -- only relevant to 'open' & 'close', NOT 'size'
	,	fxSpeed:				null		// slow, normal, fast, 200, nnn - if passed, will OVERRIDE fxSettings.duration
	,	fxSettings:				{}			// can be passed, eg: { easing: "easeOutBounce", duration: 1500 }
	,	fxOpacityFix:			true		// tries to fix opacity in IE to restore anti-aliasing after animation
	,	animatePaneSizing:		false		// true = animate resizing after dragging resizer-bar OR sizePane() is called
	/*  NOTE: Action-specific FX options are auto-generated from the options above if not specifically set:
		fxName_open:			"slide"		// 'Open' pane animation
		fnName_close:			"slide"		// 'Close' pane animation
		fxName_size:			"slide"		// 'Size' pane animation - when animatePaneSizing = true
		fxSpeed_open:			null
		fxSpeed_close:			null
		fxSpeed_size:			null
		fxSettings_open:		{}
		fxSettings_close:		{}
		fxSettings_size:		{}
	*/
	//	CHILD/NESTED LAYOUTS
	,	children:				null		// Layout-options for nested/child layout - even {} is valid as options
	,	containerSelector:		''			// if child is NOT 'directly nested', a selector to find it/them (can have more than one child layout!)
	,	initChildren:			true		// true = child layout will be created as soon as _this_ layout completes initialization
	,	destroyChildren:		true		// true = destroy child-layout if this pane is destroyed
	,	resizeChildren:			true		// true = trigger child-layout.resizeAll() when this pane is resized
	//	EVENT TRIGGERING
	,	triggerEventsOnLoad:	false		// true = trigger onopen OR onclose callbacks when layout initializes
	,	triggerEventsDuringLiveResize: true	// true = trigger onresize callback REPEATEDLY if livePaneResizing==true
	//	PANE CALLBACKS
	,	onshow_start:			null		// CALLBACK when pane STARTS to Show	- BEFORE onopen/onhide_start
	,	onshow_end:				null		// CALLBACK when pane ENDS being Shown	- AFTER  onopen/onhide_end
	,	onhide_start:			null		// CALLBACK when pane STARTS to Close	- BEFORE onclose_start
	,	onhide_end:				null		// CALLBACK when pane ENDS being Closed	- AFTER  onclose_end
	,	onopen_start:			null		// CALLBACK when pane STARTS to Open
	,	onopen_end:				null		// CALLBACK when pane ENDS being Opened
	,	onclose_start:			null		// CALLBACK when pane STARTS to Close
	,	onclose_end:			null		// CALLBACK when pane ENDS being Closed
	,	onresize_start:			null		// CALLBACK when pane STARTS being Resized ***FOR ANY REASON***
	,	onresize_end:			null		// CALLBACK when pane ENDS being Resized ***FOR ANY REASON***
	,	onsizecontent_start:	null		// CALLBACK when sizing of content-element STARTS
	,	onsizecontent_end:		null		// CALLBACK when sizing of content-element ENDS
	,	onswap_start:			null		// CALLBACK when pane STARTS to Swap
	,	onswap_end:				null		// CALLBACK when pane ENDS being Swapped
	,	ondrag_start:			null		// CALLBACK when pane STARTS being ***MANUALLY*** Resized
	,	ondrag_end:				null		// CALLBACK when pane ENDS being ***MANUALLY*** Resized
	}
/*
 *	PANE-SPECIFIC SETTINGS
 *	- options listed below MUST be specified per-pane - they CANNOT be set under 'panes'
 *	- all options under the 'panes' key can also be set specifically for any pane
 *	- most options under the 'panes' key apply only to 'border-panes' - NOT the the center-pane
 */
,	north: {
		paneSelector:			".ui-layout-north"
	,	size:					"auto"		// eg: "auto", "30%", .30, 200
	,	resizerCursor:			"n-resize"	// custom = url(myCursor.cur)
	,	customHotkey:			""			// EITHER a charCode (43) OR a character ("o")
	}
,	south: {
		paneSelector:			".ui-layout-south"
	,	size:					"auto"
	,	resizerCursor:			"s-resize"
	,	customHotkey:			""
	}
,	east: {
		paneSelector:			".ui-layout-east"
	,	size:					"40%"
	,	resizerCursor:			"e-resize"
	,	customHotkey:			""
	}
,	west: {
		paneSelector:			".ui-layout-west"
	,	size:					"auto"
	,	resizerCursor:			"w-resize"
	,	customHotkey:			""
	}
,	center: {
		paneSelector:			".ui-layout-center"
	,	minWidth:				0
	,	minHeight:				0
	}
};

$.layout.optionsMap = {
	// layout/global options - NOT pane-options
	layout: ("name,instanceKey,stateManagement,effects,inset,zIndexes,errors,"
	+	"zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,"
	+	"outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,"
	+	"onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end").split(",")
//	borderPanes: [ ALL options that are NOT specified as 'layout' ]
	// default.panes options that apply to the center-pane (most options apply _only_ to border-panes)
,	center: ("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,"
	+	"showOverflowOnHover,maskContents,maskObjects,liveContentResizing,"
	+	"containerSelector,children,initChildren,resizeChildren,destroyChildren,"
	+	"onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(",")
	// options that MUST be specifically set 'per-pane' - CANNOT set in the panes (defaults) key
,	noDefault: ("paneSelector,resizerCursor,customHotkey").split(",")
};

/**
 * Processes options passed in converts flat-format data into subkey (JSON) format
 * In flat-format, subkeys are _currently_ separated with 2 underscores, like north__optName
 * Plugins may also call this method so they can transform their own data
 *
 * @param  {!Object}	hash			Data/options passed by user - may be a single level or nested levels
 * @param  {boolean=}	[addKeys=false]	Should the primary layout.options keys be added if they do not exist?
 * @return {Object}						Returns hash of minWidth & minHeight
 */
$.layout.transformData = function (hash, addKeys) {
	var	json = addKeys ? { panes: {}, center: {} } : {} // init return object
	,	branch, optKey, keys, key, val, i, c;

	if (typeof hash !== "object") return json; // no options passed

	// convert all 'flat-keys' to 'sub-key' format
	for (optKey in hash) {
		branch	= json;
		val		= hash[ optKey ];
		keys	= optKey.split("__"); // eg: west__size or north__fxSettings__duration
		c		= keys.length - 1;
		// convert underscore-delimited to subkeys
		for (i=0; i <= c; i++) {
			key = keys[i];
			if (i === c) {	// last key = value
				if ($.isPlainObject( val ))
					branch[key] = $.layout.transformData( val ); // RECURSE
				else
					branch[key] = val;
			}
			else {
				if (!branch[key])
					branch[key] = {}; // create the subkey
				// recurse to sub-key for next loop - if not done
				branch = branch[key];
			}
		}
	}
	return json;
};

// INTERNAL CONFIG DATA - DO NOT CHANGE THIS!
$.layout.backwardCompatibility = {
	// data used by renameOldOptions()
	map: {
	//	OLD Option Name:			NEW Option Name
		applyDefaultStyles:			"applyDemoStyles"
	//	CHILD/NESTED LAYOUTS
	,	childOptions:				"children"
	,	initChildLayout:			"initChildren"
	,	destroyChildLayout:			"destroyChildren"
	,	resizeChildLayout:			"resizeChildren"
	,	resizeNestedLayout:			"resizeChildren"
	//	MISC Options
	,	resizeWhileDragging:		"livePaneResizing"
	,	resizeContentWhileDragging:	"liveContentResizing"
	,	triggerEventsWhileDragging:	"triggerEventsDuringLiveResize"
	,	maskIframesOnResize:		"maskContents"
	//	STATE MANAGEMENT
	,	useStateCookie:				"stateManagement.enabled"
	,	"cookie.autoLoad":			"stateManagement.autoLoad"
	,	"cookie.autoSave":			"stateManagement.autoSave"
	,	"cookie.keys":				"stateManagement.stateKeys"
	,	"cookie.name":				"stateManagement.cookie.name"
	,	"cookie.domain":			"stateManagement.cookie.domain"
	,	"cookie.path":				"stateManagement.cookie.path"
	,	"cookie.expires":			"stateManagement.cookie.expires"
	,	"cookie.secure":			"stateManagement.cookie.secure"
	//	OLD Language options
	,	noRoomToOpenTip:			"tips.noRoomToOpen"
	,	togglerTip_open:			"tips.Close"	// open   = Close
	,	togglerTip_closed:			"tips.Open"		// closed = Open
	,	resizerTip:					"tips.Resize"
	,	sliderTip:					"tips.Slide"
	}

/**
* @param {Object}	opts
*/
,	renameOptions: function (opts) {
		var map = $.layout.backwardCompatibility.map
		,	oldData, newData, value
		;
		for (var itemPath in map) {
			oldData	= getBranch( itemPath );
			value	= oldData.branch[ oldData.key ];
			if (value !== undefined) {
				newData = getBranch( map[itemPath], true );
				newData.branch[ newData.key ] = value;
				delete oldData.branch[ oldData.key ];
			}
		}

		/**
		 * @param {string}	path
		 * @param {boolean=}	[create=false]	Create path if does not exist
		 */
		function getBranch (path, create) {
			var a = path.split(".") // split keys into array
			,	c = a.length - 1
			,	D = { branch: opts, key: a[c] } // init branch at top & set key (last item)
			,	i = 0, k, undef;
			for (; i<c; i++) { // skip the last key (data)
				k = a[i];
				if (D.branch[ k ] == undefined) { // child-key does not exist
					if (create) {
						D.branch = D.branch[ k ] = {}; // create child-branch
					}
					else // can't go any farther
						D.branch = {}; // branch is undefined
				}
				else
					D.branch = D.branch[ k ]; // get child-branch
			}
			return D;
		};
	}

/**
* @param {Object}	opts
*/
,	renameAllOptions: function (opts) {
		var ren = $.layout.backwardCompatibility.renameOptions;
		// rename root (layout) options
		ren( opts );
		// rename 'defaults' to 'panes'
		if (opts.defaults) {
			if (typeof opts.panes !== "object")
				opts.panes = {};
			$.extend(true, opts.panes, opts.defaults);
			delete opts.defaults;
		}
		// rename options in the the options.panes key
		if (opts.panes) ren( opts.panes );
		// rename options inside *each pane key*, eg: options.west
		$.each($.layout.config.allPanes, function (i, pane) {
			if (opts[pane]) ren( opts[pane] );
		});	
		return opts;
	}
};




/*	============================================================
 *	BEGIN WIDGET: $( selector ).layout( {options} );
 *	============================================================
 */
$.fn.layout = function (opts) {
	var

	// local aliases to global data
	browser	= $.layout.browser
,	_c		= $.layout.config

	// local aliases to utlity methods
,	cssW	= $.layout.cssWidth
,	cssH	= $.layout.cssHeight
,	elDims	= $.layout.getElementDimensions
,	styles	= $.layout.getElementStyles
,	evtObj	= $.layout.getEventObject
,	evtPane	= $.layout.parsePaneName

/**
 * options - populated by initOptions()
 */
,	options = $.extend(true, {}, $.layout.defaults)
,	effects	= options.effects = $.extend(true, {}, $.layout.effects)

/**
 * layout-state object
 */
,	state = {
		// generate unique ID to use for event.namespace so can unbind only events added by 'this layout'
		id:				"layout"+ $.now()	// code uses alias: sID
	,	initialized:	false
	,	paneResizing:	false
	,	panesSliding:	{}
	,	container:	{ 	// list all keys referenced in code to avoid compiler error msgs
			innerWidth:		0
		,	innerHeight:	0
		,	outerWidth:		0
		,	outerHeight:	0
		,	layoutWidth:	0
		,	layoutHeight:	0
		}
	,	north:		{ childIdx: 0 }
	,	south:		{ childIdx: 0 }
	,	east:		{ childIdx: 0 }
	,	west:		{ childIdx: 0 }
	,	center:		{ childIdx: 0 }
	}

/**
 * parent/child-layout pointers
 */
//,	hasParentLayout	= false	- exists ONLY inside Instance so can be set externally
,	children = {
		north:		null
	,	south:		null
	,	east:		null
	,	west:		null
	,	center:		null
	}

/*
 * ###########################
 *  INTERNAL HELPER FUNCTIONS
 * ###########################
 */

	/**
	 * Manages all internal timers
	 */
,	timer = {
		data:	{}
	,	set:	function (s, fn, ms) { timer.clear(s); timer.data[s] = setTimeout(fn, ms); }
	,	clear:	function (s) { var t=timer.data; if (t[s]) {clearTimeout(t[s]); delete t[s];} }
	}

	/**
	 * Alert or console.log a message - IF option is enabled.
	 *
	 * @param {(string|!Object)}	msg				Message (or debug-data) to display
	 * @param {boolean=}			[popup=false]	True by default, means 'alert', false means use console.log
	 * @param {boolean=}			[debug=false]	True means is a widget debugging message
	 */
,	_log = function (msg, popup, debug) {
		var o = options;
		if ((o.showErrorMessages && !debug) || (debug && o.showDebugMessages))
			$.layout.msg( o.name +' / '+ msg, (popup !== false) );
		return false;
	}

	/**
	 * Executes a Callback function after a trigger event, like resize, open or close
	 *
	 * @param {string}				evtName					Name of the layout callback, eg "onresize_start"
	 * @param {(string|boolean)=}	[pane=""]				This is passed only so we can pass the 'pane object' to the callback
	 * @param {(string|boolean)=}	[skipBoundEvents=false]	True = do not run events bound to the elements - only the callbacks set in options
	 */
,	_runCallbacks = function (evtName, pane, skipBoundEvents) {
		var	hasPane	= pane && isStr(pane)
		,	s		= hasPane ? state[pane] : state
		,	o		= hasPane ? options[pane] : options
		,	lName	= options.name
			// names like onopen and onopen_end separate are interchangeable in options...
		,	lng		= evtName + (evtName.match(/_/) ? "" : "_end")
		,	shrt	= lng.match(/_end$/) ? lng.substr(0, lng.length - 4) : ""
		,	fn		= o[lng] || o[shrt]
		,	retVal	= "NC" // NC = No Callback
		,	args	= []
		,	$P		= hasPane ? $Ps[pane] : 0
		;
		if (hasPane && !$P) // a pane is specified, but does not exist!
			return retVal;
		if ( !hasPane && $.type(pane) === "boolean" ) {
			skipBoundEvents = pane; // allow pane param to be skipped for Layout callback
			pane = "";
		}

		// first trigger the callback set in the options
		if (fn) {
			try {
				// convert function name (string) to function object
				if (isStr( fn )) {
					if (fn.match(/,/)) {
						// function name cannot contain a comma, 
						// so must be a function name AND a parameter to pass
						args = fn.split(",")
						,	fn = eval(args[0]);
					}
					else // just the name of an external function?
						fn = eval(fn);
				}
				// execute the callback, if exists
				if ($.isFunction( fn )) {
					if (args.length)
						retVal = g(fn)(args[1]); // pass the argument parsed from 'list'
					else if ( hasPane )
						// pass data: pane-name, pane-element, pane-state, pane-options, and layout-name
						retVal = g(fn)( pane, $Ps[pane], s, o, lName );
					else // must be a layout/container callback - pass suitable info
						retVal = g(fn)( Instance, s, o, lName );
				}
			}
			catch (ex) {
				_log( options.errors.callbackError.replace(/EVENT/, $.trim((pane || "") +" "+ lng)), false );
				if ($.type(ex) === "string" && string.length)
					_log("Exception:  "+ ex, false );
			}
		}

		// trigger additional events bound directly to the pane
		if (!skipBoundEvents && retVal !== false) {
			if ( hasPane ) { // PANE events can be bound to each pane-elements
				o	= options[pane];
				s	= state[pane];
				$P.triggerHandler("layoutpane"+ lng, [ pane, $P, s, o, lName ]);
				if (shrt)
					$P.triggerHandler("layoutpane"+ shrt, [ pane, $P, s, o, lName ]);
			}
			else { // LAYOUT events can be bound to the container-element
				$N.triggerHandler("layout"+ lng, [ Instance, s, o, lName ]);
				if (shrt)
					$N.triggerHandler("layout"+ shrt, [ Instance, s, o, lName ]);
			}
		}

		// ALWAYS resizeChildren after an onresize_end event - even during initialization
		// IGNORE onsizecontent_end event because causes child-layouts to resize TWICE
		if (hasPane && evtName === "onresize_end") // BAD: || evtName === "onsizecontent_end"
			resizeChildren(pane+"", true); // compiler hack -force string

		return retVal;

		function g (f) { return f; }; // compiler hack
	}


	/**
	 * cure iframe display issues in IE & other browsers
	 */
,	_fixIframe = function (pane) {
		if (browser.mozilla) return; // skip FireFox - it auto-refreshes iframes onShow
		var $P = $Ps[pane];
		// if the 'pane' is an iframe, do it
		if (state[pane].tagName === "IFRAME")
			$P.css(_c.hidden).css(_c.visible); 
		else // ditto for any iframes INSIDE the pane
			$P.find('IFRAME').css(_c.hidden).css(_c.visible);
	}

	/**
	 * @param  {string}		pane		Can accept ONLY a 'pane' (east, west, etc)
	 * @param  {number=}		outerSize	(optional) Can pass a width, allowing calculations BEFORE element is resized
	 * @return {number}		Returns the innerHeight/Width of el by subtracting padding and borders
	 */
,	cssSize = function (pane, outerSize) {
		var fn = _c[pane].dir=="horz" ? cssH : cssW;
		return fn($Ps[pane], outerSize);
	}

	/**
	 * @param  {string}		pane		Can accept ONLY a 'pane' (east, west, etc)
	 * @return {Object}		Returns hash of minWidth & minHeight
	 */
,	cssMinDims = function (pane) {
		// minWidth/Height means CSS width/height = 1px
		var	$P	= $Ps[pane]
		,	dir	= _c[pane].dir
		,	d	= {
				minWidth:	1001 - cssW($P, 1000)
			,	minHeight:	1001 - cssH($P, 1000)
			}
		;
		if (dir === "horz") d.minSize = d.minHeight;
		if (dir === "vert") d.minSize = d.minWidth;
		return d;
	}

	// TODO: see if these methods can be made more useful...
	// TODO: *maybe* return cssW/H from these so caller can use this info

	/**
	 * @param {(string|!Object)}		el
	 * @param {number=}				outerWidth
	 * @param {boolean=}				[autoHide=false]
	 */
,	setOuterWidth = function (el, outerWidth, autoHide) {
		var $E = el, w;
		if (isStr(el)) $E = $Ps[el]; // west
		else if (!el.jquery) $E = $(el);
		w = cssW($E, outerWidth);
		$E.css({ width: w });
		if (w > 0) {
			if (autoHide && $E.data('autoHidden') && $E.innerHeight() > 0) {
				$E.show().data('autoHidden', false);
				if (!browser.mozilla) // FireFox refreshes iframes - IE does not
					// make hidden, then visible to 'refresh' display after animation
					$E.css(_c.hidden).css(_c.visible);
			}
		}
		else if (autoHide && !$E.data('autoHidden'))
			$E.hide().data('autoHidden', true);
	}

	/**
	 * @param {(string|!Object)}		el
	 * @param {number=}				outerHeight
	 * @param {boolean=}				[autoHide=false]
	 */
,	setOuterHeight = function (el, outerHeight, autoHide) {
		var $E = el, h;
		if (isStr(el)) $E = $Ps[el]; // west
		else if (!el.jquery) $E = $(el);
		h = cssH($E, outerHeight);
		$E.css({ height: h, visibility: "visible" }); // may have been 'hidden' by sizeContent
		if (h > 0 && $E.innerWidth() > 0) {
			if (autoHide && $E.data('autoHidden')) {
				$E.show().data('autoHidden', false);
				if (!browser.mozilla) // FireFox refreshes iframes - IE does not
					$E.css(_c.hidden).css(_c.visible);
			}
		}
		else if (autoHide && !$E.data('autoHidden'))
			$E.hide().data('autoHidden', true);
	}


	/**
	 * Converts any 'size' params to a pixel/integer size, if not already
	 * If 'auto' or a decimal/percentage is passed as 'size', a pixel-size is calculated
	 *
	/**
	 * @param  {string}				pane
	 * @param  {(string|number)=}	size
	 * @param  {string=}				[dir]
	 * @return {number}
	 */
,	_parseSize = function (pane, size, dir) {
		if (!dir) dir = _c[pane].dir;

		if (isStr(size) && size.match(/%/))
			size = (size === '100%') ? -1 : parseInt(size, 10) / 100; // convert % to decimal

		if (size === 0)
			return 0;
		else if (size >= 1)
			return parseInt(size, 10);

		var o = options, avail = 0;
		if (dir=="horz") // north or south or center.minHeight
			avail = sC.innerHeight - ($Ps.north ? o.north.spacing_open : 0) - ($Ps.south ? o.south.spacing_open : 0);
		else if (dir=="vert") // east or west or center.minWidth
			avail = sC.innerWidth - ($Ps.west ? o.west.spacing_open : 0) - ($Ps.east ? o.east.spacing_open : 0);

		if (size === -1) // -1 == 100%
			return avail;
		else if (size > 0) // percentage, eg: .25
			return round(avail * size);
		else if (pane=="center")
			return 0;
		else { // size < 0 || size=='auto' || size==Missing || size==Invalid
			// auto-size the pane
			var	dim	= (dir === "horz" ? "height" : "width")
			,	$P	= $Ps[pane]
			,	$C	= dim === 'height' ? $Cs[pane] : false
			,	vis	= $.layout.showInvisibly($P) // show pane invisibly if hidden
			,	szP	= $P.css(dim) // SAVE current pane size
			,	szC	= $C ? $C.css(dim) : 0 // SAVE current content size
			;
			$P.css(dim, "auto");
			if ($C) $C.css(dim, "auto");
			size = (dim === "height") ? $P.outerHeight() : $P.outerWidth(); // MEASURE
			$P.css(dim, szP).css(vis); // RESET size & visibility
			if ($C) $C.css(dim, szC);
			return size;
		}
	}

	/**
	 * Calculates current 'size' (outer-width or outer-height) of a border-pane - optionally with 'pane-spacing' added
	 *
	 * @param  {(string|!Object)}	pane
	 * @param  {boolean=}			[inclSpace=false]
	 * @return {number}				Returns EITHER Width for east/west panes OR Height for north/south panes
	 */
,	getPaneSize = function (pane, inclSpace) {
		var 
			$P	= $Ps[pane]
		,	o	= options[pane]
		,	s	= state[pane]
		,	oSp	= (inclSpace ? o.spacing_open : 0)
		,	cSp	= (inclSpace ? o.spacing_closed : 0)
		;
		if (!$P || s.isHidden)
			return 0;
		else if (s.isClosed || (s.isSliding && inclSpace))
			return cSp;
		else if (_c[pane].dir === "horz")
			return $P.outerHeight() + oSp;
		else // dir === "vert"
			return $P.outerWidth() + oSp;
	}

	/**
	 * Calculate min/max pane dimensions and limits for resizing
	 *
	 * @param  {string}		pane
	 * @param  {boolean=}	[slide=false]
	 */
,	setSizeLimits = function (pane, slide) {
		if (!isInitialized()) return;
		var 
			o				= options[pane]
		,	s				= state[pane]
		,	c				= _c[pane]
		,	dir				= c.dir
		,	type			= c.sizeType.toLowerCase()
		,	isSliding		= (slide != undefined ? slide : s.isSliding) // only open() passes 'slide' param
		,	$P				= $Ps[pane]
		,	paneSpacing		= o.spacing_open
		//	measure the pane on the *opposite side* from this pane
		,	altPane			= _c.oppositeEdge[pane]
		,	altS			= state[altPane]
		,	$altP			= $Ps[altPane]
		,	altPaneSize		= (!$altP || altS.isVisible===false || altS.isSliding ? 0 : (dir=="horz" ? $altP.outerHeight() : $altP.outerWidth()))
		,	altPaneSpacing	= ((!$altP || altS.isHidden ? 0 : options[altPane][ altS.isClosed !== false ? "spacing_closed" : "spacing_open" ]) || 0)
		//	limitSize prevents this pane from 'overlapping' opposite pane
		,	containerSize	= (dir=="horz" ? sC.innerHeight : sC.innerWidth)
		,	minCenterDims	= cssMinDims("center")
		,	minCenterSize	= dir=="horz" ? max(options.center.minHeight, minCenterDims.minHeight) : max(options.center.minWidth, minCenterDims.minWidth)
		//	if pane is 'sliding', then ignore center and alt-pane sizes - because 'overlays' them
		,	limitSize		= (containerSize - paneSpacing - (isSliding ? 0 : (_parseSize("center", minCenterSize, dir) + altPaneSize + altPaneSpacing)))
		,	minSize			= s.minSize = max( _parseSize(pane, o.minSize), cssMinDims(pane).minSize )
		,	maxSize			= s.maxSize = min( (o.maxSize ? _parseSize(pane, o.maxSize) : 100000), limitSize )
		,	r				= s.resizerPosition = {} // used to set resizing limits
		,	top				= sC.inset.top
		,	left			= sC.inset.left
		,	W				= sC.innerWidth
		,	H				= sC.innerHeight
		,	rW				= o.spacing_open // subtract resizer-width to get top/left position for south/east
		;
		switch (pane) {
			case "north":	r.min = top + minSize;
							r.max = top + maxSize;
							break;
			case "west":	r.min = left + minSize;
							r.max = left + maxSize;
							break;
			case "south":	r.min = top + H - maxSize - rW;
							r.max = top + H - minSize - rW;
							break;
			case "east":	r.min = left + W - maxSize - rW;
							r.max = left + W - minSize - rW;
							break;
		};
	}

	/**
	 * Returns data for setting the size/position of center pane. Also used to set Height for east/west panes
	 *
	 * @return JSON  Returns a hash of all dimensions: top, bottom, left, right, (outer) width and (outer) height
	 */
,	calcNewCenterPaneDims = function () {
		var d = {
			top:	getPaneSize("north", true) // true = include 'spacing' value for pane
		,	bottom:	getPaneSize("south", true)
		,	left:	getPaneSize("west", true)
		,	right:	getPaneSize("east", true)
		,	width:	0
		,	height:	0
		};

		// NOTE: sC = state.container
		// calc center-pane outer dimensions
		d.width		= sC.innerWidth - d.left - d.right;  // outerWidth
		d.height	= sC.innerHeight - d.bottom - d.top; // outerHeight
		// add the 'container border/padding' to get final positions relative to the container
		d.top		+= sC.inset.top;
		d.bottom	+= sC.inset.bottom;
		d.left		+= sC.inset.left;
		d.right		+= sC.inset.right;

		return d;
	}


	/**
	 * @param {!Object}		el
	 * @param {boolean=}		[allStates=false]
	 */
,	getHoverClasses = function (el, allStates) {
		var
			$El		= $(el)
		,	type	= $El.data("layoutRole")
		,	pane	= $El.data("layoutEdge")
		,	o		= options[pane]
		,	root	= o[type +"Class"]
		,	_pane	= "-"+ pane // eg: "-west"
		,	_open	= "-open"
		,	_closed	= "-closed"
		,	_slide	= "-sliding"
		,	_hover	= "-hover " // NOTE the trailing space
		,	_state	= $El.hasClass(root+_closed) ? _closed : _open
		,	_alt	= _state === _closed ? _open : _closed
		,	classes = (root+_hover) + (root+_pane+_hover) + (root+_state+_hover) + (root+_pane+_state+_hover)
		;
		if (allStates) // when 'removing' classes, also remove alternate-state classes
			classes += (root+_alt+_hover) + (root+_pane+_alt+_hover);

		if (type=="resizer" && $El.hasClass(root+_slide))
			classes += (root+_slide+_hover) + (root+_pane+_slide+_hover);

		return $.trim(classes);
	}
,	addHover	= function (evt, el) {
		var $E = $(el || this);
		if (evt && $E.data("layoutRole") === "toggler")
			evt.stopPropagation(); // prevent triggering 'slide' on Resizer-bar
		$E.addClass( getHoverClasses($E) );
	}
,	removeHover	= function (evt, el) {
		var $E = $(el || this);
		$E.removeClass( getHoverClasses($E, true) );
	}

,	onResizerEnter	= function (evt) { // ALSO called by toggler.mouseenter
		var pane	= $(this).data("layoutEdge")
		,	s		= state[pane]
		,	$d		= $(document)
		;
		// ignore closed-panes and mouse moving back & forth over resizer!
		// also ignore if ANY pane is currently resizing
		if ( s.isResizing || state.paneResizing ) return;

		if (options.maskPanesEarly)
			showMasks( pane, { resizing: true });
	}
,	onResizerLeave	= function (evt, el) {
		var	e		= el || this // el is only passed when called by the timer
		,	pane	= $(e).data("layoutEdge")
		,	name	= pane +"ResizerLeave"
		,	$d		= $(document)
		;
		timer.clear(pane+"_openSlider"); // cancel slideOpen timer, if set
		timer.clear(name); // cancel enableSelection timer - may re/set below
		// this method calls itself on a timer because it needs to allow
		// enough time for dragging to kick-in and set the isResizing flag
		// dragging has a 100ms delay set, so this delay must be >100
		if (!el) // 1st call - mouseleave event
			timer.set(name, function(){ onResizerLeave(evt, e); }, 200);
		// if user is resizing, dragStop will reset everything, so skip it here
		else if (options.maskPanesEarly && !state.paneResizing) // 2nd call - by timer
			hideMasks();
	}

/*
 * ###########################
 *   INITIALIZATION METHODS
 * ###########################
 */

	/**
	 * Initialize the layout - called automatically whenever an instance of layout is created
	 *
	 * @see  none - triggered onInit
	 * @return  mixed	true = fully initialized | false = panes not initialized (yet) | 'cancel' = abort
	 */
,	_create = function () {
		// initialize config/options
		initOptions();
		var o = options
		,	s = state;

		// TEMP state so isInitialized returns true during init process
		s.creatingLayout = true;

		// init plugins for this layout, if there are any (eg: stateManagement)
		runPluginCallbacks( Instance, $.layout.onCreate );

		// options & state have been initialized, so now run beforeLoad callback
		// onload will CANCEL layout creation if it returns false
		if (false === _runCallbacks("onload_start"))
			return 'cancel';

		// initialize the container element
		_initContainer();

		// bind hotkey function - keyDown - if required
		initHotkeys();

		// bind window.onunload
		$(window).bind("unload."+ sID, unload);

		// init plugins for this layout, if there are any (eg: customButtons)
		runPluginCallbacks( Instance, $.layout.onLoad );

		// if layout elements are hidden, then layout WILL NOT complete initialization!
		// initLayoutElements will set initialized=true and run the onload callback IF successful
		if (o.initPanes) _initLayoutElements();

		delete s.creatingLayout;

		return state.initialized;
	}

	/**
	 * Initialize the layout IF not already
	 *
	 * @see  All methods in Instance run this test
	 * @return  boolean	true = layoutElements have been initialized | false = panes are not initialized (yet)
	 */
,	isInitialized = function () {
		if (state.initialized || state.creatingLayout) return true;	// already initialized
		else return _initLayoutElements();	// try to init panes NOW
	}

	/**
	 * Initialize the layout - called automatically whenever an instance of layout is created
	 *
	 * @see  _create() & isInitialized
	 * @param {boolean=}		[retry=false]	// indicates this is a 2nd try
	 * @return  An object pointer to the instance created
	 */
,	_initLayoutElements = function (retry) {
		// initialize config/options
		var o = options;
		// CANNOT init panes inside a hidden container!
		if (!$N.is(":visible")) {
			// handle Chrome bug where popup window 'has no height'
			// if layout is BODY element, try again in 50ms
			// SEE: http://layout.jquery-dev.com/samples/test_popup_window.html
			if ( !retry && browser.webkit && $N[0].tagName === "BODY" )
				setTimeout(function(){ _initLayoutElements(true); }, 50);
			return false;
		}

		// a center pane is required, so make sure it exists
		if (!getPane("center").length) {
			return _log( o.errors.centerPaneMissing );
		}

		// TEMP state so isInitialized returns true during init process
		state.creatingLayout = true;

		// update Container dims
		$.extend(sC, elDims( $N, o.inset )); // passing inset means DO NOT include insetX values

		// initialize all layout elements
		initPanes();	// size & position panes - calls initHandles() - which calls initResizable()

		if (o.scrollToBookmarkOnLoad) {
			var l = self.location;
			if (l.hash) l.replace( l.hash ); // scrollTo Bookmark
		}

		// check to see if this layout 'nested' inside a pane
		if (Instance.hasParentLayout)
			o.resizeWithWindow = false;
		// bind resizeAll() for 'this layout instance' to window.resize event
		else if (o.resizeWithWindow)
			$(window).bind("resize."+ sID, windowResize);

		delete state.creatingLayout;
		state.initialized = true;

		// init plugins for this layout, if there are any
		runPluginCallbacks( Instance, $.layout.onReady );

		// now run the onload callback, if exists
		_runCallbacks("onload_end");

		return true; // elements initialized successfully
	}

	/**
	 * Initialize nested layouts for a specific pane - can optionally pass layout-options
	 *
	 * @param {(string|Object)}	evt_or_pane	The pane being opened, ie: north, south, east, or west
	 * @param {Object=}			[opts]		Layout-options - if passed, will OVERRRIDE options[pane].children
	 * @return  An object pointer to the layout instance created - or null
	 */
,	createChildren = function (evt_or_pane, opts) {
		var	pane = evtPane.call(this, evt_or_pane)
		,	$P	= $Ps[pane]
		;
		if (!$P) return;
		var	$C	= $Cs[pane]
		,	s	= state[pane]
		,	o	= options[pane]
		,	sm	= options.stateManagement || {}
		,	cos = opts ? (o.children = opts) : o.children
		;
		if ( $.isPlainObject( cos ) )
			cos = [ cos ]; // convert a hash to a 1-elem array
		else if (!cos || !$.isArray( cos ))
			return;

		$.each( cos, function (idx, co) {
			if ( !$.isPlainObject( co ) ) return;

			// determine which element is supposed to be the 'child container'
			// if pane has a 'containerSelector' OR a 'content-div', use those instead of the pane
			var $containers = co.containerSelector ? $P.find( co.containerSelector ) : ($C || $P);

			$containers.each(function(){
				var $cont	= $(this)
				,	child	= $cont.data("layout") //	see if a child-layout ALREADY exists on this element
				;
				// if no layout exists, but children are set, try to create the layout now
				if (!child) {
					// TODO: see about moving this to the stateManagement plugin, as a method
					// set a unique child-instance key for this layout, if not already set
					setInstanceKey({ container: $cont, options: co }, s );
					// If THIS layout has a hash in stateManagement.autoLoad,
					// then see if it also contains state-data for this child-layout
					// If so, copy the stateData to child.options.stateManagement.autoLoad
					if ( sm.includeChildren && state.stateData[pane] ) {
						//	THIS layout's state was cached when its state was loaded
						var	paneChildren = state.stateData[pane].children || {}
						,	childState	= paneChildren[ co.instanceKey ]
						,	co_sm		= co.stateManagement || (co.stateManagement = { autoLoad: true })
						;
						// COPY the stateData into the autoLoad key
						if ( co_sm.autoLoad === true && childState ) {
							co_sm.autoSave			= false; // disable autoSave because saving handled by parent-layout
							co_sm.includeChildren	= true;  // cascade option - FOR NOW
							co_sm.autoLoad = $.extend(true, {}, childState); // COPY the state-hash
						}
					}

					// create the layout
					child = $cont.layout( co );

					// if successful, update data
					if (child) {
						// add the child and update all layout-pointers
						// MAY have already been done by child-layout calling parent.refreshChildren()
						refreshChildren( pane, child );
					}
				}
			});
		});
	}

,	setInstanceKey = function (child, parentPaneState) {
		// create a named key for use in state and instance branches
		var	$c	= child.container
		,	o	= child.options
		,	sm	= o.stateManagement
		,	key	= o.instanceKey || $c.data("layoutInstanceKey")
		;
		if (!key) key = (sm && sm.cookie ? sm.cookie.name : '') || o.name; // look for a name/key
		if (!key) key = "layout"+ (++parentPaneState.childIdx);	// if no name/key found, generate one
		else key = key.replace(/[^\w-]/gi, '_').replace(/_{2,}/g, '_');	 // ensure is valid as a hash key
		o.instanceKey = key;
		$c.data("layoutInstanceKey", key); // useful if layout is destroyed and then recreated
		return key;
	}

	/**
	 * @param {string}		pane		The pane being opened, ie: north, south, east, or west
	 * @param {Object=}		newChild	New child-layout Instance to add to this pane
	 */
,	refreshChildren = function (pane, newChild) {
		var	$P	= $Ps[pane]
		,	pC	= children[pane]
		,	s	= state[pane]
		,	o
		;
		// check for destroy()ed layouts and update the child pointers & arrays
		if ($.isPlainObject( pC )) {
			$.each( pC, function (key, child) {
				if (child.destroyed) delete pC[key]
			});
			// if no more children, remove the children hash
			if ($.isEmptyObject( pC ))
				pC = children[pane] = null; // clear children hash
		}

		// see if there is a directly-nested layout inside this pane
		// if there is, then there can be only ONE child-layout, so check that...
		if (!newChild && !pC) {
			newChild = $P.data("layout");
		}

		// if a newChild instance was passed, add it to children[pane]
		if (newChild) {
			// update child.state
			newChild.hasParentLayout = true; // set parent-flag in child
			// instanceKey is a key-name used in both state and children
			o = newChild.options;
			// set a unique child-instance key for this layout, if not already set
			setInstanceKey( newChild, s );
			// add pointer to pane.children hash
			if (!pC) pC = children[pane] = {}; // create an empty children hash
			pC[ o.instanceKey ] = newChild.container.data("layout"); // add childLayout instance
		}

		// ALWAYS refresh the pane.children alias, even if null
		Instance[pane].children = children[pane];

		// if newChild was NOT passed - see if there is a child layout NOW
		if (!newChild) {
			createChildren(pane); // MAY create a child and re-call this method
		}
	}

,	windowResize = function () {
		var	o = options
		,	delay = Number(o.resizeWithWindowDelay);
		if (delay < 10) delay = 100; // MUST have a delay!
		// resizing uses a delay-loop because the resize event fires repeatly - except in FF, but delay anyway
		timer.clear("winResize"); // if already running
		timer.set("winResize", function(){
			timer.clear("winResize");
			timer.clear("winResizeRepeater");
			var dims = elDims( $N, o.inset );
			// only trigger resizeAll() if container has changed size
			if (dims.innerWidth !== sC.innerWidth || dims.innerHeight !== sC.innerHeight)
				resizeAll();
		}, delay);
		// ALSO set fixed-delay timer, if not already running
		if (!timer.data["winResizeRepeater"]) setWindowResizeRepeater();
	}

,	setWindowResizeRepeater = function () {
		var delay = Number(options.resizeWithWindowMaxDelay);
		if (delay > 0)
			timer.set("winResizeRepeater", function(){ setWindowResizeRepeater(); resizeAll(); }, delay);
	}

,	unload = function () {
		var o = options;

		_runCallbacks("onunload_start");

		// trigger plugin callabacks for this layout (eg: stateManagement)
		runPluginCallbacks( Instance, $.layout.onUnload );

		_runCallbacks("onunload_end");
	}

	/**
	 * Validate and initialize container CSS and events
	 *
	 * @see  _create()
	 */
,	_initContainer = function () {
		var
			N		= $N[0]	
		,	$H		= $("html")
		,	tag		= sC.tagName = N.tagName
		,	id		= sC.id = N.id
		,	cls		= sC.className = N.className
		,	o		= options
		,	name	= o.name
		,	props	= "position,margin,padding,border"
		,	css		= "layoutCSS"
		,	CSS		= {}
		,	hid		= "hidden" // used A LOT!
		//	see if this container is a 'pane' inside an outer-layout
		,	parent	= $N.data("parentLayout")	// parent-layout Instance
		,	pane	= $N.data("layoutEdge")		// pane-name in parent-layout
		,	isChild	= parent && pane
		,	num		= $.layout.cssNum
		,	$parent, n
		;
		// sC = state.container
		sC.selector = $N.selector.split(".slice")[0];
		sC.ref		= (o.name ? o.name +' layout / ' : '') + tag + (id ? "#"+id : cls ? '.['+cls+']' : ''); // used in messages
		sC.isBody	= (tag === "BODY");

		// try to find a parent-layout
		if (!isChild && !sC.isBody) {
			$parent = $N.closest("."+ $.layout.defaults.panes.paneClass);
			parent	= $parent.data("parentLayout");
			pane	= $parent.data("layoutEdge");
			isChild	= parent && pane;
		}

		$N	.data({
				layout: Instance
			,	layoutContainer: sID // FLAG to indicate this is a layout-container - contains unique internal ID
			})
			.addClass(o.containerClass)
		;
		var layoutMethods = {
			destroy:	''
		,	initPanes:	''
		,	resizeAll:	'resizeAll'
		,	resize:		'resizeAll'
		};
		// loop hash and bind all methods - include layoutID namespacing
		for (name in layoutMethods) {
			$N.bind("layout"+ name.toLowerCase() +"."+ sID, Instance[ layoutMethods[name] || name ]);
		}

		// if this container is another layout's 'pane', then set child/parent pointers
		if (isChild) {
			// update parent flag
			Instance.hasParentLayout = true;
			// set pointers to THIS child-layout (Instance) in parent-layout
			parent.refreshChildren( pane, Instance );
		}

		// SAVE original container CSS for use in destroy()
		if (!$N.data(css)) {
			// handle props like overflow different for BODY & HTML - has 'system default' values
			if (sC.isBody) {
				// SAVE <BODY> CSS
				$N.data(css, $.extend( styles($N, props), {
					height:		$N.css("height")
				,	overflow:	$N.css("overflow")
				,	overflowX:	$N.css("overflowX")
				,	overflowY:	$N.css("overflowY")
				}));
				// ALSO SAVE <HTML> CSS
				$H.data(css, $.extend( styles($H, 'padding'), {
					height:		"auto" // FF would return a fixed px-size!
				,	overflow:	$H.css("overflow")
				,	overflowX:	$H.css("overflowX")
				,	overflowY:	$H.css("overflowY")
				}));
			}
			else // handle props normally for non-body elements
				$N.data(css, styles($N, props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY") );
		}

		try {
			// common container CSS
			CSS = {
				overflow:	hid
			,	overflowX:	hid
			,	overflowY:	hid
			};
			$N.css( CSS );

			if (o.inset && !$.isPlainObject(o.inset)) {
				// can specify a single number for equal outset all-around
				n = parseInt(o.inset, 10) || 0
				o.inset = {
					top:	n
				,	bottom:	n
				,	left:	n
				,	right:	n
				};
			}

			// format html & body if this is a full page layout
			if (sC.isBody) {
				// if HTML has padding, use this as an outer-spacing around BODY
				if (!o.outset) {
					// use padding from parent-elem (HTML) as outset
					o.outset = {
						top:	num($H, "paddingTop")
					,	bottom:	num($H, "paddingBottom")
					,	left:	num($H, "paddingLeft")
					,	right:	num($H, "paddingRight")
					};
				}
				else if (!$.isPlainObject(o.outset)) {
					// can specify a single number for equal outset all-around
					n = parseInt(o.outset, 10) || 0
					o.outset = {
						top:	n
					,	bottom:	n
					,	left:	n
					,	right:	n
					};
				}
				// HTML
				$H.css( CSS ).css({
					height:		"100%"
				,	border:		"none"	// no border or padding allowed when using height = 100%
				,	padding:	0		// ditto
				,	margin:		0
				});
				// BODY
				if (browser.isIE6) {
					// IE6 CANNOT use the trick of setting absolute positioning on all 4 sides - must have 'height'
					$N.css({
						width:		"100%"
					,	height:		"100%"
					,	border:		"none"	// no border or padding allowed when using height = 100%
					,	padding:	0		// ditto
					,	margin:		0
					,	position:	"relative"
					});
					// convert body padding to an inset option - the border cannot be measured in IE6!
					if (!o.inset) o.inset = elDims( $N ).inset;
				}
				else { // use absolute positioning for BODY to allow borders & padding without overflow
					$N.css({
						width:		"auto"
					,	height:		"auto"
					,	margin:		0
					,	position:	"absolute"	// allows for border and padding on BODY
					});
					// apply edge-positioning created above
					$N.css( o.outset );
				}
				// set current layout-container dimensions
				$.extend(sC, elDims( $N, o.inset )); // passing inset means DO NOT include insetX values
			}
			else {
				// container MUST have 'position'
				var	p = $N.css("position");
				if (!p || !p.match(/(fixed|absolute|relative)/))
					$N.css("position","relative");

				// set current layout-container dimensions
				if ( $N.is(":visible") ) {
					$.extend(sC, elDims( $N, o.inset )); // passing inset means DO NOT change insetX (padding) values
					if (sC.innerHeight < 1) // container has no 'height' - warn developer
						_log( o.errors.noContainerHeight.replace(/CONTAINER/, sC.ref) );
				}
			}

			// if container has min-width/height, then enable scrollbar(s)
			if ( num($N, "minWidth")  ) $N.parent().css("overflowX","auto");
			if ( num($N, "minHeight") ) $N.parent().css("overflowY","auto");

		} catch (ex) {}
	}

	/**
	 * Bind layout hotkeys - if options enabled
	 *
	 * @see  _create() and addPane()
	 * @param {string=}	[panes=""]	The edge(s) to process
	 */
,	initHotkeys = function (panes) {
		panes = panes ? panes.split(",") : _c.borderPanes;
		// bind keyDown to capture hotkeys, if option enabled for ANY pane
		$.each(panes, function (i, pane) {
			var o = options[pane];
			if (o.enableCursorHotkey || o.customHotkey) {
				$(document).bind("keydown."+ sID, keyDown); // only need to bind this ONCE
				return false; // BREAK - binding was done
			}
		});
	}

	/**
	 * Build final OPTIONS data
	 *
	 * @see  _create()
	 */
,	initOptions = function () {
		var data, d, pane, key, val, i, c, o;

		// reprocess user's layout-options to have correct options sub-key structure
		opts = $.layout.transformData( opts, true ); // panes = default subkey

		// auto-rename old options for backward compatibility
		opts = $.layout.backwardCompatibility.renameAllOptions( opts );

		// if user-options has 'panes' key (pane-defaults), clean it...
		if (!$.isEmptyObject(opts.panes)) {
			// REMOVE any pane-defaults that MUST be set per-pane
			data = $.layout.optionsMap.noDefault;
			for (i=0, c=data.length; i<c; i++) {
				key = data[i];
				delete opts.panes[key]; // OK if does not exist
			}
			// REMOVE any layout-options specified under opts.panes
			data = $.layout.optionsMap.layout;
			for (i=0, c=data.length; i<c; i++) {
				key = data[i];
				delete opts.panes[key]; // OK if does not exist
			}
		}

		// MOVE any NON-layout-options from opts-root to opts.panes
		data = $.layout.optionsMap.layout;
		var rootKeys = $.layout.config.optionRootKeys;
		for (key in opts) {
			val = opts[key];
			if ($.inArray(key, rootKeys) < 0 && $.inArray(key, data) < 0) {
				if (!opts.panes[key])
					opts.panes[key] = $.isPlainObject(val) ? $.extend(true, {}, val) : val;
				delete opts[key]
			}
		}

		// START by updating ALL options from opts
		$.extend(true, options, opts);

		// CREATE final options (and config) for EACH pane
		$.each(_c.allPanes, function (i, pane) {

			// apply 'pane-defaults' to CONFIG.[PANE]
			_c[pane] = $.extend(true, {}, _c.panes, _c[pane]);

			d = options.panes;
			o = options[pane];

			// center-pane uses SOME keys in defaults.panes branch
			if (pane === 'center') {
				// ONLY copy keys from opts.panes listed in: $.layout.optionsMap.center
				data = $.layout.optionsMap.center;		// list of 'center-pane keys'
				for (i=0, c=data.length; i<c; i++) {	// loop the list...
					key = data[i];
					// only need to use pane-default if pane-specific value not set
					if (!opts.center[key] && (opts.panes[key] || !o[key]))
						o[key] = d[key]; // pane-default
				}
			}
			else {
				// border-panes use ALL keys in defaults.panes branch
				o = options[pane] = $.extend(true, {}, d, o); // re-apply pane-specific opts AFTER pane-defaults
				createFxOptions( pane );
				// ensure all border-pane-specific base-classes exist
				if (!o.resizerClass)	o.resizerClass	= "ui-layout-resizer";
				if (!o.togglerClass)	o.togglerClass	= "ui-layout-toggler";
			}
			// ensure we have base pane-class (ALL panes)
			if (!o.paneClass) o.paneClass = "ui-layout-pane";
		});

		// update options.zIndexes if a zIndex-option specified
		var zo	= opts.zIndex
		,	z	= options.zIndexes;
		if (zo > 0) {
			z.pane_normal		= zo;
			z.content_mask		= max(zo+1, z.content_mask);	// MIN = +1
			z.resizer_normal	= max(zo+2, z.resizer_normal);	// MIN = +2
		}

		// DELETE 'panes' key now that we are done - values were copied to EACH pane
		delete options.panes;


		function createFxOptions ( pane ) {
			var	o = options[pane]
			,	d = options.panes;
			// ensure fxSettings key to avoid errors
			if (!o.fxSettings) o.fxSettings = {};
			if (!d.fxSettings) d.fxSettings = {};

			$.each(["_open","_close","_size"], function (i,n) { 
				var
					sName		= "fxName"+ n
				,	sSpeed		= "fxSpeed"+ n
				,	sSettings	= "fxSettings"+ n
					// recalculate fxName according to specificity rules
				,	fxName = o[sName] =
						o[sName]	// options.west.fxName_open
					||	d[sName]	// options.panes.fxName_open
					||	o.fxName	// options.west.fxName
					||	d.fxName	// options.panes.fxName
					||	"none"		// MEANS $.layout.defaults.panes.fxName == "" || false || null || 0
				,	fxExists	= $.effects && ($.effects[fxName] || ($.effects.effect && $.effects.effect[fxName]))
				;
				// validate fxName to ensure is valid effect - MUST have effect-config data in options.effects
				if (fxName === "none" || !options.effects[fxName] || !fxExists)
					fxName = o[sName] = "none"; // effect not loaded OR unrecognized fxName

				// set vars for effects subkeys to simplify logic
				var	fx		= options.effects[fxName] || {}	// effects.slide
				,	fx_all	= fx.all	|| null				// effects.slide.all
				,	fx_pane	= fx[pane]	|| null				// effects.slide.west
				;
				// create fxSpeed[_open|_close|_size]
				o[sSpeed] =
					o[sSpeed]				// options.west.fxSpeed_open
				||	d[sSpeed]				// options.west.fxSpeed_open
				||	o.fxSpeed				// options.west.fxSpeed
				||	d.fxSpeed				// options.panes.fxSpeed
				||	null					// DEFAULT - let fxSetting.duration control speed
				;
				// create fxSettings[_open|_close|_size]
				o[sSettings] = $.extend(
					true
				,	{}
				,	fx_all					// effects.slide.all
				,	fx_pane					// effects.slide.west
				,	d.fxSettings			// options.panes.fxSettings
				,	o.fxSettings			// options.west.fxSettings
				,	d[sSettings]			// options.panes.fxSettings_open
				,	o[sSettings]			// options.west.fxSettings_open
				);
			});

			// DONE creating action-specific-settings for this pane,
			// so DELETE generic options - are no longer meaningful
			delete o.fxName;
			delete o.fxSpeed;
			delete o.fxSettings;
		}
	}

	/**
	 * Initialize module objects, styling, size and position for all panes
	 *
	 * @see  _initElements()
	 * @param {string}	pane		The pane to process
	 */
,	getPane = function (pane) {
		var sel = options[pane].paneSelector
		if (sel.substr(0,1)==="#") // ID selector
			// NOTE: elements selected 'by ID' DO NOT have to be 'children'
			return $N.find(sel).eq(0);
		else { // class or other selector
			var $P = $N.children(sel).eq(0);
			// look for the pane nested inside a 'form' element
			return $P.length ? $P : $N.children("form:first").children(sel).eq(0);
		}
	}

	/**
	 * @param {Object=}		evt
	 */
,	initPanes = function (evt) {
		// stopPropagation if called by trigger("layoutinitpanes") - use evtPane utility 
		evtPane(evt);

		// NOTE: do north & south FIRST so we can measure their height - do center LAST
		$.each(_c.allPanes, function (idx, pane) {
			addPane( pane, true );
		});

		// init the pane-handles NOW in case we have to hide or close the pane below
		initHandles();

		// now that all panes have been initialized and initially-sized,
		// make sure there is really enough space available for each pane
		$.each(_c.borderPanes, function (i, pane) {
			if ($Ps[pane] && state[pane].isVisible) { // pane is OPEN
				setSizeLimits(pane);
				makePaneFit(pane); // pane may be Closed, Hidden or Resized by makePaneFit()
			}
		});
		// size center-pane AGAIN in case we 'closed' a border-pane in loop above
		sizeMidPanes("center");

		//	Chrome/Webkit sometimes fires callbacks BEFORE it completes resizing!
		//	Before RC30.3, there was a 10ms delay here, but that caused layout 
		//	to load asynchrously, which is BAD, so try skipping delay for now

		// process pane contents and callbacks, and init/resize child-layout if exists
		$.each(_c.allPanes, function (idx, pane) {
			afterInitPane(pane);
		});
	}

	/**
	 * Add a pane to the layout - subroutine of initPanes()
	 *
	 * @see  initPanes()
	 * @param {string}	pane			The pane to process
	 * @param {boolean=}	[force=false]	Size content after init
	 */
,	addPane = function (pane, force) {
		if ( !force && !isInitialized() ) return;
		var
			o		= options[pane]
		,	s		= state[pane]
		,	c		= _c[pane]
		,	dir		= c.dir
		,	fx		= s.fx
		,	spacing	= o.spacing_open || 0
		,	isCenter = (pane === "center")
		,	CSS		= {}
		,	$P		= $Ps[pane]
		,	size, minSize, maxSize, child
		;
		// if pane-pointer already exists, remove the old one first
		if ($P)
			removePane( pane, false, true, false );
		else
			$Cs[pane] = false; // init

		$P = $Ps[pane] = getPane(pane);
		if (!$P.length) {
			$Ps[pane] = false; // logic
			return;
		}

		// SAVE original Pane CSS
		if (!$P.data("layoutCSS")) {
			var props = "position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";
			$P.data("layoutCSS", styles($P, props));
		}

		// create alias for pane data in Instance - initHandles will add more
		Instance[pane] = {
			name:		pane
		,	pane:		$Ps[pane]
		,	content:	$Cs[pane]
		,	options:	options[pane]
		,	state:		state[pane]
		,	children:	children[pane]
		};

		// add classes, attributes & events
		$P	.data({
				parentLayout:	Instance		// pointer to Layout Instance
			,	layoutPane:		Instance[pane]	// NEW pointer to pane-alias-object
			,	layoutEdge:		pane
			,	layoutRole:		"pane"
			})
			.css(c.cssReq).css("zIndex", options.zIndexes.pane_normal)
			.css(o.applyDemoStyles ? c.cssDemo : {}) // demo styles
			.addClass( o.paneClass +" "+ o.paneClass+"-"+pane ) // default = "ui-layout-pane ui-layout-pane-west" - may be a dupe of 'paneSelector'
			.bind("mouseenter."+ sID, addHover )
			.bind("mouseleave."+ sID, removeHover )
			;
		var paneMethods = {
				hide:				''
			,	show:				''
			,	toggle:				''
			,	close:				''
			,	open:				''
			,	slideOpen:			''
			,	slideClose:			''
			,	slideToggle:		''
			,	size:				'sizePane'
			,	sizePane:			'sizePane'
			,	sizeContent:		''
			,	sizeHandles:		''
			,	enableClosable:		''
			,	disableClosable:	''
			,	enableSlideable:	''
			,	disableSlideable:	''
			,	enableResizable:	''
			,	disableResizable:	''
			,	swapPanes:			'swapPanes'
			,	swap:				'swapPanes'
			,	move:				'swapPanes'
			,	removePane:			'removePane'
			,	remove:				'removePane'
			,	createChildren:		''
			,	resizeChildren:		''
			,	resizeAll:			'resizeAll'
			,	resizeLayout:		'resizeAll'
			}
		,	name;
		// loop hash and bind all methods - include layoutID namespacing
		for (name in paneMethods) {
			$P.bind("layoutpane"+ name.toLowerCase() +"."+ sID, Instance[ paneMethods[name] || name ]);
		}

		// see if this pane has a 'scrolling-content element'
		initContent(pane, false); // false = do NOT sizeContent() - called later

		if (!isCenter) {
			// call _parseSize AFTER applying pane classes & styles - but before making visible (if hidden)
			// if o.size is auto or not valid, then MEASURE the pane and use that as its 'size'
			size	= s.size = _parseSize(pane, o.size);
			minSize	= _parseSize(pane,o.minSize) || 1;
			maxSize	= _parseSize(pane,o.maxSize) || 100000;
			if (size > 0) size = max(min(size, maxSize), minSize);
			s.autoResize = o.autoResize; // used with percentage sizes

			// state for border-panes
			s.isClosed  = false; // true = pane is closed
			s.isSliding = false; // true = pane is currently open by 'sliding' over adjacent panes
			s.isResizing= false; // true = pane is in process of being resized
			s.isHidden	= false; // true = pane is hidden - no spacing, resizer or toggler is visible!

			// array for 'pin buttons' whose classNames are auto-updated on pane-open/-close
			if (!s.pins) s.pins = [];
		}
		//	states common to ALL panes
		s.tagName	= $P[0].tagName;
		s.edge		= pane;		// useful if pane is (or about to be) 'swapped' - easy find out where it is (or is going)
		s.noRoom	= false;	// true = pane 'automatically' hidden due to insufficient room - will unhide automatically
		s.isVisible	= true;		// false = pane is invisible - closed OR hidden - simplify logic

		// init pane positioning
		setPanePosition( pane );

		// if pane is not visible, 
		if (dir === "horz") // north or south pane
			CSS.height = cssH($P, size);
		else if (dir === "vert") // east or west pane
			CSS.width = cssW($P, size);
		//else if (isCenter) {}

		$P.css(CSS); // apply size -- top, bottom & height will be set by sizeMidPanes
		if (dir != "horz") sizeMidPanes(pane, true); // true = skipCallback

		// if manually adding a pane AFTER layout initialization, then...
		if (state.initialized) {
			initHandles( pane );
			initHotkeys( pane );
		}

		// close or hide the pane if specified in settings
		if (o.initClosed && o.closable && !o.initHidden)
			close(pane, true, true); // true, true = force, noAnimation
		else if (o.initHidden || o.initClosed)
			hide(pane); // will be completely invisible - no resizer or spacing
		else if (!s.noRoom)
			// make the pane visible - in case was initially hidden
			$P.css("display","block");
		// ELSE setAsOpen() - called later by initHandles()

		// RESET visibility now - pane will appear IF display:block
		$P.css("visibility","visible");

		// check option for auto-handling of pop-ups & drop-downs
		if (o.showOverflowOnHover)
			$P.hover( allowOverflow, resetOverflow );

		// if manually adding a pane AFTER layout initialization, then...
		if (state.initialized) {
			afterInitPane( pane );
		}
	}

,	afterInitPane = function (pane) {
		var	$P	= $Ps[pane]
		,	s	= state[pane]
		,	o	= options[pane]
		;
		if (!$P) return;

		// see if there is a directly-nested layout inside this pane
		if ($P.data("layout"))
			refreshChildren( pane, $P.data("layout") );

		// process pane contents and callbacks, and init/resize child-layout if exists
		if (s.isVisible) { // pane is OPEN
			if (state.initialized) // this pane was added AFTER layout was created
				resizeAll(); // will also sizeContent
			else
				sizeContent(pane);

			if (o.triggerEventsOnLoad)
				_runCallbacks("onresize_end", pane);
			else // automatic if onresize called, otherwise call it specifically
				// resize child - IF inner-layout already exists (created before this layout)
				resizeChildren(pane, true); // a previously existing childLayout
		}

		// init childLayouts - even if pane is not visible
		if (o.initChildren && o.children)
			createChildren(pane);
	}

	/**
	 * @param {string=}	panes		The pane(s) to process
	 */
,	setPanePosition = function (panes) {
		panes = panes ? panes.split(",") : _c.borderPanes;

		// create toggler DIVs for each pane, and set object pointers for them, eg: $R.north = north toggler DIV
		$.each(panes, function (i, pane) {
			var $P	= $Ps[pane]
			,	$R	= $Rs[pane]
			,	o	= options[pane]
			,	s	= state[pane]
			,	side =  _c[pane].side
			,	CSS	= {}
			;
			if (!$P) return; // pane does not exist - skip

			// set css-position to account for container borders & padding
			switch (pane) {
				case "north": 	CSS.top 	= sC.inset.top;
								CSS.left 	= sC.inset.left;
								CSS.right	= sC.inset.right;
								break;
				case "south": 	CSS.bottom	= sC.inset.bottom;
								CSS.left 	= sC.inset.left;
								CSS.right 	= sC.inset.right;
								break;
				case "west": 	CSS.left 	= sC.inset.left; // top, bottom & height set by sizeMidPanes()
								break;
				case "east": 	CSS.right 	= sC.inset.right; // ditto
								break;
				case "center":	// top, left, width & height set by sizeMidPanes()
			}
			// apply position
			$P.css(CSS); 

			// update resizer position
			if ($R && s.isClosed)
				$R.css(side, sC.inset[side]);
			else if ($R && !s.isHidden)
				$R.css(side, sC.inset[side] + getPaneSize(pane));
		});
	}

	/**
	 * Initialize module objects, styling, size and position for all resize bars and toggler buttons
	 *
	 * @see  _create()
	 * @param {string=}	[panes=""]	The edge(s) to process
	 */
,	initHandles = function (panes) {
		panes = panes ? panes.split(",") : _c.borderPanes;

		// create toggler DIVs for each pane, and set object pointers for them, eg: $R.north = north toggler DIV
		$.each(panes, function (i, pane) {
			var $P		= $Ps[pane];
			$Rs[pane]	= false; // INIT
			$Ts[pane]	= false;
			if (!$P) return; // pane does not exist - skip

			var	o		= options[pane]
			,	s		= state[pane]
			,	c		= _c[pane]
			,	paneId	= o.paneSelector.substr(0,1) === "#" ? o.paneSelector.substr(1) : ""
			,	rClass	= o.resizerClass
			,	tClass	= o.togglerClass
			,	spacing	= (s.isVisible ? o.spacing_open : o.spacing_closed)
			,	_pane	= "-"+ pane // used for classNames
			,	_state	= (s.isVisible ? "-open" : "-closed") // used for classNames
			,	I		= Instance[pane]
				// INIT RESIZER BAR
			,	$R		= I.resizer = $Rs[pane] = $("<div></div>")
				// INIT TOGGLER BUTTON
			,	$T		= I.toggler = (o.closable ? $Ts[pane] = $("<div></div>") : false)
			;

			//if (s.isVisible && o.resizable) ... handled by initResizable
			if (!s.isVisible && o.slidable)
				$R.attr("title", o.tips.Slide).css("cursor", o.sliderCursor);

			$R	// if paneSelector is an ID, then create a matching ID for the resizer, eg: "#paneLeft" => "paneLeft-resizer"
				.attr("id", paneId ? paneId +"-resizer" : "" )
				.data({
					parentLayout:	Instance
				,	layoutPane:		Instance[pane]	// NEW pointer to pane-alias-object
				,	layoutEdge:		pane
				,	layoutRole:		"resizer"
				})
				.css(_c.resizers.cssReq).css("zIndex", options.zIndexes.resizer_normal)
				.css(o.applyDemoStyles ? _c.resizers.cssDemo : {}) // add demo styles
				.addClass(rClass +" "+ rClass+_pane)
				.hover(addHover, removeHover) // ALWAYS add hover-classes, even if resizing is not enabled - handle with CSS instead
				.hover(onResizerEnter, onResizerLeave) // ALWAYS NEED resizer.mouseleave to balance toggler.mouseenter
				.mousedown($.layout.disableTextSelection)	// prevent text-selection OUTSIDE resizer
				.mouseup($.layout.enableTextSelection)		// not really necessary, but just in case
				.appendTo($N) // append DIV to container
			;
			if ($.fn.disableSelection)
				$R.disableSelection(); // prevent text-selection INSIDE resizer
			if (o.resizerDblClickToggle)
				$R.bind("dblclick."+ sID, toggle );

			if ($T) {
				$T	// if paneSelector is an ID, then create a matching ID for the resizer, eg: "#paneLeft" => "#paneLeft-toggler"
					.attr("id", paneId ? paneId +"-toggler" : "" )
					.data({
						parentLayout:	Instance
					,	layoutPane:		Instance[pane]	// NEW pointer to pane-alias-object
					,	layoutEdge:		pane
					,	layoutRole:		"toggler"
					})
					.css(_c.togglers.cssReq) // add base/required styles
					.css(o.applyDemoStyles ? _c.togglers.cssDemo : {}) // add demo styles
					.addClass(tClass +" "+ tClass+_pane)
					.hover(addHover, removeHover) // ALWAYS add hover-classes, even if toggling is not enabled - handle with CSS instead
					.bind("mouseenter", onResizerEnter) // NEED toggler.mouseenter because mouseenter MAY NOT fire on resizer
					.appendTo($R) // append SPAN to resizer DIV
				;
				// ADD INNER-SPANS TO TOGGLER
				if (o.togglerContent_open) // ui-layout-open
					$("<span>"+ o.togglerContent_open +"</span>")
						.data({
							layoutEdge:		pane
						,	layoutRole:		"togglerContent"
						})
						.data("layoutRole", "togglerContent")
						.data("layoutEdge", pane)
						.addClass("content content-open")
						.css("display","none")
						.appendTo( $T )
						//.hover( addHover, removeHover ) // use ui-layout-toggler-west-hover .content-open instead!
					;
				if (o.togglerContent_closed) // ui-layout-closed
					$("<span>"+ o.togglerContent_closed +"</span>")
						.data({
							layoutEdge:		pane
						,	layoutRole:		"togglerContent"
						})
						.addClass("content content-closed")
						.css("display","none")
						.appendTo( $T )
						//.hover( addHover, removeHover ) // use ui-layout-toggler-west-hover .content-closed instead!
					;
				// ADD TOGGLER.click/.hover
				enableClosable(pane);
			}

			// add Draggable events
			initResizable(pane);

			// ADD CLASSNAMES & SLIDE-BINDINGS - eg: class="resizer resizer-west resizer-open"
			if (s.isVisible)
				setAsOpen(pane);	// onOpen will be called, but NOT onResize
			else {
				setAsClosed(pane);	// onClose will be called
				bindStartSlidingEvents(pane, true); // will enable events IF option is set
			}

		});

		// SET ALL HANDLE DIMENSIONS
		sizeHandles();
	}


	/**
	 * Initialize scrolling ui-layout-content div - if exists
	 *
	 * @see  initPane() - or externally after an Ajax injection
	 * @param {string}	pane			The pane to process
	 * @param {boolean=}	[resize=true]	Size content after init
	 */
,	initContent = function (pane, resize) {
		if (!isInitialized()) return;
		var 
			o	= options[pane]
		,	sel	= o.contentSelector
		,	I	= Instance[pane]
		,	$P	= $Ps[pane]
		,	$C
		;
		if (sel) $C = I.content = $Cs[pane] = (o.findNestedContent)
			? $P.find(sel).eq(0) // match 1-element only
			: $P.children(sel).eq(0)
		;
		if ($C && $C.length) {
			$C.data("layoutRole", "content");
			// SAVE original Content CSS
			if (!$C.data("layoutCSS"))
				$C.data("layoutCSS", styles($C, "height"));
			$C.css( _c.content.cssReq );
			if (o.applyDemoStyles) {
				$C.css( _c.content.cssDemo ); // add padding & overflow: auto to content-div
				$P.css( _c.content.cssDemoPane ); // REMOVE padding/scrolling from pane
			}
			// ensure no vertical scrollbar on pane - will mess up measurements
			if ($P.css("overflowX").match(/(scroll|auto)/)) {
				$P.css("overflow", "hidden");
			}
			state[pane].content = {}; // init content state
			if (resize !== false) sizeContent(pane);
			// sizeContent() is called AFTER init of all elements
		}
		else
			I.content = $Cs[pane] = false;
	}


	/**
	 * Add resize-bars to all panes that specify it in options
	 * -dependancy: $.fn.resizable - will skip if not found
	 *
	 * @see  _create()
	 * @param {string=}	[panes=""]	The edge(s) to process
	 */
,	initResizable = function (panes) {
		var	draggingAvailable = $.layout.plugins.draggable
		,	side // set in start()
		;
		panes = panes ? panes.split(",") : _c.borderPanes;

		$.each(panes, function (idx, pane) {
			var o = options[pane];
			if (!draggingAvailable || !$Ps[pane] || !o.resizable) {
				o.resizable = false;
				return true; // skip to next
			}

			var s		= state[pane]
			,	z		= options.zIndexes
			,	c		= _c[pane]
			,	side	= c.dir=="horz" ? "top" : "left"
			,	$P 		= $Ps[pane]
			,	$R		= $Rs[pane]
			,	base	= o.resizerClass
			,	lastPos	= 0 // used when live-resizing
			,	r, live // set in start because may change
			//	'drag' classes are applied to the ORIGINAL resizer-bar while dragging is in process
			,	resizerClass		= base+"-drag"				// resizer-drag
			,	resizerPaneClass	= base+"-"+pane+"-drag"		// resizer-north-drag
			//	'helper' class is applied to the CLONED resizer-bar while it is being dragged
			,	helperClass			= base+"-dragging"			// resizer-dragging
			,	helperPaneClass		= base+"-"+pane+"-dragging" // resizer-north-dragging
			,	helperLimitClass	= base+"-dragging-limit"	// resizer-drag
			,	helperPaneLimitClass = base+"-"+pane+"-dragging-limit"	// resizer-north-drag
			,	helperClassesSet	= false 					// logic var
			;

			if (!s.isClosed)
				$R.attr("title", o.tips.Resize)
				  .css("cursor", o.resizerCursor); // n-resize, s-resize, etc

			$R.draggable({
				containment:	$N[0] // limit resizing to layout container
			,	axis:			(c.dir=="horz" ? "y" : "x") // limit resizing to horz or vert axis
			,	delay:			0
			,	distance:		1
			,	grid:			o.resizingGrid
			//	basic format for helper - style it using class: .ui-draggable-dragging
			,	helper:			"clone"
			,	opacity:		o.resizerDragOpacity
			,	addClasses:		false // avoid ui-state-disabled class when disabled
			//,	iframeFix:		o.draggableIframeFix // TODO: consider using when bug is fixed
			,	zIndex:			z.resizer_drag

			,	start: function (e, ui) {
					// REFRESH options & state pointers in case we used swapPanes
					o = options[pane];
					s = state[pane];
					// re-read options
					live = o.livePaneResizing;

					// ondrag_start callback - will CANCEL hide if returns false
					// TODO: dragging CANNOT be cancelled like this, so see if there is a way?
					if (false === _runCallbacks("ondrag_start", pane)) return false;

					s.isResizing		= true; // prevent pane from closing while resizing
					state.paneResizing	= pane; // easy to see if ANY pane is resizing
					timer.clear(pane+"_closeSlider"); // just in case already triggered

					// SET RESIZER LIMITS - used in drag()
					setSizeLimits(pane); // update pane/resizer state
					r = s.resizerPosition;
					lastPos = ui.position[ side ]

					$R.addClass( resizerClass +" "+ resizerPaneClass ); // add drag classes
					helperClassesSet = false; // reset logic var - see drag()

					// MASK PANES CONTAINING IFRAMES, APPLETS OR OTHER TROUBLESOME ELEMENTS
					showMasks( pane, { resizing: true });
				}

			,	drag: function (e, ui) {
					if (!helperClassesSet) { // can only add classes after clone has been added to the DOM
						//$(".ui-draggable-dragging")
						ui.helper
							.addClass( helperClass +" "+ helperPaneClass ) // add helper classes
							.css({ right: "auto", bottom: "auto" })	// fix dir="rtl" issue
							.children().css("visibility","hidden")	// hide toggler inside dragged resizer-bar
						;
						helperClassesSet = true;
						// draggable bug!? RE-SET zIndex to prevent E/W resize-bar showing through N/S pane!
						if (s.isSliding) $Ps[pane].css("zIndex", z.pane_sliding);
					}
					// CONTAIN RESIZER-BAR TO RESIZING LIMITS
					var limit = 0;
					if (ui.position[side] < r.min) {
						ui.position[side] = r.min;
						limit = -1;
					}
					else if (ui.position[side] > r.max) {
						ui.position[side] = r.max;
						limit = 1;
					}
					// ADD/REMOVE dragging-limit CLASS
					if (limit) {
						ui.helper.addClass( helperLimitClass +" "+ helperPaneLimitClass ); // at dragging-limit
						window.defaultStatus = (limit>0 && pane.match(/(north|west)/)) || (limit<0 && pane.match(/(south|east)/)) ? o.tips.maxSizeWarning : o.tips.minSizeWarning;
					}
					else {
						ui.helper.removeClass( helperLimitClass +" "+ helperPaneLimitClass ); // not at dragging-limit
						window.defaultStatus = "";
					}
					// DYNAMICALLY RESIZE PANES IF OPTION ENABLED
					// won't trigger unless resizer has actually moved!
					if (live && Math.abs(ui.position[side] - lastPos) >= o.liveResizingTolerance) {
						lastPos = ui.position[side];
						resizePanes(e, ui, pane)
					}
				}

			,	stop: function (e, ui) {
					$('body').enableSelection(); // RE-ENABLE TEXT SELECTION
					window.defaultStatus = ""; // clear 'resizing limit' message from statusbar
					$R.removeClass( resizerClass +" "+ resizerPaneClass ); // remove drag classes from Resizer
					s.isResizing		= false;
					state.paneResizing	= false; // easy to see if ANY pane is resizing
					resizePanes(e, ui, pane, true); // true = resizingDone
				}

			});
		});

		/**
		 * resizePanes
		 *
		 * Sub-routine called from stop() - and drag() if livePaneResizing
		 *
		 * @param {!Object}		evt
		 * @param {!Object}		ui
		 * @param {string}		pane
		 * @param {boolean=}		[resizingDone=false]
		 */
		var resizePanes = function (evt, ui, pane, resizingDone) {
			var	dragPos	= ui.position
			,	c		= _c[pane]
			,	o		= options[pane]
			,	s		= state[pane]
			,	resizerPos
			;
			switch (pane) {
				case "north":	resizerPos = dragPos.top; break;
				case "west":	resizerPos = dragPos.left; break;
				case "south":	resizerPos = sC.layoutHeight - dragPos.top  - o.spacing_open; break;
				case "east":	resizerPos = sC.layoutWidth  - dragPos.left - o.spacing_open; break;
			};
			// remove container margin from resizer position to get the pane size
			var newSize = resizerPos - sC.inset[c.side];

			// Disable OR Resize Mask(s) created in drag.start
			if (!resizingDone) {
				// ensure we meet liveResizingTolerance criteria
				if (Math.abs(newSize - s.size) < o.liveResizingTolerance)
					return; // SKIP resize this time
				// resize the pane
				manualSizePane(pane, newSize, false, true); // true = noAnimation
				sizeMasks(); // resize all visible masks
			}
			else { // resizingDone
				// ondrag_end callback
				if (false !== _runCallbacks("ondrag_end", pane))
					manualSizePane(pane, newSize, false, true); // true = noAnimation
				hideMasks(true); // true = force hiding all masks even if one is 'sliding'
				if (s.isSliding) // RE-SHOW 'object-masks' so objects won't show through sliding pane
					showMasks( pane, { resizing: true });
			}
		};
	}

	/**
	 *	sizeMask
	 *
	 *	Needed to overlay a DIV over an IFRAME-pane because mask CANNOT be *inside* the pane
	 *	Called when mask created, and during livePaneResizing
	 */
,	sizeMask = function () {
		var $M		= $(this)
		,	pane	= $M.data("layoutMask") // eg: "west"
		,	s		= state[pane]
		;
		// only masks over an IFRAME-pane need manual resizing
		if (s.tagName == "IFRAME" && s.isVisible) // no need to mask closed/hidden panes
			$M.css({
				top:	s.offsetTop
			,	left:	s.offsetLeft
			,	width:	s.outerWidth
			,	height:	s.outerHeight
			});
		/* ALT Method...
		var $P = $Ps[pane];
		$M.css( $P.position() ).css({ width: $P[0].offsetWidth, height: $P[0].offsetHeight });
		*/
	}
,	sizeMasks = function () {
		$Ms.each( sizeMask ); // resize all 'visible' masks
	}

	/**
	 * @param {string}	pane		The pane being resized, animated or isSliding
	 * @param {Object=}	[args]		(optional) Options: which masks to apply, and to which panes
	 */
,	showMasks = function (pane, args) {
		var	c		= _c[pane]
		,	panes	=  ["center"]
		,	z		= options.zIndexes
		,	a		= $.extend({
						objectsOnly:	false
					,	animation:		false
					,	resizing:		true
					,	sliding:		state[pane].isSliding
					},	args )
		,	o, s
		;
		if (a.resizing)
			panes.push( pane );
		if (a.sliding)
			panes.push( _c.oppositeEdge[pane] ); // ADD the oppositeEdge-pane

		if (c.dir === "horz") {
			panes.push("west");
			panes.push("east");
		}

		$.each(panes, function(i,p){
			s = state[p];
			o = options[p];
			if (s.isVisible && ( o.maskObjects || (!a.objectsOnly && o.maskContents) )) {
				getMasks(p).each(function(){
					sizeMask.call(this);
					this.style.zIndex = s.isSliding ? z.pane_sliding+1 : z.pane_normal+1
					this.style.display = "block";
				});
			}
		});
	}

	/**
	 * @param {boolean=}	force		Hide masks even if a pane is sliding
	 */
,	hideMasks = function (force) {
		// ensure no pane is resizing - could be a timing issue
		if (force || !state.paneResizing) {
			$Ms.hide(); // hide ALL masks
		}
		// if ANY pane is sliding, then DO NOT remove masks from panes with maskObjects enabled
		else if (!force && !$.isEmptyObject( state.panesSliding )) {
			var	i = $Ms.length - 1
			,	p, $M;
			for (; i >= 0; i--) {
				$M	= $Ms.eq(i);
				p	= $M.data("layoutMask");
				if (!options[p].maskObjects) {
					$M.hide();
				}
			}
		}
	}

	/**
	 * @param {string}	pane
	 */
,	getMasks = function (pane) {
		var $Masks	= $([])
		,	$M, i = 0, c = $Ms.length
		;
		for (; i<c; i++) {
			$M = $Ms.eq(i);
			if ($M.data("layoutMask") === pane)
				$Masks = $Masks.add( $M );
		}
		if ($Masks.length)
			return $Masks;
		else
			return createMasks(pane);
	}

	/**
	 * createMasks
	 *
	 * Generates both DIV (ALWAYS used) and IFRAME (optional) elements as masks
	 * An IFRAME mask is created *under* the DIV when maskObjects=true, because a DIV cannot mask an applet
	 *
	 * @param {string}	pane
	 */
,	createMasks = function (pane) {
		var
			$P	= $Ps[pane]
		,	s	= state[pane]
		,	o	= options[pane]
		,	z	= options.zIndexes
		,	isIframe, el, $M, css, i
		;
		if (!o.maskContents && !o.maskObjects) return $([]);
		// if o.maskObjects=true, then loop TWICE to create BOTH kinds of mask, else only create a DIV
		for (i=0; i < (o.maskObjects ? 2 : 1); i++) {
			isIframe = o.maskObjects && i==0;
			el = document.createElement( isIframe ? "iframe" : "div" );
			$M = $(el).data("layoutMask", pane); // add data to relate mask to pane
			el.className = "ui-layout-mask ui-layout-mask-"+ pane; // for user styling
			css = el.style;
			// Both DIVs and IFRAMES
			css.background	= "#FFF";
			css.position	= "absolute";
			css.display		= "block";
			if (isIframe) { // IFRAME-only props
				el.src		= "about:blank";
				el.frameborder = 0;
				css.border	= 0;
				css.opacity	= 0;
				css.filter	= "Alpha(Opacity='0')";
				//el.allowTransparency = true; - for IE, but breaks masking ability!
			}
			else { // DIV-only props
				css.opacity	= 0.001;
				css.filter	= "Alpha(Opacity='1')";
			}
			// if pane IS an IFRAME, then must mask the pane itself
			if (s.tagName == "IFRAME") {
				// NOTE sizing done by a subroutine so can be called during live-resizing
				css.zIndex	= z.pane_normal+1; // 1-higher than pane
				$N.append( el ); // append to LAYOUT CONTAINER
			}
			// otherwise put masks *inside the pane* to mask its contents
			else {
				$M.addClass("ui-layout-mask-inside-pane");
				css.zIndex	= o.maskZindex || z.content_mask; // usually 1, but customizable
				css.top		= 0;
				css.left	= 0;
				css.width	= "100%";
				css.height	= "100%";
				$P.append( el ); // append INSIDE pane element
			}
			// add Mask to cached array so can be resized & reused
			$Ms = $Ms.add( el );
		}
		return $Ms;
	}


	/**
	 * Destroy this layout and reset all elements
	 *
	 * @param {boolean=}	[destroyChildren=false]		Destory Child-Layouts first?
	 */
,	destroy = function (evt_or_destroyChildren, destroyChildren) {
		// UNBIND layout events and remove global object
		$(window).unbind("."+ sID);		// resize & unload
		$(document).unbind("."+ sID);	// keyDown (hotkeys)

		if (typeof evt_or_destroyChildren === "object")
			// stopPropagation if called by trigger("layoutdestroy") - use evtPane utility 
			evtPane(evt_or_destroyChildren);
		else // no event, so transfer 1st param to destroyChildren param
			destroyChildren = evt_or_destroyChildren;

		// need to look for parent layout BEFORE we remove the container data, else skips a level
		//var parentPane = Instance.hasParentLayout ? $.layout.getParentPaneInstance( $N ) : null;

		// reset layout-container
		$N	.clearQueue()
			.removeData("layout")
			.removeData("layoutContainer")
			.removeClass(options.containerClass)
			.unbind("."+ sID) // remove ALL Layout events
		;

		// remove all mask elements that have been created
		$Ms.remove();

		// loop all panes to remove layout classes, attributes and bindings
		$.each(_c.allPanes, function (i, pane) {
			removePane( pane, false, true, destroyChildren ); // true = skipResize
		});

		// do NOT reset container CSS if is a 'pane' (or 'content') in an outer-layout - ie, THIS layout is 'nested'
		var css = "layoutCSS";
		if ($N.data(css) && !$N.data("layoutRole")) // RESET CSS
			$N.css( $N.data(css) ).removeData(css);

		// for full-page layouts, also reset the <HTML> CSS
		if (sC.tagName === "BODY" && ($N = $("html")).data(css)) // RESET <HTML> CSS
			$N.css( $N.data(css) ).removeData(css);

		// trigger plugins for this layout, if there are any
		runPluginCallbacks( Instance, $.layout.onDestroy );

		// trigger state-management and onunload callback
		unload();

		// clear the Instance of everything except for container & options (so could recreate)
		// RE-CREATE: myLayout = myLayout.container.layout( myLayout.options );
		for (var n in Instance)
			if (!n.match(/^(container|options)$/)) delete Instance[ n ];
		// add a 'destroyed' flag to make it easy to check
		Instance.destroyed = true;

		// if this is a child layout, CLEAR the child-pointer in the parent
		/* for now the pointer REMAINS, but with only container, options and destroyed keys
		if (parentPane) {
			var layout	= parentPane.pane.data("parentLayout")
			,	key		= layout.options.instanceKey || 'error';
			// THIS SYNTAX MAY BE WRONG!
			parentPane.children[key] = layout.children[ parentPane.name ].children[key] = null;
		}
		*/

		return Instance; // for coding convenience
	}

	/**
	 * Remove a pane from the layout - subroutine of destroy()
	 *
	 * @see  destroy()
	 * @param {(string|Object)}	evt_or_pane			The pane to process
	 * @param {boolean=}			[remove=false]		Remove the DOM element?
	 * @param {boolean=}			[skipResize=false]	Skip calling resizeAll()?
	 * @param {boolean=}			[destroyChild=true]	Destroy Child-layouts? If not passed, obeys options setting
	 */
,	removePane = function (evt_or_pane, remove, skipResize, destroyChild) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$P	= $Ps[pane]
		,	$C	= $Cs[pane]
		,	$R	= $Rs[pane]
		,	$T	= $Ts[pane]
		;
		// NOTE: elements can still exist even after remove()
		//		so check for missing data(), which is cleared by removed()
		if ($P && $.isEmptyObject( $P.data() )) $P = false;
		if ($C && $.isEmptyObject( $C.data() )) $C = false;
		if ($R && $.isEmptyObject( $R.data() )) $R = false;
		if ($T && $.isEmptyObject( $T.data() )) $T = false;

		if ($P) $P.stop(true, true);

		var	o	= options[pane]
		,	s	= state[pane]
		,	d	= "layout"
		,	css	= "layoutCSS"
		,	pC	= children[pane]
		,	hasChildren	= $.isPlainObject( pC ) && !$.isEmptyObject( pC )
		,	destroy		= destroyChild !== undefined ? destroyChild : o.destroyChildren
		;
		// FIRST destroy the child-layout(s)
		if (hasChildren && destroy) {
			$.each( pC, function (key, child) {
				if (!child.destroyed)
					child.destroy(true);// tell child-layout to destroy ALL its child-layouts too
				if (child.destroyed)	// destroy was successful
					delete pC[key];
			});
			// if no more children, remove the children hash
			if ($.isEmptyObject( pC )) {
				pC = children[pane] = null; // clear children hash
				hasChildren = false;
			}
		}

		// Note: can't 'remove' a pane element with non-destroyed children
		if ($P && remove && !hasChildren)
			$P.remove(); // remove the pane-element and everything inside it
		else if ($P && $P[0]) {
			//	create list of ALL pane-classes that need to be removed
			var	root	= o.paneClass // default="ui-layout-pane"
			,	pRoot	= root +"-"+ pane // eg: "ui-layout-pane-west"
			,	_open	= "-open"
			,	_sliding= "-sliding"
			,	_closed	= "-closed"
			,	classes	= [	root, root+_open, root+_closed, root+_sliding,		// generic classes
							pRoot, pRoot+_open, pRoot+_closed, pRoot+_sliding ]	// pane-specific classes
			;
			$.merge(classes, getHoverClasses($P, true)); // ADD hover-classes
			// remove all Layout classes from pane-element
			$P	.removeClass( classes.join(" ") ) // remove ALL pane-classes
				.removeData("parentLayout")
				.removeData("layoutPane")
				.removeData("layoutRole")
				.removeData("layoutEdge")
				.removeData("autoHidden")	// in case set
				.unbind("."+ sID) // remove ALL Layout events
				// TODO: remove these extra unbind commands when jQuery is fixed
				//.unbind("mouseenter"+ sID)
				//.unbind("mouseleave"+ sID)
			;
			// do NOT reset CSS if this pane/content is STILL the container of a nested layout!
			// the nested layout will reset its 'container' CSS when/if it is destroyed
			if (hasChildren && $C) {
				// a content-div may not have a specific width, so give it one to contain the Layout
				$C.width( $C.width() );
				$.each( pC, function (key, child) {
					child.resizeAll(); // resize the Layout
				});
			}
			else if ($C)
				$C.css( $C.data(css) ).removeData(css).removeData("layoutRole");
			// remove pane AFTER content in case there was a nested layout
			if (!$P.data(d))
				$P.css( $P.data(css) ).removeData(css);
		}

		// REMOVE pane resizer and toggler elements
		if ($T) $T.remove();
		if ($R) $R.remove();

		// CLEAR all pointers and state data
		Instance[pane] = $Ps[pane] = $Cs[pane] = $Rs[pane] = $Ts[pane] = false;
		s = { removed: true };

		if (!skipResize)
			resizeAll();
	}


/*
 * ###########################
 *	   ACTION METHODS
 * ###########################
 */

	/**
	 * @param {string}	pane
	 */
,	_hidePane = function (pane) {
		var $P	= $Ps[pane]
		,	o	= options[pane]
		,	s	= $P[0].style
		;
		if (o.useOffscreenClose) {
			if (!$P.data(_c.offscreenReset))
				$P.data(_c.offscreenReset, { left: s.left, right: s.right });
			$P.css( _c.offscreenCSS );
		}
		else
			$P.hide().removeData(_c.offscreenReset);
	}

	/**
	 * @param {string}	pane
	 */
,	_showPane = function (pane) {
		var $P	= $Ps[pane]
		,	o	= options[pane]
		,	off	= _c.offscreenCSS
		,	old	= $P.data(_c.offscreenReset)
		,	s	= $P[0].style
		;
		$P	.show() // ALWAYS show, just in case
			.removeData(_c.offscreenReset);
		if (o.useOffscreenClose && old) {
			if (s.left == off.left)
				s.left = old.left;
			if (s.right == off.right)
				s.right = old.right;
		}
	}


	/**
	 * Completely 'hides' a pane, including its spacing - as if it does not exist
	 * The pane is not actually 'removed' from the source, so can use 'show' to un-hide it
	 *
	 * @param {(string|Object)}	evt_or_pane			The pane being hidden, ie: north, south, east, or west
	 * @param {boolean=}			[noAnimation=false]	
	 */
,	hide = function (evt_or_pane, noAnimation) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	o	= options[pane]
		,	s	= state[pane]
		,	$P	= $Ps[pane]
		,	$R	= $Rs[pane]
		;
		if (pane === "center" || !$P || s.isHidden) return; // pane does not exist OR is already hidden

		// onhide_start callback - will CANCEL hide if returns false
		if (state.initialized && false === _runCallbacks("onhide_start", pane)) return;

		s.isSliding = false; // just in case
		delete state.panesSliding[pane];

		// now hide the elements
		if ($R) $R.hide(); // hide resizer-bar
		if (!state.initialized || s.isClosed) {
			s.isClosed = true; // to trigger open-animation on show()
			s.isHidden  = true;
			s.isVisible = false;
			if (!state.initialized)
				_hidePane(pane); // no animation when loading page
			sizeMidPanes(_c[pane].dir === "horz" ? "" : "center");
			if (state.initialized || o.triggerEventsOnLoad)
				_runCallbacks("onhide_end", pane);
		}
		else {
			s.isHiding = true; // used by onclose
			close(pane, false, noAnimation); // adjust all panes to fit
		}
	}

	/**
	 * Show a hidden pane - show as 'closed' by default unless openPane = true
	 *
	 * @param {(string|Object)}	evt_or_pane			The pane being opened, ie: north, south, east, or west
	 * @param {boolean=}			[openPane=false]
	 * @param {boolean=}			[noAnimation=false]
	 * @param {boolean=}			[noAlert=false]
	 */
,	show = function (evt_or_pane, openPane, noAnimation, noAlert) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	o	= options[pane]
		,	s	= state[pane]
		,	$P	= $Ps[pane]
		,	$R	= $Rs[pane]
		;
		if (pane === "center" || !$P || !s.isHidden) return; // pane does not exist OR is not hidden

		// onshow_start callback - will CANCEL show if returns false
		if (false === _runCallbacks("onshow_start", pane)) return;

		s.isShowing = true; // used by onopen/onclose
		//s.isHidden  = false; - will be set by open/close - if not cancelled
		s.isSliding = false; // just in case
		delete state.panesSliding[pane];

		// now show the elements
		//if ($R) $R.show(); - will be shown by open/close
		if (openPane === false)
			close(pane, true); // true = force
		else
			open(pane, false, noAnimation, noAlert); // adjust all panes to fit
	}


	/**
	 * Toggles a pane open/closed by calling either open or close
	 *
	 * @param {(string|Object)}	evt_or_pane		The pane being toggled, ie: north, south, east, or west
	 * @param {boolean=}			[slide=false]
	 */
,	toggle = function (evt_or_pane, slide) {
		if (!isInitialized()) return;
		var	evt		= evtObj(evt_or_pane)
		,	pane	= evtPane.call(this, evt_or_pane)
		,	s		= state[pane]
		;
		if (evt) // called from to $R.dblclick OR triggerPaneEvent
			evt.stopImmediatePropagation();
		if (s.isHidden)
			show(pane); // will call 'open' after unhiding it
		else if (s.isClosed)
			open(pane, !!slide);
		else
			close(pane);
	}


	/**
	 * Utility method used during init or other auto-processes
	 *
	 * @param {string}	pane   The pane being closed
	 * @param {boolean=}	[setHandles=false]
	 */
,	_closePane = function (pane, setHandles) {
		var
			$P	= $Ps[pane]
		,	s	= state[pane]
		;
		_hidePane(pane);
		s.isClosed = true;
		s.isVisible = false;
		if (setHandles) setAsClosed(pane);
	}

	/**
	 * Close the specified pane (animation optional), and resize all other panes as needed
	 *
	 * @param {(string|Object)}	evt_or_pane			The pane being closed, ie: north, south, east, or west
	 * @param {boolean=}			[force=false]
	 * @param {boolean=}			[noAnimation=false]
	 * @param {boolean=}			[skipCallback=false]
	 */
,	close = function (evt_or_pane, force, noAnimation, skipCallback) {
		var	pane = evtPane.call(this, evt_or_pane);
		if (pane === "center") return; // validate
		// if pane has been initialized, but NOT the complete layout, close pane instantly
		if (!state.initialized && $Ps[pane]) {
			_closePane(pane, true); // INIT pane as closed
			return;
		}
		if (!isInitialized()) return;

		var
			$P	= $Ps[pane]
		,	$R	= $Rs[pane]
		,	$T	= $Ts[pane]
		,	o	= options[pane]
		,	s	= state[pane]
		,	c	= _c[pane]
		,	doFX, isShowing, isHiding, wasSliding;

		// QUEUE in case another action/animation is in progress
		$N.queue(function( queueNext ){

			if ( !$P
			||	(!o.closable && !s.isShowing && !s.isHiding)	// invalid request // (!o.resizable && !o.closable) ???
			||	(!force && s.isClosed && !s.isShowing)			// already closed
			) return queueNext();

			// onclose_start callback - will CANCEL hide if returns false
			// SKIP if just 'showing' a hidden pane as 'closed'
			var abort = !s.isShowing && false === _runCallbacks("onclose_start", pane);

			// transfer logic vars to temp vars
			isShowing	= s.isShowing;
			isHiding	= s.isHiding;
			wasSliding	= s.isSliding;
			// now clear the logic vars (REQUIRED before aborting)
			delete s.isShowing;
			delete s.isHiding;

			if (abort) return queueNext();

			doFX		= !noAnimation && !s.isClosed && (o.fxName_close != "none");
			s.isMoving	= true;
			s.isClosed	= true;
			s.isVisible	= false;
			// update isHidden BEFORE sizing panes
			if (isHiding) s.isHidden = true;
			else if (isShowing) s.isHidden = false;

			if (s.isSliding) // pane is being closed, so UNBIND trigger events
				bindStopSlidingEvents(pane, false); // will set isSliding=false
			else // resize panes adjacent to this one
				sizeMidPanes(_c[pane].dir === "horz" ? "" : "center", false); // false = NOT skipCallback

			// if this pane has a resizer bar, move it NOW - before animation
			setAsClosed(pane);

			// CLOSE THE PANE
			if (doFX) { // animate the close
				lockPaneForFX(pane, true);	// need to set left/top so animation will work
				$P.hide( o.fxName_close, o.fxSettings_close, o.fxSpeed_close, function () {
					lockPaneForFX(pane, false); // undo
					if (s.isClosed) close_2();
					queueNext();
				});
			}
			else { // hide the pane without animation
				_hidePane(pane);
				close_2();
				queueNext();
			};
		});

		// SUBROUTINE
		function close_2 () {
			s.isMoving	= false;
			bindStartSlidingEvents(pane, true); // will enable if o.slidable = true

			// if opposite-pane was autoClosed, see if it can be autoOpened now
			var altPane = _c.oppositeEdge[pane];
			if (state[ altPane ].noRoom) {
				setSizeLimits( altPane );
				makePaneFit( altPane );
			}

			if (!skipCallback && (state.initialized || o.triggerEventsOnLoad)) {
				// onclose callback - UNLESS just 'showing' a hidden pane as 'closed'
				if (!isShowing)	_runCallbacks("onclose_end", pane);
				// onhide OR onshow callback
				if (isShowing)	_runCallbacks("onshow_end", pane);
				if (isHiding)	_runCallbacks("onhide_end", pane);
			}
		}
	}

	/**
	 * @param {string}	pane	The pane just closed, ie: north, south, east, or west
	 */
,	setAsClosed = function (pane) {
		if (!$Rs[pane]) return; // handles not initialized yet!
		var
			$P		= $Ps[pane]
		,	$R		= $Rs[pane]
		,	$T		= $Ts[pane]
		,	o		= options[pane]
		,	s		= state[pane]
		,	side	= _c[pane].side
		,	rClass	= o.resizerClass
		,	tClass	= o.togglerClass
		,	_pane	= "-"+ pane // used for classNames
		,	_open	= "-open"
		,	_sliding= "-sliding"
		,	_closed	= "-closed"
		;
		$R
			.css(side, sC.inset[side]) // move the resizer
			.removeClass( rClass+_open +" "+ rClass+_pane+_open )
			.removeClass( rClass+_sliding +" "+ rClass+_pane+_sliding )
			.addClass( rClass+_closed +" "+ rClass+_pane+_closed )
		;
		// handle already-hidden panes in case called by swap() or a similar method 
		if (s.isHidden) $R.hide(); // hide resizer-bar 

		// DISABLE 'resizing' when closed - do this BEFORE bindStartSlidingEvents?
		if (o.resizable && $.layout.plugins.draggable)
			$R
				.draggable("disable")
				.removeClass("ui-state-disabled") // do NOT apply disabled styling - not suitable here
				.css("cursor", "default")
				.attr("title","")
			;

		// if pane has a toggler button, adjust that too
		if ($T) {
			$T
				.removeClass( tClass+_open +" "+ tClass+_pane+_open )
				.addClass( tClass+_closed +" "+ tClass+_pane+_closed )
				.attr("title", o.tips.Open) // may be blank
			;
			// toggler-content - if exists
			$T.children(".content-open").hide();
			$T.children(".content-closed").css("display","block");
		}

		// sync any 'pin buttons'
		syncPinBtns(pane, false);

		if (state.initialized) {
			// resize 'length' and position togglers for adjacent panes
			sizeHandles();
		}
	}

	/**
	 * Open the specified pane (animation optional), and resize all other panes as needed
	 *
	 * @param {(string|Object)}	evt_or_pane			The pane being opened, ie: north, south, east, or west
	 * @param {boolean=}			[slide=false]
	 * @param {boolean=}			[noAnimation=false]
	 * @param {boolean=}			[noAlert=false]
	 */
,	open = function (evt_or_pane, slide, noAnimation, noAlert) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$P	= $Ps[pane]
		,	$R	= $Rs[pane]
		,	$T	= $Ts[pane]
		,	o	= options[pane]
		,	s	= state[pane]
		,	c	= _c[pane]
		,	doFX, isShowing
		;
		if (pane === "center") return; // validate
		// QUEUE in case another action/animation is in progress
		$N.queue(function( queueNext ){

			if ( !$P
			||	(!o.resizable && !o.closable && !s.isShowing)	// invalid request
			||	(s.isVisible && !s.isSliding)					// already open
			) return queueNext();

			// pane can ALSO be unhidden by just calling show(), so handle this scenario
			if (s.isHidden && !s.isShowing) {
				queueNext(); // call before show() because it needs the queue free
				show(pane, true);
				return;
			}

			if (s.autoResize && s.size != o.size) // resize pane to original size set in options
				sizePane(pane, o.size, true, true, true); // true=skipCallback/noAnimation/forceResize
			else
				// make sure there is enough space available to open the pane
				setSizeLimits(pane, slide);

			// onopen_start callback - will CANCEL open if returns false
			var cbReturn = _runCallbacks("onopen_start", pane);

			if (cbReturn === "abort")
				return queueNext();

			// update pane-state again in case options were changed in onopen_start
			if (cbReturn !== "NC") // NC = "No Callback"
				setSizeLimits(pane, slide);

			if (s.minSize > s.maxSize) { // INSUFFICIENT ROOM FOR PANE TO OPEN!
				syncPinBtns(pane, false); // make sure pin-buttons are reset
				if (!noAlert && o.tips.noRoomToOpen)
					alert(o.tips.noRoomToOpen);
				return queueNext(); // ABORT
			}

			if (slide) // START Sliding - will set isSliding=true
				bindStopSlidingEvents(pane, true); // BIND trigger events to close sliding-pane
			else if (s.isSliding) // PIN PANE (stop sliding) - open pane 'normally' instead
				bindStopSlidingEvents(pane, false); // UNBIND trigger events - will set isSliding=false
			else if (o.slidable)
				bindStartSlidingEvents(pane, false); // UNBIND trigger events

			s.noRoom = false; // will be reset by makePaneFit if 'noRoom'
			makePaneFit(pane);

			// transfer logic var to temp var
			isShowing = s.isShowing;
			// now clear the logic var
			delete s.isShowing;

			doFX		= !noAnimation && s.isClosed && (o.fxName_open != "none");
			s.isMoving	= true;
			s.isVisible	= true;
			s.isClosed	= false;
			// update isHidden BEFORE sizing panes - WHY??? Old?
			if (isShowing) s.isHidden = false;

			if (doFX) { // ANIMATE
				// mask adjacent panes with objects
				lockPaneForFX(pane, true);	// need to set left/top so animation will work
					$P.show( o.fxName_open, o.fxSettings_open, o.fxSpeed_open, function() {
					lockPaneForFX(pane, false); // undo
					if (s.isVisible) open_2(); // continue
					queueNext();
				});
			}
			else { // no animation
				_showPane(pane);// just show pane and...
				open_2();		// continue
				queueNext();
			};
		});

		// SUBROUTINE
		function open_2 () {
			s.isMoving	= false;

			// cure iframe display issues
			_fixIframe(pane);

			// NOTE: if isSliding, then other panes are NOT 'resized'
			if (!s.isSliding) { // resize all panes adjacent to this one
				sizeMidPanes(_c[pane].dir=="vert" ? "center" : "", false); // false = NOT skipCallback
			}

			// set classes, position handles and execute callbacks...
			setAsOpen(pane);
		};
	
	}

	/**
	 * @param {string}	pane		The pane just opened, ie: north, south, east, or west
	 * @param {boolean=}	[skipCallback=false]
	 */
,	setAsOpen = function (pane, skipCallback) {
		var 
			$P		= $Ps[pane]
		,	$R		= $Rs[pane]
		,	$T		= $Ts[pane]
		,	o		= options[pane]
		,	s		= state[pane]
		,	side	= _c[pane].side
		,	rClass	= o.resizerClass
		,	tClass	= o.togglerClass
		,	_pane	= "-"+ pane // used for classNames
		,	_open	= "-open"
		,	_closed	= "-closed"
		,	_sliding= "-sliding"
		;
		$R
			.css(side, sC.inset[side] + getPaneSize(pane)) // move the resizer
			.removeClass( rClass+_closed +" "+ rClass+_pane+_closed )
			.addClass( rClass+_open +" "+ rClass+_pane+_open )
		;
		if (s.isSliding)
			$R.addClass( rClass+_sliding +" "+ rClass+_pane+_sliding )
		else // in case 'was sliding'
			$R.removeClass( rClass+_sliding +" "+ rClass+_pane+_sliding )

		removeHover( 0, $R ); // remove hover classes
		if (o.resizable && $.layout.plugins.draggable)
			$R	.draggable("enable")
				.css("cursor", o.resizerCursor)
				.attr("title", o.tips.Resize);
		else if (!s.isSliding)
			$R.css("cursor", "default"); // n-resize, s-resize, etc

		// if pane also has a toggler button, adjust that too
		if ($T) {
			$T	.removeClass( tClass+_closed +" "+ tClass+_pane+_closed )
				.addClass( tClass+_open +" "+ tClass+_pane+_open )
				.attr("title", o.tips.Close); // may be blank
			removeHover( 0, $T ); // remove hover classes
			// toggler-content - if exists
			$T.children(".content-closed").hide();
			$T.children(".content-open").css("display","block");
		}

		// sync any 'pin buttons'
		syncPinBtns(pane, !s.isSliding);

		// update pane-state dimensions - BEFORE resizing content
		$.extend(s, elDims($P));

		if (state.initialized) {
			// resize resizer & toggler sizes for all panes
			sizeHandles();
			// resize content every time pane opens - to be sure
			sizeContent(pane, true); // true = remeasure headers/footers, even if 'pane.isMoving'
		}

		if (!skipCallback && (state.initialized || o.triggerEventsOnLoad) && $P.is(":visible")) {
			// onopen callback
			_runCallbacks("onopen_end", pane);
			// onshow callback - TODO: should this be here?
			if (s.isShowing) _runCallbacks("onshow_end", pane);

			// ALSO call onresize because layout-size *may* have changed while pane was closed
			if (state.initialized)
				_runCallbacks("onresize_end", pane);
		}

		// TODO: Somehow sizePane("north") is being called after this point???
	}


	/**
	 * slideOpen / slideClose / slideToggle
	 *
	 * Pass-though methods for sliding
	 */
,	slideOpen = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	evt		= evtObj(evt_or_pane)
		,	pane	= evtPane.call(this, evt_or_pane)
		,	s		= state[pane]
		,	delay	= options[pane].slideDelay_open
		;
		if (pane === "center") return; // validate
		// prevent event from triggering on NEW resizer binding created below
		if (evt) evt.stopImmediatePropagation();

		if (s.isClosed && evt && evt.type === "mouseenter" && delay > 0)
			// trigger = mouseenter - use a delay
			timer.set(pane+"_openSlider", open_NOW, delay);
		else
			open_NOW(); // will unbind events if is already open

		/**
		 * SUBROUTINE for timed open
		 */
		function open_NOW () {
			if (!s.isClosed) // skip if no longer closed!
				bindStopSlidingEvents(pane, true); // BIND trigger events to close sliding-pane
			else if (!s.isMoving)
				open(pane, true); // true = slide - open() will handle binding
		};
	}

,	slideClose = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	evt		= evtObj(evt_or_pane)
		,	pane	= evtPane.call(this, evt_or_pane)
		,	o		= options[pane]
		,	s		= state[pane]
		,	delay	= s.isMoving ? 1000 : 300 // MINIMUM delay - option may override
		;
		if (pane === "center") return; // validate
		if (s.isClosed || s.isResizing)
			return; // skip if already closed OR in process of resizing
		else if (o.slideTrigger_close === "click")
			close_NOW(); // close immediately onClick
		else if (o.preventQuickSlideClose && s.isMoving)
			return; // handle Chrome quick-close on slide-open
		else if (o.preventPrematureSlideClose && evt && $.layout.isMouseOverElem(evt, $Ps[pane]))
			return; // handle incorrect mouseleave trigger, like when over a SELECT-list in IE
		else if (evt) // trigger = mouseleave - use a delay
			// 1 sec delay if 'opening', else .3 sec
			timer.set(pane+"_closeSlider", close_NOW, max(o.slideDelay_close, delay));
		else // called programically
			close_NOW();

		/**
		 * SUBROUTINE for timed close
		 */
		function close_NOW () {
			if (s.isClosed) // skip 'close' if already closed!
				bindStopSlidingEvents(pane, false); // UNBIND trigger events - TODO: is this needed here?
			else if (!s.isMoving)
				close(pane); // close will handle unbinding
		};
	}

	/**
	 * @param {(string|Object)}	evt_or_pane		The pane being opened, ie: north, south, east, or west
	 */
,	slideToggle = function (evt_or_pane) {
		var pane = evtPane.call(this, evt_or_pane);
		toggle(pane, true);
	}


	/**
	 * Must set left/top on East/South panes so animation will work properly
	 *
	 * @param {string}	pane	The pane to lock, 'east' or 'south' - any other is ignored!
	 * @param {boolean}	doLock  true = set left/top, false = remove
	 */
,	lockPaneForFX = function (pane, doLock) {
		var $P	= $Ps[pane]
		,	s	= state[pane]
		,	o	= options[pane]
		,	z	= options.zIndexes
		;
		if (doLock) {
			showMasks( pane, { animation: true, objectsOnly: true });
			$P.css({ zIndex: z.pane_animate }); // overlay all elements during animation
			if (pane=="south")
				$P.css({ top: sC.inset.top + sC.innerHeight - $P.outerHeight() });
			else if (pane=="east")
				$P.css({ left: sC.inset.left + sC.innerWidth - $P.outerWidth() });
		}
		else { // animation DONE - RESET CSS
			hideMasks();
			$P.css({ zIndex: (s.isSliding ? z.pane_sliding : z.pane_normal) });
			if (pane=="south")
				$P.css({ top: "auto" });
			// if pane is positioned 'off-screen', then DO NOT screw with it!
			else if (pane=="east" && !$P.css("left").match(/\-99999/))
				$P.css({ left: "auto" });
			// fix anti-aliasing in IE - only needed for animations that change opacity
			if (browser.msie && o.fxOpacityFix && o.fxName_open != "slide" && $P.css("filter") && $P.css("opacity") == 1)
				$P[0].style.removeAttribute('filter');
		}
	}


	/**
	 * Toggle sliding functionality of a specific pane on/off by adding removing 'slide open' trigger
	 *
	 * @see  open(), close()
	 * @param {string}	pane	The pane to enable/disable, 'north', 'south', etc.
	 * @param {boolean}	enable	Enable or Disable sliding?
	 */
,	bindStartSlidingEvents = function (pane, enable) {
		var o		= options[pane]
		,	$P		= $Ps[pane]
		,	$R		= $Rs[pane]
		,	evtName	= o.slideTrigger_open.toLowerCase()
		;
		if (!$R || (enable && !o.slidable)) return;

		// make sure we have a valid event
		if (evtName.match(/mouseover/))
			evtName = o.slideTrigger_open = "mouseenter";
		else if (!evtName.match(/(click|dblclick|mouseenter)/)) 
			evtName = o.slideTrigger_open = "click";

		// must remove double-click-toggle when using dblclick-slide
		if (o.resizerDblClickToggle && evtName.match(/click/)) {
			$R[enable ? "unbind" : "bind"]('dblclick.'+ sID, toggle)
		}

		$R
			// add or remove event
			[enable ? "bind" : "unbind"](evtName +'.'+ sID, slideOpen)
			// set the appropriate cursor & title/tip
			.css("cursor", enable ? o.sliderCursor : "default")
			.attr("title", enable ? o.tips.Slide : "")
		;
	}

	/**
	 * Add or remove 'mouseleave' events to 'slide close' when pane is 'sliding' open or closed
	 * Also increases zIndex when pane is sliding open
	 * See bindStartSlidingEvents for code to control 'slide open'
	 *
	 * @see  slideOpen(), slideClose()
	 * @param {string}	pane	The pane to process, 'north', 'south', etc.
	 * @param {boolean}	enable	Enable or Disable events?
	 */
,	bindStopSlidingEvents = function (pane, enable) {
		var	o		= options[pane]
		,	s		= state[pane]
		,	c		= _c[pane]
		,	z		= options.zIndexes
		,	evtName	= o.slideTrigger_close.toLowerCase()
		,	action	= (enable ? "bind" : "unbind")
		,	$P		= $Ps[pane]
		,	$R		= $Rs[pane]
		;
		timer.clear(pane+"_closeSlider"); // just in case

		if (enable) {
			s.isSliding = true;
			state.panesSliding[pane] = true;
			// remove 'slideOpen' event from resizer
			// ALSO will raise the zIndex of the pane & resizer
			bindStartSlidingEvents(pane, false);
		}
		else {
			s.isSliding = false;
			delete state.panesSliding[pane];
		}

		// RE/SET zIndex - increases when pane is sliding-open, resets to normal when not
		$P.css("zIndex", enable ? z.pane_sliding : z.pane_normal);
		$R.css("zIndex", enable ? z.pane_sliding+2 : z.resizer_normal); // NOTE: mask = pane_sliding+1

		// make sure we have a valid event
		if (!evtName.match(/(click|mouseleave)/))
			evtName = o.slideTrigger_close = "mouseleave"; // also catches 'mouseout'

		// add/remove slide triggers
		$R[action](evtName, slideClose); // base event on resize
		// need extra events for mouseleave
		if (evtName === "mouseleave") {
			// also close on pane.mouseleave
			$P[action]("mouseleave."+ sID, slideClose);
			// cancel timer when mouse moves between 'pane' and 'resizer'
			$R[action]("mouseenter."+ sID, cancelMouseOut);
			$P[action]("mouseenter."+ sID, cancelMouseOut);
		}

		if (!enable)
			timer.clear(pane+"_closeSlider");
		else if (evtName === "click" && !o.resizable) {
			// IF pane is not resizable (which already has a cursor and tip) 
			// then set the a cursor & title/tip on resizer when sliding
			$R.css("cursor", enable ? o.sliderCursor : "default");
			$R.attr("title", enable ? o.tips.Close : ""); // use Toggler-tip, eg: "Close Pane"
		}

		// SUBROUTINE for mouseleave timer clearing
		function cancelMouseOut (evt) {
			timer.clear(pane+"_closeSlider");
			evt.stopPropagation();
		}
	}


	/**
	 * Hides/closes a pane if there is insufficient room - reverses this when there is room again
	 * MUST have already called setSizeLimits() before calling this method
	 *
	 * @param {string}	pane					The pane being resized
	 * @param {boolean=}	[isOpening=false]		Called from onOpen?
	 * @param {boolean=}	[skipCallback=false]	Should the onresize callback be run?
	 * @param {boolean=}	[force=false]
	 */
,	makePaneFit = function (pane, isOpening, skipCallback, force) {
		var	o	= options[pane]
		,	s	= state[pane]
		,	c	= _c[pane]
		,	$P	= $Ps[pane]
		,	$R	= $Rs[pane]
		,	isSidePane 	= c.dir==="vert"
		,	hasRoom		= false
		;
		// special handling for center & east/west panes
		if (pane === "center" || (isSidePane && s.noVerticalRoom)) {
			// see if there is enough room to display the pane
			// ERROR: hasRoom = s.minHeight <= s.maxHeight && (isSidePane || s.minWidth <= s.maxWidth);
			hasRoom = (s.maxHeight >= 0);
			if (hasRoom && s.noRoom) { // previously hidden due to noRoom, so show now
				_showPane(pane);
				if ($R) $R.show();
				s.isVisible = true;
				s.noRoom = false;
				if (isSidePane) s.noVerticalRoom = false;
				_fixIframe(pane);
			}
			else if (!hasRoom && !s.noRoom) { // not currently hidden, so hide now
				_hidePane(pane);
				if ($R) $R.hide();
				s.isVisible = false;
				s.noRoom = true;
			}
		}

		// see if there is enough room to fit the border-pane
		if (pane === "center") {
			// ignore center in this block
		}
		else if (s.minSize <= s.maxSize) { // pane CAN fit
			hasRoom = true;
			if (s.size > s.maxSize) // pane is too big - shrink it
				sizePane(pane, s.maxSize, skipCallback, true, force); // true = noAnimation
			else if (s.size < s.minSize) // pane is too small - enlarge it
				sizePane(pane, s.minSize, skipCallback, true, force); // true = noAnimation
			// need s.isVisible because new pseudoClose method keeps pane visible, but off-screen
			else if ($R && s.isVisible && $P.is(":visible")) {
				// make sure resizer-bar is positioned correctly
				// handles situation where nested layout was 'hidden' when initialized
				var	pos = s.size + sC.inset[c.side];
				if ($.layout.cssNum( $R, c.side ) != pos) $R.css( c.side, pos );
			}

			// if was previously hidden due to noRoom, then RESET because NOW there is room
			if (s.noRoom) {
				// s.noRoom state will be set by open or show
				if (s.wasOpen && o.closable) {
					if (o.autoReopen)
						open(pane, false, true, true); // true = noAnimation, true = noAlert
					else // leave the pane closed, so just update state
						s.noRoom = false;
				}
				else
					show(pane, s.wasOpen, true, true); // true = noAnimation, true = noAlert
			}
		}
		else { // !hasRoom - pane CANNOT fit
			if (!s.noRoom) { // pane not set as noRoom yet, so hide or close it now...
				s.noRoom = true; // update state
				s.wasOpen = !s.isClosed && !s.isSliding;
				if (s.isClosed){} // SKIP
				else if (o.closable) // 'close' if possible
					close(pane, true, true); // true = force, true = noAnimation
				else // 'hide' pane if cannot just be closed
					hide(pane, true); // true = noAnimation
			}
		}
	}


	/**
	 * manualSizePane is an exposed flow-through method allowing extra code when pane is 'manually resized'
	 *
	 * @param {(string|Object)}	evt_or_pane				The pane being resized
	 * @param {number}			size					The *desired* new size for this pane - will be validated
	 * @param {boolean=}			[skipCallback=false]	Should the onresize callback be run?
	 * @param {boolean=}			[noAnimation=false]
	 * @param {boolean=}			[force=false]			Force resizing even if does not seem necessary
	 */
,	manualSizePane = function (evt_or_pane, size, skipCallback, noAnimation, force) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	o	= options[pane]
		,	s	= state[pane]
		//	if resizing callbacks have been delayed and resizing is now DONE, force resizing to complete...
		,	forceResize = force || (o.livePaneResizing && !s.isResizing)
		;
		if (pane === "center") return; // validate
		// ANY call to manualSizePane disables autoResize - ie, percentage sizing
		s.autoResize = false;
		// flow-through...
		sizePane(pane, size, skipCallback, noAnimation, forceResize); // will animate resize if option enabled
	}

	/**
	 * sizePane is called only by internal methods whenever a pane needs to be resized
	 *
	 * @param {(string|Object)}	evt_or_pane				The pane being resized
	 * @param {number}			size					The *desired* new size for this pane - will be validated
	 * @param {boolean=}			[skipCallback=false]	Should the onresize callback be run?
	 * @param {boolean=}			[noAnimation=false]
	 * @param {boolean=}			[force=false]			Force resizing even if does not seem necessary
	 */
,	sizePane = function (evt_or_pane, size, skipCallback, noAnimation, force) {
		if (!isInitialized()) return;
		var	pane	= evtPane.call(this, evt_or_pane) // probably NEVER called from event?
		,	o		= options[pane]
		,	s		= state[pane]
		,	$P		= $Ps[pane]
		,	$R		= $Rs[pane]
		,	side	= _c[pane].side
		,	dimName	= _c[pane].sizeType.toLowerCase()
		,	skipResizeWhileDragging = s.isResizing && !o.triggerEventsDuringLiveResize
		,	doFX	= noAnimation !== true && o.animatePaneSizing
		,	oldSize, newSize
		;
		if (pane === "center") return; // validate
		// QUEUE in case another action/animation is in progress
		$N.queue(function( queueNext ){
			// calculate 'current' min/max sizes
			setSizeLimits(pane); // update pane-state
			oldSize = s.size;
			size = _parseSize(pane, size); // handle percentages & auto
			size = max(size, _parseSize(pane, o.minSize));
			size = min(size, s.maxSize);
			if (size < s.minSize) { // not enough room for pane!
				queueNext(); // call before makePaneFit() because it needs the queue free
				makePaneFit(pane, false, skipCallback);	// will hide or close pane
				return;
			}

			// IF newSize is same as oldSize, then nothing to do - abort
			if (!force && size === oldSize)
				return queueNext();

			s.newSize = size;

			// onresize_start callback CANNOT cancel resizing because this would break the layout!
			if (!skipCallback && state.initialized && s.isVisible)
				_runCallbacks("onresize_start", pane);

			// resize the pane, and make sure its visible
			newSize = cssSize(pane, size);

			if (doFX && $P.is(":visible")) { // ANIMATE
				var fx		= $.layout.effects.size[pane] || $.layout.effects.size.all
				,	easing	= o.fxSettings_size.easing || fx.easing
				,	z		= options.zIndexes
				,	props	= {};
				props[ dimName ] = newSize +'px';
				s.isMoving = true;
				// overlay all elements during animation
				$P.css({ zIndex: z.pane_animate })
				  .show().animate( props, o.fxSpeed_size, easing, function(){
					// reset zIndex after animation
					$P.css({ zIndex: (s.isSliding ? z.pane_sliding : z.pane_normal) });
					s.isMoving = false;
					delete s.newSize;
					sizePane_2(); // continue
					queueNext();
				});
			}
			else { // no animation
				$P.css( dimName, newSize );	// resize pane
				delete s.newSize;
				// if pane is visible, then 
				if ($P.is(":visible"))
					sizePane_2(); // continue
				else {
					// pane is NOT VISIBLE, so just update state data...
					// when pane is *next opened*, it will have the new size
					s.size = size;				// update state.size
					//$.extend(s, elDims($P));	// update state dimensions - CANNOT do this when not visible!				}
				}
				queueNext();
			};

		});

		// SUBROUTINE
		function sizePane_2 () {
			/*	Panes are sometimes not sized precisely in some browsers!?
			 *	This code will resize the pane up to 3 times to nudge the pane to the correct size
			 */
			var	actual	= dimName==='width' ? $P.outerWidth() : $P.outerHeight()
			,	tries	= [{
						   	pane:		pane
						,	count:		1
						,	target:		size
						,	actual:		actual
						,	correct:	(size === actual)
						,	attempt:	size
						,	cssSize:	newSize
						}]
			,	lastTry = tries[0]
			,	thisTry	= {}
			,	msg		= 'Inaccurate size after resizing the '+ pane +'-pane.'
			;
			while ( !lastTry.correct ) {
				thisTry = { pane: pane, count: lastTry.count+1, target: size };

				if (lastTry.actual > size)
					thisTry.attempt = max(0, lastTry.attempt - (lastTry.actual - size));
				else // lastTry.actual < size
					thisTry.attempt = max(0, lastTry.attempt + (size - lastTry.actual));

				thisTry.cssSize = cssSize(pane, thisTry.attempt);
				$P.css( dimName, thisTry.cssSize );

				thisTry.actual	= dimName=='width' ? $P.outerWidth() : $P.outerHeight();
				thisTry.correct	= (size === thisTry.actual);

				// log attempts and alert the user of this *non-fatal error* (if showDebugMessages)
				if ( tries.length === 1) {
					_log(msg, false, true);
					_log(lastTry, false, true);
				}
				_log(thisTry, false, true);
				// after 4 tries, is as close as its gonna get!
				if (tries.length > 3) break;

				tries.push( thisTry );
				lastTry = tries[ tries.length - 1 ];
			}
			// END TESTING CODE

			// update pane-state dimensions
			s.size	= size;
			$.extend(s, elDims($P));

			if (s.isVisible && $P.is(":visible")) {
				// reposition the resizer-bar
				if ($R) $R.css( side, size + sC.inset[side] );
				// resize the content-div
				sizeContent(pane);
			}

			if (!skipCallback && !skipResizeWhileDragging && state.initialized && s.isVisible)
				_runCallbacks("onresize_end", pane);

			// resize all the adjacent panes, and adjust their toggler buttons
			// when skipCallback passed, it means the controlling method will handle 'other panes'
			if (!skipCallback) {
				// also no callback if live-resize is in progress and NOT triggerEventsDuringLiveResize
				if (!s.isSliding) sizeMidPanes(_c[pane].dir=="horz" ? "" : "center", skipResizeWhileDragging, force);
				sizeHandles();
			}

			// if opposite-pane was autoClosed, see if it can be autoOpened now
			var altPane = _c.oppositeEdge[pane];
			if (size < oldSize && state[ altPane ].noRoom) {
				setSizeLimits( altPane );
				makePaneFit( altPane, false, skipCallback );
			}

			// DEBUG - ALERT user/developer so they know there was a sizing problem
			if (tries.length > 1)
				_log(msg +'\nSee the Error Console for details.', true, true);
		}
	}

	/**
	 * @see  initPanes(), sizePane(), 	resizeAll(), open(), close(), hide()
	 * @param {(Array.<string>|string)}	panes					The pane(s) being resized, comma-delmited string
	 * @param {boolean=}					[skipCallback=false]	Should the onresize callback be run?
	 * @param {boolean=}					[force=false]
	 */
,	sizeMidPanes = function (panes, skipCallback, force) {
		panes = (panes ? panes : "east,west,center").split(",");

		$.each(panes, function (i, pane) {
			if (!$Ps[pane]) return; // NO PANE - skip
			var 
				o		= options[pane]
			,	s		= state[pane]
			,	$P		= $Ps[pane]
			,	$R		= $Rs[pane]
			,	isCenter= (pane=="center")
			,	hasRoom	= true
			,	CSS		= {}
			//	if pane is not visible, show it invisibly NOW rather than for *each call* in this script
			,	visCSS	= $.layout.showInvisibly($P)

			,	newCenter	= calcNewCenterPaneDims()
			;

			// update pane-state dimensions
			$.extend(s, elDims($P));

			if (pane === "center") {
				if (!force && s.isVisible && newCenter.width === s.outerWidth && newCenter.height === s.outerHeight) {
					$P.css(visCSS);
					return true; // SKIP - pane already the correct size
				}
				// set state for makePaneFit() logic
				$.extend(s, cssMinDims(pane), {
					maxWidth:	newCenter.width
				,	maxHeight:	newCenter.height
				});
				CSS = newCenter;
				s.newWidth	= CSS.width;
				s.newHeight	= CSS.height;
				// convert OUTER width/height to CSS width/height 
				CSS.width	= cssW($P, CSS.width);
				// NEW - allow pane to extend 'below' visible area rather than hide it
				CSS.height	= cssH($P, CSS.height);
				hasRoom		= CSS.width >= 0 && CSS.height >= 0; // height >= 0 = ALWAYS TRUE NOW

				// during layout init, try to shrink east/west panes to make room for center
				if (!state.initialized && o.minWidth > newCenter.width) {
					var
						reqPx	= o.minWidth - s.outerWidth
					,	minE	= options.east.minSize || 0
					,	minW	= options.west.minSize || 0
					,	sizeE	= state.east.size
					,	sizeW	= state.west.size
					,	newE	= sizeE
					,	newW	= sizeW
					;
					if (reqPx > 0 && state.east.isVisible && sizeE > minE) {
						newE = max( sizeE-minE, sizeE-reqPx );
						reqPx -= sizeE-newE;
					}
					if (reqPx > 0 && state.west.isVisible && sizeW > minW) {
						newW = max( sizeW-minW, sizeW-reqPx );
						reqPx -= sizeW-newW;
					}
					// IF we found enough extra space, then resize the border panes as calculated
					if (reqPx === 0) {
						if (sizeE && sizeE != minE)
							sizePane('east', newE, true, true, force); // true = skipCallback/noAnimation - initPanes will handle when done
						if (sizeW && sizeW != minW)
							sizePane('west', newW, true, true, force); // true = skipCallback/noAnimation
						// now start over!
						sizeMidPanes('center', skipCallback, force);
						$P.css(visCSS);
						return; // abort this loop
					}
				}
			}
			else { // for east and west, set only the height, which is same as center height
				// set state.min/maxWidth/Height for makePaneFit() logic
				if (s.isVisible && !s.noVerticalRoom)
					$.extend(s, elDims($P), cssMinDims(pane))
				if (!force && !s.noVerticalRoom && newCenter.height === s.outerHeight) {
					$P.css(visCSS);
					return true; // SKIP - pane already the correct size
				}
				// east/west have same top, bottom & height as center
				CSS.top		= newCenter.top;
				CSS.bottom	= newCenter.bottom;
				s.newSize	= newCenter.height
				// NEW - allow pane to extend 'below' visible area rather than hide it
				CSS.height	= cssH($P, newCenter.height);
				s.maxHeight	= CSS.height;
				hasRoom		= (s.maxHeight >= 0); // ALWAYS TRUE NOW
				if (!hasRoom) s.noVerticalRoom = true; // makePaneFit() logic
			}

			if (hasRoom) {
				// resizeAll passes skipCallback because it triggers callbacks after ALL panes are resized
				if (!skipCallback && state.initialized)
					_runCallbacks("onresize_start", pane);

				$P.css(CSS); // apply the CSS to pane
				if (pane !== "center")
					sizeHandles(pane); // also update resizer length
				if (s.noRoom && !s.isClosed && !s.isHidden)
					makePaneFit(pane); // will re-open/show auto-closed/hidden pane
				if (s.isVisible) {
					$.extend(s, elDims($P)); // update pane dimensions
					if (state.initialized) sizeContent(pane); // also resize the contents, if exists
				}
			}
			else if (!s.noRoom && s.isVisible) // no room for pane
				makePaneFit(pane); // will hide or close pane

			// reset visibility, if necessary
			$P.css(visCSS);

			delete s.newSize;
			delete s.newWidth;
			delete s.newHeight;

			if (!s.isVisible)
				return true; // DONE - next pane

			/*
			 * Extra CSS for IE6 or IE7 in Quirks-mode - add 'width' to NORTH/SOUTH panes
			 * Normally these panes have only 'left' & 'right' positions so pane auto-sizes
			 * ALSO required when pane is an IFRAME because will NOT default to 'full width'
			 *	TODO: Can I use width:100% for a north/south iframe?
			 *	TODO: Sounds like a job for $P.outerWidth( sC.innerWidth ) SETTER METHOD
			 */
			if (pane === "center") { // finished processing midPanes
				var fix = browser.isIE6 || !browser.boxModel;
				if ($Ps.north && (fix || state.north.tagName=="IFRAME")) 
					$Ps.north.css("width", cssW($Ps.north, sC.innerWidth));
				if ($Ps.south && (fix || state.south.tagName=="IFRAME"))
					$Ps.south.css("width", cssW($Ps.south, sC.innerWidth));
			}

			// resizeAll passes skipCallback because it triggers callbacks after ALL panes are resized
			if (!skipCallback && state.initialized)
				_runCallbacks("onresize_end", pane);
		});
	}


	/**
	 * @see  window.onresize(), callbacks or custom code
	 * @param {(Object|boolean)=}	evt_or_refresh	If 'true', then also reset pane-positioning
	 */
,	resizeAll = function (evt_or_refresh) {
		var	oldW	= sC.innerWidth
		,	oldH	= sC.innerHeight
		;
		// stopPropagation if called by trigger("layoutdestroy") - use evtPane utility 
		evtPane(evt_or_refresh);

		// cannot size layout when 'container' is hidden or collapsed
		if (!$N.is(":visible")) return;

		if (!state.initialized) {
			_initLayoutElements();
			return; // no need to resize since we just initialized!
		}

		if (evt_or_refresh === true && $.isPlainObject(options.outset)) {
			// update container CSS in case outset option has changed
			$N.css( options.outset );
		}
		// UPDATE container dimensions
		$.extend(sC, elDims( $N, options.inset ));
		if (!sC.outerHeight) return;

		// if 'true' passed, refresh pane & handle positioning too
		if (evt_or_refresh === true) {
			setPanePosition();
		}

		// onresizeall_start will CANCEL resizing if returns false
		// state.container has already been set, so user can access this info for calcuations
		if (false === _runCallbacks("onresizeall_start")) return false;

		var	// see if container is now 'smaller' than before
			shrunkH	= (sC.innerHeight < oldH)
		,	shrunkW	= (sC.innerWidth < oldW)
		,	$P, o, s
		;
		// NOTE special order for sizing: S-N-E-W
		$.each(["south","north","east","west"], function (i, pane) {
			if (!$Ps[pane]) return; // no pane - SKIP
			o = options[pane];
			s = state[pane];
			if (s.autoResize && s.size != o.size) // resize pane to original size set in options
				sizePane(pane, o.size, true, true, true); // true=skipCallback/noAnimation/forceResize
			else {
				setSizeLimits(pane);
				makePaneFit(pane, false, true, true); // true=skipCallback/forceResize
			}
		});

		sizeMidPanes("", true, true); // true=skipCallback/forceResize
		sizeHandles(); // reposition the toggler elements

		// trigger all individual pane callbacks AFTER layout has finished resizing
		$.each(_c.allPanes, function (i, pane) {
			$P = $Ps[pane];
			if (!$P) return; // SKIP
			if (state[pane].isVisible) // undefined for non-existent panes
				_runCallbacks("onresize_end", pane); // callback - if exists
		});

		_runCallbacks("onresizeall_end");
		//_triggerLayoutEvent(pane, 'resizeall');
	}

	/**
	 * Whenever a pane resizes or opens that has a nested layout, trigger resizeAll
	 *
	 * @param {(string|Object)}	evt_or_pane		The pane just resized or opened
	 */
,	resizeChildren = function (evt_or_pane, skipRefresh) {
		var	pane = evtPane.call(this, evt_or_pane);

		if (!options[pane].resizeChildren) return;

		// ensure the pane-children are up-to-date
		if (!skipRefresh) refreshChildren( pane );
		var pC = children[pane];
		if ($.isPlainObject( pC )) {
			// resize one or more children
			$.each( pC, function (key, child) {
				if (!child.destroyed) child.resizeAll();
			});
		}
	}

	/**
	 * IF pane has a content-div, then resize all elements inside pane to fit pane-height
	 *
	 * @param {(string|Object)}	evt_or_panes		The pane(s) being resized
	 * @param {boolean=}			[remeasure=false]	Should the content (header/footer) be remeasured?
	 */
,	sizeContent = function (evt_or_panes, remeasure) {
		if (!isInitialized()) return;

		var panes = evtPane.call(this, evt_or_panes);
		panes = panes ? panes.split(",") : _c.allPanes;

		$.each(panes, function (idx, pane) {
			var
				$P	= $Ps[pane]
			,	$C	= $Cs[pane]
			,	o	= options[pane]
			,	s	= state[pane]
			,	m	= s.content // m = measurements
			;
			if (!$P || !$C || !$P.is(":visible")) return true; // NOT VISIBLE - skip

			// if content-element was REMOVED, update OR remove the pointer
			if (!$C.length) {
				initContent(pane, false);	// false = do NOT sizeContent() - already there!
				if (!$C) return;			// no replacement element found - pointer have been removed
			}

			// onsizecontent_start will CANCEL resizing if returns false
			if (false === _runCallbacks("onsizecontent_start", pane)) return;

			// skip re-measuring offsets if live-resizing
			if ((!s.isMoving && !s.isResizing) || o.liveContentResizing || remeasure || m.top == undefined) {
				_measure();
				// if any footers are below pane-bottom, they may not measure correctly,
				// so allow pane overflow and re-measure
				if (m.hiddenFooters > 0 && $P.css("overflow") === "hidden") {
					$P.css("overflow", "visible");
					_measure(); // remeasure while overflowing
					$P.css("overflow", "hidden");
				}
			}
			// NOTE: spaceAbove/Below *includes* the pane paddingTop/Bottom, but not pane.borders
			var newH = s.innerHeight - (m.spaceAbove - s.css.paddingTop) - (m.spaceBelow - s.css.paddingBottom);

			if (!$C.is(":visible") || m.height != newH) {
				// size the Content element to fit new pane-size - will autoHide if not enough room
				setOuterHeight($C, newH, true); // true=autoHide
				m.height = newH; // save new height
			};

			if (state.initialized)
				_runCallbacks("onsizecontent_end", pane);

			function _below ($E) {
				return max(s.css.paddingBottom, (parseInt($E.css("marginBottom"), 10) || 0));
			};

			function _measure () {
				var
					ignore	= options[pane].contentIgnoreSelector
				,	$Fs		= $C.nextAll().not(".ui-layout-mask").not(ignore || ":lt(0)") // not :lt(0) = ALL
				,	$Fs_vis	= $Fs.filter(':visible')
				,	$F		= $Fs_vis.filter(':last')
				;
				m = {
					top:			$C[0].offsetTop
				,	height:			$C.outerHeight()
				,	numFooters:		$Fs.length
				,	hiddenFooters:	$Fs.length - $Fs_vis.length
				,	spaceBelow:		0 // correct if no content footer ($E)
				}
					m.spaceAbove	= m.top; // just for state - not used in calc
					m.bottom		= m.top + m.height;
				if ($F.length)
					//spaceBelow = (LastFooter.top + LastFooter.height) [footerBottom] - Content.bottom + max(LastFooter.marginBottom, pane.paddingBotom)
					m.spaceBelow = ($F[0].offsetTop + $F.outerHeight()) - m.bottom + _below($F);
				else // no footer - check marginBottom on Content element itself
					m.spaceBelow = _below($C);
			};
		});
	}


	/**
	 * Called every time a pane is opened, closed, or resized to slide the togglers to 'center' and adjust their length if necessary
	 *
	 * @see  initHandles(), open(), close(), resizeAll()
	 * @param {(string|Object)=}		evt_or_panes	The pane(s) being resized
	 */
,	sizeHandles = function (evt_or_panes) {
		var panes = evtPane.call(this, evt_or_panes)
		panes = panes ? panes.split(",") : _c.borderPanes;

		$.each(panes, function (i, pane) {
			var 
				o	= options[pane]
			,	s	= state[pane]
			,	$P	= $Ps[pane]
			,	$R	= $Rs[pane]
			,	$T	= $Ts[pane]
			,	$TC
			;
			if (!$P || !$R) return;

			var
				dir			= _c[pane].dir
			,	_state		= (s.isClosed ? "_closed" : "_open")
			,	spacing		= o["spacing"+ _state]
			,	togAlign	= o["togglerAlign"+ _state]
			,	togLen		= o["togglerLength"+ _state]
			,	paneLen
			,	left
			,	offset
			,	CSS = {}
			;

			if (spacing === 0) {
				$R.hide();
				return;
			}
			else if (!s.noRoom && !s.isHidden) // skip if resizer was hidden for any reason
				$R.show(); // in case was previously hidden

			// Resizer Bar is ALWAYS same width/height of pane it is attached to
			if (dir === "horz") { // north/south
				//paneLen = $P.outerWidth(); // s.outerWidth || 
				paneLen = sC.innerWidth; // handle offscreen-panes
				s.resizerLength = paneLen;
				left = $.layout.cssNum($P, "left")
				$R.css({
					width:	cssW($R, paneLen) // account for borders & padding
				,	height:	cssH($R, spacing) // ditto
				,	left:	left > -9999 ? left : sC.inset.left // handle offscreen-panes
				});
			}
			else { // east/west
				paneLen = $P.outerHeight(); // s.outerHeight || 
				s.resizerLength = paneLen;
				$R.css({
					height:	cssH($R, paneLen) // account for borders & padding
				,	width:	cssW($R, spacing) // ditto
				,	top:	sC.inset.top + getPaneSize("north", true) // TODO: what if no North pane?
				//,	top:	$.layout.cssNum($Ps["center"], "top")
				});
			}

			// remove hover classes
			removeHover( o, $R );

			if ($T) {
				if (togLen === 0 || (s.isSliding && o.hideTogglerOnSlide)) {
					$T.hide(); // always HIDE the toggler when 'sliding'
					return;
				}
				else
					$T.show(); // in case was previously hidden

				if (!(togLen > 0) || togLen === "100%" || togLen > paneLen) {
					togLen = paneLen;
					offset = 0;
				}
				else { // calculate 'offset' based on options.PANE.togglerAlign_open/closed
					if (isStr(togAlign)) {
						switch (togAlign) {
							case "top":
							case "left":	offset = 0;
											break;
							case "bottom":
							case "right":	offset = paneLen - togLen;
											break;
							case "middle":
							case "center":
							default:		offset = round((paneLen - togLen) / 2); // 'default' catches typos
						}
					}
					else { // togAlign = number
						var x = parseInt(togAlign, 10); //
						if (togAlign >= 0) offset = x;
						else offset = paneLen - togLen + x; // NOTE: x is negative!
					}
				}

				if (dir === "horz") { // north/south
					var width = cssW($T, togLen);
					$T.css({
						width:	width  // account for borders & padding
					,	height:	cssH($T, spacing) // ditto
					,	left:	offset // TODO: VERIFY that toggler  positions correctly for ALL values
					,	top:	0
					});
					// CENTER the toggler content SPAN
					$T.children(".content").each(function(){
						$TC = $(this);
						$TC.css("marginLeft", round((width-$TC.outerWidth())/2)); // could be negative
					});
				}
				else { // east/west
					var height = cssH($T, togLen);
					$T.css({
						height:	height // account for borders & padding
					,	width:	cssW($T, spacing) // ditto
					,	top:	offset // POSITION the toggler
					,	left:	0
					});
					// CENTER the toggler content SPAN
					$T.children(".content").each(function(){
						$TC = $(this);
						$TC.css("marginTop", round((height-$TC.outerHeight())/2)); // could be negative
					});
				}

				// remove ALL hover classes
				removeHover( 0, $T );
			}

			// DONE measuring and sizing this resizer/toggler, so can be 'hidden' now
			if (!state.initialized && (o.initHidden || s.isHidden)) {
				$R.hide();
				if ($T) $T.hide();
			}
		});
	}


	/**
	 * @param {(string|Object)}	evt_or_pane
	 */
,	enableClosable = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$T	= $Ts[pane]
		,	o	= options[pane]
		;
		if (!$T) return;
		o.closable = true;
		$T	.bind("click."+ sID, function(evt){ evt.stopPropagation(); toggle(pane); })
			.css("visibility", "visible")
			.css("cursor", "pointer")
			.attr("title", state[pane].isClosed ? o.tips.Open : o.tips.Close) // may be blank
			.show();
	}
	/**
	 * @param {(string|Object)}	evt_or_pane
	 * @param {boolean=}			[hide=false]
	 */
,	disableClosable = function (evt_or_pane, hide) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$T	= $Ts[pane]
		;
		if (!$T) return;
		options[pane].closable = false;
		// is closable is disable, then pane MUST be open!
		if (state[pane].isClosed) open(pane, false, true);
		$T	.unbind("."+ sID)
			.css("visibility", hide ? "hidden" : "visible") // instead of hide(), which creates logic issues
			.css("cursor", "default")
			.attr("title", "");
	}


	/**
	 * @param {(string|Object)}	evt_or_pane
	 */
,	enableSlidable = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$R	= $Rs[pane]
		;
		if (!$R || !$R.data('draggable')) return;
		options[pane].slidable = true; 
		if (state[pane].isClosed)
			bindStartSlidingEvents(pane, true);
	}
	/**
	 * @param {(string|Object)}	evt_or_pane
	 */
,	disableSlidable = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$R	= $Rs[pane]
		;
		if (!$R) return;
		options[pane].slidable = false; 
		if (state[pane].isSliding)
			close(pane, false, true);
		else {
			bindStartSlidingEvents(pane, false);
			$R	.css("cursor", "default")
				.attr("title", "");
			removeHover(null, $R[0]); // in case currently hovered
		}
	}


	/**
	 * @param {(string|Object)}	evt_or_pane
	 */
,	enableResizable = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$R	= $Rs[pane]
		,	o	= options[pane]
		;
		if (!$R || !$R.data('draggable')) return;
		o.resizable = true; 
		$R.draggable("enable");
		if (!state[pane].isClosed)
			$R	.css("cursor", o.resizerCursor)
			 	.attr("title", o.tips.Resize);
	}
	/**
	 * @param {(string|Object)}	evt_or_pane
	 */
,	disableResizable = function (evt_or_pane) {
		if (!isInitialized()) return;
		var	pane = evtPane.call(this, evt_or_pane)
		,	$R	= $Rs[pane]
		;
		if (!$R || !$R.data('draggable')) return;
		options[pane].resizable = false; 
		$R	.draggable("disable")
			.css("cursor", "default")
			.attr("title", "");
		removeHover(null, $R[0]); // in case currently hovered
	}


	/**
	 * Move a pane from source-side (eg, west) to target-side (eg, east)
	 * If pane exists on target-side, move that to source-side, ie, 'swap' the panes
	 *
	 * @param {(string|Object)}	evt_or_pane1	The pane/edge being swapped
	 * @param {string}			pane2			ditto
	 */
,	swapPanes = function (evt_or_pane1, pane2) {
		if (!isInitialized()) return;
		var pane1 = evtPane.call(this, evt_or_pane1);
		// change state.edge NOW so callbacks can know where pane is headed...
		state[pane1].edge = pane2;
		state[pane2].edge = pane1;
		// run these even if NOT state.initialized
		if (false === _runCallbacks("onswap_start", pane1)
		 ||	false === _runCallbacks("onswap_start", pane2)
		) {
			state[pane1].edge = pane1; // reset
			state[pane2].edge = pane2;
			return;
		}

		var
			oPane1	= copy( pane1 )
		,	oPane2	= copy( pane2 )
		,	sizes	= {}
		;
		sizes[pane1] = oPane1 ? oPane1.state.size : 0;
		sizes[pane2] = oPane2 ? oPane2.state.size : 0;

		// clear pointers & state
		$Ps[pane1] = false; 
		$Ps[pane2] = false;
		state[pane1] = {};
		state[pane2] = {};
		
		// ALWAYS remove the resizer & toggler elements
		if ($Ts[pane1]) $Ts[pane1].remove();
		if ($Ts[pane2]) $Ts[pane2].remove();
		if ($Rs[pane1]) $Rs[pane1].remove();
		if ($Rs[pane2]) $Rs[pane2].remove();
		$Rs[pane1] = $Rs[pane2] = $Ts[pane1] = $Ts[pane2] = false;

		// transfer element pointers and data to NEW Layout keys
		move( oPane1, pane2 );
		move( oPane2, pane1 );

		// cleanup objects
		oPane1 = oPane2 = sizes = null;

		// make panes 'visible' again
		if ($Ps[pane1]) $Ps[pane1].css(_c.visible);
		if ($Ps[pane2]) $Ps[pane2].css(_c.visible);

		// fix any size discrepancies caused by swap
		resizeAll();

		// run these even if NOT state.initialized
		_runCallbacks("onswap_end", pane1);
		_runCallbacks("onswap_end", pane2);

		return;

		function copy (n) { // n = pane
			var
				$P	= $Ps[n]
			,	$C	= $Cs[n]
			;
			return !$P ? false : {
				pane:		n
			,	P:			$P ? $P[0] : false
			,	C:			$C ? $C[0] : false
			,	state:		$.extend(true, {}, state[n])
			,	options:	$.extend(true, {}, options[n])
			}
		};

		function move (oPane, pane) {
			if (!oPane) return;
			var
				P		= oPane.P
			,	C		= oPane.C
			,	oldPane = oPane.pane
			,	c		= _c[pane]
			//	save pane-options that should be retained
			,	s		= $.extend(true, {}, state[pane])
			,	o		= options[pane]
			//	RETAIN side-specific FX Settings - more below
			,	fx		= { resizerCursor: o.resizerCursor }
			,	re, size, pos
			;
			$.each("fxName,fxSpeed,fxSettings".split(","), function (i, k) {
				fx[k +"_open"]  = o[k +"_open"];
				fx[k +"_close"] = o[k +"_close"];
				fx[k +"_size"]  = o[k +"_size"];
			});

			// update object pointers and attributes
			$Ps[pane] = $(P)
				.data({
					layoutPane:		Instance[pane]	// NEW pointer to pane-alias-object
				,	layoutEdge:		pane
				})
				.css(_c.hidden)
				.css(c.cssReq)
			;
			$Cs[pane] = C ? $(C) : false;

			// set options and state
			options[pane]	= $.extend(true, {}, oPane.options, fx);
			state[pane]		= $.extend(true, {}, oPane.state);

			// change classNames on the pane, eg: ui-layout-pane-east ==> ui-layout-pane-west
			re = new RegExp(o.paneClass +"-"+ oldPane, "g");
			P.className = P.className.replace(re, o.paneClass +"-"+ pane);

			// ALWAYS regenerate the resizer & toggler elements
			initHandles(pane); // create the required resizer & toggler

			// if moving to different orientation, then keep 'target' pane size
			if (c.dir != _c[oldPane].dir) {
				size = sizes[pane] || 0;
				setSizeLimits(pane); // update pane-state
				size = max(size, state[pane].minSize);
				// use manualSizePane to disable autoResize - not useful after panes are swapped
				manualSizePane(pane, size, true, true); // true/true = skipCallback/noAnimation
			}
			else // move the resizer here
				$Rs[pane].css(c.side, sC.inset[c.side] + (state[pane].isVisible ? getPaneSize(pane) : 0));


			// ADD CLASSNAMES & SLIDE-BINDINGS
			if (oPane.state.isVisible && !s.isVisible)
				setAsOpen(pane, true); // true = skipCallback
			else {
				setAsClosed(pane);
				bindStartSlidingEvents(pane, true); // will enable events IF option is set
			}

			// DESTROY the object
			oPane = null;
		};
	}


	/**
	 * INTERNAL method to sync pin-buttons when pane is opened or closed
	 * Unpinned means the pane is 'sliding' - ie, over-top of the adjacent panes
	 *
	 * @see  open(), setAsOpen(), setAsClosed()
	 * @param {string}	pane   These are the params returned to callbacks by layout()
	 * @param {boolean}	doPin  True means set the pin 'down', False means 'up'
	 */
,	syncPinBtns = function (pane, doPin) {
		if ($.layout.plugins.buttons)
			$.each(state[pane].pins, function (i, selector) {
				$.layout.buttons.setPinState(Instance, $(selector), pane, doPin);
			});
	}

;	// END var DECLARATIONS

	/**
	 * Capture keys when enableCursorHotkey - toggle pane if hotkey pressed
	 *
	 * @see  document.keydown()
	 */
	function keyDown (evt) {
		if (!evt) return true;
		var code = evt.keyCode;
		if (code < 33) return true; // ignore special keys: ENTER, TAB, etc

		var
			PANE = {
				38: "north" // Up Cursor	- $.ui.keyCode.UP
			,	40: "south" // Down Cursor	- $.ui.keyCode.DOWN
			,	37: "west"  // Left Cursor	- $.ui.keyCode.LEFT
			,	39: "east"  // Right Cursor	- $.ui.keyCode.RIGHT
			}
		,	ALT		= evt.altKey // no worky!
		,	SHIFT	= evt.shiftKey
		,	CTRL	= evt.ctrlKey
		,	CURSOR	= (CTRL && code >= 37 && code <= 40)
		,	o, k, m, pane
		;

		if (CURSOR && options[PANE[code]].enableCursorHotkey) // valid cursor-hotkey
			pane = PANE[code];
		else if (CTRL || SHIFT) // check to see if this matches a custom-hotkey
			$.each(_c.borderPanes, function (i, p) { // loop each pane to check its hotkey
				o = options[p];
				k = o.customHotkey;
				m = o.customHotkeyModifier; // if missing or invalid, treated as "CTRL+SHIFT"
				if ((SHIFT && m=="SHIFT") || (CTRL && m=="CTRL") || (CTRL && SHIFT)) { // Modifier matches
					if (k && code === (isNaN(k) || k <= 9 ? k.toUpperCase().charCodeAt(0) : k)) { // Key matches
						pane = p;
						return false; // BREAK
					}
				}
			});

		// validate pane
		if (!pane || !$Ps[pane] || !options[pane].closable || state[pane].isHidden)
			return true;

		toggle(pane);

		evt.stopPropagation();
		evt.returnValue = false; // CANCEL key
		return false;
	};


/*
 * ######################################
 *	UTILITY METHODS
 *	called externally or by initButtons
 * ######################################
 */

	/**
	 * Change/reset a pane overflow setting & zIndex to allow popups/drop-downs to work
	 *
	 * @param {Object=}   [el]	(optional) Can also be 'bound' to a click, mouseOver, or other event
	 */
	function allowOverflow (el) {
		if (!isInitialized()) return;
		if (this && this.tagName) el = this; // BOUND to element
		var $P;
		if (isStr(el))
			$P = $Ps[el];
		else if ($(el).data("layoutRole"))
			$P = $(el);
		else
			$(el).parents().each(function(){
				if ($(this).data("layoutRole")) {
					$P = $(this);
					return false; // BREAK
				}
			});
		if (!$P || !$P.length) return; // INVALID

		var
			pane	= $P.data("layoutEdge")
		,	s		= state[pane]
		;

		// if pane is already raised, then reset it before doing it again!
		// this would happen if allowOverflow is attached to BOTH the pane and an element 
		if (s.cssSaved)
			resetOverflow(pane); // reset previous CSS before continuing

		// if pane is raised by sliding or resizing, or its closed, then abort
		if (s.isSliding || s.isResizing || s.isClosed) {
			s.cssSaved = false;
			return;
		}

		var
			newCSS	= { zIndex: (options.zIndexes.resizer_normal + 1) }
		,	curCSS	= {}
		,	of		= $P.css("overflow")
		,	ofX		= $P.css("overflowX")
		,	ofY		= $P.css("overflowY")
		;
		// determine which, if any, overflow settings need to be changed
		if (of != "visible") {
			curCSS.overflow = of;
			newCSS.overflow = "visible";
		}
		if (ofX && !ofX.match(/(visible|auto)/)) {
			curCSS.overflowX = ofX;
			newCSS.overflowX = "visible";
		}
		if (ofY && !ofY.match(/(visible|auto)/)) {
			curCSS.overflowY = ofX;
			newCSS.overflowY = "visible";
		}

		// save the current overflow settings - even if blank!
		s.cssSaved = curCSS;

		// apply new CSS to raise zIndex and, if necessary, make overflow 'visible'
		$P.css( newCSS );

		// make sure the zIndex of all other panes is normal
		$.each(_c.allPanes, function(i, p) {
			if (p != pane) resetOverflow(p);
		});

	};
	/**
	 * @param {Object=}   [el]	(optional) Can also be 'bound' to a click, mouseOver, or other event
	 */
	function resetOverflow (el) {
		if (!isInitialized()) return;
		if (this && this.tagName) el = this; // BOUND to element
		var $P;
		if (isStr(el))
			$P = $Ps[el];
		else if ($(el).data("layoutRole"))
			$P = $(el);
		else
			$(el).parents().each(function(){
				if ($(this).data("layoutRole")) {
					$P = $(this);
					return false; // BREAK
				}
			});
		if (!$P || !$P.length) return; // INVALID

		var
			pane	= $P.data("layoutEdge")
		,	s		= state[pane]
		,	CSS		= s.cssSaved || {}
		;
		// reset the zIndex
		if (!s.isSliding && !s.isResizing)
			$P.css("zIndex", options.zIndexes.pane_normal);

		// reset Overflow - if necessary
		$P.css( CSS );

		// clear var
		s.cssSaved = false;
	};

/*
 * #####################
 * CREATE/RETURN LAYOUT
 * #####################
 */

	// validate that container exists
	var $N = $(this).eq(0); // FIRST matching Container element
	if (!$N.length) {
		return _log( options.errors.containerMissing );
	};

	// Users retrieve Instance of a layout with: $N.layout() OR $N.data("layout")
	// return the Instance-pointer if layout has already been initialized
	if ($N.data("layoutContainer") && $N.data("layout"))
		return $N.data("layout"); // cached pointer

	// init global vars
	var 
		$Ps	= {}	// Panes x5		- set in initPanes()
	,	$Cs	= {}	// Content x5	- set in initPanes()
	,	$Rs	= {}	// Resizers x4	- set in initHandles()
	,	$Ts	= {}	// Togglers x4	- set in initHandles()
	,	$Ms	= $([])	// Masks - up to 2 masks per pane (IFRAME + DIV)
	//	aliases for code brevity
	,	sC	= state.container // alias for easy access to 'container dimensions'
	,	sID	= state.id // alias for unique layout ID/namespace - eg: "layout435"
	;

	// create Instance object to expose data & option Properties, and primary action Methods
	var Instance = {
	//	layout data
		options:			options			// property - options hash
	,	state:				state			// property - dimensions hash
	//	object pointers
	,	container:			$N				// property - object pointers for layout container
	,	panes:				$Ps				// property - object pointers for ALL Panes: panes.north, panes.center
	,	contents:			$Cs				// property - object pointers for ALL Content: contents.north, contents.center
	,	resizers:			$Rs				// property - object pointers for ALL Resizers, eg: resizers.north
	,	togglers:			$Ts				// property - object pointers for ALL Togglers, eg: togglers.north
	//	border-pane open/close
	,	hide:				hide			// method - ditto
	,	show:				show			// method - ditto
	,	toggle:				toggle			// method - pass a 'pane' ("north", "west", etc)
	,	open:				open			// method - ditto
	,	close:				close			// method - ditto
	,	slideOpen:			slideOpen		// method - ditto
	,	slideClose:			slideClose		// method - ditto
	,	slideToggle:		slideToggle		// method - ditto
	//	pane actions
	,	setSizeLimits:		setSizeLimits	// method - pass a 'pane' - update state min/max data
	,	_sizePane:			sizePane		// method -intended for user by plugins only!
	,	sizePane:			manualSizePane	// method - pass a 'pane' AND an 'outer-size' in pixels or percent, or 'auto'
	,	sizeContent:		sizeContent		// method - pass a 'pane'
	,	swapPanes:			swapPanes		// method - pass TWO 'panes' - will swap them
	,	showMasks:			showMasks		// method - pass a 'pane' OR list of panes - default = all panes with mask option set
	,	hideMasks:			hideMasks		// method - ditto'
	//	pane element methods
	,	initContent:		initContent		// method - ditto
	,	addPane:			addPane			// method - pass a 'pane'
	,	removePane:			removePane		// method - pass a 'pane' to remove from layout, add 'true' to delete the pane-elem
	,	createChildren:		createChildren	// method - pass a 'pane' and (optional) layout-options (OVERRIDES options[pane].children
	,	refreshChildren:	refreshChildren	// method - pass a 'pane' and a layout-instance
	//	special pane option setting
	,	enableClosable:		enableClosable	// method - pass a 'pane'
	,	disableClosable:	disableClosable	// method - ditto
	,	enableSlidable:		enableSlidable	// method - ditto
	,	disableSlidable:	disableSlidable	// method - ditto
	,	enableResizable:	enableResizable	// method - ditto
	,	disableResizable:	disableResizable// method - ditto
	//	utility methods for panes
	,	allowOverflow:		allowOverflow	// utility - pass calling element (this)
	,	resetOverflow:		resetOverflow	// utility - ditto
	//	layout control
	,	destroy:			destroy			// method - no parameters
	,	initPanes:			isInitialized	// method - no parameters
	,	resizeAll:			resizeAll		// method - no parameters
	//	callback triggering
	,	runCallbacks:		_runCallbacks	// method - pass evtName & pane (if a pane-event), eg: trigger("onopen", "west")
	//	alias collections of options, state and children - created in addPane and extended elsewhere
	,	hasParentLayout:	false			// set by initContainer()
	,	children:			children		// pointers to child-layouts, eg: Instance.children.west.layoutName
	,	north:				false			// alias group: { name: pane, pane: $Ps[pane], options: options[pane], state: state[pane], children: children[pane] }
	,	south:				false			// ditto
	,	west:				false			// ditto
	,	east:				false			// ditto
	,	center:				false			// ditto
	};

	// create the border layout NOW
	if (_create() === 'cancel') // onload_start callback returned false to CANCEL layout creation
		return null;
	else // true OR false -- if layout-elements did NOT init (hidden or do not exist), can auto-init later
		return Instance; // return the Instance object

}


})( jQuery );




/**
 * jquery.layout.state 1.2
 * $Date: 2014-08-30 08:00:00 (Sat, 30 Aug 2014) $
 *
 * Copyright (c) 2014 
 *   Kevin Dalman (http://allpro.net)
 *
 * Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 * and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
 *
 * @requires: UI Layout 1.4.0 or higher
 * @requires: $.ui.cookie (above)
 *
 * @see: http://groups.google.com/group/jquery-ui-layout
 */
;(function ($) {

if (!$.layout) return;


/**
 *	UI COOKIE UTILITY
 *
 *	A $.cookie OR $.ui.cookie namespace *should be standard*, but until then...
 *	This creates $.ui.cookie so Layout does not need the cookie.jquery.js plugin
 *	NOTE: This utility is REQUIRED by the layout.state plugin
 *
 *	Cookie methods in Layout are created as part of State Management 
 */
if (!$.ui) $.ui = {};
$.ui.cookie = {

	// cookieEnabled is not in DOM specs, but DOES works in all browsers,including IE6
	acceptsCookies: !!navigator.cookieEnabled

,	read: function (name) {
		var
			c	= document.cookie
		,	cs	= c ? c.split(';') : []
		,	pair, data, i
		;
		for (i=0; pair=cs[i]; i++) {
			data = $.trim(pair).split('='); // name=value => [ name, value ]
			if (data[0] == name) // found the layout cookie
				return decodeURIComponent(data[1]);
		}
		return null;
	}

,	write: function (name, val, cookieOpts) {
		var	params	= ""
		,	date	= ""
		,	clear	= false
		,	o		= cookieOpts || {}
		,	x		= o.expires  || null
		,	t		= $.type(x)
		;
		if (t === "date")
			date = x;
		else if (t === "string" && x > 0) {
			x = parseInt(x,10);
			t = "number";
		}
		if (t === "number") {
			date = new Date();
			if (x > 0)
				date.setDate(date.getDate() + x);
			else {
				date.setFullYear(1970);
				clear = true;
			}
		}
		if (date)		params += ";expires="+ date.toUTCString();
		if (o.path)		params += ";path="+ o.path;
		if (o.domain)	params += ";domain="+ o.domain;
		if (o.secure)	params += ";secure";
		document.cookie = name +"="+ (clear ? "" : encodeURIComponent( val )) + params; // write or clear cookie
	}

,	clear: function (name) {
		$.ui.cookie.write(name, "", {expires: -1});
	}

};
// if cookie.jquery.js is not loaded, create an alias to replicate it
// this may be useful to other plugins or code dependent on that plugin
if (!$.cookie) $.cookie = function (k, v, o) {
	var C = $.ui.cookie;
	if (v === null)
		C.clear(k);
	else if (v === undefined)
		return C.read(k);
	else
		C.write(k, v, o);
};



/**
 *	State-management options stored in options.stateManagement, which includes a .cookie hash
 *	Default options saves ALL KEYS for ALL PANES, ie: pane.size, pane.isClosed, pane.isHidden
 *
 *	// STATE/COOKIE OPTIONS
 *	@example $(el).layout({
				stateManagement: {
					enabled:	true
				,	stateKeys:	"east.size,west.size,east.isClosed,west.isClosed"
				,	cookie:		{ name: "appLayout", path: "/" }
				}
			})
 *	@example $(el).layout({ stateManagement__enabled: true }) // enable auto-state-management using cookies
 *	@example $(el).layout({ stateManagement__cookie: { name: "appLayout", path: "/" } })
 *	@example $(el).layout({ stateManagement__cookie__name: "appLayout", stateManagement__cookie__path: "/" })
 *
 *	// STATE/COOKIE METHODS
 *	@example myLayout.saveCookie( "west.isClosed,north.size,south.isHidden", {expires: 7} );
 *	@example myLayout.loadCookie();
 *	@example myLayout.deleteCookie();
 *	@example var JSON = myLayout.readState();	// CURRENT Layout State
 *	@example var JSON = myLayout.readCookie();	// SAVED Layout State (from cookie)
 *	@example var JSON = myLayout.state.stateData;	// LAST LOADED Layout State (cookie saved in layout.state hash)
 *
 *	CUSTOM STATE-MANAGEMENT (eg, saved in a database)
 *	@example var JSON = myLayout.readState( "west.isClosed,north.size,south.isHidden" );
 *	@example myLayout.loadState( JSON );
 */

// tell Layout that the state plugin is available
$.layout.plugins.stateManagement = true;

//	Add State-Management options to layout.defaults
$.layout.defaults.stateManagement = {
	enabled:		false	// true = enable state-management, even if not using cookies
,	autoSave:		true	// Save a state-cookie when page exits?
,	autoLoad:		true	// Load the state-cookie when Layout inits?
,	animateLoad:	true	// animate panes when loading state into an active layout
,	includeChildren: true	// recurse into child layouts to include their state as well
	// List state-data to save - must be pane-specific
,	stateKeys:	"north.size,south.size,east.size,west.size,"+
				"north.isClosed,south.isClosed,east.isClosed,west.isClosed,"+
				"north.isHidden,south.isHidden,east.isHidden,west.isHidden"
,	cookie: {
		name:	""	// If not specified, will use Layout.name, else just "Layout"
	,	domain:	""	// blank = current domain
	,	path:	""	// blank = current page, "/" = entire website
	,	expires: ""	// 'days' to keep cookie - leave blank for 'session cookie'
	,	secure:	false
	}
};

// Set stateManagement as a 'layout-option', NOT a 'pane-option'
$.layout.optionsMap.layout.push("stateManagement");
// Update config so layout does not move options into the pane-default branch (panes)
$.layout.config.optionRootKeys.push("stateManagement");

/*
 *	State Management methods
 */
$.layout.state = {

	/**
	 * Get the current layout state and save it to a cookie
	 *
	 * myLayout.saveCookie( keys, cookieOpts )
	 *
	 * @param {Object}			inst
	 * @param {(string|Array)=}	keys
	 * @param {Object=}			cookieOpts
	 */
	saveCookie: function (inst, keys, cookieOpts) {
		var o	= inst.options
		,	sm	= o.stateManagement
		,	oC	= $.extend(true, {}, sm.cookie, cookieOpts || null)
		,	data = inst.state.stateData = inst.readState( keys || sm.stateKeys ) // read current panes-state
		;
		$.ui.cookie.write( oC.name || o.name || "Layout", $.layout.state.encodeJSON(data), oC );
		return $.extend(true, {}, data); // return COPY of state.stateData data
	}

	/**
	 * Remove the state cookie
	 *
	 * @param {Object}	inst
	 */
,	deleteCookie: function (inst) {
		var o = inst.options;
		$.ui.cookie.clear( o.stateManagement.cookie.name || o.name || "Layout" );
	}

	/**
	 * Read & return data from the cookie - as JSON
	 *
	 * @param {Object}	inst
	 */
,	readCookie: function (inst) {
		var o = inst.options;
		var c = $.ui.cookie.read( o.stateManagement.cookie.name || o.name || "Layout" );
		// convert cookie string back to a hash and return it
		return c ? $.layout.state.decodeJSON(c) : {};
	}

	/**
	 * Get data from the cookie and USE IT to loadState
	 *
	 * @param {Object}	inst
	 */
,	loadCookie: function (inst) {
		var c = $.layout.state.readCookie(inst); // READ the cookie
		if (c && !$.isEmptyObject( c )) {
			inst.state.stateData = $.extend(true, {}, c); // SET state.stateData
			inst.loadState(c); // LOAD the retrieved state
		}
		return c;
	}

	/**
	 * Update layout options from the cookie, if one exists
	 *
	 * @param {Object}		inst
	 * @param {Object=}		stateData
	 * @param {boolean=}	animate
	 */
,	loadState: function (inst, data, opts) {
		if (!$.isPlainObject( data ) || $.isEmptyObject( data )) return;

		// normalize data & cache in the state object
		data = inst.state.stateData = $.layout.transformData( data ); // panes = default subkey

		// add missing/default state-restore options
		var smo = inst.options.stateManagement;
		opts = $.extend({
			animateLoad:		false //smo.animateLoad
		,	includeChildren:	smo.includeChildren
		}, opts );

		if (!inst.state.initialized) {
			/*
			 *	layout NOT initialized, so just update its options
			 */
			// MUST remove pane.children keys before applying to options
			// use a copy so we don't remove keys from original data
			var o = $.extend(true, {}, data);
			//delete o.center; // center has no state-data - only children
			$.each($.layout.config.allPanes, function (idx, pane) {
				if (o[pane]) delete o[pane].children;		   
			 });
			// update CURRENT layout-options with saved state data
			$.extend(true, inst.options, o);
		}
		else {
			/*
			 *	layout already initialized, so modify layout's configuration
			 */
			var noAnimate = !opts.animateLoad
			,	o, c, h, state, open
			;
			$.each($.layout.config.borderPanes, function (idx, pane) {
				o = data[ pane ];
				if (!$.isPlainObject( o )) return; // no key, skip pane

				s	= o.size;
				c	= o.initClosed;
				h	= o.initHidden;
				ar	= o.autoResize
				state	= inst.state[pane];
				open	= state.isVisible;

				// reset autoResize
				if (ar)
					state.autoResize = ar;
				// resize BEFORE opening
				if (!open)
					inst._sizePane(pane, s, false, false, false); // false=skipCallback/noAnimation/forceResize
				// open/close as necessary - DO NOT CHANGE THIS ORDER!
				if (h === true)			inst.hide(pane, noAnimate);
				else if (c === true)	inst.close(pane, false, noAnimate);
				else if (c === false)	inst.open (pane, false, noAnimate);
				else if (h === false)	inst.show (pane, false, noAnimate);
				// resize AFTER any other actions
				if (open)
					inst._sizePane(pane, s, false, false, noAnimate); // animate resize if option passed
			});

			/*
			 *	RECURSE INTO CHILD-LAYOUTS
			 */
			if (opts.includeChildren) {
				var paneStateChildren, childState;
				$.each(inst.children, function (pane, paneChildren) {
					paneStateChildren = data[pane] ? data[pane].children : 0;
					if (paneStateChildren && paneChildren) {
						$.each(paneChildren, function (stateKey, child) {
							childState = paneStateChildren[stateKey];
							if (child && childState)
								child.loadState( childState );
						});
					}
				});
			}
		}
	}

	/**
	 * Get the *current layout state* and return it as a hash
	 *
	 * @param {Object=}		inst	// Layout instance to get state for
	 * @param {object=}		[opts]	// State-Managements override options
	 */
,	readState: function (inst, opts) {
		// backward compatility
		if ($.type(opts) === 'string') opts = { keys: opts };
		if (!opts) opts = {};
		var	sm		= inst.options.stateManagement
		,	ic		= opts.includeChildren
		,	recurse	= ic !== undefined ? ic : sm.includeChildren
		,	keys	= opts.stateKeys || sm.stateKeys
		,	alt		= { isClosed: 'initClosed', isHidden: 'initHidden' }
		,	state	= inst.state
		,	panes	= $.layout.config.allPanes
		,	data	= {}
		,	pair, pane, key, val
		,	ps, pC, child, array, count, branch
		;
		if ($.isArray(keys)) keys = keys.join(",");
		// convert keys to an array and change delimiters from '__' to '.'
		keys = keys.replace(/__/g, ".").split(',');
		// loop keys and create a data hash
		for (var i=0, n=keys.length; i < n; i++) {
			pair = keys[i].split(".");
			pane = pair[0];
			key  = pair[1];
			if ($.inArray(pane, panes) < 0) continue; // bad pane!
			val = state[ pane ][ key ];
			if (val == undefined) continue;
			if (key=="isClosed" && state[pane]["isSliding"])
				val = true; // if sliding, then *really* isClosed
			( data[pane] || (data[pane]={}) )[ alt[key] ? alt[key] : key ] = val;
		}

		// recurse into the child-layouts for each pane
		if (recurse) {
			$.each(panes, function (idx, pane) {
				pC = inst.children[pane];
				ps = state.stateData[pane];
				if ($.isPlainObject( pC ) && !$.isEmptyObject( pC )) {
					// ensure a key exists for this 'pane', eg: branch = data.center
					branch = data[pane] || (data[pane] = {});
					if (!branch.children) branch.children = {};
					$.each( pC, function (key, child) {
						// ONLY read state from an initialize layout
						if ( child.state.initialized )
							branch.children[ key ] = $.layout.state.readState( child );
						// if we have PREVIOUS (onLoad) state for this child-layout, KEEP IT!
						else if ( ps && ps.children && ps.children[ key ] ) {
							branch.children[ key ] = $.extend(true, {}, ps.children[ key ] );
						}
					});
				}
			});
		}

		return data;
	}

	/**
	 *	Stringify a JSON hash so can save in a cookie or db-field
	 */
,	encodeJSON: function (json) {
		var local = window.JSON || {};
		return (local.stringify || stringify)(json);

		function stringify (h) {
			var D=[], i=0, k, v, t // k = key, v = value
			,	a = $.isArray(h)
			;
			for (k in h) {
				v = h[k];
				t = typeof v;
				if (t == 'string')		// STRING - add quotes
					v = '"'+ v +'"';
				else if (t == 'object')	// SUB-KEY - recurse into it
					v = parse(v);
				D[i++] = (!a ? '"'+ k +'":' : '') + v;
			}
			return (a ? '[' : '{') + D.join(',') + (a ? ']' : '}');
		};
	}

	/**
	 *	Convert stringified JSON back to a hash object
	 *	@see		$.parseJSON(), adding in jQuery 1.4.1
	 */
,	decodeJSON: function (str) {
		try { return $.parseJSON ? $.parseJSON(str) : window["eval"]("("+ str +")") || {}; }
		catch (e) { return {}; }
	}


,	_create: function (inst) {
		var s	= $.layout.state
		,	o	= inst.options
		,	sm	= o.stateManagement
		;
		//	ADD State-Management plugin methods to inst
		 $.extend( inst, {
		//	readCookie - update options from cookie - returns hash of cookie data
			readCookie:		function () { return s.readCookie(inst); }
		//	deleteCookie
		,	deleteCookie:	function () { s.deleteCookie(inst); }
		//	saveCookie - optionally pass keys-list and cookie-options (hash)
		,	saveCookie:		function (keys, cookieOpts) { return s.saveCookie(inst, keys, cookieOpts); }
		//	loadCookie - readCookie and use to loadState() - returns hash of cookie data
		,	loadCookie:		function () { return s.loadCookie(inst); }
		//	loadState - pass a hash of state to use to update options
		,	loadState:		function (stateData, opts) { s.loadState(inst, stateData, opts); }
		//	readState - returns hash of current layout-state
		,	readState:		function (keys) { return s.readState(inst, keys); }
		//	add JSON utility methods too...
		,	encodeJSON:		s.encodeJSON
		,	decodeJSON:		s.decodeJSON
		});

		// init state.stateData key, even if plugin is initially disabled
		inst.state.stateData = {};

		// autoLoad MUST BE one of: data-array, data-hash, callback-function, or TRUE
		if ( !sm.autoLoad ) return;

		//	When state-data exists in the autoLoad key USE IT,
		//	even if stateManagement.enabled == false
		if ($.isPlainObject( sm.autoLoad )) {
			if (!$.isEmptyObject( sm.autoLoad )) {
				inst.loadState( sm.autoLoad );
			}
		}
		else if ( sm.enabled ) {
			// update the options from cookie or callback
			// if options is a function, call it to get stateData
			if ($.isFunction( sm.autoLoad )) {
				var d = {};
				try {
					d = sm.autoLoad( inst, inst.state, inst.options, inst.options.name || '' ); // try to get data from fn
				} catch (e) {}
				if (d && $.isPlainObject( d ) && !$.isEmptyObject( d ))
					inst.loadState(d);
			}
			else // any other truthy value will trigger loadCookie
				inst.loadCookie();
		}
	}

,	_unload: function (inst) {
		var sm = inst.options.stateManagement;
		if (sm.enabled && sm.autoSave) {
			// if options is a function, call it to save the stateData
			if ($.isFunction( sm.autoSave )) {
				try {
					sm.autoSave( inst, inst.state, inst.options, inst.options.name || '' ); // try to get data from fn
				} catch (e) {}
			}
			else // any truthy value will trigger saveCookie
				inst.saveCookie();
		}
	}

};

// add state initialization method to Layout's onCreate array of functions
$.layout.onCreate.push( $.layout.state._create );
$.layout.onUnload.push( $.layout.state._unload );

})( jQuery );



/**
 * @preserve jquery.layout.buttons 1.0
 * $Date: 2011-07-16 08:00:00 (Sat, 16 July 2011) $
 *
 * Copyright (c) 2011 
 *   Kevin Dalman (http://allpro.net)
 *
 * Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 * and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
 *
 * @dependancies: UI Layout 1.3.0.rc30.1 or higher
 *
 * @support: http://groups.google.com/group/jquery-ui-layout
 *
 * Docs: [ to come ]
 * Tips: [ to come ]
 */
;(function ($) {

if (!$.layout) return;


// tell Layout that the state plugin is available
$.layout.plugins.buttons = true;

//	Add State-Management options to layout.defaults
$.layout.defaults.autoBindCustomButtons = false;
// Set stateManagement as a layout-option, NOT a pane-option
$.layout.optionsMap.layout.push("autoBindCustomButtons");

var lang = $.layout.language;

/*
 *	Button methods
 */
$.layout.buttons = {
	// set data used by multiple methods below
	config: {
		borderPanes:	"north,south,west,east"
	}

	/**
	* Searches for .ui-layout-button-xxx elements and auto-binds them as layout-buttons
	*
	* @see  _create()
	*/
,	init: function (inst) {
		var pre		= "ui-layout-button-"
		,	layout	= inst.options.name || ""
		,	name;
		$.each("toggle,open,close,pin,toggle-slide,open-slide".split(","), function (i, action) {
			$.each($.layout.buttons.config.borderPanes.split(","), function (ii, pane) {
				$("."+pre+action+"-"+pane).each(function(){
					// if button was previously 'bound', data.layoutName was set, but is blank if layout has no 'name'
					name = $(this).data("layoutName") || $(this).attr("layoutName");
					if (name == undefined || name === layout)
						inst.bindButton(this, action, pane);
				});
			});
		});
	}

	/**
	* Helper function to validate params received by addButton utilities
	*
	* Two classes are added to the element, based on the buttonClass...
	* The type of button is appended to create the 2nd className:
	*  - ui-layout-button-pin
	*  - ui-layout-pane-button-toggle
	*  - ui-layout-pane-button-open
	*  - ui-layout-pane-button-close
	*
	* @param  {(string|!Object)}	selector	jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param  {string}   			pane 		Name of the pane the button is for: 'north', 'south', etc.
	* @return {Array.<Object>}		If both params valid, the element matching 'selector' in a jQuery wrapper - otherwise returns null
	*/
,	get: function (inst, selector, pane, action) {
		var $E	= $(selector)
		,	o	= inst.options
		,	err	= o.showErrorMessages
		;
		if (!$E.length) { // element not found
			if (err) alert(lang.errButton + lang.selector +": "+ selector);
		}
		else if ($.layout.buttons.config.borderPanes.indexOf(pane) === -1) { // invalid 'pane' sepecified
			if (err) alert(lang.errButton + lang.pane +": "+ pane);
			$E = $("");  // NO BUTTON
		}
		else { // VALID
			var btn = o[pane].buttonClass +"-"+ action;
			$E	.addClass( btn +" "+ btn +"-"+ pane )
				.data("layoutName", o.name); // add layout identifier - even if blank!
		}
		return $E;
	}


	/**
	* NEW syntax for binding layout-buttons - will eventually replace addToggle, addOpen, etc.
	*
	* @param {(string|!Object)}	sel		jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param {string}			action
	* @param {string}			pane
	*/
,	bind: function (inst, sel, action, pane) {
		var _ = $.layout.buttons;
		switch (action.toLowerCase()) {
			case "toggle":			_.addToggle	(inst, sel, pane); break;	
			case "open":			_.addOpen	(inst, sel, pane); break;
			case "close":			_.addClose	(inst, sel, pane); break;
			case "pin":				_.addPin	(inst, sel, pane); break;
			case "toggle-slide":	_.addToggle	(inst, sel, pane, true); break;	
			case "open-slide":		_.addOpen	(inst, sel, pane, true); break;
		}
		return inst;
	}

	/**
	* Add a custom Toggler button for a pane
	*
	* @param {(string|!Object)}	selector	jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param {string}  			pane 		Name of the pane the button is for: 'north', 'south', etc.
	* @param {boolean=}			slide 		true = slide-open, false = pin-open
	*/
,	addToggle: function (inst, selector, pane, slide) {
		$.layout.buttons.get(inst, selector, pane, "toggle")
			.click(function(evt){
				inst.toggle(pane, !!slide);
				evt.stopPropagation();
			});
		return inst;
	}

	/**
	* Add a custom Open button for a pane
	*
	* @param {(string|!Object)}	selector	jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param {string}			pane 		Name of the pane the button is for: 'north', 'south', etc.
	* @param {boolean=}			slide 		true = slide-open, false = pin-open
	*/
,	addOpen: function (inst, selector, pane, slide) {
		$.layout.buttons.get(inst, selector, pane, "open")
			.attr("title", lang.Open)
			.click(function (evt) {
				inst.open(pane, !!slide);
				evt.stopPropagation();
			});
		return inst;
	}

	/**
	* Add a custom Close button for a pane
	*
	* @param {(string|!Object)}	selector	jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param {string}   		pane 		Name of the pane the button is for: 'north', 'south', etc.
	*/
,	addClose: function (inst, selector, pane) {
		$.layout.buttons.get(inst, selector, pane, "close")
			.attr("title", lang.Close)
			.click(function (evt) {
				inst.close(pane);
				evt.stopPropagation();
			});
		return inst;
	}

	/**
	* Add a custom Pin button for a pane
	*
	* Four classes are added to the element, based on the paneClass for the associated pane...
	* Assuming the default paneClass and the pin is 'up', these classes are added for a west-pane pin:
	*  - ui-layout-pane-pin
	*  - ui-layout-pane-west-pin
	*  - ui-layout-pane-pin-up
	*  - ui-layout-pane-west-pin-up
	*
	* @param {(string|!Object)}	selector	jQuery selector (or element) for button, eg: ".ui-layout-north .toggle-button"
	* @param {string}   		pane 		Name of the pane the pin is for: 'north', 'south', etc.
	*/
,	addPin: function (inst, selector, pane) {
		var $E = $.layout.buttons.get(inst, selector, pane, "pin");
		if ($E.length) {
			var s = inst.state[pane];
			$E.click(function (evt) {
				$.layout.buttons.setPinState(inst, $(this), pane, (s.isSliding || s.isClosed));
				if (s.isSliding || s.isClosed) inst.open( pane ); // change from sliding to open
				else inst.close( pane ); // slide-closed
				evt.stopPropagation();
			});
			// add up/down pin attributes and classes
			$.layout.buttons.setPinState(inst, $E, pane, (!s.isClosed && !s.isSliding));
			// add this pin to the pane data so we can 'sync it' automatically
			// PANE.pins key is an array so we can store multiple pins for each pane
			s.pins.push( selector ); // just save the selector string
		}
		return inst;
	}

	/**
	* Change the class of the pin button to make it look 'up' or 'down'
	*
	* @see  addPin(), syncPins()
	* @param {Array.<Object>}	$Pin	The pin-span element in a jQuery wrapper
	* @param {string}	pane	These are the params returned to callbacks by layout()
	* @param {boolean}	doPin	true = set the pin 'down', false = set it 'up'
	*/
,	setPinState: function (inst, $Pin, pane, doPin) {
		var updown = $Pin.attr("pin");
		if (updown && doPin === (updown=="down")) return; // already in correct state
		var
			pin		= inst.options[pane].buttonClass +"-pin"
		,	side	= pin +"-"+ pane
		,	UP		= pin +"-up "+	side +"-up"
		,	DN		= pin +"-down "+side +"-down"
		;
		$Pin
			.attr("pin", doPin ? "down" : "up") // logic
			.attr("title", doPin ? lang.Unpin : lang.Pin)
			.removeClass( doPin ? UP : DN ) 
			.addClass( doPin ? DN : UP ) 
		;
	}

	/**
	* INTERNAL function to sync 'pin buttons' when pane is opened or closed
	* Unpinned means the pane is 'sliding' - ie, over-top of the adjacent panes
	*
	* @see  open(), close()
	* @param {string}	pane   These are the params returned to callbacks by layout()
	* @param {boolean}	doPin  True means set the pin 'down', False means 'up'
	*/
,	syncPinBtns: function (inst, pane, doPin) {
		// REAL METHOD IS _INSIDE_ LAYOUT - THIS IS HERE JUST FOR REFERENCE
		$.each(state[pane].pins, function (i, selector) {
			$.layout.buttons.setPinState(inst, $(selector), pane, doPin);
		});
	}


,	_load: function (inst) {
		//	ADD Button methods to Layout Instance
		$.extend( inst, {
			bindButton:		function (selector, action, pane) { return $.layout.buttons.bind(inst, selector, action, pane); }
		//	DEPRECATED METHODS...
		,	addToggleBtn:	function (selector, pane, slide) { return $.layout.buttons.addToggle(inst, selector, pane, slide); }
		,	addOpenBtn:		function (selector, pane, slide) { return $.layout.buttons.addOpen(inst, selector, pane, slide); }
		,	addCloseBtn:	function (selector, pane) { return $.layout.buttons.addClose(inst, selector, pane); }
		,	addPinBtn:		function (selector, pane) { return $.layout.buttons.addPin(inst, selector, pane); }
		});

		// init state array to hold pin-buttons
		for (var i=0; i<4; i++) {
			var pane = $.layout.buttons.config.borderPanes[i];
			inst.state[pane].pins = [];
		}

		// auto-init buttons onLoad if option is enabled
		if ( inst.options.autoBindCustomButtons )
			$.layout.buttons.init(inst);
	}

,	_unload: function (inst) {
		// TODO: unbind all buttons???
	}

};

// add initialization method to Layout's onLoad array of functions
$.layout.onLoad.push(  $.layout.buttons._load );
//$.layout.onUnload.push( $.layout.buttons._unload );

})( jQuery );




/**
 * jquery.layout.browserZoom 1.0
 * $Date: 2011-12-29 08:00:00 (Thu, 29 Dec 2011) $
 *
 * Copyright (c) 2012 
 *   Kevin Dalman (http://allpro.net)
 *
 * Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 * and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
 *
 * @requires: UI Layout 1.3.0.rc30.1 or higher
 *
 * @see: http://groups.google.com/group/jquery-ui-layout
 *
 * TODO: Extend logic to handle other problematic zooming in browsers
 * TODO: Add hotkey/mousewheel bindings to _instantly_ respond to these zoom event
 */
(function ($) {

// tell Layout that the plugin is available
$.layout.plugins.browserZoom = true;

$.layout.defaults.browserZoomCheckInterval = 1000;
$.layout.optionsMap.layout.push("browserZoomCheckInterval");

/*
 *	browserZoom methods
 */
$.layout.browserZoom = {

	_init: function (inst) {
		// abort if browser does not need this check
		if ($.layout.browserZoom.ratio() !== false)
			$.layout.browserZoom._setTimer(inst);
	}

,	_setTimer: function (inst) {
		// abort if layout destroyed or browser does not need this check
		if (inst.destroyed) return;
		var o	= inst.options
		,	s	= inst.state
		//	don't need check if inst has parentLayout, but check occassionally in case parent destroyed!
		//	MINIMUM 100ms interval, for performance
		,	ms	= inst.hasParentLayout ?  5000 : Math.max( o.browserZoomCheckInterval, 100 )
		;
		// set the timer
		setTimeout(function(){
			if (inst.destroyed || !o.resizeWithWindow) return;
			var d = $.layout.browserZoom.ratio();
			if (d !== s.browserZoom) {
				s.browserZoom = d;
				inst.resizeAll();
			}
			// set a NEW timeout
			$.layout.browserZoom._setTimer(inst);
		}
		,	ms );
	}

,	ratio: function () {
		var w	= window
		,	s	= screen
		,	d	= document
		,	dE	= d.documentElement || d.body
		,	b	= $.layout.browser
		,	v	= b.version
		,	r, sW, cW
		;
		// we can ignore all browsers that fire window.resize event onZoom
		if (!b.msie || v > 8)
			return false; // don't need to track zoom
		if (s.deviceXDPI && s.systemXDPI) // syntax compiler hack
			return calc(s.deviceXDPI, s.systemXDPI);
		// everything below is just for future reference!
		if (b.webkit && (r = d.body.getBoundingClientRect))
			return calc((r.left - r.right), d.body.offsetWidth);
		if (b.webkit && (sW = w.outerWidth))
			return calc(sW, w.innerWidth);
		if ((sW = s.width) && (cW = dE.clientWidth))
			return calc(sW, cW);
		return false; // no match, so cannot - or don't need to - track zoom

		function calc (x,y) { return (parseInt(x,10) / parseInt(y,10) * 100).toFixed(); }
	}

};
// add initialization method to Layout's onLoad array of functions
$.layout.onReady.push( $.layout.browserZoom._init );


})( jQuery );




/**
 *	UI Layout Plugin: Slide-Offscreen Animation
 *
 *	Prevent panes from being 'hidden' so that an iframes/objects 
 *	does not reload/refresh when pane 'opens' again.
 *	This plug-in adds a new animation called "slideOffscreen".
 *	It is identical to the normal "slide" effect, but avoids hiding the element
 *
 *	Requires Layout 1.3.0.RC30.1 or later for Close offscreen
 *	Requires Layout 1.3.0.RC30.5 or later for Hide, initClosed & initHidden offscreen
 *
 *	Version:	1.1 - 2012-11-18
 *	Author:		Kevin Dalman (kevin@jquery-dev.com)
 *	@preserve	jquery.layout.slideOffscreen-1.1.js
 */
;(function ($) {

// Add a new "slideOffscreen" effect
if ($.effects) {

	// add an option so initClosed and initHidden will work
	$.layout.defaults.panes.useOffscreenClose = false; // user must enable when needed
	/* set the new animation as the default for all panes
	$.layout.defaults.panes.fxName = "slideOffscreen";
	*/

	if ($.layout.plugins)
		$.layout.plugins.effects.slideOffscreen = true;

	// dupe 'slide' effect defaults as new effect defaults
	$.layout.effects.slideOffscreen = $.extend(true, {}, $.layout.effects.slide);

	// add new effect to jQuery UI
	$.effects.slideOffscreen = function(o) {
		return this.queue(function(){

			var fx		= $.effects
			,	opt		= o.options
			,	$el		= $(this)
			,	pane	= $el.data('layoutEdge')
			,	state	= $el.data('parentLayout').state
			,	dist	= state[pane].size
			,	s		= this.style
			,	props	= ['top','bottom','left','right']
				// Set options
			,	mode	= fx.setMode($el, opt.mode || 'show') // Set Mode
			,	show	= (mode == 'show')
			,	dir		= opt.direction || 'left' // Default Direction
			,	ref	 	= (dir == 'up' || dir == 'down') ? 'top' : 'left'
			,	pos		= (dir == 'up' || dir == 'left')
			,	offscrn	= $.layout.config.offscreenCSS || {}
			,	keyLR	= $.layout.config.offscreenReset
			,	keyTB	= 'offscreenResetTop' // only used internally
			,	animation = {}
			;
			// Animation settings
			animation[ref]	= (show ? (pos ? '+=' : '-=') : (pos ? '-=' : '+=')) + dist;

			if (show) { // show() animation, so save top/bottom but retain left/right set when 'hidden'
				$el.data(keyTB, { top: s.top, bottom: s.bottom });

				// set the top or left offset in preparation for animation
				// Note: ALL animations work by shifting the top or left edges
				if (pos) { // top (north) or left (west)
					$el.css(ref, isNaN(dist) ? "-" + dist : -dist); // Shift outside the left/top edge
				}
				else { // bottom (south) or right (east) - shift all the way across container
					if (dir === 'right')
						$el.css({ left: state.container.layoutWidth, right: 'auto' });
					else // dir === bottom
						$el.css({ top: state.container.layoutHeight, bottom: 'auto' });
				}
				// restore the left/right setting if is a top/bottom animation
				if (ref === 'top')
					$el.css( $el.data( keyLR ) || {} );
			}
			else { // hide() animation, so save ALL CSS
				$el.data(keyTB, { top: s.top, bottom: s.bottom });
				$el.data(keyLR, { left: s.left, right: s.right });
			}

			// Animate
			$el.show().animate(animation, { queue: false, duration: o.duration, easing: opt.easing, complete: function(){
				// Restore top/bottom
				if ($el.data( keyTB ))
					$el.css($el.data( keyTB )).removeData( keyTB );
				if (show) // Restore left/right too
					$el.css($el.data( keyLR ) || {}).removeData( keyLR );
				else // Move the pane off-screen (left: -99999, right: 'auto')
					$el.css( offscrn );

				if (o.callback) o.callback.apply(this, arguments); // Callback
				$el.dequeue();
			}});

		});
	};

}

})( jQuery );

//End ------ jquery.layout-latest.js

// JET implementation for IFrame.
// Uses cross-document messaging to contact server part at host (IFrameProxy.js).
// The server parts forwards events and calls to the host JET.
// XDM is async so we can't support any sync JET operations with it.
// The following syncronious JET functions are not supported:
// hasFocus
// getPasteData
// getProperties
// getSavedState
// getUserInfo
// isActive

if (!("JET" in window)) {
    JET = (function () {
        var api = {};
        var iframeID;
        var beforeStartHandlers = [];

        // JET utilities. Not a complete implementation.
        // Using new JS function which are not supported in IE is fine here because we don't support IE for this module.
        var utils = {
            each: function (array, callback) { array.forEach(callback); },
            toJson: JSON.stringify
        };

        // Logging
        // The logging is not forwarded to the host. The implementation is same as for JET.js
        api.loggingOptions = function (logLevel, logger) {
            if (logger == undefined) {
                logger = window.console;
            }

            if (!logger) {
                logLevel = 10; //disable logging if there is no logger defined
            }
            var noLog = function () { };

            // Standard console doesn't have a trace log level, by the external logger should have it
            var traceFunction, debugFunction;
            if (logger) {
                if (logger == window.console) {
                    traceFunction = "log"; // No browsers has console.trace funtion. IE doesn't has console.debug function.
                    debugFunction = "log";
                } else {
                    traceFunction = "trace";
                    debugFunction = "debug";
                }
            } else {
                logLevel = 10; //disable logging if there is no logger defined			
            }

            function wrapLogCall(methodName) {
                return function () {
                    var params = Array.prototype.slice.call(arguments);
                    for (var n = 0; n < params.length; n++) {
                        if (typeof (params[n]) == "function") {
                            params[n] = params[n]();
                        }

                        if (typeof (params[n]) == "object") {
                            params[n] = utils.toJson(params[n]);
                        }
                    }
                    Function.prototype.apply.call(logger[methodName], logger, params);
                }
            }

            utils.trace = logLevel <= 0 ? wrapLogCall(traceFunction) : noLog;
            utils.debug = logLevel <= 1 ? wrapLogCall(debugFunction) : noLog;
            utils.info = logLevel <= 2 ? wrapLogCall("info") : noLog;
            utils.warn = logLevel <= 3 ? wrapLogCall("warn") : noLog;
            utils.error = logLevel <= 4 ? wrapLogCall("error") : noLog;
        }

        api.loggingOptions(3); // Log warnings and higher by default

        // Initialization and XDM message dispatching

        api.Initialized = false;
        api.Loaded = false;
        api.ContainerType = "Async";
        var initQueue = []; // A list of onLoad subscriptions to be called after initialization is done

        // XDM messages handler
        function onMessage(msg) {
            utils.trace("XDM Received Host >>> IFrame: ", msg.data);
            var data = JSON.parse(msg.data);

            switch (data.a) {
                case "onLoad":
                    api.ContainerDescription = data.cd;
                    iframeID = data.frameID;
                    api.Loaded = true;
                    initQueue.forEach(function (item) { item(); });
                    initQueue = [];
                    break;
                case "s":
                    handleSubscriptionCallback(data);
                    break;
                case "e":
                    handleEvent(data);
                    break;
            }
        }

        window.addEventListener('message', onMessage, false);

        function send(data) {
            var msg = JSON.stringify(data);
            utils.trace("XDM Sending  Host <<< IFrame: ", msg)
            window.parent.postMessage(msg, "*");
        }

        // Initialization and deinitialization

        api.init = function (initObj) {
            beforeStartHandlers.forEach(function (h) { h(); });
            send({ a: "init" });
            api.Initialized = true;
        }

        api.onBeforeStart = function (handler) {
            beforeStartHandlers.push(handler);
        }

        api.onLoad = function (callback) {
            if (api.Loaded) {
                callback();
            } else {
                initQueue.push(callback);
            }
        }

        api.unload = function () {
            send({ a: "unload", frameID: iframeID });
        }

        api.onUnload = function (callback) {
            window.addEventListener('unload', callback, false);
        }

        api.onUnload(function () {
            api.unload();
        })

        // Event subscriptions

        // When client subsribes an event, an EventID is generated.
        // The event name and id is passed to the host, which performs subscription
        // When event is fired at the host, it send a message with event ID and event data
        // IFrame proxy finds handler by the event ID and calls it.

        var lastEventID = 0;
        var events = {}; // EventID -> Handler mapping.

        var eventNames = ["onActivate", "onDeactivate", "onContextChange", "onSendObject",
            "onPropertyChange", "onCommand", "onPaste", ];

        eventNames.forEach(function (eventName) {
            api[eventName] = function (handler) {
                var eventID = lastEventID;
                lastEventID++;

                events[eventID] = handler;

                send({ a: "sub", ename: eventName, eid: eventID });

                return {
                    unsubscribe: function () {
                        send({ a: "unsub", eid: eventID })
                        delete events[eventID];
                    }
                }
            }
        })

        function handleEvent(data) {
            if (events[data.eid]) {
                utils.trace("IFrame event", data.eid, data.ename, data.d)
                events[data.eid](data.d);
            } else {
                utils.trace("IFrame event ignored (already unsubscribed)", data.eid, data.ename, data.d);
            }
        }

        // JET Functions 

        // JET function calls are forwarded in a straightforward way:
        // We just send a "call" message to the host along with function name and parameters.
        // The host will call required function when receive the message.

        var functions = [
            "publish", "click", "contextChange", "contextMenu", "copy", "copyToClipboard",
            "critical", "debug", "flash", "hide", "high", "information",
            "log", "show", "toast", "warning", "navigate", "dragStart"
        ];

        functions.forEach(function (name) {
            api[name] = function () {
                send({ a: "call", m: name, args: JSON.stringify(Array.prototype.slice.apply(arguments)) });
            }
        })


        // Channel subscriptions and publishing 

        // When client subscribes for a channel, we check if IFrame proxy already subscribed for the channel.
        // If so - we just add a new handler to an existing subscription.
        // If not - we send "subCh" message with channel name. 
        // The host will subscribe specified channel and will send messages with a:"s" when new data is posted to 
        // channel. IFrame.js can then find all handlers by the channel name and call them.
        // The subID is required to distinguish handlers on unsubscribing.

        var subscriptions = {}; // ChannelName -> { subscriptionID -> handler } mapping.
        var lastSubID = 0;
        api.subscribe = function (channel, handler) {
            var subID = lastSubID;
            lastSubID++;

            if (!subscriptions[channel]) {
                subscriptions[channel] = {};
                send({ a: "subCh", ch: channel });
            }

            subscriptions[channel][subID] = handler;

            return {
                unsubscribe: function () {
                    if (subscriptions[channel] && subscriptions[channel][subID]) {
                        delete subscriptions[channel][subID];

                        if (Object.keys(subscriptions[channel]).length == 0) {
                            send({ a: "unsubCh", ch: channel });
                        }
                    }
                }
            }
        }

        function handleSubscriptionCallback(data) {
            Object.keys(subscriptions[data.ch]).forEach(function (subID) {
                subscriptions[data.ch][subID](data.d);
            });
        }

        api.unsubscribeAll = function () {
            Object.keys(subscriptions).forEach(function (channel) {
                send({ a: "unsubCh", ch: channel });
                subscriptions[channel] = {};
            })
        }


        // Other functions

        api.extend = function (ver, name, plugin) {
            api[name] = plugin(utils);
        }

        return api;
    })();
} else {
    console.warn("Failed to initialize JET IFrame proxy: another JET instance already registered.")
}

//=====================================================================================================
function Grid(gridId, props) {
    var data = props.data, columns = props.columns, options = props.options, events = props.events, autoResize = props.autoResize === false ? false : true;
    var heightCorrection = 20;
    var gridContainer = $(gridId);
    var dataView;
    if (props.groupMetadataProvider === undefined) {
        dataView = new Slick.Data.DataView({ inlineFilters: true });
        (function () {
                var rowIndex = 0;
                dataView.getItemMetadata = function (row) {
                //    return { "columns": { 0: { 'colspan': '*' } } };
                var item = this.getItem(row);
                rowIndex = row;
                if (item === undefined || item.status === undefined) {
                    return;
                }
                var meta = {};
                if (item.status === statStatusEnum.Critical) {
                    meta.cssClasses = ' status-critical';
                    return meta;
                }
                else if (item.status === statStatusEnum.Warning) {
                    meta.cssClasses = ' status-warning';
                    return meta;
                }
            };
            options.dataItemColumnValueExtractor = function (dataItem, column) {
                var field = column.field;
                if (field == "number") {
                    return rowIndex + 1;
                }
                return dataItem[column.field];
            };
        })();
    }
    else {
        dataView = new Slick.Data.DataView({ groupItemMetadataProvider: props.groupMetadataProvider, inlineFilters: true });
    }

    //var activeRowBeforeSort;

    var gridObj = new Slick.Grid(gridId, dataView, columns, options);
    gridObj.setSelectionModel(new Slick.RowSelectionModel());
    gridObj.registerPlugin(new Slick.AutoTooltips());
    if (props.groupMetadataProvider !== undefined) {
        gridObj.registerPlugin(props.groupMetadataProvider);
    }

    attachHandlers();
    resize();
    resize();
    setData(data);

    $(window).resize(resize);

    var sortcol = "";

    function comparer(a, b) {
        if (gridId === '#gridStatRawData' || gridId === '#gridStatUserList') {
            var x = a[sortcol], y = b[sortcol];
            if (typeof x !== 'number' && typeof y !== 'number') {
                x = x.toString().toUpperCase().trim();
                y = y.toString().toUpperCase().trim();
            }
            if (x > y) {
                return 1;
            }
            else if (x < y) {
                return -1;
            }
            else {
                var nextSortedCol = (sortcol != 'value') ? 'value':'date';

                if (gridId === '#gridStatUserList' && sortcol != 'date') {
                    nextSortedCol = 'fail';
                }

                var i = a[nextSortedCol], j = b[nextSortedCol];
                if (typeof i === 'number' && typeof j === 'number') {
                    return (i == j ? 0 : (i > j ? 1 : -1));
                }
                else {
                    x = i;
                    y = j;
                }
            }
        }
        else if (gridId === '#gridStatList') {
            var x = a[sortcol], y = b[sortcol];
            x = a['category'] + x;
            y = b['category'] + y;
        }
        else if (gridId === '#gridLocationStatDetail' || gridId === '#gridCriticalUsers') {
            var aVal = statStatusEnumWeightMapping[a['status']];
            var bVal = statStatusEnumWeightMapping[b['status']];
            aVal = (aVal !== undefined) ? aVal : 0;
            bVal = (bVal !== undefined) ? bVal : 0;
            if (aVal > bVal) {
                return 1;
            }
            else if (aVal < bVal) {
                return -1;
            }
            else {
                if (a['statCode'] > b['statCode']) {
                    return -1;
                }
                else if (a['statCode'] < b['statCode']) {
                    return 1;
                }
                else {
                    return 0;
                }
            }
        }

        var X = x.toString().toUpperCase().trim(), Y = y.toString().toUpperCase().trim();
        return (X == Y ? 0 : (X > Y ? 1 : -1));
    }

    function attachHandlers() {
        dataView.onRowsChanged.subscribe(function (e, args) {
            gridObj.invalidateRows(args.rows);
            gridObj.render();
        });

        gridObj.onSort.subscribe(function (e, args) {
            // update|memoize grid sorting data
            gridSortDirections[gridId] = args.sortAsc;
            gridSortIds[gridId] = args.sortCol.id;
            gridSortFields[gridId] = args.sortCol.field;

            //try {
            //    activeRowBeforeSort = gridObj.getDataItem(gridObj.getActiveCell().row);
            //} catch (e) {

            //    window.console.log(e.message);
            //}

            sortcol = args.sortCol.field;

            if ($.browser.msie && $.browser.version <= 8) {
                var percentCompleteValueFn = function () {
                    var val = this["percentComplete"];
                    if (val < 10) {
                        return "00" + val;
                    } else if (val < 100) {
                        return "0" + val;
                    } else {
                        return val;
                    }
                };

                // use numeric sort of % and lexicographic for everything else
                dataView.fastSort((sortcol == "percentComplete") ? percentCompleteValueFn : sortcol, gridSortDirections[gridId]);
            } else {
                // using native sort with comparer
                // preferred method but can be very slow in IE with huge datasets
                dataView.sort(comparer, gridSortDirections[gridId]);
            }

            //todo: fix selection after sort:
            fixRowSelection();
        });

        if (events == null) return;

        if (events.onclick) {
            gridObj.onClick.subscribe(function (e, args) {
                args.rowData = dataView.getItem(args.row);
                args.column = columns[args.cell];
                events.onclick(e, args);
            });
        }
        if (events.onContextMenu) {
            gridObj.onContextMenu.subscribe(events.onContextMenu);
        }
    }

    function fixRowSelection() {
        var length = gridObj.getDataLength();
        var rowId = '';
        var defaultRow = 0;
        switch (gridId) {
            case '#gridStatList':
                if (length < 1) {
                    return;
                }
                rowId = currentSelectedGridRow.statListGridRow;
                if (rowId == undefined) {
                    defaultRow = 1;
                    gridObj.setActiveCell(defaultRow, 0);
                    OnClickStatListGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(defaultRow) });
                    return;
                }
                else {
                    var rowIdx = gridObj.getViewIndexByID(currentSelectedGridRow.statListGridRow);                    
                    gridObj.setActiveCell(rowIdx, 0);
                    OnClickStatListGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(rowIdx) });
                    return;
                }
                break;
            case '#gridStatUserList':
                if (length < 1) {
                    return;
                }
                var rowId = currentSelectedGridRow.statUserGridRow;
                if (rowId == undefined) {
                    defaultRow = 0;
                    gridObj.setActiveCell(defaultRow, 0);
                    OnClickStatUserGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(defaultRow) });
                    return;
                }
                else {
                    var rowIdx = gridObj.getIndexByTestID(currentSelectedGridRow.statUserGridRow);
                    gridObj.setActiveCell(rowIdx, 0);
                    if (!statDetailLoaded)
                    {
                        OnClickStatUserGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(rowIdx) });
                    }
                    return;
                }
                break;
            case '#gridLocationStat':
                //comment the check below to let the header of location stat detail grid to display
                //after the first load of the empty location stats. Otherwise it will not be shown and
                // then it will be shown after the first page refresh interval
                //if (length < 1) {
                //    return;
                //}
                rowId = currentSelectedLocationId;
                if (rowId == undefined) {
                    defaultRow = 0;
                    gridObj.setActiveCell(defaultRow, 0);
                    OnClickStatLocationGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(defaultRow) });
                    return;
                }
                break;
            case '#gridLocationStatDetail':
                rowId = currentSelectedLocationStat;
                if (rowId == undefined) {
                    defaultRow = 0;
                    gridObj.setActiveCell(defaultRow, 0);
                    OnClickStatLocationDetailGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(defaultRow) });
                    return;
                }
                break;
            case '#gridCriticalUsers':
                rowId = currentSelectedCriticalUser;
                if (rowId == undefined) {
                    //defaultRow = 0;
                    //OnClickStatLocationDetailGrid(null, { grid: gridObj, rowData: gridObj.getDataItem(defaultRow) });
                    //gridObj.setActiveCell(defaultRow, 0);
                    return;
                }
                break;
            case '#gridStatRawData':
                if (length < 1) {
                    return;
                }
                rowId = currentSelectedGridRow.statRawDataGridRow;
                if (rowId == undefined) {
                    return;
                }
                break;
            default:
                rowId = '';
                break;
        }

        var idx;
        for (idx = 0; idx < length; ++idx) {
            var row = gridObj.getDataItem(idx);
            if (rowId === row.id) {
                break;
            }
        }

        // it is found
        if (idx < length) {
            gridObj.setActiveCell(idx, 0);
            gridObj.scrollRowIntoView(idx);
        }
    }

    function setData(data) {
        dataView.beginUpdate();
        dataView.setItems(data);
        dataView.endUpdate();
        dataView.syncGridSelection(gridObj, true);
        gridObj.updateRowCount();
        gridObj.resizeCanvas();
    }

    heightCorrection = 20;
    function resize() {
        if (autoResize) {
            var position = gridContainer.position();
            var height = $(window).height() - position.top - heightCorrection;
            gridContainer.height(height);
        }
        gridObj.resizeCanvas();
    }

    function getGridObj() {
        return gridObj;
    }

    function getDataView() {
        return dataView;
    }

    function sort(field, ascending) {
        sortcol = field;
        dataView.sort(comparer, ascending);
    }

    function cleanSort(field, ascending) {
        sortcol = field;
        dataView.sort(comparer, ascending);
    }

    function setColumns(columns) {
        gridObj.setColumns(columns);
    }

    function updateRow(row) {
        gridObj.updateRow(row);
    }

    function getContainer() { return gridId; }

    this.getDataView = getDataView;
    this.getGridObj = getGridObj;
    this.setData = setData;
    this.setColumns = setColumns;
    this.resize = resize;
    this.sort = sort;
    this.updateRow = updateRow;
    this.cleanSort = cleanSort;
    this.fixRowSelection = fixRowSelection;

    // Recover ID associated with a grid
    this.getContainer = getContainer;
    gridObj.getContainer = this.getContainer;
}

function showEnvironment() {
    $("#spanDataEnv").text(getAppEnvironment());
    spanDataEnv.style.display = "";
}

function getAppEnvironment() {
    var hostName = window.location.hostname;
    if (hostName.toLowerCase().search("localhost") > -1) {
        return "local";
    }
    else if (hostName.toLowerCase().search("dcp1.mpp.reuters.com") > -1) {
        return "dev";
    }
    else if (hostName.toLowerCase().search("icp2.mpp.reutest.com") > -1) {
        return "alpha";
    }
    else if (hostName.toLowerCase().search("reutest.com") > -1) {
        return "beta";
    }
    else {
        return "prod";
    }
}

function CreateGetLocationStatDumpRequestObj(locationID) {
    return {
        locationid: locationID,
        product: "est",
        getStatList: ["128", "130", "7", "CMPNAME", "127SR", "127HF", "127EDM", "127UA"]
    };
}

function getOpsConsoleVersion() {
    // Get Varsion from src of the main iframe
    var src;
    if (window.frameElement == undefined) {
        src = document.URL;
    }
    else {
        src = window.frameElement.getAttribute('src');
    }
    var patt = new RegExp("\\b\\d+[.]\\d+[.]*\\d*");
    var result = patt.exec(src);
    if (result == null)
        return null;
    else
        return result[0];
}

var statDetailLoaded = false;
var hasPermissionToUploadMetadata = false;
var hasPermissionToGetStats = false;
var hasPermissionInCurrentUser = false;
var isInternal = false;
var currentQueryStringParam;
function getUserPermissions() {
    var selectProduct = 'est';
    var searchUuid = getQueryParams().uuid;
    if (typeof uiControlData !== "undefined"){
         selectProduct = uiControlData.selectProduct;
    }
    if (typeof uiFilter !== "undefined") {
         selectProduct = uiFilter.selectProduct;
    }
    
    $.ajax({
        dataType: "json",
        type: "POST",
        data: JSON.stringify({ product: selectProduct, uuid: searchUuid }),
        url: '/Apps/STOpsConsole/GetUserPermissions',
        beforeSend: function (xhr) {
            hasPermissionToUploadMetadata = false;
            hasPermissionToGetStats = false;
            hasPermissionInCurrentUser = false;
            isInternal = false;
            $('#pageLoadingStatus').text('');
            $('#pageLoadingStatus').append('Loading...');
        },
        success: function (data) {
            hasPermissionToUploadMetadata = data.isAllowToUploadMetadata;
            hasPermissionToGetStats = data.isAllowToGetStats;
            hasPermissionInCurrentUser = data.isUserInScope;
            isInternal = data.isInternal;
            if (!hasPermissionToGetStats || !hasPermissionInCurrentUser) {
                $('#pageLoadingStatus').text('');
                $('#pageLoadingStatus').append('No Permission');
            }
            else {
                $('#pageLoadingStatus').hide();
                $('#entirePage').show();
                currentQueryStringParam = getQueryParams();
                OnDocumentReady();
            }
        },
        error: function (jqXhr, status, error) {
            hasPermissionToUploadMetadata = false;
            hasPermissionToGetStats = false;
            $('#pageLoadingStatus').text('');
            $('#pageLoadingStatus').append('Failed to get permission');
        },
        contentType: "application/json"
    });
}

function isAllowToUploadMetadata() {
    return hasPermissionToUploadMetadata;
}

function isInternalUser() {
    return isInternal;
}

function getQueryParams() {
    var splitArr = parent.document.URL.split('?');
    if (splitArr.length >= 2) {
        var qs = parent.document.URL.split('?')[1].replace(/\+/g, " ");

        var params = {}, tokens,
            re = /[?&]?([^=]+)=([^&]*)/g;

        while (tokens = re.exec(qs)) {
            params[decodeURIComponent(tokens[1])]
                = decodeURIComponent(tokens[2]);
        }

        return params;
    }
    else {
        return {};
    }
}

var statDataType = { Text: 0, Integer: 1, Float: 2, Boolean: 3, Iso8601Duration: 4 };
function ConvertToStatDataTypeEnum(rawDataType) {
    switch (rawDataType) {
        case "short":
        case "byte":
        case "int":
        case "long":
            return statDataType.Integer;
        case "float":
            return statDataType.Float;
        case "boolean":
            return statDataType.Boolean;
        case "Iso8601Duration":
            return statDataType.Iso8601Duration;
        case "text":
            return statDataType.Text;
        default:
            return statDataType.Text;
    }
}

function createStatMetadataRecord(statCode, dataType, rawDataType, unit, desc, interval, enabled) {
    return {
        statCode: statCode,
        dataType: dataType,
        rawDataType: rawDataType,
        unit: unit,
        desc: desc,
        interval: interval,
        enabled: enabled

    };
}

function createStatMetadata(rawStatMetadata) {
    var statMetadata = [];
    if (rawStatMetadata.testschema !== undefined &&
        rawStatMetadata.testschema.length !== undefined) {
        // Assign dataType and unit from metadata to currentStatDetail.
        // nameextensionas from the metadata is also taken into account.
        for (var i = 0; i < rawStatMetadata.testschema.length; ++i) {
            if (rawStatMetadata.testschema[i].allownameextension === "true" &&
                rawStatMetadata.testschema[i].nameextensionas !== undefined &&
                rawStatMetadata.testschema[i].name !== undefined &&
                rawStatMetadata.enumdict !== undefined &&
                rawStatMetadata.enumdict.length !== undefined) {
                for (var j = 0; j < rawStatMetadata.enumdict.length; ++j) {
                    if (rawStatMetadata.enumdict[j].name === rawStatMetadata.testschema[i].nameextensionas) {
                        if (rawStatMetadata.enumdict[j].map !== undefined && rawStatMetadata.enumdict[j].map.length !== undefined) {
                            for (var k = 0; k < rawStatMetadata.enumdict[j].map.length; ++k) {
                                var statNameExtension = rawStatMetadata.testschema[i].name + rawStatMetadata.enumdict[j].map[k].value;
                                var desc;
                                if (rawStatMetadata.enumdict[j].map[k].id !== undefined || rawStatMetadata.enumdict[j].map[k].id !== '') {
                                    desc = rawStatMetadata.enumdict[j].map[k].id + ' - ' + rawStatMetadata.testschema[i].desc;
                                }
                                else {
                                    desc = rawStatMetadata.testschema[i].desc;
                                }
                                statMetadata[statNameExtension] = createStatMetadataRecord(statNameExtension,
                                                                                           ConvertToStatDataTypeEnum(rawStatMetadata.testschema[i].type),
                                                                                           rawStatMetadata.testschema[i].type,
                                                                                           rawStatMetadata.testschema[i].unit,
                                                                                           desc,
                                                                                           rawStatMetadata.testschema[i].interval,
                                                                                           rawStatMetadata.testschema[i].enabled);
                            }
                        }
                    }
                }
            }
            else if (rawStatMetadata.testschema[i].name !== undefined) {
                statMetadata[rawStatMetadata.testschema[i].name] = createStatMetadataRecord(rawStatMetadata.testschema[i].name,
                                                                                            ConvertToStatDataTypeEnum(rawStatMetadata.testschema[i].type),
                                                                                            rawStatMetadata.testschema[i].type,
                                                                                            rawStatMetadata.testschema[i].unit,
                                                                                            rawStatMetadata.testschema[i].desc,
                                                                                            rawStatMetadata.testschema[i].interval,
                                                                                            rawStatMetadata.testschema[i].enabled);
            }
        }
    }
    return statMetadata;
}

var unitCatEnum = { None: "none", Storage: "storage", Bandwidth: "banwidth", Time: "time", Frequency: "frq" };
var unitString_ms = "ms";
var unitString_us = "\u03BCs";
var unitString_ns = "ns";
var unitString = initUnitString();
// use \u03BCs as 'μs'
function initUnitString() {
    var unitStr = {};
    unitStr[unitCatEnum.None] = [];
    unitStr[unitCatEnum.Storage] = ["Byte", "KB", "MB", "GB", "TB"];
    unitStr[unitCatEnum.Bandwidth] = ["bps", "Kbps", "Mbps", "Gbps"];
    unitStr[unitCatEnum.Time] = [unitString_ns, unitString_us, unitString_ms, "sec", "min", "h", "d"];
    unitStr[unitCatEnum.Frequency] = ["Hz", "KHz", "MHz", "GHz"];
    return unitStr;
}

function getUnitString() {
    return unitString;
}

function getDivider(currentCat, currentStep) {
    switch (currentCat) {
        case unitCatEnum.None:
            return 1;
        case unitCatEnum.Storage:
            return 1024;
        case unitCatEnum.Bandwidth:
        case unitCatEnum.Frequency:
            return 1000;
        case unitCatEnum.Time:
            return (getUnitString()[currentCat][currentStep] === "sec" || getUnitString()[currentCat][currentStep] === "min") ? 60 : 1000;
        default:
            return 1;
    }
}

// return {step, cat}
function determineUnitCategory(unit) {
    var unitStr = getUnitString();
    for (var cat in unitStr) {
        var step = unitStr[cat].indexOf(unit);
        if (step != -1) {
            return { step: step, cat: cat };
        }
    }
    return { step: -1, cat: unitCatEnum.None };
}


function toLargerUnit(value, unit, stepsLarger) {
    var unitStr = getUnitString();
    var cat = determineUnitCategory(unit);
    var unitStep = cat.step;
    var unitCat = cat.cat;

    var targetStep = unitStep + stepsLarger;

    if (targetStep < unitStr[unitCat].length && unitCat !== unitCatEnum.None) {
        var divider = 1;
        for (var i = 0; i < stepsLarger; ++i) {
            divider *= getDivider(unitCat, unitStep);
            ++unitStep;
        }

        return { result: true, value: value / divider, unit: unitStr[unitCat][targetStep] };
    }
        // the current unit is the max unit or it is unitCatEnum.None
    else {
        return { result: false, value: value, unit: unit };
    }
}

function convertNumberToLargerUnit(value, unit) {
    var val = toLargerUnit(value, unit, 1);
    var stepsToConvert = 0;
    while (val.result === true && val.value >= 1) {
        ++stepsToConvert;
        val = toLargerUnit(val.value, val.unit, 1);
    }
    return toLargerUnit(value, unit, stepsToConvert);
}

function numberWithCommas(x) {
    var parts = x.toString().split(".");
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    return parts.join(".");
}

function getProductCode(x) {
    return "est";
}

function getProductName(x) {
    return "Eikon System Test"
}

function updateBrowserHistory() {
    var filterParam = "";
    if (currentQueryStringParam.filter !== undefined) {
        filterParam = "&filter=" + currentQueryStringParam.filter;
    }
    var userParam = "uuid=" + currentQueryStringParam.uuid;
    var productParam = "&product=" + currentQueryStringParam.product;    
    var testIDParam = "&testID=" + currentQueryStringParam.testID;
    var stat = "&statCode=" + currentQueryStringParam.statCode;

    var queryParam = userParam + filterParam + productParam + testIDParam + stat;
    var urlPath = parent.window.location.origin + parent.window.location.pathname + "?" + queryParam;
    parent.history.replaceState(currentQueryStringParam, 'STOpsConsole', urlPath);
}

function updateURLParam(ui) {
    var splitArr = parent.document.URL.split('?');
    if (splitArr.length >= 1) {
        var filterParam = "";
        if (currentQueryStringParam.filter !== undefined) {
            filterParam = "&filter=" + currentQueryStringParam.filter;
        }

        var productParam = "";
        productParam = "&product=" + uiFilter.selectProduct;

        /*var installParam = "";
        if (ui.item.machGuid !== undefined && ui.item.instGuid !== undefined && ui.item.uuid !== undefined) {
            installParam = "mid=" + ui.item.machGuid + "&iid=" + ui.item.instGuid + "&uuid=" + ui.item.uuid;
        }*/

        var userParam = "";
        if (ui.item.uuid !== undefined) {
            userParam = "uuid=" + ui.item.uuid;
        }

        var queryParam = userParam + filterParam + productParam;
        if (queryParam != "") {
            var newurl = splitArr[0] + "?" + queryParam;
            parent.window.location.href = newurl;
        }
    }
}

function sendWebRequest(method, param, beforeSendCallback, successCallback, errorCallback) {
    $.ajax({
        dataType: "json",
        type: "POST",
        data: param,
        url: urlWithAppendToPath(method),
        beforeSend: beforeSendCallback,
        success: successCallback,
        error: errorCallback,
        contentType: "application/json"
    });
}
